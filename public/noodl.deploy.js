/*! For license information please see noodl.deploy.js.LICENSE.txt */
(()=>{var __webpack_modules__={6291:(e,t,n)=>{"use strict";var i=n(9288),o=n(554),r=n(3286),s=n(6911),a=n(9520),l=n(2236),u=n(5917),c=n(9129),p=n(4047),d=n(1734);const h=n(1489),f=n(2665);function g(e){if((e=e||{}).platform=e.platform||{},g.instance=this,this.type=e.type||"browser",this.noodlModules=[],this.eventEmitter=new h,this.updateScheduled=!1,this.rootComponent=null,this._currentLoadedData=null,this.isWaitingForExport=!0,this.graphModel=new a,this.errorHandlers=[],this.frameNumber=0,this.dontCreateRootComponent=!!e.dontCreateRootComponent,this.componentFilter=e.componentFilter,this.runningInEditor=!e.runDeployed,this.platform={requestUpdate:e.platform.requestUpdate,getCurrentTime:e.platform.getCurrentTime,webSocketOptions:e.platform.webSocketOptions,objectToString:e.platform.objectToString},!e.platform.requestUpdate)throw new Error("platform.requestUpdate must be set");if(!e.platform.getCurrentTime)throw new Error("platform.getCurrentTime must be set");var t;this.editorConnection=new o({platform:e.platform,runtimeType:this.type}),this.context=new i({runningInEditor:!e.runDeployed,editorConnection:this.editorConnection,platform:this.platform,graphModel:this.graphModel}),this.context.eventEmitter.on("scheduleUpdate",this.scheduleUpdate.bind(this)),e.runDeployed||this._setupEditorCommunication(e),this.registerGraphModelListeners(),t=this,[n(1318),n(4204),n(2658),n(2287),n(6290),n(7070),n(5833),n(7512),n(9463),n(9357),n(4293),n(8814),n(4253),n(4337),n(670),n(220),n(8222),n(7865),n(556),n(9345),n(2610),n(9125),n(2869),n(7504),n(1048),n(2897),n(6256),n(4087),n(7383),n(546),n(6325),n(3087),n(6788),n(7822),n(9259)].forEach((e=>t.registerNode(e)))}g.prototype.prefetchBundles=async function(e,t){await f(t,e,(async e=>{await this.context.fetchComponentBundle(e)}))},g.prototype._setupEditorCommunication=function(e){function t(e,n){if(null==e||null==n)return e===n;if(e===n)return!0;if(Array.isArray(e)&&e.length!==n.length)return!1;if(!(e instanceof Object))return!1;if(!(n instanceof Object))return!1;var i=Object.keys(e);return Object.keys(n).every((function(e){return-1!==i.indexOf(e)}))&&i.every((function(i){return t(e[i],n[i])}))}this.editorConnection.on("exportDataFull",(async e=>{if(!1!==this.graphModel.isEmpty()){if(this.isWaitingForExport=!1,!1===t(this._currentLoadedData,e)){if(this.componentFilter&&(e.components=e.components.filter((e=>this.componentFilter(e)))),await this.setData(e),e.componentIndex){const t=Object.keys(e.componentIndex);await this.prefetchBundles(t,2)}this.graphModel.emit("editorImportComplete")}}else this.reload()})),this.editorConnection.on("reload",this.reload.bind(this)),this.editorConnection.on("modelUpdate",this.onModelUpdateReceived.bind(this)),this.editorConnection.on("metadataUpdate",this.onMetaDataUpdateReceived.bind(this)),this.editorConnection.on("connected",(()=>{this.sendNodeLibrary()}))},g.prototype.setDebugInspectorsEnabled=function(e){this.context.setDebugInspectorsEnabled(e)},g.prototype.registerModule=function(e){if(e.nodes)for(let t of e.nodes)t.node||(t={node:t}),t.node.module=e.name||"Unknown Module",this.registerNode(t);this.noodlModules.push(e)},g.prototype.registerGraphModelListeners=function(){var e=this;this.graphModel.on("componentAdded",(function(t){e.context.registerComponentModel(t)}),this),this.graphModel.on("componentRemoved",(function(t){e.context.deregisterComponentModel(t)}),this)},g.prototype.reload=function(){location.reload()},g.prototype.registerNode=function(e){if(e.node){const t=l.defineNode(e.node);this.context.nodeRegister.register(t),t.setupNumberedInputDynamicPorts&&t.setupNumberedInputDynamicPorts(this.context,this.graphModel)}else this.context.nodeRegister.register(e);e.setup&&e.setup(this.context,this.graphModel)},g.prototype._setRootComponent=async function(e){this.rootComponent&&this.rootComponent.name===e||(this.rootComponent&&(this.rootComponent.model&&this.rootComponent.model.removeListenersWithRef(this),this.rootComponent=void 0),e&&(this.rootComponent=await this.context.createComponentInstanceNode(e,"rootComponent"),this.rootComponent.componentModel.on("rootAdded",(()=>this.eventEmitter.emit("rootComponentUpdated")),this),this.rootComponent.componentModel.on("rootRemoved",(()=>this.eventEmitter.emit("rootComponentUpdated")),this),this.context.setRootComponent(this.rootComponent)),this.eventEmitter.emit("rootComponentUpdated"))},g.prototype.setData=async function(e){this._currentLoadedData=e,await this.graphModel.importEditorData(e);for(const e of this.noodlModules)"function"==typeof e.setup&&e.setup.apply(e);!0!==this.dontCreateRootComponent&&(await this._setRootComponent(this.graphModel.rootComponent),this.graphModel.on("rootComponentNameUpdated",(e=>{this._setRootComponent(e)})),this.graphModel.on("componentRemoved",(e=>{this.rootComponent&&this.rootComponent.name===e.name&&this._setRootComponent(null)})),this.graphModel.on("componentAdded",(e=>{setTimeout((()=>{this.rootComponent||this.graphModel.rootComponent!==e.name||this._setRootComponent(e.name)}),1)}))),this.scheduleUpdate()},g.prototype.scheduleUpdate=function(){this.updateScheduled||(this.updateScheduled=!0,this.platform.requestUpdate(g.prototype._doUpdate.bind(this)))},g.prototype._doUpdate=function(){this.updateScheduled=!1,this.context.currentFrameTime=this.platform.getCurrentTime(),this.context.eventEmitter.emit("frameStart"),this.context.update(),this.context.eventEmitter.emit("frameEnd"),this.frameNumber++},g.prototype.setProjectSettings=function(e){this.projectSettings=e},g.prototype.getNodeLibrary=function(){var e=s.generateProjectSettings(this.graphModel.getSettings(),this.noodlModules);this.projectSettings&&(this.projectSettings.ports&&(e.ports=e.ports.concat(this.projectSettings.ports)),this.projectSettings.dynamicports&&(e.dynamicports=e.ports.concat(this.projectSettings.dynamicports)));var t=r(this.context.nodeRegister);return t.projectsettings=e,JSON.stringify(t,null,3)},g.prototype.sendNodeLibrary=function(){const e=this.getNodeLibrary();this.lastSentNodeLibrary!==e&&(this.lastSentNodeLibrary=e,this.editorConnection.sendNodeLibrary(e))},g.prototype.connectToEditor=function(e){this.editorConnection.connect(e)},g.prototype.onMetaDataUpdateReceived=function(e){this.graphModel.isEmpty()||EditorMetaDataEventsHandler.handleEvent(this.context,this.graphModel,e)},g.prototype.onModelUpdateReceived=async function(e){this.isWaitingForExport||("projectInstanceChanged"===e.type?this.reload():!1===this.graphModel.isEmpty()&&await c.handleEvent(this.context,this.graphModel,e))},g.prototype.addErrorHandler=function(e){this.errorHandlers.push(e)},g.prototype.reportError=function(e){this.errorHandlers.forEach((function(t){t(e)}))},g.prototype.getProjectSettings=function(){return this.graphModel.getSettings()},g.prototype.getMetaData=function(e){return this.graphModel.getMetaData(e)},g.Services=p,g.Node=u,g.NodeDefinition=l,g.EdgeTriggeredInput=d,e.exports=g},2036:e=>{e.exports=class{constructor({name:e,url:t}){this.name=e,this.url=t}getUrl(){return this.url}getName(){return this.name}toString(){return this.url}}},7569:(e,t,n)=>{const i=n(6291),o=n(7498),r=n(1020),s=n(2036),a=n(1489),l={_common:["_createdAt","_updatedAt","objectId"],_User:["_email_verify_token"]};function u(e,t){const n=Object.assign({},e);return l._common.forEach((e=>delete n[e])),t&&l[t]&&l[t].forEach((e=>delete n[e])),n}class c{constructor(e){this._initCloudServices(),this.events=new a,this.events.setMaxListeners(1e4),this.modelScope=e,this._fromJSON=(t,n)=>c._fromJSON(t,n,e),this._deserializeJSON=(t,n)=>c._deserializeJSON(t,n,e),this._serializeObject=(t,n)=>c._serializeObject(t,n,e)}_initCloudServices(){m=void 0;const e=i.instance.getMetaData("cloudservices");e&&(this.appId=e.appId||e.workspaceId+"-"+e.instanceId,this.endpoint=e.endpoint)}on(){this.events.on.apply(this.events,arguments)}off(){this.events.off.apply(this.events,arguments)}_makeRequest(e,t){if("undefined"==typeof _noodl_cloud_runtime_version){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e||{error:n.responseText,status:n.status})}},n.open(t.method||"GET",this.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",this.appId),"undefined"!=typeof _noodl_cloudservices&&n.setRequestHeader("X-Parse-Master-Key",_noodl_cloudservices.masterKey);var i=localStorage["Parse/"+this.appId+"/currentUser"];if(void 0!==i)try{const e=JSON.parse(i);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}t.onUploadProgress&&(n.upload.onprogress=e=>t.onUploadProgress(e)),t.content instanceof File?n.send(t.content):(n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t.content)))}else{const n="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.endpoint:this.endpoint,i="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.appId:this.appId,o="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.masterKey:void 0;fetch(n+e,{method:t.method||"GET",headers:{"X-Parse-Application-Id":i,"X-Parse-Master-Key":o,"Content-Type":"application/json"},body:JSON.stringify(t.content)}).then((e=>{200===e.status||201===e.status?"DELETE"===t.method?t.success(void 0):e.json().then((e=>t.success(e))).catch((e=>t.error({error:"CloudStore: Failed to get json result."}))):"DELETE"===t.method?t.error({error:"Failed to delete."}):e.json().then((e=>t.error(e))).catch((e=>t.error({error:"Failed to fetch."})))})).catch((e=>{t.error({error:e.message})}))}}query(e){const t=[];e.where&&t.push("where="+encodeURIComponent(JSON.stringify(e.where))),e.limit&&t.push("limit="+e.limit),e.skip&&t.push("skip="+e.skip),e.include&&t.push("include="+(Array.isArray(e.include)?e.include.join(","):e.include)),e.select&&t.push("keys="+(Array.isArray(e.select)?e.select.join(","):e.select)),e.sort&&t.push("order="+(Array.isArray(e.sort)?e.sort.join(","):e.sort)),e.count&&t.push("count=1"),this._makeRequest("/classes/"+e.collection+(t.length>0?"?"+t.join("&"):""),{success:function(t){e.success(t.results,t.count)},error:function(){e.error()}})}aggregate(e){const t=[];if(!e.group)return void e.error("You need to provide group option.");e.where&&t.push("match="+encodeURIComponent(JSON.stringify(e.where))),e.limit&&t.push("limit="+e.limit),e.skip&&t.push("skip="+e.skip);const n={objectId:null};Object.keys(e.group).forEach((t=>{const i={},o=e.group[t];void 0!==o.avg?i.$avg="$"+o.avg:void 0!==o.sum?i.$sum="$"+o.sum:void 0!==o.max?i.$max="$"+o.max:void 0!==o.min?i.$min="$"+o.min:void 0!==o.distinct&&(i.$addToSet="$"+o.distinct),n[t]=i})),t.push("group="+JSON.stringify(n)),this._makeRequest("/aggregate/"+e.collection+(t.length>0?"?"+t.join("&"):""),{success:function(t){const n={};t.results&&1===t.results.length?(Object.keys(e.group).forEach((e=>{n[e]=t.results[0][e]})),e.success(n)):e.success({})},error:function(){e.error()}})}count(e){const t=[];e.where&&t.push("where="+encodeURIComponent(JSON.stringify(e.where))),t.push("limit=0"),t.push("count=1"),this._makeRequest("/classes/"+e.collection+(t.length>0?"?"+t.join("&"):""),{success:function(t){e.success(t.count)},error:function(){e.error()}})}distinct(e){const t=[];e.where&&t.push("where="+encodeURIComponent(JSON.stringify(e.where))),t.push("distinct="+e.property),this._makeRequest("/aggregate/"+e.collection+(t.length>0?"?"+t.join("&"):""),{success:function(t){e.success(t.results)},error:function(){e.error()}})}fetch(e){const t=[];e.include&&t.push("include="+(Array.isArray(e.include)?e.include.join(","):e.include)),this._makeRequest("/classes/"+e.collection+"/"+e.objectId+(t.length>0?"?"+t.join("&"):""),{method:"GET",success:t=>{e.success(t),this.events.emit("fetch",{type:"fetch",objectId:e.objectId,object:t,collection:e.collection})},error:function(t){e.error(t.error)}})}create(e){this._makeRequest("/classes/"+e.collection,{method:"POST",content:Object.assign(u(d(e.data,e.collection),e.collection),{ACL:e.acl}),success:t=>{const n=Object.assign({},e.data,t);e.success(n),this.events.emit("create",{type:"create",objectId:e.objectId,object:n,collection:e.collection})},error:function(t){e.error(t.error)}})}increment(e){const t={};for(let n in e.properties)t[n]={__op:"Increment",amount:e.properties[n]};this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:t,success:t=>{e.success(t)},error:function(t){e.error(t.error)}})}save(e){const t=Object.assign({},e.data);delete t.createdAt,delete t.updatedAt,this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:Object.assign(u(d(t,e.collection),e.collection),{ACL:e.acl}),success:t=>{e.success(t),this.events.emit("save",{type:"save",objectId:e.objectId,object:Object.assign({},e.data,t),collection:e.collection})},error:function(t){e.error(t.error)}})}delete(e){this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"DELETE",success:()=>{e.success(),this.events.emit("delete",{type:"delete",objectId:e.objectId,collection:e.collection})},error:function(t){e.error(t.error)}})}addRelation(e){const t={};t[e.key]={__op:"AddRelation",objects:[{__type:"Pointer",objectId:e.targetObjectId,className:e.targetClass}]},this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:t,success:function(t){e.success(t)},error:function(t){e.error(t.error)}})}removeRelation(e){const t={};t[e.key]={__op:"RemoveRelation",objects:[{__type:"Pointer",objectId:e.targetObjectId,className:e.targetClass}]},this._makeRequest("/classes/"+e.collection+"/"+e.objectId,{method:"PUT",content:t,success:function(t){e.success(t)},error:function(t){e.error(t.error)}})}uploadFile(e){this._makeRequest("/files/"+e.file.name,{method:"POST",content:e.file,contentType:e.file.type,success:t=>e.success(Object.assign({},e.data,t)),error:t=>e.error(t),onUploadProgress:e.onUploadProgress})}deleteFile(e){this._makeRequest("/files/"+e.file.name,{method:"DELETE",success:t=>e.success(Object.assign({},e.data,t)),error:t=>e.error(t)})}}function p(e){if(e instanceof o){var t={};for(var n in e.data)t[n]=p(e.data[n]);return t}return e instanceof r?(t=[],e.items.forEach((e=>{t.push(p(e))})),t):e}function d(e,t,n){if(c._collections[t])var i=c._collections[t].schema;for(var a in e){var l=i&&i.properties&&i.properties[a]?i.properties[a].type:void 0;if(void 0===e[a]||null===e[a]);else if("Pointer"===l&&"string"==typeof e[a])e[a]={__type:"Pointer",className:i.properties[a].targetClass,objectId:e[a]};else if("Pointer"===l&&"object"==typeof e[a]&&(n||o).instanceOf(e[a]))e[a]={__type:"Pointer",className:i.properties[a].targetClass,objectId:e[a].getId()};else if("Date"===l&&("string"==typeof e[a]||e[a]instanceof Date))e[a]={__type:"Date",iso:e[a]instanceof Date?e[a].toISOString():e[a]};else if("File"===l&&e[a]instanceof s){const t=e[a];e[a]={__type:"File",url:t.getUrl(),name:t.getName()}}else"Array"===l&&"string"==typeof e[a]&&r.exists(e[a])?e[a]=p(r.get(e[a])):"Object"===l&&"string"==typeof e[a]&&(n||o).exists(e[a])?e[a]=p((n||o).get(e[a])):"GeoPoint"===l&&"object"==typeof e[a]?e[a]={__type:"GeoPoint",latitude:e[a].latitude,longitude:e[a].longitude}:e[a]=p(e[a])}return e}function h(e,t,n){if(void 0!==e){if(null===e)return null;if("Relation"!==t||"Relation"!==e.__type){if("Pointer"===t&&"Pointer"===e.__type)return e.objectId;if("Date"===t&&"Date"===e.__type)return new Date(e.iso);if("Date"===t&&"string"==typeof e)return new Date(e);if("File"===t&&"File"===e.__type)return new s(e);if("GeoPoint"===t&&"GeoPoint"===e.__type)return{latitude:e.latitude,longitude:e.longitude};if(function(e){if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if("object"!=typeof e[t]||null===e[t])return!1;return!0}(e)){for(var i=[],a=0;a<e.length;a++)i.push(h(e[a],void 0,n));var l=r.get();return l.set(i),l}if(Array.isArray(e))return e;if(e&&"Object"===e.__type&&void 0!==e.className&&void 0!==e.objectId){const t=Object.assign({},e);return delete t.className,delete t.__type,f(t,e.className,n)}if("object"==typeof e&&null!==e){var u=(n||o).get();for(var c in e)u.set(c,h(e[c],void 0,n));return u}return e}}}function f(e,t,n){const i=(n||o).get(e.objectId);if(i._class=t,void 0!==t&&void 0!==c._collections[t])var r=c._collections[t].schema;for(var s in e)if("objectId"!==s&&"ACL"!==s){var a=r&&r.properties&&r.properties[s]?r.properties[s].type:void 0;i.set(s,h(e[s],a,n))}return i}var g,m;c._fromJSON=f,c._deserializeJSON=h,c._serializeObject=d,c.forScope=e=>void 0===e?c.instance:(e._cloudStore||(e._cloudStore=new c(e)),e._cloudStore),Object.defineProperty(c,"instance",{get:function(){return void 0===g&&(g=new c),g}}),Object.defineProperty(c,"_collections",{get:function(){return void 0===m&&(m={},(i.instance.getMetaData("dbCollections")||[]).forEach((e=>{m[e.name]=e})),(i.instance.getMetaData("systemCollections")||[]).forEach((e=>{m[e.name]=e}))),m}}),c.invalidateCollections=()=>{m=void 0},e.exports=c},8435:(e,t,n)=>{const i=n(6291);class o{constructor(){this.cacheDuration=9e5}_makeRequest(e,t){if("undefined"==typeof _noodl_cloud_runtime_version){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e||{error:n.responseText,status:n.status})}};const o=i.instance.getMetaData("cloudservices"),r=o.appId||o.workspaceId+"-"+o.instanceId,s=o.endpoint;n.open("GET",s+e,!0),n.setRequestHeader("X-Parse-Application-Id",r),n.send()}else{const n="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.endpoint:this.endpoint,i="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.appId:this.appId,o="undefined"!=typeof _noodl_cloudservices?_noodl_cloudservices.masterKey:void 0;fetch(n+e,{method:"GET",headers:{"X-Parse-Application-Id":i,"X-Parse-Master-Key":o}}).then((e=>{200===e.status||201===e.status?e.json().then((e=>t.success(e))).catch((e=>t.error({error:"Config: Failed to get json result."}))):e.json().then((e=>t.error(e))).catch((e=>t.error({error:"Failed to fetch."})))})).catch((e=>{t.error({error:e.message})}))}}_getConfig(){return new Promise(((e,t)=>{this._makeRequest("/config",{success:t=>{e(t.params||{})},error:e=>{t(e)}})}))}async getConfig(){return this.configCachePending?this.configCachePending:this.configCache?(Date.now()>this.ttl&&this._getConfig().then((e=>{this.configCache=e,this.ttl=Date.now()+this.cacheDuration})),this.configCache):(this.configCachePending=this._getConfig(),this.configCache=await this.configCachePending,delete this.configCachePending,this.ttl=Date.now()+this.cacheDuration,this.configCache)}clearCache(){delete this.configCache}}o.instance=new o,e.exports=o},6370:(e,t,n)=>{const i=n(7569),o=n(7498);function r(e){return e instanceof Date&&"function"==typeof e.toISOString?{__type:"Date",iso:e.toISOString()}:e}e.exports={convertVisualFilter:function e(t,n){var o=n.queryParameters;if(void 0!==t.combinator&&void 0!==t.rules){if(0===t.rules.length)return;if(1===t.rules.length)return e(t.rules[0],n);{const i={},o="$"+t.combinator;return i[o]=[],t.rules.forEach((t=>{var r=e(t,n);void 0!==r&&i[o].push(r)})),i}}if("related to"===t.operator){if(void 0===(s=void 0!==t.input?o[t.input]:void 0))return;return{$relatedTo:{object:{__type:"Pointer",objectId:s,className:t.relatedTo},key:t.relationProperty}}}{const e={};var r,s=void 0!==t.input?o[t.input]:t.value;if("exist"===t.operator)return e[t.property]={$exists:!0},e;if("not exist"===t.operator)return e[t.property]={$exists:!1},e;if(void 0===s)return;if(i._collections[n.collectionName])var a=i._collections[n.collectionName].schema;return"Date"===(a&&a.properties&&a.properties[t.property]?a.properties[t.property].type:void 0)&&(s instanceof Date||(s=new Date(s.toString())),s={__type:"Date",iso:s.toISOString()}),"greater than"===t.operator?r={$gt:s}:"greater than or equal to"===t.operator?r={$gte:s}:"less than"===t.operator?r={$lt:s}:"less than or equal to"===t.operator?r={$lte:s}:"equal to"===t.operator?r={$eq:s}:"not equal to"===t.operator?r={$ne:s}:"points to"===t.operator?r={$eq:{__type:"Pointer",objectId:s,className:a&&a.properties&&a.properties[t.property]?a.properties[t.property].targetClass:void 0}}:"contain"===t.operator&&(r={$regex:s,$options:"i"}),e[t.property]=r,e}},compareObjects:function(e,t,n){for(var i=0;i<e.length;i++){let o=e[i];if("-"===o[0]){let e=o.substring(1);if(t.get(e)>n.get(e))return-1;if(t.get(e)<n.get(e))return 1}else{if(t.get(o)>n.get(o))return 1;if(t.get(o)<n.get(o))return-1}}return 0},matchesQuery:function e(t,n){var i=!0;return void 0===n||(void 0!==n.$and?n.$and.forEach((n=>{i&=e(t,n)})):void 0!==n.$or?(i=!1,n.$or.forEach((n=>{i|=e(t,n)}))):Object.keys(n).forEach((e=>{if("objectId"===e)void 0!==n[e].$eq?i&=t.getId()===n[e].$eq:void 0!==n[e].$in&&(i&=-1!==n[e].$in.indexOf(t.getId()));else if("$relatedTo"===e)i=!1;else{var o=t.get(e);void 0!==n[e].$eq&&"Pointer"===n[e].$eq.__type?i&=o===n[e].$eq.objectId:void 0!==n[e].$eq?i&=o==n[e].$eq:void 0!==n[e].$ne?i&=o!=n[e].$ne:void 0!==n[e].$lt?i&=o<n[e].$lt:void 0!==n[e].$lte?i&=o<=n[e].$lt:void 0!==n[e].$gt?i&=o>n[e].$gt:void 0!==n[e].$gte?i&=o>=n[e].$gte:void 0!==n[e].$exists?i&=void 0!==o:void 0!==n[e].$in?i&=-1!==n[e].$in.indexOf(o):void 0!==n[e].$nin?i&=-1===n[e].$in.indexOf(o):void 0!==n[e].$regex&&(i&=new RegExp(n[e].$regex,n[e].$options).test(o))}})),i)},convertVisualSorting:function(e){return e.map((e=>("descending"===e.order?"-":"")+e.property))},convertFilterOp:function e(t,n){const s=Object.keys(t);if(0===s.length)return{};if(1!==s.length)return n.error("Filter must only have one key found "+s.join(","));const a={},l=s[0];if(void 0!==t.and&&Array.isArray(t.and))a.$and=t.and.map((t=>e(t,n)));else if(void 0!==t.or&&Array.isArray(t.or))a.$or=t.or.map((t=>e(t,n)));else if(void 0!==t.idEqualTo)a.objectId={$eq:t.idEqualTo};else if(void 0!==t.idContainedIn)a.objectId={$in:t.idContainedIn};else if(void 0!==t.relatedTo){var u=t.relatedTo.id;if(void 0===u)return n.error("Must provide id in relatedTo filter");var c=t.relatedTo.key;if(void 0===c)return n.error("Must provide key in relatedTo filter");var p=(n.modelScope||o).get(u);a.$relatedTo={object:{__type:"Pointer",objectId:u,className:p._class},key:c}}else if("object"==typeof t[l]){const e=t[l];if(void 0!==e.equalTo)a[l]={$eq:r(e.equalTo)};else if(void 0!==e.notEqualTo)a[l]={$ne:r(e.notEqualTo)};else if(void 0!==e.lessThan)a[l]={$lt:r(e.lessThan)};else if(void 0!==e.greaterThan)a[l]={$gt:r(e.greaterThan)};else if(void 0!==e.lessThanOrEqualTo)a[l]={$lte:r(e.lessThanOrEqualTo)};else if(void 0!==e.greaterThanOrEqualTo)a[l]={$gte:r(e.greaterThanOrEqualTo)};else if(void 0!==e.exists)a[l]={$exists:e.exists};else if(void 0!==e.containedIn)a[l]={$in:e.containedIn};else if(void 0!==e.notContainedIn)a[l]={$nin:e.notContainedIn};else if(void 0!==e.pointsTo){if(p=(n.modelScope||o).get(e.pointsTo),i._collections[n.collectionName])var d=i._collections[n.collectionName].schema;var h=d&&d.properties&&d.properties[l]?d.properties[l].targetClass:void 0;"Relation"===(d&&d.properties&&d.properties[l]?d.properties[l].type:void 0)?a[l]={__type:"Pointer",objectId:e.pointsTo,className:h}:Array.isArray(e.pointsTo)?a[l]={$in:e.pointsTo.map((e=>({__type:"Pointer",objectId:e,className:h})))}:a[l]={$eq:{__type:"Pointer",objectId:e.pointsTo,className:h}}}else if(void 0!==e.matchesRegex)a[l]={$regex:e.matchesRegex,$options:e.options};else if(void 0!==e.text&&void 0!==e.text.search){var f=e.text.search;a[l]="string"==typeof f?{$text:{$search:{$term:f,$caseSensitive:!1}}}:{$text:{$search:{$term:f.term,$language:f.language,$caseSensitive:f.caseSensitive,$diacriticSensitive:f.diacriticSensitive}}}}else void 0!==e.nearSphere?(f=e.nearSphere,a[l]={$nearSphere:{__type:"GeoPoint",latitude:f.latitude,longitude:f.longitude},$maxDistanceInMiles:f.$maxDistanceInMiles,$maxDistanceInKilometers:f.maxDistanceInKilometers,$maxDistanceInRadians:f.maxDistanceInRadians}):void 0!==e.withinBox?(f=e.withinBox,a[l]={$within:{$box:f.map((e=>({__type:"GeoPoint",latitude:e.latitude,longitude:e.longitude})))}}):void 0!==e.withinPolygon&&(f=e.withinPolygon,a[l]={$geoWithin:{$polygon:f.map((e=>({__type:"GeoPoint",latitude:e.latitude,longitude:e.longitude})))}})}else n.error("Unrecognized filter keys "+s.join(","));return a}}},9541:(e,t,n)=>{const i=n(7569),o=n(6370),r=n(7498);e.exports=function(e){let t;const n=()=>(t||(t=new i(e)),t);return{query:async(t,i,r)=>new Promise(((s,a)=>{n().query({collection:t,where:o.convertFilterOp(i||{},{collectionName:t,error:e=>a(e),modelScope:e}),limit:r?r.limit:void 0,sort:r?r.sort:void 0,skip:r?r.skip:void 0,include:r?r.include:void 0,select:r?r.select:void 0,count:r?r.count:void 0,success:(e,i)=>{const o=e.map((e=>n()._fromJSON(e,t)));s(void 0!==i?{results:o,count:i}:o)},error:e=>{a(Error(e||"Failed to query."))}})})),count:async(t,i)=>new Promise(((r,s)=>{n().count({collection:t,where:i?o.convertFilterOp(i||{},{collectionName:t,error:e=>s(e),modelScope:e}):void 0,success:e=>{r(e)},error:e=>{s(Error(e||"Failed to query."))}})})),distinct:async(t,i,r)=>new Promise(((s,a)=>{n().distinct({collection:t,property:i,where:r?o.convertFilterOp(r||{},{collectionName:t,error:e=>a(e),modelScope:e}):void 0,success:e=>{s(e)},error:e=>{a(Error(e||"Failed to query."))}})})),aggregate:async(t,i,r)=>new Promise(((s,a)=>{n().aggregate({collection:t,group:i,where:r?o.convertFilterOp(r||{},{collectionName:t,error:e=>a(e),modelScope:e}):void 0,success:e=>{s(e)},error:e=>{a(Error(e||"Failed to aggregate."))}})})),async fetch(t,i){"string"!=typeof t&&(t=t.getId());const o=(i?i.className:void 0)||(e||r).get(t)._class;return new Promise(((e,r)=>{if(!o)return r("No class name specified");n().fetch({collection:o,objectId:t,include:i?i.include:void 0,success:function(t){var i=n()._fromJSON(t,o);e(i)},error:function(e){r(Error(e||"Failed to fetch."))}})}))},async increment(t,i,o){"string"!=typeof t&&(t=t.getId());const s=(o?o.className:void 0)||(e||r).get(t)._class;return new Promise(((e,o)=>{if(!s)return o("No class name specified");n().increment({collection:s,objectId:t,properties:i,success:i=>{n()._fromJSON(Object.assign({objectId:t},i),s),e()},error:e=>{o(Error(e||"Failed to increment."))}})}))},async save(t,i,o){"string"!=typeof t&&(t=t.getId());const s=(o?o.className:void 0)||(e||r).get(t)._class,a=(e||r).get(t);return i&&Object.keys(i).forEach((e=>{a.set(e,i[e])})),new Promise(((e,r)=>{if(!s)return r("No class name specified");n().save({collection:s,objectId:t,data:i||a.data,acl:o?o.acl:void 0,success:i=>{n()._fromJSON(Object.assign({objectId:t},i),s),e()},error:e=>{r(Error(e||"Failed to save."))}})}))},create:async(e,t,i)=>new Promise(((o,r)=>{n().create({collection:e,data:t,acl:i?i.acl:void 0,success:t=>{const i=n()._fromJSON(t,e);o(i)},error:e=>{r(Error(e||"Failed to insert."))}})})),async delete(t,i){"string"!=typeof t&&(t=t.getId());const o=(i?i.className:void 0)||(e||r).get(t)._class;return new Promise(((i,s)=>{if(!o)return s("No class name specified");n().delete({collection:o,objectId:t,success:()=>{(e||r).get(t).notify("delete"),i()},error:e=>{s(Error(e||"Failed to delete."))}})}))},async addRelation(t){const i=t.recordId||t.record.getId(),o=t.className||(e||r).get(i)._class,s=t.targetRecordId||t.targetRecord.getId(),a=t.targetClassName||(e||r).get(s)._class;return new Promise(((e,r)=>o?a?void n().addRelation({collection:o,objectId:i,key:t.key,targetObjectId:s,targetClass:a,success:t=>{e()},error:e=>{r(Error(e||"Failed to add relation."))}}):r("No target class name specified"):r("No class name specified")))},async removeRelation(t){const i=t.recordId||t.record.getId(),o=t.className||(e||r).get(i)._class,s=t.targetRecordId||t.targetRecord.getId(),a=t.targetClassName||(e||r).get(s)._class;return new Promise(((e,r)=>o?a?void n().removeRelation({collection:o,objectId:i,key:t.key,targetObjectId:s,targetClass:a,success:t=>{e()},error:e=>{r(Error(rr||"Failed to add relation."))}}):r("No target class name specified"):r("No class name specified")))}}}},2665:e=>{e.exports=async function(e,t,n){const i=[],o=[];for(const r of t){const s=Promise.resolve().then((()=>n(r,t)));if(i.push(s),e<=t.length){const t=s.then((()=>o.splice(o.indexOf(t),1)));o.push(t),o.length>=e&&await Promise.race(o)}}return Promise.all(i)}},1020:(e,t,n)=>{"use strict";var i=n(7498);Object.defineProperty(Array.prototype,"items",{enumerable:!1,get(){return this},set(e){this.set(e)}}),Object.defineProperty(Array.prototype,"each",{enumerable:!1,writable:!1,value:Array.prototype.forEach}),Object.defineProperty(Array.prototype,"size",{enumerable:!1,writable:!1,value:function(){return this.length}}),Object.defineProperty(Array.prototype,"get",{enumerable:!1,writable:!1,value:function(e){return this[e]}}),Object.defineProperty(Array.prototype,"getId",{enumerable:!1,writable:!1,value:function(){return this._id}}),Object.defineProperty(Array.prototype,"id",{enumerable:!1,get(){return this.getId()}}),Object.defineProperty(Array.prototype,"set",{enumerable:!1,writable:!1,value:function(e){var t,n;if(e!==this){var o=[];for(t=(e=e||[]).length,n=0;n<t;n++){var r=e[n];i.instanceOf(r)?o.push(r):o.push(i.create(r))}var s=this.items,a=u(s),l=u(o);for(t=s.length,n=0;n<t;n++)l.hasOwnProperty(s[n].getId())||(this.removeAtIndex(n),n--,t--);for(n=0;n<Math.min(s.length,o.length);n++)s[n]!==o[n]&&(a.hasOwnProperty(o[n].getId())&&this.remove(o[n]),this.addAtIndex(o[n],n));for(n=s.length;n<o.length;n++)this.add(o[n])}function u(e){for(var t={},n=e.length,i=0;i<n;i++){var o=e[i];t[o.getId()]=o}return t}}}),Object.defineProperty(Array.prototype,"notify",{enumerable:!1,writable:!1,value:async function(e,t){if(this._listeners&&this._listeners[e])for(var n=this._listeners[e].slice(),i=0;i<n.length;i++)await n[i](t)}}),Object.defineProperty(Array.prototype,"contains",{enumerable:!1,writable:!1,value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(Array.prototype,"add",{enumerable:!1,writable:!1,value:async function(e){this.contains(e)||(this.items.push(e),await this.notify("add",{item:e,index:this.items.length-1}),await this.notify("change"),await e.notify("add",{collection:this}))}}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1,writable:!1,value:function(e){var t=this.items.indexOf(e);-1!==t&&this.removeAtIndex(t)}}),Object.defineProperty(Array.prototype,"addAtIndex",{enumerable:!1,writable:!1,value:async function(e,t){this.contains(e)||(this.items.splice(t,0,e),await this.notify("add",{item:e,index:t}),await this.notify("change"),await e.notify("add",{collection:this,index:t}))}}),Object.defineProperty(Array.prototype,"removeAtIndex",{enumerable:!1,writable:!1,value:async function(e){var t=this.items[e];this.items.splice(e,1),await this.notify("remove",{item:t,index:e}),await this.notify("change"),await t.notify("remove",{collection:this})}}),Object.defineProperty(Array.prototype,"on",{enumerable:!1,writable:!1,value:function(e,t){this._listeners||Object.defineProperty(this,"_listeners",{enumerable:!1,writable:!1,value:{}}),this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}}),Object.defineProperty(Array.prototype,"off",{enumerable:!1,writable:!1,value:function(e,t){if(this._listeners&&this._listeners[e]){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}});class o extends Array{}var r=o._collections={};o.create=function(e){const t=i.guid();return r[t]=new o,Object.defineProperty(r[t],"_id",{enumerable:!1,writable:!1,value:t}),e&&r[t].set(e),r[t]},o.get=function(e){return void 0===e&&(e=i.guid()),r[e]||(r[e]=new o,Object.defineProperty(r[e],"_id",{enumerable:!1,writable:!1,value:e})),r[e]},o.instanceOf=function(e){return e instanceof o},o.exists=function(e){return void 0!==r[e]},e.exports=o},1734:e=>{"use strict";e.exports={createSetter:function(e){var t=!1;return function(n){(n=!!n)&&!1===t&&e.valueChangedToTrue.call(this),t=n}}}},6568:e=>{e.exports=class{constructor(){this.currentWarnings=new Map}setWarning(e,t,n){if(this.currentWarnings.has(e)){const i=this.currentWarnings.get(e);return i[t]!==n&&(i[t]=n,!0)}return this.currentWarnings.set(e,{[t]:n}),!0}clearWarning(e,t){const n=this.currentWarnings.get(e);return!(!n||!n[t]||(delete n[t],0===Object.keys(n).length&&this.currentWarnings.delete(e),0))}clearWarnings(e){return!1!==this.currentWarnings.has(e)&&(this.currentWarnings.delete(e),!0)}}},554:(e,t,n)=>{"use strict";var i=n(2824),o=n(4047),r=n(960);const s=n(6568);function a(e){var t=e||{};i.call(this),this.runtimeType=t.runtimeType,this.platform=t.platform,this.ws=t.platform&&t.platform.webSocketClass||("undefined"!=typeof WebSocket?WebSocket:void 0),this.wsOptions=t.platform&&t.platform.webSocketOptions||void 0,this.reconnectOnClose=!0,this.enableDebugger=!1,this.lastSendTimestamp=0,this.sendQueue=[],this.sendTimer=void 0,this.activeWarnings=new s}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.isRunningLocally=function(){return this.platform.isRunningLocally&&this.platform.isRunningLocally()||"undefined"!=typeof document&&("localhost"===document.location.hostname||"127.0.0.1"===document.location.hostname)},a.prototype.connect=function(e){this.socket=this.wsOptions?new this.ws(e,this.wsOptions):new this.ws(e);var t=this;this.socket.addEventListener("open",(function(){t.clientId=r(),t.socket.send(JSON.stringify({cmd:"register",type:"viewer",clientId:t.clientId})),t.emit("connected")})),this.socket.addEventListener("close",(function(n){t.reconnectOnClose&&t.reconnect(e),console.log("Editor connection closed",n.code,n.reason),t.emit("connectionClosed")})),this.socket.addEventListener("error",(function(e){console.log("Editor connection error, trying to reconnect")})),this.socket.addEventListener("message",(async e=>{const n="string"==typeof e.data?e.data:await e.data.text(),i=JSON.parse(n);let r;"registered"===i.cmd||("export"===i.cmd?(r=JSON.parse(i.content),"full"===i.type&&t.emit("exportDataFull",r)):"hoverStart"===i.cmd?t.emit("hoverStart",i.content.id):"hoverEnd"===i.cmd?t.emit("hoverEnd",i.content.id):"refresh"===i.cmd?t.emit("reload"):"debugInspectors"===i.cmd?this.debugInspectorsEnabled&&(r=JSON.parse(i.content),t.emit("debugInspectorsUpdated",r.inspectors)):"debuggingEnabled"===i.cmd?t.isRunningLocally()&&(r=JSON.parse(i.content),t.emit("debuggingEnabledChanged",r.enabled)):"getConnectionValue"===i.cmd?t.isRunningLocally()&&(r=JSON.parse(i.content),await t.emit("getConnectionValue",{clientId:r.clientId,connectionId:r.connectionId})):"modelUpdate"===i.cmd?await t.emit("modelUpdate",i.content):"publish"===i.cmd?o.pubsub.routeMessage(i):"noodlModules"===i.cmd?t.emit("noodlModules",JSON.parse(i.content)):"mqttUpdate"===i.cmd?t.emit("mqttUpdate",i.content):"activeComponentChanged"===i.cmd?t.emit("activeComponentChanged",i.component):console.log("Command not implemented",i))}))},a.prototype.reconnect=function(e){var t=this;setTimeout((function(){t.connect(e)}),2e3)},a.prototype.isConnected=function(){return void 0!==this.socket&&this.socket.readyState===this.ws.OPEN},a.prototype.send=function(e){const t=this.platform.getCurrentTime(),n=t-this.lastSendTimestamp,i=e=>{try{this.socket.send(JSON.stringify(e))}catch(t){if(t.message&&t.message.startsWith("Converting circular"))try{this.socket.send(JSON.stringify(e,(()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular]";e.add(n)}return n}})()))}catch(t){console.log("failed to send message to editor",e,t)}else console.log("failed to send message to editor",e,t)}};n<200||this.sendTimer||!this.isConnected()?(this.sendQueue.push(e),this.sendTimer||(this.sendTimer=setTimeout((()=>{if(!1!==this.isConnected()){for(let e=0;e<this.sendQueue.length;e+=50){const t=this.sendQueue.slice(e,e+50);i(t)}this.sendQueue=[],this.sendTimer=void 0,this.lastSendTimestamp=this.platform.getCurrentTime()}}),100))):(this.lastSendTimestamp=t,i(e))},a.prototype.sendInspectId=function(e){this.send({cmd:"select",type:"viewer",content:JSON.stringify({id:e})})},a.prototype.sendSelectComponent=function(e){this.send({cmd:"select",type:"viewer",content:JSON.stringify({componentName:e})})},a.prototype.sendPulsingConnections=function(e){var t=[];Object.keys(e).forEach((function(n){var i=e[n];t=t.concat(i.connections)})),this.send({cmd:"connectiondebugpulse",type:"viewer",content:JSON.stringify({connectionsToPulse:t})})},a.prototype.sendDebugInspectorValues=function(e){this.send({cmd:"debuginspectorvalues",type:"viewer",content:{inspectors:e}})},a.prototype.sendConnectionValue=function(e,t){this.send({cmd:"connectionValue",type:"viewer",content:{connectionId:e,value:t}})};const l={};a.prototype.sendDynamicPorts=function(e,t,n){var i=JSON.stringify(t);if(l[e]!==i){if(l[e]&&t&&n&&n.detectRenamed){var o=Array.isArray(n.detectRenamed)?n.detectRenamed:[n.detectRenamed],r=[];o.forEach((n=>{var i=JSON.parse(l[e]),o=[].concat(t);n.prefix&&(i=i.filter((e=>e.name.startsWith(n.prefix))),o=o.filter((e=>e.name.startsWith(n.prefix)))),n.plug&&(i=i.filter((e=>e.plug===n.plug)),o=o.filter((e=>e.plug===n.plug))),o=o.map((e=>e.name.substring((n.prefix||"").length)));var s=function(e,t){if(e&&t&&e.length===t.length){for(var n={},i=0;i<e.length;i++){if(-1===t.indexOf(e[i])){if(n.before)return;n.before=e[i]}if(-1===e.indexOf(t[i])){if(n.after)return;n.after=t[i]}}return n.before&&n.after?n:void 0}}(i=i.map((e=>e.name.substring((n.prefix||"").length))),o);s&&r.push({plug:n.plug,patterns:[(n.prefix||"")+"{{*}}"],before:s.before,after:s.after})})),r.length>0&&(n.renamed=r),delete n.detectRenamed}l[e]=i,this.send({cmd:"instanceports",type:"viewer",content:JSON.stringify({nodeid:e,ports:t,options:n})})}},a.prototype.sendWarning=function(e,t,n,i){this.activeWarnings.setWarning(t,n,i)&&this.send({cmd:"showwarning",type:"viewer",content:JSON.stringify({componentName:e,nodeId:t,key:n,warning:i})})},a.prototype.clearWarning=function(e,t,n){this.activeWarnings.clearWarning(t,n)&&this.send({cmd:"showwarning",type:"viewer",content:JSON.stringify({componentName:e,nodeId:t,key:n,warning:void 0})})},a.prototype.clearWarnings=function(e,t){this.activeWarnings.clearWarnings(t)&&this.send({cmd:"clearwarnings",type:"viewer",content:JSON.stringify({componentName:e,nodeId:t})})},a.prototype.sendPatches=function(e){this.send({cmd:"patchproject",type:"viewer",content:JSON.stringify(e)})},a.prototype.requestFullExport=function(){this.send({cmd:"register",type:"viewer"})},a.prototype.requestNoodlModules=function(){this.send({cmd:"getNoodlModules",type:"viewer"})};var u={};a.prototype.sendServiceRequest=function(e,t){e.token=r(),e.clientId=this.clientId,u[e.token]=t,this.send(e)},a.prototype.close=function(){this.reconnectOnClose=!1,!1!==this.isConnected()&&this.socket.close()},a.prototype.sendNodeLibrary=function(e){this.send({cmd:"nodelibrary",type:"viewer",runtimeType:this.runtimeType,content:e,clientId:this.clientId})},a.prototype.sendComponentMetadata=function(e,t,n){this.send({cmd:"componentMetadata",type:"viewer",content:JSON.stringify({componentName:e,key:t,data:n})})},a.prototype.sendProjectMetadata=function(e,t){this.send({cmd:"projectMetadata",type:"viewer",content:JSON.stringify({key:e,data:t})})},e.exports=a},9129:e=>{"use strict";function t(e,t){const n=new Set(t);return e.filter((e=>!n.has(e)))}e.exports={handleEvent:async function(e,n,i){function o(n,i){var o={},s={};i.forEach((function(e){e&&"outputs"===e.plug&&(e.plug="output"),"input"!==e.plug&&"input/output"!==e.plug||(o[e.name]=e),"output"!==e.plug&&"input/output"!==e.plug||(s[e.name]=e)}));var a=Object.keys(n.getInputPorts()),l=t(a,Object.keys(o)),u=t(Object.keys(o),a);n.updateInputPortTypes(o),l.forEach(n.removeInputPortWithName.bind(n)),u.forEach((function(t){n.addInputPort(o[t]),n.parameters&&n.parameters.hasOwnProperty(t)&&r(e.rootComponent.nodeScope,n,t,n.parameters[t])})),n.updateOutputPortTypes(s);var c=Object.keys(n.getOutputPorts()),p=t(c,Object.keys(s)),d=t(Object.keys(s),c);p.forEach(n.removeOutputPortWithName.bind(n)),d.forEach((function(e){n.addOutputPort(s[e])}))}function r(e,t,n,i){e.getNodesWithIdRecursive(t.id).forEach((function(e){e.queueInput(n,i)}))}var s;if(!i.componentName||(s=n.getComponentWithName(i.componentName))){i.port&&"outputs"===i.port.plug&&(i.port.plug="output");var a={nodeAdded:function(e){s.importEditorNodeData(e.model,e.parentId,e.childIndex)},nodeRemoved:async function(e){s.hasNodeWithId(e.model.id)&&await s.removeNodeWithId(e.model.id)},connectionAdded:function(e){s.addConnection(e.model)},connectionRemoved:function(t){s.removeConnection(t.model);var n=s.getNodeWithId(t.model.targetId);if(0===s.getConnectionsToPort(n.id,t.model.targetId).length){var i=n.parameters[t.model.targetPort];void 0===i&&(i=e.getDefaultValueForInput(n.type,t.model.targetPort)),r(e.rootComponent.nodeScope,n,t.model.targetPort,i)}},parameterChanged:function(e){const t=s.getNodeWithId(e.nodeId);if(void 0!==t){if(e.parameters){const n=new Set(Object.keys(e.parameters).concat(Object.keys(e.oldParameters)));for(const i of n)t.setParameter(i,e.parameters[i])}e.parameterName&&t.setParameter(e.parameterName,e.parameterValue,e.state)}else console.log("parameterChanged: Unknown node id",e)},nodeAttached:function(e){s.setNodeParent(s.getNodeWithId(e.nodeId),s.getNodeWithId(e.parentId),e.childIndex)},nodeDetached:function(e){s.setNodeParent(s.getNodeWithId(e.nodeId),null),s.addRootId(e.nodeId)},componentAdded:function(e){n.importComponentFromEditorData(e.model)},componentRemoved:async function(e){await n.removeComponentWithName(e.componentName)},rootAdded:function(e){s.addRootId(e.nodeId)},portAdded:function(t){var n=s.getNodeWithId(t.nodeId);"input"!==t.port.plug&&"input/output"!==t.port.plug||(n.addInputPort(t.port),n.parameters.hasOwnProperty(t.port)&&r(e.rootComponent.nodeScope,n,t.port,n.parameters[t.port])),"output"!==t.port.plug&&"input/output"!==t.port.plug||n.addOutputPort(t.port)},portRemoved:function(e){var t=s.getNodeWithId(e.nodeId);"input"!==e.port.plug&&"input/output"!==e.port.plug||t.removeInputPortWithName(e.port.name),"output"!==e.port.plug&&"input/output"!==e.port.plug||t.removeOutputPortWithName(e.port.name)},nodePortRenamed:function(e){"input"!==e.port.plug&&"input/output"!==e.port.plug||s.renameInputPortOnNodeWithId(e.nodeId,e.oldName,e.port.name),"output"!==e.port.plug&&"input/output"!==e.port.plug||s.renameOutputPortOnNodeWithId(e.nodeId,e.oldName,e.port.name);var t=s.getNodeWithId(e.nodeId);"Component Inputs"===t.type?(s.addInputPort(e.port),n.getNodesWithType(s.name).forEach((function(t){t.component.renameInputPortOnNodeWithId(t.id,e.oldName,e.port.name)})),s.removeInputPortWithName(e.oldName)):"Component Outputs"===t.type&&(s.addOutputPort(e.port),n.getNodesWithType(s.name).forEach((function(t){t.component.renameOutputPortOnNodeWithId(t.id,e.oldName,e.port.name)})),s.removeOutputPortWithName(e.oldName))},componentPortsUpdated:function(e){o(s,e.ports)},instancePortsChanged:function(e){s.hasNodeWithId(e.nodeId)&&o(s.getNodeWithId(e.nodeId),e.ports)},componentRenamed:function(e){n.renameComponent(e.oldName,e.newName)},settingsChanged:function(e){n.setSettings(e.settings)},metadataChanged:function(e){n.setMetaData(e.key,e.data)},componentMetadataChanged:function(e){const t=n.getComponentWithName(e.componentName);t&&t.setMetadata(e.key,e.data)},variantParametersChanged:function(t){if(t.variant)n.updateVariant(t.variant);else if(n.updateVariantParameter(t.variantName,t.variantTypeName,t.parameterName,t.parameterValue,t.state),void 0===t.parameterValue){const i=n.getVariant(t.variantTypeName,t.variantName);e.rootComponent.nodeScope.getAllNodesWithVariantRecursive(i).forEach((e=>{e.queueInput(t.parameterName,e.getParameter(t.parameterName))}))}},variantDeleted:function(e){n.deleteVariant(e.variantTypeName,e.variantName)},variantChanged:function(e){const t=s.getNodeWithId(e.nodeId),i=n.getVariant(t.type,e.variantName);t.setVariant(i)},variantRenamed:function(e){const t=n.getVariant(e.variantTypeName,e.oldVariantName);t&&(t.name=t.variantName)},defaultStateTransitionChanged:function(e){s.getNodeWithId(e.nodeId).setDefaultStateTransition(e.curve,e.state)},stateTransitionsChanged:function(e){const t=s.getNodeWithId(e.nodeId);e.parameterName&&t.setStateTransitionParamter(e.parameterName,e.curve,e.state)},variantDefaultStateTransitionChanged:function(e){n.updateVariantDefaultStateTransition(e.variantName,e.variantTypeName,e.curve,e.state)},variantStateTransitionsChanged:function(e){n.updateVariantStateTransition(e)},routerIndexChanged:function(e){n.routerIndex=e.data}};a.hasOwnProperty(i.type)?(await a[i.type](i),e.scheduleUpdate()):console.log("Unknown event",i)}}}},1489:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}g(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,o)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function u(e,t,n,i){var o,r,s,u;if(a(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,u=c,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=c.bind(i);return o.listener=n,i.wrapFn=o,o}function d(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var u=l.length,c=f(l,u);for(n=0;n<u;++n)i(c[n],this,t)}return!0},r.prototype.addListener=function(e,t){return u(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return u(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,p(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,p(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,o,r,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2824:e=>{"use strict";function t(){this.listeners={},this.listenersWithRefs={}}t.prototype.on=function(e,t,n){n?(this.listenersWithRefs.hasOwnProperty(e)||(this.listenersWithRefs[e]=new Map),this.listenersWithRefs[e].get(n)||this.listenersWithRefs[e].set(n,[]),this.listenersWithRefs[e].get(n).push(t)):(this.listeners.hasOwnProperty(e)||(this.listeners[e]=[]),this.listeners[e].push(t))},t.prototype.removeListenersWithRef=function(e){Object.keys(this.listenersWithRefs).forEach((t=>{const n=this.listenersWithRefs[t];n.has(e)&&n.delete(e)}))},t.prototype.removeAllListeners=function(e){e?(delete this.listeners[e],delete this.listenersWithRefs[e]):(this.listeners={},this.listenersWithRefs={})},t.prototype.emit=async function(e,t){const n=this.listeners[e];if(n)for(let e=0;e<n.length;e++){const i=n[e];await Promise.resolve(i.call(null,t))}const i=this.listenersWithRefs[e];if(i)for(const[e,n]of i)for(const i of n)await Promise.resolve(i.call(e,t))},e.exports=t},960:e=>{e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},592:(e,t,n)=>{"use strict";const i=n(7498),{getAbsoluteUrl:o}=n(667);var r={};function s(e,t){this.inputs={},this.outputs={},this.error=void 0,this.code=e;const n=t?t.node:void 0;this._initializeAPIs();var i=r[e];if(!i)try{i=new Function(["define","script","Node","Component"],s.getCodePrefix()+e),r[e]=i}catch(e){this.error=e.message,console.error(e)}if(i)try{i(this.define.bind(this),this.script.bind(this),this.apis.Node,n?s.getComponentScopeForNode(n):{}),this._afterSourced()}catch(e){this.error=e.message,console.error(e)}}s.prototype.define=function(e){this.inputs=e.inputs||{},this.outputs=e.outputs||{},this.setup=e.setup,this.change=e.run||e.change,this.destroy=e.destroy,this.definedObject=e},s.prototype.script=function(e){var t=function(e){var t={inputs:e.inputs||{},outputs:e.outputs||{},setup:function(t,n){if(this.inputs=t,this.outputs=n,this.setOutputs=function(e){for(var t in e)this.outputs[t]=e[t],this.flagOutputDirty(t)},e.methods)for(var i in e.methods)this[i]=e.methods[i];e.setup&&e.setup.apply(this)},destroy:function(t,n){this.inputs=t,this.outputs=n,e.destroy&&e.destroy.apply(this)},change:function(t,n){this.inputs=t,this.outputs=n;var i=this._oldInputs||{};if(e.changed)for(var o in t)if(t[o]!==i[o]){var r=e.changed[o];"function"==typeof r&&r.apply(this,[t[o],i[o]])}this._oldInputs=Object.assign({},t)}};if(e.signals)for(var n in e.signals)t[n]=e.signals[n],t.inputs[n]="signal";return t}(e);this.inputs=t.inputs||{},this.outputs=t.outputs||{},this.setup=t.setup,this.change=t.run||t.change,this.destroy=t.destroy,this.definedObject=t},s.prototype._initializeAPIs=function(){this.apis={},this.apis.Node={Inputs:{},Outputs:{},Signals:{},Setters:{}}},s.prototype._afterSourced=function(){if(void 0===this.definedObject){var e=this.apis.Node;if(this.inputs=Object.assign({},e.Inputs||{}),this.outputs=Object.assign({},e.Outputs||{}),this.setup=function(t,n){const i=this;e.setOutputs=function(e){for(var t in e)n[t]=e[t],i.flagOutputDirty(t)},e.OnInit&&e.OnInit.apply(this)},this.destroy=e.OnDestroy||this.destory,this.change=(t,n,i)=>{for(var o in i)"function"==typeof e.Setters[o]&&e.Setters[o](t[o]);"function"==typeof e.OnInputsChanged&&e.OnInputsChanged()},this.definedObject={inputs:this.inputs,outputs:this.outputs,setup:this.setup,destroy:this.destroy,change:this.change},void 0!==e.Signals)for(var t in e.Signals)"function"==typeof e.Signals[t]&&(this.inputs[t]="signal",this.definedObject[t]=e.Signals[t])}},s.createFromCode=function(e,t){return new s(e,t)},s.createFromURL=function(e,t,n){e=o(e);var i=new window.XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4!==this.readyState&&this.readyState!==XMLHttpRequest.DONE||t(new s(this.response))},i.onerror=function(){console.log("Failed to request",e)},i.send()},s.parseAndAddPortsFromScript=function(e,t,n){function i(e,n){if(null==e)return;const i={};for(const t of e){let e=t[1];void 0!==e&&(i[e]=!0)}Object.keys(i).forEach((e=>{var i;("string"==typeof(i={name:n.prefix+e,plug:n.plug})?void 0===t.find((e=>e.name===i)):void 0===t.find((e=>e.name===i.name&&e.plug===i.plug)))&&t.push({name:n.prefix+e,displayName:e,plug:n.plug,type:n.type,group:n.group})}))}n.skipInputs||(i(e.matchAll(/Inputs\.([A-Za-z0-9_]+)/g),{type:n.inputType||"*",plug:"input",group:n.inputGroup||"Inputs",prefix:n.inputPrefix||""}),i(e.matchAll(/Inputs\s*\[\s*(?:'|")(.*)(?:'|")\s*\]/g),{type:n.inputType||"*",plug:"inputs",group:n.inputGroup||"Inputs",prefix:n.inputPrefix||""})),n.skipOutputs||(n.skipOutputSignals||(i(e.matchAll(/Outputs\.([A-Za-z0-9]+)\s*\(\s*\)/g),{type:"signal",plug:"output",group:"Outputs",prefix:n.outputPrefix||""}),i(e.matchAll(/Outputs\s*\[\s*(?:'|")(.*)(?:'|")\s*\]\(\s*\)/g),{type:"signal",plug:"output",group:"Outputs",prefix:n.outputPrefix||""})),n.skipRegularOutputs||(i(e.matchAll(/Outputs\.([A-Za-z0-9_]+)/g),{type:"*",plug:"output",group:"Outputs",prefix:n.outputPrefix||""}),i(e.matchAll(/Outputs\s*\[\s*\"([^\"]*)\"\s*\]/g),{type:"*",plug:"output",group:"Outputs",prefix:n.outputPrefix||""})))},s.prototype.getPorts=function(){var e=[],t=this;return Object.keys(this.inputs).forEach((function(n){var i=t.inputs[n],o={name:n,plug:"input"};if("string"==typeof i)o.type={name:i},o.group="Inputs";else for(var r in i)o[r]=i[r];e.push(o)})),Object.keys(this.outputs).forEach((function(n){e.push({name:n,type:{name:t.outputs[n]},plug:"output",group:"Outputs"})})),s.parseAndAddPortsFromScript(this.code,e,{}),e};const a={};s.getComponentScopeForNode=function(e){const t=e.nodeScope.componentOwner.getInstanceId();if(void 0===a[t]){a[t]={};const n=(e.nodeScope.modelScope||i).get("componentState"+t);a[t].Object=n}const n=function(e){const t=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("net.noodl.ComponentObject").length>0||n.nodeScope.getNodesWithType("Component State").length>0?n:e(n)}(e.nodeScope.componentOwner);if(t)return"componentState"+t.getInstanceId()}(e),o=void 0!==n?(e.nodeScope.modelScope||i).get(n):void 0;return a[t].ParentObject=o,a[t].RepeaterObject=function(e){for(var t=e.nodeScope.componentOwner;void 0!==t&&void 0===t._forEachModel&&t.parentNodeScope;)t=t.parentNodeScope.componentOwner;return void 0!==t?t._forEachModel:void 0}(e),a[t]},s.getCodePrefix=function(){return"const Script = (typeof Node !== 'undefined')?Node:undefined;\n"},s.createNoodlAPI=function(){return"undefined"!=typeof window&&void 0!==window.Noodl?window.Noodl:{}},e.exports=s},7498:e=>{function t(e,t){this.id=e,this.data=t}const n=t._models={},i={},o={get:function(e,t,n){return"function"==typeof e[t]?e[t].bind(e):t in e?Reflect.get(e,t,n):e.get(t)},set:function(e,t,n){if("_class"===t)e._class=n;else{if("id"===t)return console.log(`Noodl.Object warning: id is readonly (Id is ${e.id}, trying to set to ${n})`),!0;e.set(t,n)}return!0},ownKeys:e=>Reflect.ownKeys(e.data),getOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e.data,t)};function r(e){if(0===e)throw new Error("Zero-length randomString is useless.");const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;++i)n+=t[Math.floor(65536*(1+Math.random()))%t.length];return n}t.get=function(e){return void 0===e&&(e=t.guid()),n[e]||(n[e]=new t(e,{}),i[e]=new Proxy(n[e],o)),i[e]},t.create=function(e){var n=e||{},i=t.get(n.id);for(var o in n)"id"!==o&&i.set(o,n[o]);return i},t.exists=function(e){return void 0!==n[e]},t.instanceOf=function(e){return e instanceof t||e.target instanceof t},t.guid=function(){return r(10)},t.prototype.on=function(e,t){this.listeners||(this.listeners={}),this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.prototype.off=function(e,t){if(this.listeners&&this.listeners[e]){var n=this.listeners[e].indexOf(t);-1!==n&&this.listeners[e].splice(n,1)}},t.prototype.notify=function(e,t){if(this.listeners&&this.listeners[e])for(var n=this.listeners[e].slice(),i=0;i<n.length;i++)n[i](t)},t.prototype.setAll=function(e){for(var t in e)if("id"!==t&&this.data[t]!==e[t]){var n=this.data[t];this.data[t]=e[t],this.notify("change",{name:t,value:e[t],old:n})}},t.prototype.set=function(e,n,i){if(i&&i.resolve&&-1!==e.indexOf(".")){for(var o=e.split("."),r=this,s=0;s<o.length-1;s++){var a=r.get(o[s]);if(!t.instanceOf(a))return;r=a}return void r.set(o[o.length-1],n)}const l=i&&i.forceChange;var u=this.data[e];this.data[e]=n,(l||u!==n)&&(!i||!i.silent)&&this.notify("change",{name:e,value:n,old:u})},t.prototype.getId=function(){return this.id},t.prototype.get=function(e,n){if(n&&n.resolve&&-1!==e.indexOf(".")){for(var i=e.split("."),o=this,r=0;r<i.length-1;r++){var s=o.get(i[r]);if(!t.instanceOf(s))return;o=s}return o.get(i[i.length-1])}return this.data[e]},t.prototype.toJSON=function(){return Object.assign({},this.data,{id:this.id})},t.Scope=function(){this.models={},this.proxies={}},t.Scope.prototype.get=function(e){return void 0===e&&(e=t.guid()),this.models[e]||(this.models[e]=new t(e,{}),this.proxies[e]=new Proxy(this.models[e],o)),this.proxies[e]},t.Scope.prototype.create=function(e){var t=e||{},n=this.get(t.id);for(var i in t)"id"!==i&&n.set(i,t[i]);return n},t.Scope.prototype.exists=function(e){return void 0!==this.models[e]},t.Scope.prototype.instanceOf=function(e){return e instanceof t||e.target instanceof t},t.Scope.prototype.guid=function(){return r(10)},t.Scope.prototype.reset=function(){this.models={},this.proxies={},delete this._cloudStore},e.exports=t},2950:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(774),a=n(2824);function l(e){a.call(this),this.name=e,this.nodes=[],this.connections=[],this.roots=[],this.inputPorts={},this.outputPorts={},this.metadata={}}l.prototype=Object.create(a.prototype),l.prototype.addNode=async function(e){e.component=this,this.nodes[e.id]=e,await this.emit("nodeAdded",e)},l.prototype.hasNodeWithId=function(e){return void 0!==this.getNodeWithId(e)},l.prototype.getNodeWithId=function(e){return this.nodes[e]},l.prototype.getAllNodes=function(){return Object.values(this.nodes)},l.prototype.getNodesWithType=function(e){var t=[],n=this;return Object.keys(this.nodes).forEach((function(i){var o=n.nodes[i];o.type===e&&t.push(o)})),t},l.prototype.addConnection=function(e){if(this.connections.push(e),this.emit("connectionAdded",e),e.targetId){const t=this.getNodeWithId(e.targetId);t&&t.emit("inputConnectionAdded",e)}},l.prototype.removeConnection=function(e){const t=this.connections.findIndex((t=>t.sourceId===e.sourceId&&t.sourcePort===e.sourcePort&&t.targetId===e.targetId&&t.targetPort===e.targetPort));if(-1!==t){if(this.connections.splice(t,1),this.emit("connectionRemoved",e),e.targetId){const t=this.getNodeWithId(e.targetId);t&&t.emit("inputConnectionRemoved",e)}}else console.log("Connection doesn't exist",e)},l.prototype.getConnectionsFromPort=function(e,t){return this.connections.filter((function(n){return n.sourceId===e&&n.sourcePort===t}))},l.prototype.getConnectionsToPort=function(e,t){return this.connections.filter((function(n){return n.targetId===e&&n.targetPort===t}))},l.prototype.getConnectionsFrom=function(e){return this.connections.filter((function(t){return t.sourceId===e}))},l.prototype.getConnectionsTo=function(e){return this.connections.filter((function(t){return t.targetId===e}))},l.prototype.addRootId=function(e){-1===this.roots.indexOf(e)&&(this.roots.push(e),this.emit("rootAdded",e))},l.prototype.removeRootId=function(e){const t=this.roots.indexOf(e);-1!==t&&(this.roots.splice(t,1),this.emit("rootRemoved",e))},l.prototype.getRoots=function(){return this.roots},l.prototype.removeNodeWithId=async function(e){const t=this.getNodeWithId(e);if(!t)return console.warn("ERROR: Attempted to remove non-existing node with ID:",e),!1;for(;t.children.length>0;){const e=t.children[0];await this.removeNodeWithId(e.id)||t.children.shift()}const n=this.getConnectionsTo(e).concat(this.getConnectionsFrom(e));for(let e=0;e<n.length;e++)this.removeConnection(n[e]);return this.setNodeParent(t,null),-1!==this.roots.indexOf(t.id)&&this.removeRootId(t.id),await this.emit("nodeRemoved",t),t.removeAllListeners(),delete this.nodes[e],await this.emit("nodeWasRemoved",t),!0},l.prototype.getAllConnections=function(){return this.connections},l.prototype.getInputPorts=function(){return this.inputPorts},l.prototype.getOutputPorts=function(){return this.outputPorts},l.prototype.addInputPort=function(e){this.inputPorts[e.name]=e,this.emit("inputPortAdded",e)},l.prototype.addOutputPort=function(e){this.outputPorts[e.name]=e,this.emit("outputPortAdded",e)},l.prototype.removeOutputPortWithName=function(e){if(this.outputPorts.hasOwnProperty(e)){var t=this.outputPorts[e];delete this.outputPorts[e],this.emit("outputPortRemoved",t)}},l.prototype.removeInputPortWithName=function(e){if(this.inputPorts.hasOwnProperty(e)){var t=this.inputPorts[e];delete this.inputPorts[e],this.emit("inputPortRemoved",t)}},l.prototype.updateInputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.inputPorts[n]&&(this.inputPorts[n].type=e[n].type,t=!0);t&&this.emit("inputPortTypesUpdated")},l.prototype.updateOutputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.outputPorts[n]&&(this.outputPorts[n].type=e[n].type,t=!0);t&&this.emit("outputPortTypesUpdated")},l.prototype.renameInputPortOnNodeWithId=function(e,t,n){var i=this.getConnectionsToPort(e,t);i.forEach(this.removeConnection.bind(this));var r=this.getNodeWithId(e),s=o({},r.getInputPort(t));s&&(r.removeInputPortWithName(t),s.name=n,r.addInputPort(s)),i.forEach((function(e){e.targetPort=n})),i.forEach(this.addConnection.bind(this))},l.prototype.renameOutputPortOnNodeWithId=function(e,t,n){var i=this.getConnectionsFromPort(e,t);i.forEach(this.removeConnection.bind(this));var r=this.getNodeWithId(e),s=o({},r.getOutputPort(t));r.removeOutputPortWithName(t),s.name=n,r.addOutputPort(s),i.forEach((function(e){e.sourcePort=n})),i.forEach(this.addConnection.bind(this))},l.prototype.setNodeParent=function(e,t,n){-1!==this.roots.indexOf(e.id)&&this.removeRootId(e.id),e.parent&&(this.emit("nodeParentWillBeRemoved",e),e.parent.removeChild(e)),e.emit("parentUpdated",t),t&&(t.addChild(e,n),this.emit("nodeParentUpdated",e))},l.prototype.importEditorNodeData=async function(e,t,n){var i=s.createFromExportData(e);if(await this.addNode(i),t&&this.setNodeParent(i,this.getNodeWithId(t),n),e.children)for(let t=0;t<e.children.length;t++){const n=e.children[t];await this.importEditorNodeData(n,i.id,t)}},l.prototype.reset=async function(){for(;this.roots.length;)await this.removeNodeWithId(this.roots[0]);for(const e of this.nodes)this.hasNodeWithId(e)&&await this.removeNodeWithId(e);if(this.nodes.length>0)throw new Error("Not all nodes were removed during a reset");if(this.connections.length>0)throw new Error("Not all connections were removed during a reset")},l.prototype.rename=function(e){var t=this.name;this.name=e,this.emit("renamed",{oldName:t,newName:e})},l.prototype.setMetadata=function(e,t){this.metadata[e]=t},l.prototype.getMetadata=function(e){return e?this.metadata[e]:this.metadata},l.createFromExportData=async function(e){var t=new l(e.name);if(e.metadata)for(const n in e.metadata)t.setMetadata(n,e.metadata[n]);if(e.ports&&e.ports.forEach((function(e){"input"!==e.plug&&"input/output"!==e.plug||t.addInputPort(e),"output"!==e.plug&&"input/output"!==e.plug||t.addOutputPort(e)})),e.nodes)for(const n of e.nodes)await t.importEditorNodeData(n);return e.connections&&e.connections.forEach((e=>t.addConnection(e))),e.roots&&e.roots.forEach((e=>t.addRootId(e))),t},e.exports=l},9520:(e,t,n)=>{"use strict";var i=n(2950),o=n(2824);function r(){o.call(this),this.components={},this.settings={},this.metadata={}}r.prototype=Object.create(o.prototype),r.prototype.importComponentFromEditorData=async function(e){var t=await i.createFromExportData(e);this.addComponent(t)},r.prototype.getBundleContainingComponent=function(e){return this.componentToBundleMap.get(e)},r.prototype.getBundlesContainingSheet=function(e){const t=new Set;for(const n of this.componentToBundleMap.keys()){const i=0!==n.indexOf("/#");(i&&"Default"===e||!i&&0===n.indexOf("/#"+e))&&t.add(this.componentToBundleMap.get(n))}return Array.from(t)},r.prototype.getBundleDependencies=function(e){const t=new Set,n=e=>{const i=this.componentIndex[e];for(const e of i.dependencies)t.has(e)||(t.add(e),n(e))};return n(e),Array.from(t)},r.prototype.importEditorData=async function(e){this.componentIndex=e.componentIndex,this.routerIndex=e.routerIndex,this.componentToBundleMap=new Map;for(const t in e.componentIndex){const n=e.componentIndex[t];for(const e of n.components)this.componentToBundleMap.set(e,t)}this.variants=e.variants||[],e.settings&&this.setSettings(e.settings),e.metadata&&this.setAllMetaData(e.metadata);for(const t of e.components)await this.importComponentFromEditorData(t);this.setRootComponentName(e.rootComponent)},r.prototype.setRootComponentName=function(e){this.rootComponent=e,this.emit("rootComponentNameUpdated",e)},r.prototype.getNodesWithType=function(e){for(var t=[],n=Object.keys(this.components),i=0;i<n.length;i++){var o=this.components[n[i]];t=t.concat(o.getNodesWithType(e))}return t},r.prototype.getComponentWithName=function(e){return this.components[e]},r.prototype.hasComponentWithName=function(e){return!!this.components[e]},r.prototype.getAllComponents=function(){return Object.keys(this.components).map((e=>this.components[e]))},r.prototype.getAllNodes=function(){for(var e=[],t=Object.keys(this.components),n=0;n<t.length;n++){var i=this.components[t[n]];e=e.concat(i.getAllNodes())}return e},r.prototype.addComponent=function(e){this.components[e.name]=e,this.getNodesWithType(e.name).forEach(this._addComponentPorts.bind(this)),e.getAllNodes().forEach(this._onNodeAdded.bind(this)),e.on("nodeAdded",this._onNodeAdded.bind(this),this),e.on("nodeRemoved",this._onNodeRemoved.bind(this),this),e.on("nodeWasRemoved",this._onNodeWasRemoved.bind(this),this),this.emit("componentAdded",e)},r.prototype.removeComponentWithName=async function(e){if(!1!==this.components.hasOwnProperty(e)){var t=this.components[e];await t.reset(),t.removeAllListeners(),delete this.components[t.name],this.emit("componentRemoved",t)}else console.error("GraphModel: Component with name "+e+" not in graph")},r.prototype.renameComponent=function(e,t){if(!1!==this.components.hasOwnProperty(e)){this.getNodesWithType(e).forEach((function(e){e.type=t}));var n=this.components[e];n.rename(t),delete this.components[e],this.components[t]=n}else console.error("GraphModel: Component with name "+e+" not in graph")},r.prototype._addComponentPorts=function(e){if(this.components.hasOwnProperty(e.type)){var t=this.components[e.type];const n=t.getInputPorts(),i=t.getOutputPorts();Object.keys(n).forEach((t=>{e.addInputPort(n[t])})),Object.keys(i).forEach((t=>{e.addOutputPort(i[t])}))}},r.prototype._onNodeAdded=function(e){this._addComponentPorts(e),this.emit("nodeAdded",e),this.emit("nodeAdded."+e.type,e)},r.prototype._onNodeRemoved=function(e){this.emit("nodeRemoved",e),this.emit("nodeRemoved."+e.type,e)},r.prototype._onNodeWasRemoved=function(e){this.emit("nodeWasRemoved",e),this.emit("nodeWasRemoved."+e.type,e)},r.prototype.reset=async function(){for(const e of Object.keys(this.components))await this.removeComponentWithName(e);this.setSettings({})},r.prototype.isEmpty=function(){return 0===Object.keys(this.components).length},r.prototype.setSettings=function(e){this.settings=e,this.emit("projectSettingsChanged",e)},r.prototype.getSettings=function(){return this.settings},r.prototype.setAllMetaData=function(e){for(const t in e)this.setMetaData(t,e[t])},r.prototype.setMetaData=function(e,t){this.metadata[e]&&JSON.stringify(this.metadata[e])===JSON.stringify(t)||(this.metadata[e]=t,this.emit("metadataChanged",{key:e,data:t}),this.emit("metadataChanged."+e,t))},r.prototype.getMetaData=function(e){return e?this.metadata[e]:this.metadata},r.prototype.getVariants=function(){return this.variants||[]},r.prototype.getVariant=function(e,t){return this.variants.find((n=>n.name===t&&n.typename===e))},r.prototype.updateVariant=function(e){const t=this.variants.findIndex((t=>t.name===e.name&&t.typename===e.typename));-1!==t&&this.variants.splice(t,1),this.variants.push(e),this.emit("variantUpdated",e)},r.prototype.updateVariantParameter=function(e,t,n,i,o){const r=this.getVariant(t,e);r?(o?(r.stateParameters.hasOwnProperty(o)||(r.stateParameters[o]={}),void 0===i?delete r.stateParameters[o][n]:r.stateParameters[o][n]=i):void 0===i?delete r.parameters[n]:r.parameters[n]=i,this.emit("variantUpdated",r)):console.log("updateVariantParameter: can't find variant",e,t)},r.prototype.updateVariantDefaultStateTransition=function(e,t,n,i){const o=this.getVariant(t,e);o&&(o.defaultStateTransitions[i]=n,this.emit("variantUpdated",o))},r.prototype.updateVariantStateTransition=function(e){const{variantTypeName:t,variantName:n,state:i,parameterName:o,curve:r}=e,s=this.getVariant(t,n);s&&(s.stateTransitions[i]||(s.stateTransitions[i]={}),s.stateTransitions[i][o]=r)},r.prototype.deleteVariant=function(e,t){const n=this.variants.findIndex((n=>n.name===t&&n.typename===e));-1!==n&&this.variants.splice(n,1)},e.exports=r},774:(e,t,n)=>{"use strict";var i=n(2824);function o(e,t){i.call(this),this.id=e,this.type=t,this.inputs=[],this.outputs=[],this.children=[],this.parameters={},this.inputPorts={},this.outputPorts={}}o.prototype=Object.create(i.prototype),o.prototype.setParameter=function(e,t,n){n?(this.stateParameters||(this.stateParameters={}),this.stateParameters[n]||(this.stateParameters[n]={}),void 0===t?delete this.stateParameters[n][e]:this.stateParameters[n][e]=t):void 0===t?delete this.parameters[e]:this.parameters[e]=t,this.emit("parameterUpdated",{name:e,value:t,state:n})},o.prototype.setParameters=function(e){Object.keys(e).forEach((t=>{this.setParameter(t,e[t])}))},o.prototype.setStateParameters=function(e){this.stateParameters=e},o.prototype.setStateTransitions=function(e){this.stateTransitions=e},o.prototype.setStateTransitionParamter=function(e,t,n){this.stateTransitions||(this.stateTransitions={}),t?this.stateTransitions[n][e]=t:delete this.stateTransitions[n][e]},o.prototype.setDefaultStateTransition=function(e,t){this.defaultStateTransitions||(this.defaultStateTransitions={}),this.defaultStateTransitions[t]=e},o.prototype.addInputPort=function(e){this.inputPorts[e.name]=e,this.emit("inputPortAdded",e)},o.prototype.getInputPort=function(e){return this.inputPorts[e]},o.prototype.getInputPorts=function(){return this.inputPorts},o.prototype.removeInputPortWithName=function(e){if(this.inputPorts.hasOwnProperty(e)){var t=this.inputPorts[e];delete this.inputPorts[e],this.emit("inputPortRemoved",t)}},o.prototype.updateInputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.inputPorts[n]&&(this.inputPorts[n].type=e[n].type,t=!0);t&&this.emit("inputPortTypesUpdated")},o.prototype.addOutputPort=function(e){this.outputPorts[e.name]=e,this.emit("outputPortAdded",e)},o.prototype.getOutputPort=function(e){return this.outputPorts[e]},o.prototype.getOutputPorts=function(){return this.outputPorts},o.prototype.removeOutputPortWithName=function(e){if(this.outputPorts.hasOwnProperty(e)){var t=this.outputPorts[e];delete this.outputPorts[e],this.emit("outputPortRemoved",t)}},o.prototype.updateOutputPortTypes=function(e){var t=!1;for(var n in e)void 0!==this.outputPorts[n]&&(this.outputPorts[n].type=e[n].type,t=!0);t&&this.emit("outputPortTypesUpdated")},o.prototype.addChild=function(e,t){e.parent=this,void 0===t?this.children.push(e):this.children.splice(t,0,e),this.emit("childAdded",e)},o.prototype.removeChild=function(e){e.parent=void 0;var t=this.children.indexOf(e);this.children.splice(t,1),this.emit("childRemoved",e)},o.prototype.reset=function(){this.removeAllListeners()},o.prototype.setVariant=function(e){this.variant=e,this.emit("variantUpdated",e)},o.createFromExportData=function(e){var t=new o(e.id,e.type);if(e.parameters&&t.setParameters(e.parameters),e.stateParameters&&t.setStateParameters(e.stateParameters),e.stateTransitions&&t.setStateTransitions(e.stateTransitions),e.defaultStateTransitions)for(const n in e.defaultStateTransitions)t.setDefaultStateTransition(e.defaultStateTransitions[n],n);return e.ports&&e.ports.forEach((function(e){"outputs"===e.plug&&(e.plug="output"),"input"!==e.plug&&"input/output"!==e.plug||t.addInputPort(e),"output"!==e.plug&&"input/output"!==e.plug||t.addOutputPort(e)})),e.variant&&t.setVariant(e.variant),t},e.exports=o},5917:(module,__unused_webpack_exports,__webpack_require__)=>{const OutputProperty=__webpack_require__(1179);function Node(e,t){this.id=t,this.context=e,this._dirty=!1,this._inputs={},this._inputValues={},this._outputs={},this._inputConnections={},this._outputList=[],this._isUpdating=!1,this._inputValuesQueue={},this._afterInputsHaveUpdatedCallbacks=[],this._internal={},this._signalsSentThisUpdate={},this._deleted=!1,this._deleteListeners=[],this._isFirstUpdate=!0,this._valuesFromConnections={}}Node.prototype.getInputValue=function(e){return this._inputValues[e]},Node.prototype.registerInput=function(e,t){if(this.hasInput(e))throw new Error("Input property "+e+" already registered");if(this._inputs[e]=t,t.type&&t.type.units){const n=t.type.defaultUnit||t.type.units[0];this._inputValues[e]={value:t.default,type:n}}else t.hasOwnProperty("default")&&(this._inputValues[e]=t.default)},Node.prototype.deregisterInput=function(e){if(!1===this.hasInput(e))throw new Error("Input property "+e+" doesn't exist");delete this._inputs[e],delete this._inputValues[e]},Node.prototype.registerInputs=function(e){for(const t in e)this.registerInput(t,e[t])},Node.prototype.getInput=function(e){if(!1!==this.hasInput(e))return this._inputs[e];console.log("Node "+this.name+": Invalid input property "+e)},Node.prototype.hasInput=function(e){return e in this._inputs},Node.prototype.registerInputIfNeeded=function(){},Node.prototype.setInputValue=function(name,value){const input=this.getInput(name);if(!input)return void console.log("node doesn't have input",name);const currentInputValue=this._inputValues[name];if(!1===isNaN(value)&&currentInputValue&&currentInputValue.unit){const e=Object.assign({},currentInputValue);e.value=value,value=e}if(this._inputValues[name]=value,"color"===input.type&&this.context&&this.context.styles)value=this.context.styles.resolveColor(value);else if("array"===input.type&&"string"==typeof value)try{value=eval(value),this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+name)}catch(e){value=[],console.log(e),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+name,{showGlobally:!0,message:"Invalid array<br>"+e.toString()})}input.set.call(this,value)},Node.prototype.hasOutput=function(e){return e in this._outputs},Node.prototype.registerOutput=function(e,t){if(this.hasOutput(e))throw new Error("Output property "+e+" already registered");const n=new OutputProperty({owner:this,getter:t.get||t.getter,name:e,onFirstConnectionAdded:t.onFirstConnectionAdded,onLastConnectionRemoved:t.onLastConnectionRemoved});this._outputs[e]=n,this._outputList.push(n)},Node.prototype.deregisterOutput=function(e){if(!1===this.hasOutput(e))throw new Error("Output property "+e+" isn't registered");const t=this._outputs[e];if(t.hasConnections())throw new Error("Output property "+e+" has connections and can't be removed");delete this._outputs[e];var n=this._outputList.indexOf(t);this._outputList.splice(n,1)},Node.prototype.registerOutputs=function(e){for(var t in e)this.registerOutput(t,e[t])},Node.prototype.registerOutputIfNeeded=function(){},Node.prototype.getOutput=function(e){if(!1===this.hasOutput(e))throw new Error("Node "+this.name+" doesn't have a port named "+e);return this._outputs[e]},Node.prototype.connectInput=function(e,t,n){if(!1===this.hasInput(e))throw new Error("Invalid connection, input doesn't exist. Trying to connect from "+t.name+" output "+n+" to "+this.name+" input "+e);var i=t.getOutput(n);if(i.registerConnection(this,e),this._inputConnections[e]||(this._inputConnections[e]=[]),this._inputConnections[e].push(i),t._signalsSentThisUpdate[n])this._setValueFromConnection(e,!0),this._setValueFromConnection(e,!1);else{var o=i.value;void 0!==o&&(this._setValueFromConnection(e,o),this.context&&this.context.connectionSentValue(i,i.value))}this.flagDirty()},Node.prototype.removeInputConnection=function(e,t,n){if(!this._inputConnections[e])throw new Error("Node removeInputConnection: Input doesn't exist");const i=this._inputConnections[e];for(let o=0;o<i.length;o++){const r=i[o];if(r.owner.id===t&&r.name===n){i.splice(o,1),r.owner.getOutput(n).deregisterConnection(this,e);break}}0===i.length&&delete this._valuesFromConnections[e]},Node.prototype.isInputConnected=function(e){return!!this._inputConnections.hasOwnProperty(e)&&this._inputConnections[e].some((e=>"Component Inputs"!==e.owner.name||e.owner.nodeScope.componentOwner.isInputConnected(e.name)))},Node.prototype.update=function(){if(!this._isUpdating&&!1!==this._dirty){this._updatedAtIteration!==this.context.updateIteration&&(this._updatedAtIteration=this.context.updateIteration,this._updateIteration=0,this._cyclicLoop&&(this._cyclicLoop=!1)),this._isUpdating=!0;try{for(;this._dirty&&!this._cyclicLoop;){this._updateDependencies(),this._dirty=!1;const e=Object.keys(this._inputValuesQueue);let t=!0;for(;t&&!this._cyclicLoop;){t=!1;for(let n=0;n<e.length;n++){const i=e[n],o=this._inputValuesQueue[i];o.length>0&&(this.setInputValue(i,o.shift()),o.length>0&&(t=!0))}const n=this._afterInputsHaveUpdatedCallbacks;this._afterInputsHaveUpdatedCallbacks=[];for(let e=0;e<n.length;e++)n[e].call(this)}this._updateIteration++,this._updateIteration>=100&&(this._cyclicLoop=!0)}}catch(e){throw this._isUpdating=!1,e}this._cyclicLoop&&(this.context.scheduleNextFrame((()=>{this.context.nodeIsDirty(this)})),this.context.editorConnection&&!this._cyclicWarningSent&&this.context.isWarningTypeEnabled("cyclicLoops")&&(this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"cyclic-loop",{showGlobally:!0,message:"Cyclic loop detected"}),this._cyclicWarningSent=!0,console.log("cycle detected",{id:this.id,name:this.name,component:this.nodeScope.componentOwner.name}))),this._isFirstUpdate=!1,this._isUpdating=!1}},Node.prototype._updateDependencies=function(){for(var e in this._inputConnections)for(var t=this._inputConnections[e],n=0;n<t.length;++n)t[n].owner.update()},Node.prototype.flagDirty=function(){if(!this._dirty){this._dirty=!0,this.context&&this.context.nodeIsDirty(this);for(var e=0;e<this._outputList.length;++e)this._outputList[e].flagDependeesDirty()}},Node.prototype.sendValue=function(e,t){if(!1===this.hasOutput(e))return void console.log("Error: Node",this.name,"doesn't have a output named",e);if(void 0===t)return;const n=this.getOutput(e);n.sendValue(t),this.context&&this.context.connectionSentValue(n,t)},Node.prototype.flagOutputDirty=function(e){const t=this.getOutput(e);this.sendValue(e,t.value)},Node.prototype.flagAllOutputsDirty=function(){for(const e of this._outputList)this.sendValue(e.name,e.value)},Node.prototype.sendSignalOnOutput=function(e){if(!1===this.hasOutput(e))return void console.log("Error: Node",this.name,"doesn't have a output named",e);const t=this.getOutput(e);t.sendValue(!0),t.sendValue(!1),this._signalsSentThisUpdate[e]=!0,this.scheduleAfterInputsHaveUpdated((function(){this._signalsSentThisUpdate[e]=!1})),this.context&&this.context.connectionSentSignal(t)},Node.prototype._setValueFromConnection=function(e,t){this._valuesFromConnections[e]=t,this.queueInput(e,t)},Node.prototype._hasInputBeenSetFromAConnection=function(e){return this._valuesFromConnections.hasOwnProperty(e)},Node.prototype.queueInput=function(e,t){if(this._inputValuesQueue[e]||(this._inputValuesQueue[e]=[]),this._isFirstUpdate){const n=this._inputValuesQueue[e][0];!0===n||(n instanceof Object&&n.unit&&t instanceof Object==0&&(t={value:t,unit:n.unit}),this._inputValuesQueue[e].length=0)}this._inputValuesQueue[e].push(t),this.flagDirty()},Node.prototype.scheduleAfterInputsHaveUpdated=function(e){this._afterInputsHaveUpdatedCallbacks.push(e),this.flagDirty()},Node.prototype.setNodeModel=function(e){this.model=e,e.on("parameterUpdated",this._onNodeModelParameterUpdated,this),e.on("variantUpdated",this._onNodeModelVariantUpdated,this),e.on("inputPortRemoved",(e=>{this.hasInput(e.name)&&this.deregisterInput(e.name)}),this),e.on("outputPortRemoved",(e=>{this.hasOutput(e.name)&&this.deregisterOutput(e.name)}),this)},Node.prototype.addDeleteListener=function(e){this._deleteListeners.push(e)},Node.prototype._onNodeDeleted=function(){this.model&&(this.model.removeListenersWithRef(this),this.model=void 0),this._deleted=!0;for(const e of this._deleteListeners)e.call(this)},Node.prototype._onNodeModelParameterUpdated=function(e){if(this.registerInputIfNeeded(e.name),void 0!==e.value)if(e.state){if(!this._getVisualStates)return void console.log("Node has nos visual states, but got a parameter for state",e.state);-1!==this._getVisualStates().indexOf(e.state)&&this.queueInput(e.name,e.value)}else this.queueInput(e.name,e.value);else{let t;const n=this.variant;e.state?n&&n.stateParameters.hasOwnProperty(e.state)&&n.stateParameters[e.state].hasOwnProperty(e.name)?t=n.stateParameters[e.state][e.name]:this.model.parameters.hasOwnProperty(e.name)?t=this.model.parameters[e.name]:n&&n.parameters.hasOwnProperty(e.name)&&(t=n.parameters[e.name]):n&&n.parameters.hasOwnProperty(e.name)&&(t=n.parameters[e.name]),void 0===t&&(t=this.context.getDefaultValueForInput(this.model.type,e.name),this._resetReactVirtualDOM&&this._resetReactVirtualDOM()),this.queueInput(e.name,t)}},Node.prototype._onNodeModelVariantUpdated=function(e){this.setVariant(e)},module.exports=Node},9288:(e,t,n)=>{"use strict";var i=n(1489),o=n(9995),r=n(6546);const s=n(8886);function a(e){(e=e||{}).runningInEditor=!!e.hasOwnProperty("runningInEditor")&&e.runningInEditor,this._dirtyNodes=[],this.callbacksAfterUpdate=[],this.graphModel=e.graphModel,this.platform=e.platform,this.eventEmitter=new i,this.eventEmitter.setMaxListeners(1e6),this.eventSenderEmitter=new i,this.eventSenderEmitter.setMaxListeners(1e6),this.globalValues={},this.globalsEventEmitter=new i,this.globalsEventEmitter.setMaxListeners(1e6),this.runningInEditor=e.runningInEditor,this.currentFrameTime=0,this.frameNumber=0,this.updateIteration=0,this.nodeRegister=new o(this),this.timerScheduler=new r(this.scheduleUpdate.bind(this)),this.componentModels={},this.debugInspectorsEnabled=!1,this.connectionsToPulse={},this.connectionsToPulseChanged=!1,this.debugInspectors={},this.connectionPulsingCallbackScheduled=!1,this.editorConnection=e.editorConnection,this.rootComponent=void 0,this._outputHistory={},this._signalHistory={},this.warningTypes={},this.bundleFetchesInFlight=new Map,this.variants=new s({graphModel:this.graphModel,getNodeScope:()=>this.rootComponent?this.rootComponent.nodeScope:null}),this.editorConnection&&(this.editorConnection.on("debugInspectorsUpdated",(e=>{this.onDebugInspectorsUpdated(e)})),this.editorConnection.on("getConnectionValue",(({clientId:e,connectionId:t})=>{if(this.editorConnection.clientId!==e)return;const n=this._outputHistory[t];this.editorConnection.sendConnectionValue(t,n?n.value:void 0)})))}a.prototype.setRootComponent=function(e){this.rootComponent=e},a.prototype.getCurrentTime=function(){return this.platform.getCurrentTime()},a.prototype.onDebugInspectorsUpdated=function(e){this.debugInspectorsEnabled&&(e=e.map((e=>{if("connection"===e.type){const t=e.connection;e.id=t.fromId+t.fromProperty}else"node"===e.type&&(e.id=e.nodeId);return e})),this.debugInspectors={},e.forEach((e=>this.debugInspectors[e.id]=e)),this.sendDebugInspectorValues())},a.prototype.updateDirtyNodes=function(){var e,t,n=!0,i=0;for(this.updateIteration++,this.isUpdating=!0;n&&i<10;){var o=this._dirtyNodes;for(this._dirtyNodes=[],e=0,t=o.length;e<t;++e)try{o[e]._deleted||o[e].update()}catch(e){console.error(e,e.stack)}var r=this.callbacksAfterUpdate;for(this.callbacksAfterUpdate=[],e=0,t=r.length;e<t;e++)try{r[e]()}catch(e){console.error(e)}n=this.callbacksAfterUpdate.length>0||this._dirtyNodes.length>0,i++}this.isUpdating=!1},a.prototype.update=function(){this.frameNumber++,this.updateDirtyNodes(),this.timerScheduler.hasPendingTimers()&&(this.scheduleUpdate(),this.timerScheduler.runTimers(this.currentFrameTime)),this.debugInspectorsEnabled&&this.sendDebugInspectorValues()},a.prototype.reset=function(){this.eventEmitter.emit("applicationDataReloaded");var e=this.eventEmitter;["frameStart","frameEnd"].forEach((function(t){e.removeAllListeners(t)})),this.globalValues={},this._dirtyNodes.length=0,this.callbacksAfterUpdate.length=0,this.timerScheduler.runningTimers=[],this.timerScheduler.newTimers=[],this.rootComponent=void 0,this.clearDebugInspectors()},a.prototype.nodeIsDirty=function(e){this._dirtyNodes.push(e),this.scheduleUpdate()},a.prototype.scheduleUpdate=function(){this.eventEmitter.emit("scheduleUpdate")},a.prototype.scheduleAfterUpdate=function(e){this.callbacksAfterUpdate.push(e),this.scheduleUpdate()},a.prototype.scheduleNextFrame=function(e){this.eventEmitter.once("frameStart",e),this.scheduleUpdate()},a.prototype.setGlobalValue=function(e,t){this.globalValues[e]=t,this.globalsEventEmitter.emit(e)},a.prototype.getGlobalValue=function(e){return this.globalValues[e]},a.prototype.registerComponentModel=function(e){if(this.componentModels.hasOwnProperty(e.name))throw new Error("Duplicate component name "+e.name);this.componentModels[e.name]=e;var t=this;e.on("renamed",(function(n){delete t.componentModels[n.oldName],t.componentModels[n.newName]=e}),this)},a.prototype.deregisterComponentModel=function(e){this.componentModels.hasOwnProperty(e.name)&&(this.componentModels[e.name].removeListenersWithRef(this),delete this.componentModels[e.name])},a.prototype.fetchComponentBundle=async function(e){const t=async e=>{const t=`/noodl_bundles/${e}.json`,n=await fetch(t);if(404===n.status)throw new Error("Component not found "+e);const i=await n.json();for(const e of i)!1===this.graphModel.hasComponentWithName(e.name)&&await this.graphModel.importComponentFromEditorData(e)};if(this.bundleFetchesInFlight.has(e))await this.bundleFetchesInFlight.get(e);else{const n=t(e);this.bundleFetchesInFlight.set(e,n),await n}},a.prototype.getComponentModel=async function(e){if(!e)throw new Error("Component instance must have a name");if(!1===this.componentModels.hasOwnProperty(e)){const t=this.graphModel.getBundleContainingComponent(e);if(!t)throw new Error("Can't find component model for "+e);for(const e of this.graphModel.getBundleDependencies(t))this.fetchComponentBundle(e);await this.fetchComponentBundle(t)}return this.componentModels[e]},a.prototype.hasComponentModelWithName=function(e){return this.componentModels.hasOwnProperty(e)},a.prototype.createComponentInstanceNode=async function(e,t,i,o){var r=new(n(5097))(this,t,i);r.name=e;for(const e in o)r[e]=o[e];const s=await this.getComponentModel(e);return await r.setComponentModel(s),r},a.prototype._formatConnectionValue=function(e){if("object"==typeof e&&e&&e.constructor&&"Node"===e.constructor.name)e="<Node> "+e.name;else if("object"==typeof e&&"undefined"!=typeof window&&e instanceof HTMLElement)e=`DOM Node <${e.tagName}>`;else{if("string"==typeof e&&!e.startsWith("[Signal]"))return'"'+e+'"';if(Number.isNaN(e))return"NaN"}return e},a.prototype.connectionSentValue=function(e,t){if(!this.editorConnection||!this.editorConnection.isConnected()||!this.debugInspectorsEnabled)return;const n=this.getCurrentTime();if(this._outputHistory[e.id]={value:t,timestamp:n},this.connectionsToPulse.hasOwnProperty(e.id))return void(this.connectionsToPulse[e.id].timestamp=n);const i=[];e.connections.forEach((t=>{i.push(e.owner.id+e.name+t.node.id+t.inputPortName)})),this.connectionsToPulse[e.id]={timestamp:n,connections:i},this.connectionsToPulseChanged=!0,!1===this.connectionPulsingCallbackScheduled&&(this.connectionPulsingCallbackScheduled=!0,setTimeout(this.clearOldConnectionPulsing.bind(this),100))},a.prototype.connectionSentSignal=function(e){const t=e.id;this._signalHistory.hasOwnProperty(t)||(this._signalHistory[t]={count:0}),this._signalHistory[t].count++,this.connectionSentValue(e,"[Signal] Trigger count "+this._signalHistory[t].count)},a.prototype.clearDebugInspectors=function(){this.debugInspectors={},this.connectionsToPulse={},this.editorConnection.sendPulsingConnections(this.connectionsToPulse)},a.prototype.clearOldConnectionPulsing=function(){this.connectionPulsingCallbackScheduled=!1;var e=this.getCurrentTime(),t=this;Object.keys(this.connectionsToPulse).forEach((function(n){var i=t.connectionsToPulse[n];e-i.timestamp>100&&(t.connectionsToPulseChanged=!0,delete t.connectionsToPulse[n])})),this.connectionsToPulseChanged&&(this.connectionsToPulseChanged=!1,this.editorConnection.sendPulsingConnections(this.connectionsToPulse)),Object.keys(this.connectionsToPulse).length>0&&(this.connectionPulsingCallbackScheduled=!0,setTimeout(this.clearOldConnectionPulsing.bind(this),500))},a.prototype._getDebugInspectorValueForNode=function(e){if(!this.rootComponent)return;const t=this.rootComponent.nodeScope.getNodesWithIdRecursive(e),n=t[t.length-1];if(n&&n.getInspectInfo){const t=n.getInspectInfo();if(void 0!==t)return{type:"node",id:e,value:t}}},a.prototype.sendDebugInspectorValues=function(){const e=[];for(const t in this.debugInspectors){const n=this.debugInspectors[t];if("connection"===n.type&&this._outputHistory.hasOwnProperty(t)){const n=this._outputHistory[t].value;e.push({type:"connection",id:t,value:this._formatConnectionValue(n)})}else if("node"===n.type){const n=this._getDebugInspectorValueForNode(t);n&&e.push(n)}}e.length>0&&this.editorConnection.sendDebugInspectorValues(e),this.connectionsToPulseChanged&&(this.connectionsToPulseChanged=!1,this.editorConnection.sendPulsingConnections(this.connectionsToPulse))},a.prototype.setDebugInspectorsEnabled=function(e){this.debugInspectorsEnabled=e,this.editorConnection.debugInspectorsEnabled=e,e&&this.sendDebugInspectorValues()},a.prototype.sendGlobalEventFromEventSender=function(e,t){this.eventSenderEmitter.emit(e,t)},a.prototype.setPopupCallbacks=function({onShow:e,onClose:t}){this.onShowPopup=e,this.onClosePopup=t},a.prototype.showPopup=async function(e,t,n){if(!this.onShowPopup)return;const i=this.rootComponent.nodeScope,o=await i.createNode(e);for(const e in t)o.setInputValue(e,t[e]);o.popupParent=n?.senderNode||null;const r=i.createPrimitiveNode("Group");r.setInputValue("flexDirection","node"),r.setInputValue("cssClassName","noodl-popup");const s=this.graphModel.getSettings().bodyScroll;r.setInputValue("position",s?"fixed":"absolute");var a=o.nodeScope.getNodesWithType("NavigationClosePopup");if(a&&a.length>0)for(var l=0;l<a.length;l++)a[l]._setCloseCallback(((e,t)=>{this.scheduleNextFrame((()=>{i.hasNodeWithId(r.id)&&(this.onClosePopup(r),i.deleteNode(r),n&&n.onClosePopup&&n.onClosePopup(e,t))}))}));this.onShowPopup(r),requestAnimationFrame((()=>{r.addChild(o)}))},a.prototype.setWarningTypes=function(e){Object.assign(this.warningTypes,e)},a.prototype.isWarningTypeEnabled=function(e){return!this.warningTypes.hasOwnProperty(e)||!!this.warningTypes[e]},a.prototype.getDefaultValueForInput=function(e,t){if(!1===this.nodeRegister.hasNode(e))return;const n=this.nodeRegister.getNodeMetadata(e).inputs[t];return n?n.type.defaultUnit?{value:n.default,unit:n.type.defaultUnit}:n.default:void 0},e.exports=a},2236:(e,t,n)=>{const i=n(5917),o=n(1734);function r(e,t,n){const i=e.registerInputIfNeeded;e.registerInputIfNeeded=function(o){if(i&&i.call(e,o),e.hasInput(o)||!o.startsWith(t))return;const r=Number(o.slice(t.length+1));e.registerInput(o,{type:n.type,set:n.createSetter.call(e,r)})}}e.exports={defineNode:function(e){if(!e.category)throw new Error("Node must have a category");if(!e.name)throw new Error("Node must have a name");const t={inputs:{},outputs:{},category:e.category,dynamicports:e.dynamicports,exportDynamicPorts:e.exportDynamicPorts,useVariants:e.useVariants,allowChildren:e.allowChildren,allowChildrenWithCategory:e.allowChildrenWithCategory,singleton:e.singleton,connectionPanel:e.connectionPanel,allowAsChild:e.allowAsChild,visualStates:e.visualStates,panels:e.panels,color:e.color,usePortAsLabel:e.usePortAsLabel,portLabelTruncationMode:e.portLabelTruncationMode,name:e.name,displayNodeName:e.displayNodeName||e.displayName,deprecated:e.deprecated,haveComponentPorts:e.haveComponentPorts,version:e.version,module:e.module,docs:e.docs,allowAsExportRoot:e.allowAsExportRoot};e._internal=e._internal||{},e.prototypeExtensions=e.methods||e.prototypeExtensions||{},e.inputs=e.inputs||{},e.outputs=e.outputs||{},e.initialize=e.initialize||function(){};let n={};function s(e,t){i.call(this,e,t)}(function(e,t,n){Object.keys(n).forEach((function(i){!function(e,t,n,i){if(e.hasOwnProperty(n))throw new Error("Input property "+n+" already registered");i.set||i.valueChangedToTrue||(i.set=()=>{}),i.set&&(e[n]={set:i.set},["color","textStyle","array"].forEach((t=>{!i.type||i.type!==t&&i.type.name!==t||(e[n].type=t)}))),i.setUnitType&&(e[n].setUnitType=i.setUnitType),t.inputs[n]={displayName:i.displayName,editorName:i.editorName,group:i.group,type:i.type,default:i.default,index:i.index,exportToEditor:!i.hasOwnProperty("exportToEditor")||i.exportToEditor,inputPriority:i.inputPriority||0,tooltip:i.tooltip,tab:i.tab,popout:i.popout,allowVisualStates:i.allowVisualStates},i.valueChangedToTrue&&(t.inputs[n].type={name:"signal",allowConnectionsOnly:!0})}(e,t,i,n[i])}))})(n,t,e.inputs),function(e,t){Object.keys(t).forEach((function(n){var i=t[n];e.outputs[n]={displayName:i.displayName,editorName:i.editorName,group:i.group,type:i.type,index:i.index,exportToEditor:!i.hasOwnProperty("exportToEditor")||i.exportToEditor}}))}(t,e.outputs),Object.keys(e.prototypeExtensions).forEach((function(t){e.prototypeExtensions[t].value||(e.prototypeExtensions[t]={value:e.prototypeExtensions[t]})})),s.prototype=Object.create(i.prototype,e.prototypeExtensions),Object.defineProperty(s.prototype,"name",{value:e.name}),e.getInspectInfo&&(s.prototype.getInspectInfo=e.getInspectInfo),e.nodeScopeDidInitialize&&(s.prototype.nodeScopeDidInitialize=e.nodeScopeDidInitialize);const a=function(i,a,l){const u=new s(i,a);var c,p;return u._inputs=Object.create(n),Object.keys(e.inputs).forEach((function(t){var n=e.inputs[t];n.valueChangedToTrue&&(u._inputs[t]={set:o.createSetter({valueChangedToTrue:n.valueChangedToTrue})})})),Object.keys(e.outputs).forEach((function(t){var n=e.outputs[t];"signal"===n.type?u.registerOutput(t,{getter:function(){}}):u.registerOutput(t,n)})),e.numberedInputs&&function(e,t){for(const n of Object.keys(t))r(e,n,t[n])}(u,e.numberedInputs),u.nodeScope=l,c=u._inputValues,p=t.inputs,Object.keys(p).forEach((e=>{const t=p[e].default;void 0!==t&&(p[e].type.defaultUnit?c[e]={unit:p[e].type.defaultUnit,value:t}:c[e]=t)})),e.initialize.call(u),u};return a.metadata=t,e.numberedInputs&&function(e,t,n){const i=Object.keys(n);i.length&&(e.setupNumberedInputDynamicPorts=function(e,o){const r=e.editorConnection;function s(e){const t=i.map((t=>function(e,t,n){const i=e.component.getConnectionsTo(e.id).map((e=>e.targetPort)),o=Object.keys(e.parameters).concat(i).filter((e=>e.startsWith(t+" "))),r=(o.length?1+Math.max(...o.map((e=>Number(e.slice(t.length+1))))):0)+1,s=[];for(let e=0;e<r;e++){const i={name:t+" "+e,displayName:(n.displayPrefix||t)+" "+e,type:n.type,plug:"input",group:n.group};n.hasOwnProperty("index")&&(i.index=n.index+e),s.push(i)}return s}(e,t,n[t]))).flat();r.sendDynamicPorts(e.id,t)}r&&r.isRunningLocally()&&o.on("nodeAdded."+t,(e=>{s(e),e.on("parameterUpdated",(()=>{s(e)})),e.on("inputConnectionAdded",(()=>{s(e)})),e.on("inputConnectionRemoved",(()=>{s(e)}))}))})}(a,e.name,e.numberedInputs),a},extend:function e(t,n){for(var i in n)if("initialize"===i&&t.initialize){var o=t.initialize;t.initialize=function(){o.call(this),n.initialize.call(this)}}else n[i]&&n[i].constructor===Object?t[i]=e(t[i]||{},n[i]):n[i]&&n[i].constructor===Array&&t[i]&&t[i].constructor==Array?t[i]=t[i].concat(n[i]):t[i]=n[i];return t}}},3286:e=>{"use strict";function t(e,t,n){var i={name:e,type:t.type,plug:n};return t.group&&(i.group=t.group),t.displayName&&(i.displayName=t.displayName),t.description&&(i.description=t.description),t.editorName&&(i.editorName=t.editorName),void 0!==t.default&&(i.default=t.default),t.hasOwnProperty("index")&&(i.index=t.index),t.tooltip&&(i.tooltip=t.tooltip),t.tab&&(i.tab=t.tab),t.popout&&(i.popout=t.popout),t.allowVisualStates&&(i.allowVisualStates=t.allowVisualStates),i}e.exports=function(e){var n={typecasts:[{from:"string",to:["number","boolean","image","color","enum","textStyle","dimension","array","object"]},{from:"boolean",to:["number","string","signal"]},{from:"number",to:["boolean","string","dimension"]},{from:"date",to:["string"]},{from:"signal",to:["boolean","number"]},{from:"image",to:[]},{from:"cloudfile",to:["string","image"]},{from:"color",to:[]},{from:"enum",to:[]},{from:"object",to:[]},{from:"domelement",to:[]},{from:"reference",to:[]},{from:"font",to:[]},{from:"textStyle",to:["string"]},{from:"collection",to:["array"]},{from:"array",to:["collection"]}],dynamicports:[{type:"conditionalports",name:"basic"},{type:"expand",name:"basic"}],colors:{nodes:{component:{base:"#643D8B",baseHighlighted:"#79559b",header:"#4E2877",headerHighlighted:"#643d8b",outline:"#4E2877",outlineHighlighted:"#b58900",text:"#dbd0e4"},visual:{base:"#315272",baseHighlighted:"#4d6784",header:"#173E5D",headerHighlighted:"#315272",outline:"#173E5D",outlineHighlighted:"#b58900",text:"#cfd5de"},data:{base:"#465524",baseHighlighted:"#5b6a37",header:"#314110",headerHighlighted:"#465524",outline:"#314110",outlineHighlighted:"#b58900",text:"#d2d6c5"},javascript:{base:"#7E3660",baseHighlighted:"#944e74",header:"#67214B",headerHighlighted:"#7e3660",outline:"#67214B",outlineHighlighted:"#d57bab",text:"#e4cfd9"},default:{base:"#4C4F59",baseHighlighted:"#62656e",header:"#373B45",headerHighlighted:"#4c4f59",outline:"#373B45",outlineHighlighted:"#b58900",text:"#d3d4d6"}},connections:{signal:{normal:"#006f82",highlighted:"#7ec2cf",pulsing:"#ffffff"},default:{normal:"#875d00",highlighted:"#e5ae32",pulsing:"#ffffff"}}},nodetypes:[{name:"Component Children",shortDesc:"This node is a placeholder for where children of this component will be inserted.",docs:"https://docs.noodl.net/nodes/component-utilities/component-children",color:"component",allowAsChild:!0,category:"Visual",haveComponentChildren:["Visual"]}]},i=Object.keys(e._constructors);i.forEach((function(i){var o=e._constructors[i].metadata,r={name:i};n.nodetypes.push(r),o.version&&(r.version=o.version),o.displayNodeName&&(r.displayNodeName=o.displayNodeName),o.shortDesc&&(r.shortDesc=o.shortDesc),o.module&&(r.module=o.module),o.deprecated&&(r.deprecated=!0),o.haveComponentPorts&&(r.haveComponentPorts=!0),"Visual"===o.category&&(r.allowAsChild=!0,r.allowAsExportRoot=!0,r.color="visual"),void 0!==o.allowAsExportRoot&&(r.allowAsExportRoot=o.allowAsExportRoot),o.allowChildren&&(r.allowChildrenWithCategory=["Visual"],r.color="visual"),o.allowChildrenWithCategory&&(r.allowChildrenWithCategory=o.allowChildrenWithCategory),o.singleton&&(r.singleton=!0),o.allowAsChild&&(r.allowAsChild=!0),o.docs&&(r.docs=o.docs),o.shortDocs?r.shortDocs=o.shortDocs:o.docs&&0===o.docs.indexOf("https://docs.noodl.net")&&(r.shortDocs=o.docs.replace("/#","")+"-short.md"),r.category=o.category,o.panels&&(r.panels=o.panels),o.usePortAsLabel&&(r.usePortAsLabel=o.usePortAsLabel,r.portLabelTruncationMode=o.portLabelTruncationMode),o.color&&(r.color=o.color),o.dynamicports&&(r.dynamicports=function(e){const n=[];for(const i of e.dynamicports)if(i.ports||i.template||i.port||i.channelPort)n.push(i);else if(i.inputs||i.outputs){const o=[];if(i.inputs)for(const n of i.inputs)o.push(t(n,e.inputs[n],"input"));if(i.outputs)for(const n of i.outputs)o.push(t(n,e.outputs[n],"output"));const r={name:i.name||"conditionalports/basic",condition:i.condition,ports:o};n.push(r)}return n}(o)),o.exportDynamicPorts&&(r.exportDynamicPorts=o.exportDynamicPorts),o.visualStates&&(r.visualStates=o.visualStates),o.useVariants&&(r.useVariants=o.useVariants),o.connectionPanel&&(r.connectionPanel=o.connectionPanel),r.ports=[];var s=r.dynamicports||[],a={},l={};s.filter((e=>void 0!==e.channelPort)).forEach((e=>{l[e.channelPort.plug+"/"+e.channelPort.name]=!0})),s.length&&(r.dynamicports=s),Object.keys(o.inputs).forEach((function(e){if(!a.hasOwnProperty("input/"+e)&&!l.hasOwnProperty("input/"+e)){var n=o.inputs[e];!1!==n.exportToEditor&&r.ports.push(t(e,n,"input"))}})),Object.keys(o.outputs).forEach((function(e){var t,n,i;a.hasOwnProperty("output/"+e)||l.hasOwnProperty("output/"+e)||(t=e,n=o.outputs[e],i={name:t,type:n.type,plug:"output"},n.group&&(i.group=n.group),n.displayName&&(i.displayName=n.displayName),n.editorName&&(i.editorName=n.editorName),n.hasOwnProperty("index")&&(i.index=n.index),r.ports.push(i))}))})),n.nodeIndex={coreNodes:[{name:"UI Elements",description:"Buttons, inputs, containers, media",type:"visual",subCategories:[{name:"Basic Elements",items:["Group","net.noodl.visual.columns","Text","Image","Video","Circle","net.noodl.visual.icon"]},{name:"UI Controls",items:["net.noodl.controls.button","net.noodl.controls.checkbox","net.noodl.controls.options","net.noodl.controls.radiobutton","Radio Button Group","net.noodl.controls.range","net.noodl.controls.textinput"]}]},{name:"Navigation & Popups",description:"Page routing, navigation, popups",type:"logic",subCategories:[{name:"Navigation",items:["Router","RouterNavigate","PageInputs","net.noodl.externallink","PageStackNavigateToPath"]},{name:"Component Stack",items:["Page Stack","PageStackNavigate","PageStackNavigateBack"]},{name:"Popups",items:["NavigationShowPopup","NavigationClosePopup"]}]},{name:"Logic & Utilities",description:"Logic, events, string manipulation",type:"logic",subCategories:[{name:"General Utils",items:["States","Value Changed","Timer","Color Blend","Number Remapper","Counter","Drag","net.noodl.animatetovalue"]},{name:"Logic",items:["Boolean To String","Switch","And","Or","Condition","Inverter"]},{name:"Events",items:["Event Sender","Event Receiver"]},{name:"String Manipulation",items:["Substring","String Mapper","String Format","Date To String","Unique Id"]},{name:"System",items:["Screen Resolution","Open File Picker"]},{name:"Variables",items:["String","Boolean","Color","Number"]}]},{name:"Component Utilities",description:"Component inputs, outputs & object",type:"component",subCategories:[{name:"",items:["Component Inputs","Component Outputs","Component Children","net.noodl.ComponentObject","net.noodl.ParentComponentObject","net.noodl.SetComponentObjectProperties","net.noodl.SetParentComponentObjectProperties"]}]},{name:"Read & Write Data",description:"Arrays, objects, cloud data",type:"data",subCategories:[{name:"",items:["RunTasks","For Each","For Each Actions","Model2","SetModelProperties","NewModel","Set Variable","Variable2"]},{name:"Array",items:["Collection2","CollectionNew","CollectionRemove","CollectionClear","CollectionInsert","Filter Collection","Map Collection","Static Data"]},{name:"Cloud Data",items:["DbModel2","NewDbModelProperties","FilterDBModels","SetDbModelProperties","DbCollection2","DeleteDbModelProperties","AddDbModelRelation","RemoveDbModelRelation","Cloud File","Upload File","CloudFunction2","DbConfig"]},{name:"User",items:["net.noodl.user.LogIn","net.noodl.user.LogOut","net.noodl.user.SignUp","net.noodl.user.User","net.noodl.user.SetUserProperties","net.noodl.user.VerifyEmail","net.noodl.user.SendEmailVerification","net.noodl.user.ResetPassword","net.noodl.user.RequestPasswordReset"]},{name:"External Data",items:["REST2"]}]},{name:"Custom Code",description:"Custom JavaScript and CSS",type:"javascript",subCategories:[{name:"",items:["Expression","JavaScriptFunction","Javascript2","CSS Definition"]}]},{name:"Cloud Functions",description:"Nodes to be used in cloud functions",type:"data",subCategories:[{name:"",items:["noodl.cloud.request","noodl.cloud.response"]},{name:"Cloud Data",items:["noodl.cloud.aggregate"]}]}]};const o=[];return i.forEach((t=>{e._constructors[t].metadata.module&&o.push(t)})),o.length&&(n.nodeIndex.moduleNodes=[{name:"",items:o}]),n}},9995:e=>{"use strict";function t(e){this._constructors={},this.context=e}t.prototype.register=function(e){var t=e.metadata.name;this._constructors[t]=e},t.prototype.createNode=function(e,t,n){if(!1===this._constructors.hasOwnProperty(e))throw new Error("Unknown node type with name "+e);return this._constructors[e](this.context,t,n)},t.prototype.getNodeMetadata=function(e){if(!1===this._constructors.hasOwnProperty(e))throw new Error("Unknown node type with name "+e);return this._constructors[e].metadata},t.prototype.hasNode=function(e){return this._constructors.hasOwnProperty(e)},t.prototype.getInputType=function(e,t){const n=this.getNodeMetadata(e);return n.inputs[t]&&n.inputs[t].type},e.exports=t},1318:e=>{"use strict";e.exports={node:{name:"Component Inputs",shortDesc:"This node is used to define the inputs of a component.",docs:"https://docs.noodl.net/nodes/component-utilities/component-inputs",panels:[{name:"PortEditor",context:["select","connectFrom"],title:"Inputs",plug:"output",type:{name:"*"},canArrangeInGroups:!0},{name:"PropertyEditor",hidden:!0}],getInspectInfo(){return{type:"value",value:this.nodeScope.componentOwner._internal.inputValues}},color:"component",haveComponentPorts:!0,category:"Component Utilities",methods:{registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:function(){return this.nodeScope.componentOwner._internal.inputValues[e]}})},_updateDependencies:function(){this.nodeScope.componentOwner.update()}}}}},5097:(e,t,n)=>{"use strict";var i=n(5917),o=n(7852);let r=0;function s(e,t,n){i.call(this,e,t),this.nodeScope=new o(e,this),this.parentNodeScope=n,this._internal.childRoot=null,this._internal.componentOutputValues={},this._internal.componentOutputs=[],this._internal.componentInputs=[],this._internal.inputValues={},this._internal.roots=[],this._internal.instanceId="__$ndl_componentInstaceId"+r,this.nodeScope.modelScope=n?n.modelScope:void 0,r++}s.prototype=Object.create(i.prototype,{setComponentModel:{value:async function(e){this.componentModel=e;var t=this;await this.nodeScope.setComponentModel(e),this._internal.componentInputs=this.nodeScope.getNodesWithType("Component Inputs"),this._internal.componentOutputs=this.nodeScope.getNodesWithType("Component Outputs"),Object.values(e.getInputPorts()).forEach(this.registerComponentInputPort.bind(this)),Object.values(e.getOutputPorts()).forEach(this.registerComponentOutputPort.bind(this));const n=e.roots||[];this._internal.roots=n.map((e=>this.nodeScope.getNodeWithId(e))),e.on("rootAdded",(e=>{this._internal.roots.push(this.nodeScope.getNodeWithId(e)),this.forceUpdate()}),this),e.on("rootRemoved",(function(e){const t=this._internal.roots.findIndex((t=>t.id===e));-1!==t&&this._internal.roots.splice(t,1),this.forceUpdate()}),this),e.on("inputPortAdded",this.registerComponentInputPort.bind(this),this),e.on("outputPortAdded",this.registerComponentOutputPort.bind(this),this),e.on("inputPortRemoved",(function(e){t.hasInput(e.name)&&t.deregisterInput(e.name)}),this),e.on("outputPortRemoved",(function(e){this.hasOutput(e.name)&&t.deregisterOutput(e.name)}),this),e.on("nodeAdded",(function(e){"Component Inputs"===e.type?t._internal.componentInputs.push(t.nodeScope.getNodeWithId(e.id)):"Component Outputs"===e.type&&t._internal.componentOutputs.push(t.nodeScope.getNodeWithId(e.id))}),this),e.on("nodeRemoved",(function(e){function n(e,t){return e.filter((e=>e.id!==t))}"Component Inputs"===e.type?t._internal.componentInputs=n(t._internal.componentInputs,e.id):"Component Outputs"===e.type&&(t._internal.componentOutputs=n(t._internal.componentOutputs,e.id))}),this),e.on("renamed",(function(e){t.name=e.newName}),this)}},_onNodeDeleted:{value:function(){this.componentModel&&(this.componentModel.removeListenersWithRef(this),this.componentModel=void 0),this.nodeScope.reset(),i.prototype._onNodeDeleted.call(this)}},registerComponentInputPort:{value:function(e){this.registerInput(e.name,{set:function(t){this._internal.inputValues[e.name]=t,this._internal.componentInputs.forEach((function(t){t.registerOutputIfNeeded(e.name),t.flagOutputDirty(e.name)}))}})}},registerComponentOutputPort:{value:function(e){this.registerOutput(e.name,{getter:function(){return this._internal.componentOutputValues[e.name]}})}},setOutputFromComponentOutput:{value:function(e,t){!1!==this.hasOutput(e)&&(this._internal.creatorCallbacks&&this._internal.creatorCallbacks.onOutputChanged&&this._internal.creatorCallbacks.onOutputChanged(e,t,this._internal.componentOutputValues[e]),this._internal.componentOutputValues[e]=t,this.flagOutputDirty(e))}},setChildRoot:{value:function(e){const t=this._internal.childRoot,n=e;if(this._internal.childRoot=n,this.model&&this.model.children){const e=this.parentNodeScope,i=this.model.children.filter((e=>"Component Children"!==e.type)).map((t=>e.getNodeWithId(t.id)));if(t)for(let e=0;e<i.length;e++)t.isChild(i[e])&&t.removeChild(i[e]);if(n)for(let e=0;e<i.length;e++){const t=i[e],n=t.model.parent.children.indexOf(t.model);this.addChild(t,n)}}}},getChildRootIndex:{value:function(){if(!this._internal.childRoot||!this._internal.childRoot.model||!this._internal.childRoot.model.children)return 0;for(var e=this._internal.childRoot.model.children,t=0;t<e.length;t++)if("Component Children"===e[t].type)return t;return 0}},getChildRoot:{value:function(){return this._internal.childRoot?this._internal.childRoot:null}},getRoots:{value:function(){return this._internal.roots}},render:{value:function(){return 0===this._internal.roots.length?null:this._internal.roots[0].render()}},setChildIndex:{value:function(e){this.getRoots().forEach((t=>t.setChildIndex&&t.setChildIndex(e)))}},addChild:{value:function(e,t){this.getChildRoot().addChild(e,t+this.getChildRootIndex())}},removeChild:{value:function(e){this.getChildRoot().removeChild(e)}},getChildren:{value:function(e){const t=this.getChildRoot();return t?t.getChildren():[]}},isChild:{value:function(e){return!!this.getChildRoot()&&this.getChildRoot().isChild(e)}},contains:{value:function(e){return this.getRoots().some((t=>t.contains&&t.contains(e)))}},flagDirty:{value:function(){if(!this._dirty){i.prototype.flagDirty.call(this);for(var e=this._internal.componentInputs,t=0,n=e.length;t<n;t++)e[t].flagDirty();this._internal.componentOutputs.forEach((function(e){e.flagDirty()}))}}},getRef:{value:function(){const e=this._internal.roots[0];return e?e.getRef():void 0}},update:{value:function(){i.prototype.update.call(this),this._internal.componentOutputs.forEach((function(e){e.update()}))}},forceUpdate:{value:function(){this.parent&&(this.parent.cachedChildren=void 0,this.parent.forceUpdate())}},getInstanceId:{value(){return this._internal.instanceId}}}),s.prototype.constructor=s,e.exports=s},4204:e=>{"use strict";e.exports={node:{category:"Component Utilities",name:"Component Outputs",shortDesc:"This node is used to define the outputs of a component.",docs:"https://docs.noodl.net/nodes/component-utilities/component-outputs",panels:[{name:"PortEditor",context:["select","connectTo"],title:"Outputs",plug:"input",type:{name:"*"},canArrangeInGroups:!0},{name:"PropertyEditor",hidden:!0}],color:"component",haveComponentPorts:!0,prototypeExtensions:{registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set:function(t){this.nodeScope.componentOwner.setOutputFromComponentOutput(e,t)}})}}}}},7504:e=>{"use strict";const t={name:"And",docs:"https://docs.noodl.net/nodes/logic/and",category:"Logic",initialize:function(){this._internal.inputs=[]},getInspectInfo(){return n(this._internal.inputs)},numberedInputs:{input:{displayPrefix:"Input",type:"boolean",createSetter:e=>function(t){if(t=!!t,this._internal.inputs[e]===t)return;this._internal.inputs[e]=t;const i=n(this._internal.inputs);this._internal.result!==i&&(this._internal.result=i,this.flagOutputDirty("result"))}}},outputs:{result:{type:"boolean",displayName:"Result",get(){return this._internal.result}}}};function n(e){return e.length>0&&!1===e.some((e=>!e))}e.exports={node:t}},2897:e=>{"use strict";e.exports={node:{name:"Boolean To String",docs:"https://docs.noodl.net/nodes/utilities/boolean-to-string",category:"Utilities",initialize:function(){this._internal.inputs=[],this._internal.currentSelectedIndex=0,this._internal.indexChanged=!1,this._internal.trueString="",this._internal.falseString=""},inputs:{trueString:{displayName:"String for true",type:"string",set:function(e){this._internal.trueString!==e&&(this._internal.trueString=e,this._internal.currentInput&&this.flagOutputDirty("currentValue"))}},falseString:{displayName:"String for false",type:"string",set:function(e){this._internal.falseString!==e&&(this._internal.falseString=e,this._internal.currentInput||this.flagOutputDirty("currentValue"))}},input:{type:{name:"boolean"},displayName:"Selector",set:function(e){this._internal.currentInput!==e&&(this._internal.currentInput=e,this.flagOutputDirty("currentValue"),this.sendSignalOnOutput("inputChanged"))}}},outputs:{currentValue:{type:"string",displayName:"Current Value",group:"Value",getter:function(){return this._internal.currentInput?this._internal.trueString:this._internal.falseString}},inputChanged:{type:"signal",displayName:"Selector Changed",group:"Signals"}}}}},2869:e=>{"use strict";const t={name:"Condition",docs:"https://docs.noodl.net/nodes/utilities/logic/condition",category:"Logic",initialize:function(){},getInspectInfo(){const e=this.getInputValue("condition");let t;return void 0===e&&(t="[No input]"),t=e,[{type:"value",value:t}]},inputs:{condition:{type:"boolean",displayName:"Condition",group:"General",set(e){this.isInputConnected("eval")||this.scheduleEvaluate()}},eval:{type:"signal",displayName:"Evaluate",group:"Actions",valueChangedToTrue(){this.scheduleEvaluate()}}},outputs:{ontrue:{type:"signal",displayName:"On True",group:"Events"},onfalse:{type:"signal",displayName:"On False",group:"Events"},result:{type:"boolean",displayName:"Is True",group:"Booleans",get(){return!!this.getInputValue("condition")}},isfalse:{type:"boolean",displayName:"Is False",group:"Booleans",get(){return!this.getInputValue("condition")}}},methods:{scheduleEvaluate(){this.scheduleAfterInputsHaveUpdated((()=>{this.flagOutputDirty("result"),this.flagOutputDirty("isfalse");const e=this.getInputValue("condition");this.sendSignalOnOutput(e?"ontrue":"onfalse")}))}}};e.exports={node:t}},3087:e=>{"use strict";const t={name:"Counter",docs:"https://docs.noodl.net/nodes/math/counter",category:"Math",initialize:function(){this._internal.currentValue=0,this._internal.startValue=0,this._internal.startValueSet=!1,this._internal.limitsEnabled=!1,this._internal.limitsMin=0,this._internal.limitsMax=0},getInspectInfo(){return"Count: "+this._internal.currentValue},inputs:{increase:{group:"Actions",displayName:"Increase Count",valueChangedToTrue:function(){this._internal.limitsEnabled&&this._internal.currentValue>=this._internal.limitsMax||(this._internal.currentValue++,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},decrease:{group:"Actions",displayName:"Decrease Count",valueChangedToTrue:function(){this._internal.limitsEnabled&&this._internal.currentValue<=this._internal.limitsMin||(this._internal.currentValue--,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},reset:{group:"Actions",displayName:"Reset To Start",valueChangedToTrue:function(){0!==this.currentValue&&(this._internal.currentValue=this._internal.startValue,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},startValue:{type:"number",displayName:"Start Value",default:0,set:function(e){this._internal.startValue=Number(e),!1===this._internal.startValueSet&&(this._internal.startValueSet=!0,this._internal.currentValue=this._internal.startValue,this.flagOutputDirty("currentCount"),this.sendSignalOnOutput("countChanged"))}},limitsMin:{type:{name:"number"},displayName:"Min Value",group:"Limits",default:0,set:function(e){this._internal.limitsMin=Number(e)}},limitsMax:{type:{name:"number"},displayName:"Max Value",group:"Limits",default:0,set:function(e){this._internal.limitsMax=Number(e)}},limitsEnabled:{type:{name:"boolean"},displayName:"Limits Enabled",group:"Limits",default:!1,set:function(e){this._internal.limitsEnabled=!!e}}},outputs:{currentCount:{displayName:"Current Count",type:"number",getter:function(){return this._internal.currentValue}},countChanged:{displayName:"Count Changed",type:"signal"}}};e.exports={node:t}},7865:(e,t,n)=>{const i=n(2036),o={name:"Cloud File",docs:"https://docs.noodl.net/nodes/data/cloud-data/cloud-file",category:"Cloud Services",color:"data",getInspectInfo(){return this._internal.cloudFile&&this._internal.cloudFile.getUrl()},outputs:{url:{type:"string",displayName:"URL",group:"General",get(){return this._internal.cloudFile&&this._internal.cloudFile.getUrl()}},name:{type:"string",displayName:"Name",group:"General",get(){if(!this._internal.cloudFile)return;const e=this._internal.cloudFile.getName().split("_");return 1===e.length?e[0]:e.slice(1).join("_")}}},inputs:{file:{type:"cloudfile",displayName:"Cloud File",group:"General",set(e){e instanceof i!=0&&(this._internal.cloudFile=e,this.flagOutputDirty("name"),this.flagOutputDirty("url"))}}}};e.exports={node:o}},5833:(e,t,n)=>{const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(7498),s=n(1020),a=n(7569),l=n(592),u=n(6370);var c={name:"DbCollection2",docs:"https://docs.noodl.net/nodes/data/cloud-data/query-records",displayName:"Query Records",category:"Cloud Services",usePortAsLabel:"collectionName",color:"data",initialize:function(){var e=this;this._internal.queryParameters={};var t=!1;this._internal.collectionChangedCallback=function(){t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId"),t=!1})))},this._internal.cloudStoreEvents=function(t){if(!0!==e.isInputConnected("storageFetch")&&void 0!==e._internal.collection&&t.collection===e._internal.name)if("create"===t.type){const i=r.get(t.object.objectId);void 0!==i&&u.matchesQuery(i,e._internal.currentQuery.where)&&n(i)}else if("save"===t.type){const i=r.get(t.objectId);if(void 0!==i){const t=u.matchesQuery(i,e._internal.currentQuery.where);!t&&e._internal.collection.contains(i)?(e._internal.collection.remove(i),e.flagOutputDirty("items"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId")):t&&!e._internal.collection.contains(i)&&n(i)}}else if("delete"===t.type){const n=r.get(t.objectId);void 0!==n&&(e._internal.collection.remove(n),e.flagOutputDirty("items"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId"))}function n(t){if(void 0!==e._internal.currentQuery.sort){for(var n=0;n<e._internal.collection.size()&&!(u.compareObjects(e._internal.currentQuery.sort,e._internal.collection.get(n),t)>0);n++);e._internal.collection.addAtIndex(t,n)}else e._internal.collection.add(t);let i=e._internal.collection.size();void 0!==e._internal.currentQuery.limit&&i>e._internal.currentQuery.limit&&e._internal.collection.remove(e._internal.collection.get(void 0!==e._internal.currentQuery.sort&&"-"===e._internal.currentQuery.sort[0][0]?i-1:0)),e.flagOutputDirty("items"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId")}};const n=a.forScope(this.nodeScope.modelScope);n.on("save",this._internal.cloudStoreEvents),n.on("create",this._internal.cloudStoreEvents),n.on("delete",this._internal.cloudStoreEvents),this._internal.storageSettings={}},getInspectInfo(){const e=this._internal.collection;return e?[{type:"value",value:e.items}]:{type:"text",value:"[Not executed yet]"}},inputs:{},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},firstItemId:{type:"string",displayName:"First Record Id",group:"General",getter:function(){if(this._internal.collection){var e=this._internal.collection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},fetched:{group:"Events",type:"signal",displayName:"Success"},failure:{group:"Events",type:"signal",displayName:"Failure"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},prototypeExtensions:{setCollectionName:function(e){this._internal.name=e,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},setCollection:function(e){this.bindCollection(e),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")},unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection();const e=a.forScope(this.nodeScope.modelScope);e.off("insert",this._internal.cloudStoreEvents),e.off("delete",this._internal.cloudStoreEvents),e.off("save",this._internal.cloudStoreEvents)},setError:function(e){this._internal.err=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure")},scheduleFetch:function(){var e=this._internal;e.fetchScheduled||(e.fetchScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.fetchScheduled=!1,this.fetch()})))},fetch:function(){this.context.editorConnection&&(void 0===this._internal.name?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"query-collection",{message:"No collection specified for query"}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"query-collection"));const e=s.get(),t=this.getStorageFilter(),n=this.getStorageLimit(),i=this.getStorageSkip(),o=this.getStorageFetchTotalCount();this._internal.currentQuery={where:t.where,sort:t.sort,limit:n,skip:i},a.forScope(this.nodeScope.modelScope).query({collection:this._internal.name,where:t.where,sort:t.sort,limit:n,skip:i,count:o,success:(t,n)=>{void 0!==t&&e.set(t.map((e=>a._fromJSON(e,this._internal.name,this.nodeScope.modelScope)))),void 0!==n&&(this._internal.storageSettings.storageTotalCount=n,this.hasOutput("storageTotalCount")&&this.flagOutputDirty("storageTotalCount")),this.setCollection(e),this.sendSignalOnOutput("fetched")},error:t=>{this.setCollection(e),this.setError(t||"Failed to fetch.")}})},getStorageFilter:function(){const e=this._internal.storageSettings;if(void 0===e.storageFilterType||"simple"===e.storageFilterType)return{where:void 0!==this._internal.visualFilter?u.convertVisualFilter(this._internal.visualFilter,{queryParameters:this._internal.queryParameters,collectionName:this._internal.name}):void 0,sort:void 0!==this._internal.visualSorting?u.convertVisualSorting(this._internal.visualSorting):void 0};if("json"===e.storageFilterType){if(!this._internal.filterFunc)try{var t=e.storageJSONFilter;t=t.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),this._internal.filterVariables=t.match(/\$[A-Za-z0-9]+/g)||[];var n=["filter","where","sort","Inputs"].concat(this._internal.filterVariables).concat([t]);this._internal.filterFunc=Function.apply(null,n)}catch(e){this._internal.filterFunc=void 0,console.log("Error while parsing filter script: "+e)}if(!this._internal.filterFunc)return;var i={},o=[],r=this,s=function(e){i=u.convertFilterOp(e,{collectionName:r._internal.name,error:function(e){r.context.editorConnection.sendWarning(r.nodeScope.componentOwner.name,r.id,"query-collection-filter",{message:e})}})};const l={};for(let t in e)t.startsWith("storageFilterValue-")&&(l[t.substring("storageFilterValue-".length)]=e[t]);var a=[s,s,function(e){o=e},l];this._internal.filterVariables.forEach((t=>{a.push(e["storageFilterValue-"+t.substring(1)])}));try{this._internal.filterFunc.apply(this,a)}catch(e){console.log("Error while running filter script: "+e)}return{where:i,sort:o}}},getStorageLimit:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageLimit||10:void 0},getStorageSkip:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageSkip||0:void 0},getStorageFetchTotalCount:function(){return!!this._internal.storageSettings.storageEnableCount},registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:p.bind(this,e)})},setVisualFilter:function(e){this._internal.visualFilter=e,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},setVisualSorting:function(e){this._internal.visualSorting=e,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},setQueryParameter:function(e,t){this._internal.queryParameters[e]=t,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()},registerInputIfNeeded:function(e){if(this.hasInput(e))return;if(e.startsWith("qp-"))return this.registerInput(e,{set:this.setQueryParameter.bind(this,e.substring("qp-".length))});const t={storageFetch:this.scheduleFetch.bind(this)};if(t[e])return this.registerInput(e,{set:o.createSetter({valueChangedToTrue:t[e]})});const n={collectionName:this.setCollectionName.bind(this),visualFilter:this.setVisualFilter.bind(this),visualSort:this.setVisualSorting.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});this.registerInput(e,{set:d.bind(this,e)})}}};function p(e){return this._internal.storageSettings[e]}function d(e,t){this._internal.storageSettings[e]=t,!1===this.isInputConnected("storageFetch")&&this.scheduleFetch()}function h(e,t,n,i){var o=[];const r=i.getMetaData("dbCollections"),s=i.getMetaData("systemCollections");if(o.push({name:"collectionName",type:{name:"enum",enums:[{label:"User",value:"_User"},{label:"Role",value:"_Role"}].concat(void 0!==r?r.map((e=>({value:e.name,label:e.name}))):[]),allowEditOnly:!0},displayName:"Class",plug:"input",group:"General"}),o.push({name:"storageFilterType",type:{name:"enum",allowEditOnly:!0,enums:[{value:"simple",label:"Visual"},{value:"json",label:"Javascript"}]},displayName:"Filter",default:"simple",plug:"input",group:"General"}),o.push({type:"boolean",plug:"input",group:"Limit",name:"storageEnableLimit",displayName:"Use limit"}),t.storageEnableLimit&&(o.push({type:"number",default:10,plug:"input",group:"Limit",name:"storageLimit",displayName:"Limit"}),o.push({type:"number",default:0,plug:"input",group:"Limit",name:"storageSkip",displayName:"Skip"})),o.push({type:"signal",plug:"input",group:"Actions",name:"storageFetch",displayName:"Do"}),o.push({type:"boolean",plug:"input",group:"Total Count",name:"storageEnableCount",displayName:"Fetch total count"}),t.storageEnableCount&&o.push({type:"number",plug:"output",group:"General",name:"storageTotalCount",displayName:"Total Count"}),void 0===t.storageFilterType||"simple"===t.storageFilterType){if(void 0!==t.collectionName){var a=r&&r.find((e=>e.name===t.collectionName));if(void 0===a&&s&&(a=s.find((e=>e.name===t.collectionName))),a&&a.schema&&a.schema.properties){const d=JSON.parse(JSON.stringify(a.schema));function u(e){if(void 0!==e.schema&&void 0!==e.schema.properties)for(var n in e.schema.properties){var i=e.schema.properties[n];"Relation"===i.type&&i.targetClass===t.collectionName&&(void 0===d.relations&&(d.relations={}),void 0===d.relations[e.name]&&(d.relations[e.name]=[]),d.relations[e.name].push({property:n}))}}r&&r.forEach(u),s&&s.forEach(u),o.push({name:"visualFilter",plug:"input",type:{name:"query-filter",schema:d,allowEditOnly:!0},displayName:"Filter",group:"Filter"}),o.push({name:"visualSort",plug:"input",type:{name:"query-sorting",schema:d,allowEditOnly:!0},displayName:"Sort",group:"Sorting"})}if(void 0!==t.visualFilter){const h={};!function e(t){void 0!==t&&(void 0!==t.rules?t.rules.forEach((t=>e(t))):void 0!==t.input&&(h[t.input]=!0))}(t.visualFilter),Object.keys(h).forEach((e=>{o.push({name:"qp-"+e,plug:"input",type:"*",displayName:e,group:"Query Parameters"})}))}}}else if("json"===t.storageFilterType){o.push({type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},plug:"input",group:"Filter",name:"storageJSONFilter",default:"// Write your query script here, check out the reference documentation for examples\nwhere({ })\n",displayName:"Filter"});var c=t.storageJSONFilter;if(c){var p=(c=c.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,"")).match(/\$[A-Za-z0-9]+/g);if(p){const f={};p.forEach((e=>{f[e]=!0})),Object.keys(f).forEach((e=>{o.push({name:"storageFilterValue-"+e.substring(1),displayName:e.substring(1),group:"Filter Values",plug:"input",type:{name:"*",allowConnectionsOnly:!0}})}))}l.parseAndAddPortsFromScript(c,o,{inputPrefix:"storageFilterValue-",inputGroup:"Filter Values",inputType:{name:"*",allowConnectionsOnly:!0},skipOutputs:!0})}}n.sendDynamicPorts(e,o)}e.exports={node:c,setup:function(e,t){function n(n){h(n.id,n.parameters,e.editorConnection,t),n.on("parameterUpdated",(function(i){(i.name.startsWith("storage")||"visualFilter"===i.name||"collectionName"===i.name)&&h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.dbCollections",(function(i){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.systemCollections",(function(i){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.cloudservices",(function(e){a.instance._initCloudServices()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbCollection2",(function(e){n(e)}));for(const e of t.getNodesWithType("DbCollection2"))n(e)}))}}},556:(e,t,n)=>{"use strict";const i=n(8435);var o={name:"DbConfig",docs:"https://docs.noodl.net/nodes/data/cloud-data/config",displayNodeName:"Config",category:"Cloud Services",usePortAsLabel:"configKey",color:"data",initialize:function(){var e=this._internal;i.instance.getConfig().then((t=>{e.config=t,this.hasOutput("value")&&this.flagOutputDirty("value")}))},getInspectInfo(){const e=this.getValue();return void 0===e?"[No Value]":[{type:"value",value:e}]},inputs:{},outputs:{},methods:{getValue:function(){const e=this._internal;return e.useDevValue&&this.context.editorConnection&&this.context.editorConnection.isRunningLocally()?e.devValue:void 0!==e.config&&void 0!==e.configKey?e.config[e.configKey]:void 0},setInternal:function(e,t){this._internal[e]=t,this.hasOutput("value")&&this.flagOutputDirty("value")},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return"value"===e?this.registerOutput(e,{getter:this.getValue.bind(this)}):void 0},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"configKey"===e||"useDevValue"===e||"devValue"===e?this.registerInput(e,{set:this.setInternal.bind(this,e)}):void 0}}};e.exports={node:o,setup:function(e,t){function n(n){var i=[];e.editorConnection.clearWarning(n.component.name,n.id,"dbconfig-warning");const o=t.getMetaData("dbConfigSchema");let r;if(o){const t="undefined"!=typeof _noodl_cloud_runtime_version;i.push({name:"configKey",displayName:"Parameter",group:"General",type:{name:"enum",enums:Object.keys(o).filter((e=>t||!o[e].masterKeyOnly)).map((e=>({value:e,label:e}))),allowEditOnly:!0},plug:"input"}),void 0!==n.parameters.configKey&&o&&o[n.parameters.configKey]?(r=o[n.parameters.configKey].type,"string"!==r&&"boolean"!==r&&"number"!==r&&"object"!==r&&"array"!==r||(i.push({name:"useDevValue",displayName:"Enable",group:"Local Override",type:"boolean",default:!1,plug:"input"}),!0===n.parameters.useDevValue&&i.push({name:"devValue",displayName:"Value",group:"Local Override",type:r,plug:"input"}))):void 0!==n.parameters.configKey&&e.editorConnection.sendWarning(n.component.name,n.id,"dbconfig-warning",{showGlobally:!0,message:n.parameters.configKey+" config parameter is missing, add it to your cloud service."})}else e.editorConnection.sendWarning(n.component.name,n.id,"dbconfig-warning",{showGlobally:!0,message:"You need an active cloud service."});i.push({name:"value",displayName:"Value",group:"General",type:r||"*",plug:"output"}),e.editorConnection.sendDynamicPorts(n.id,i)}function o(e){n(e),e.on("parameterUpdated",(function(t){n(e)})),t.on("metadataChanged.dbConfigSchema",(function(t){i.instance.clearCache(),n(e)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbConfig",(function(e){o(e)}));for(const e of t.getNodesWithType("DbConfig"))o(e)}))}}},8033:(e,t,n)=>{"use strict";const i=n(7498),o=n(7569);e.exports={addInputProperties:function(e){var t={node:Object.assign({},e.node),setup:e.setup},n=Object.assign({},e.node.methods);Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node,{initialize:function(){this._internal.inputValues={},t.node.initialize&&t.node.initialize.call(this)}}),Object.assign(e.node.outputs,{}),Object.assign(e.node.inputs,{}),Object.assign(e.node.methods,{registerInputIfNeeded:function(e){this.hasInput(e)||(e.startsWith("prop-")&&this.registerInput(e,{set:this._setInputValue.bind(this,e.substring("prop-".length))}),n&&n.registerInputIfNeeded&&n.registerInputIfNeeded.call(this,e))},_setInputValue:function(e,t){this._internal.inputValues[e]=t}})},addModelId:function(e,t){Object.assign({},e.node),e.setup;var n=Object.assign({},e.node.methods);const o=void 0===t||t.includeInputs,r=void 0===t||t.includeOutputs;Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),o&&(Object.assign(e.node,{usePortAsLabel:"collectionName"}),e.node.dynamicports=(e.node.dynamicports||[]).concat([{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}]),Object.assign(e.node.inputs,{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Id Source",group:"General",tooltip:"Choose if you want to specify the Id explicitly, \n or if you want it to be that of the current record in a repeater.",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof i&&(e=e.getId()),this._internal.modelId=e,this.setModelID(e)}}})),r&&Object.assign(e.node.outputs,{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}}}),Object.assign(e.node.methods,{setCollectionID:function(e){this._internal.collectionId=e,this.clearWarnings()},setModelID:function(e){var t=(this.nodeScope.modelScope||i).get(e);this.setModel(t)},setModel:function(e){this._internal.model=e,this.flagOutputDirty("id")},registerInputIfNeeded:function(e){this.hasInput(e)||("collectionName"===e&&this.registerInput(e,{set:this.setCollectionID.bind(this)}),n&&n.registerInputIfNeeded&&n.registerInputIfNeeded.call(this,e))}})},addBaseInfo:function(e,t){const n=void 0===t||t.includeInputProperties,i=void 0!==t&&t.includeRelations;Object.assign(e.node,{category:"Data",color:"data",inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node.outputs,{failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}}),Object.assign(e.node.methods,{scheduleOnce:function(e,t){const n=this,i="hasScheduled"+e;this._internal[i]||(this._internal[i]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[i]=!1,t()})))},checkWarningsBeforeCloudOp(){return this.clearWarnings(),!!this._internal.collectionId||(this.setError("No class name specified"),!1)},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning")}}),Object.assign(e,{setup:function(t,r){function s(s){function a(){var o=[];const a=r.getMetaData("dbCollections"),l=r.getMetaData("systemCollections"),u=s.parameters;if(o.push({name:"collectionName",displayName:"Class",group:"General",type:{name:"enum",enums:[{label:"User",value:"_User"},{label:"Role",value:"_Role"}].concat(void 0!==a?a.map((e=>({value:e.name,label:e.name}))):[]),allowEditOnly:!0},plug:"input"}),i&&u.collectionName&&a&&(void 0===(c=a.find((e=>e.name===u.collectionName)))&&l&&(c=l.find((e=>e.name===u.collectionName))),c&&c.schema&&c.schema.properties)){const e=c.schema.properties,t=Object.keys(e).filter((t=>"Relation"===e[t].type)).map((e=>({label:e,value:e})));o.push({name:"relationProperty",displayName:"Relation",group:"General",type:{name:"enum",enums:t,allowEditOnly:!0},plug:"input"})}if(n&&u.collectionName&&a){const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};var c;if(void 0===(c=a.find((e=>e.name===u.collectionName)))&&l&&(c=l.find((e=>e.name===u.collectionName))),c&&c.schema&&c.schema.properties){var p=c.schema.properties;for(var d in p){var h=p[d];o.find((e=>e.name===d))||o.push({type:{name:e[h.type]?e[h.type]:"*"},plug:"input",group:"Properties",name:"prop-"+d,displayName:d})}}}e._additionalDynamicPorts&&e._additionalDynamicPorts(s,o,r),t.editorConnection.sendDynamicPorts(s.id,o)}a(),s.on("parameterUpdated",(function(e){a()})),r.on("metadataChanged.dbCollections",(function(e){o.invalidateCollections(),a()})),r.on("metadataChanged.systemCollections",(function(e){o.invalidateCollections(),a()}))}t.editorConnection&&t.editorConnection.isRunningLocally()&&r.on("editorImportComplete",(()=>{r.on("nodeAdded."+e.node.name,(function(e){s(e)}));for(const t of r.getNodesWithType(e.node.name))s(t)}))}})},addRelationProperty:function(e){Object.assign({},e.node),e.setup;var t=Object.assign({},e.node.methods);Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node.inputs,{targetId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Target Record Id",group:"General",set:function(e){this._internal.targetModelId=e}}}),Object.assign(e.node.methods,{registerInputIfNeeded:function(e){this.hasInput(e)||("relationProperty"===e&&this.registerInput(e,{set:this.setRelationProperty.bind(this)}),t&&t.registerInputIfNeeded&&t.registerInputIfNeeded.call(this,e))},setRelationProperty:function(e){this._internal.relationProperty=e}})},addAccessControl:function(e){var t={node:Object.assign({},e.node),setup:e.setup},n=Object.assign({},e.node.methods);Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),Object.assign(e.node,{initialize:function(){this._internal.accessControl={},t.node.initialize&&t.node.initialize.call(this)}}),Object.assign(e.node.inputs,{accessControl:{type:{name:"proplist",autoName:"Rule",allowEditOnly:!0},index:1e3,displayName:"Access Control Rules",group:"Access Control Rules",set:function(e){this._internal.accessControlRules=e}}});const i=e._additionalDynamicPorts;e._additionalDynamicPorts=function(e,t,n){void 0!==e.parameters.accessControl&&e.parameters.accessControl.length>0&&e.parameters.accessControl.forEach((n=>{const i="acl-"+n.id;t.push({name:i+"-target",displayName:"Target",editorName:n.label+" | Target",plug:"input",type:{name:"enum",enums:[{value:"user",label:"User"},{value:"everyone",label:"Everyone"},{value:"role",label:"Role"}],allowEditOnly:!0},group:n.label+" Access Rule",default:"user",parent:"accessControl",parentItemId:n.id}),"role"===e.parameters[i+"-target"]?t.push({name:i+"-role",displayName:"Role",editorName:n.label+" | Role",group:n.label+" Access Rule",plug:"input",type:"string",parent:"accessControl",parentItemId:n.id}):void 0!==e.parameters[i+"-target"]&&"user"!==e.parameters[i+"-target"]||t.push({name:i+"-userid",displayName:"User Id",group:n.label+" Access Rule",editorName:n.label+" | User Id",plug:"input",type:{name:"string",allowConnectionsOnly:!0},parent:"accessControl",parentItemId:n.id}),t.push({name:i+"-read",displayName:"Read",editorName:n.label+" | Read",group:n.label+" Access Rule",plug:"input",type:{name:"boolean"},default:!0,parent:"accessControl",parentItemId:n.id}),t.push({name:i+"-write",displayName:"Write",editorName:n.label+" | Write",group:n.label+" Access Rule",plug:"input",type:{name:"boolean"},default:!0,parent:"accessControl",parentItemId:n.id})})),i&&i(e,t,n)},Object.assign(e.node.methods,{registerInputIfNeeded:function(e){this.hasInput(e)||(e.startsWith("acl-")&&this.registerInput(e,{set:this.setAccessControl.bind(this,e)}),n&&n.registerInputIfNeeded&&n.registerInputIfNeeded.call(this,e))},_getACL:function(){let e={};function t(e){return{read:void 0===e.read||e.read,write:void 0===e.write||e.write}}const n=function(e){if("undefined"!=typeof _noodl_cloud_runtime_version)return e.get("Request").UserId;var t=localStorage["Parse/"+o.instance.appId+"/currentUser"];if(void 0!==t){let e;try{e=JSON.parse(t)}catch(e){}return void 0!==e?e.objectId:void 0}}(this.nodeScope.modelScope);return void 0!==this._internal.accessControlRules&&this._internal.accessControlRules.forEach((i=>{const o=this._internal.accessControl[i.id];if(void 0===o){const t=n;void 0!==t&&(e[t]={write:!0,read:!0})}else if("everyone"===o.target)e["*"]=t(o);else if("user"===o.target){const i=o.userid||n;e[i]=t(o)}else"role"===o.target&&(e["role:"+o.role]=t(o))})),Object.keys(e).length>0?e:void 0},setAccessControl:function(e,t){const n=e.split("-");void 0===this._internal.accessControl[n[1]]&&(this._internal.accessControl[n[1]]={}),this._internal.accessControl[n[1]][n[2]]=t}})}}},8814:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(8033);const s=n(7569);var a={node:{name:"AddDbModelRelation",docs:"https://docs.noodl.net/nodes/data/cloud-data/add-record-relation",displayNodeName:"Add Record Relation",usePortAsLabel:"collectionName",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleAddRelation()}}},outputs:{relationAdded:{type:"signal",displayName:"Success",group:"Events"}},methods:{validateInputs:function(){if(!this.context.editorConnection)return;const e=e=>{this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"add-relation",{message:e})};void 0===this._internal.collectionId?e("No class specified"):void 0===this._internal.relationProperty?e("No relation property specified"):void 0===this._internal.targetModelId?e("No target record Id (the record to add a relation to) specified"):void 0===this._internal.model?e("No record Id specified (the record that should get the relation)"):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"add-relation")},scheduleAddRelation:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageAddRelation",(function(){if(t.validateInputs(),n.model){var e=n.model,i=n.targetModelId;void 0!==i&&s.forScope(t.nodeScope.modelScope).addRelation({collection:n.collectionId,objectId:e.getId(),key:n.relationProperty,targetObjectId:i,targetClass:(t.nodeScope.modelScope||o).get(i)._class,success:function(n){for(var i in n)e.set(i,n[i]);t.sendSignalOnOutput("relationAdded")},error:function(e){t.setError(e||"Failed to add relation.")}})}}))}}}};r.addBaseInfo(a,{includeRelations:!0}),r.addModelId(a),r.addRelationProperty(a),e.exports=a},4253:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(8033);const s=n(7569);var a={node:{name:"RemoveDbModelRelation",docs:"https://docs.noodl.net/nodes/data/cloud-data/remove-record-relation",displayName:"Remove Record Relation",usePortAsLabel:"collectionName",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleRemoveRelation()}}},outputs:{relationRemoved:{type:"signal",displayName:"Success",group:"Events"}},methods:{validateInputs:function(){if(!this.context.editorConnection)return;const e=e=>{this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"add-relation",{message:e})};void 0===this._internal.collectionId?e("No class specified"):void 0===this._internal.relationProperty?e("No relation property specified"):void 0===this._internal.targetModelId?e("No target record Id (the record to add a relation to) specified"):void 0===this._internal.model?e("No record Id specified (the record that should get the relation)"):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"add-relation")},scheduleRemoveRelation:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageRemoveRelation",(function(){if(t.validateInputs(),n.model){var e=n.model,i=n.targetModelId;void 0!==i&&s.forScope(t.nodeScope.modelScope).removeRelation({collection:n.collectionId,objectId:e.getId(),key:n.relationProperty,targetObjectId:i,targetClass:(t.nodeScope.modelScope||o).get(i)._class,success:function(n){for(var i in n)e.set(i,n[i]);t.sendSignalOnOutput("relationRemoved")},error:function(e){t.setError(e||"Failed to remove relation.")}})}}))}}}};r.addBaseInfo(a,{includeRelations:!0}),r.addModelId(a),r.addRelationProperty(a),e.exports=a},7512:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291);var r=n(7498);const s=n(7569);var a={name:"DbModel2",docs:"https://docs.noodl.net/nodes/data/cloud-data/record",displayNodeName:"Record",shortDesc:"Database model",category:"Cloud Services",usePortAsLabel:"collectionName",color:"data",dynamicports:[{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}],initialize:function(){var e=this._internal;e.inputValues={},e.relationModelIds={};var t=this;this._internal.onModelChangedCallback=function(e){t.isInputConnected("fetch")||(t.hasOutput("prop-"+e.name)&&t.flagOutputDirty("prop-"+e.name),t.hasOutput("changed-"+e.name)&&t.sendSignalOnOutput("changed-"+e.name),t.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Record]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},fetched:{type:"signal",displayName:"Fetched",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Id Source",group:"General",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Id",group:"General",set:function(e){e instanceof r?e=e.getId():"object"==typeof e&&(e=r.create(e).getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}}},methods:{setCollectionID:function(e){this._internal.collectionId=e},setModelID:function(e){var t=(this.nodeScope.modelScope||r).get(e);this.setModel(t)},setModel:function(e){for(var t in this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput("prop-"+t)&&this.flagOutputDirty("prop-"+t);this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},scheduleOnce:function(e,t){const n=this,i="hasScheduled"+e;this._internal[i]||(this._internal[i]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[i]=!1,t()})))},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning")},scheduleFetch:function(){var e=this;const t=this._internal;this.scheduleOnce("Fetch",(function(){if(void 0===t.modelId||""===t.modelId)return void e.setError("Missing Id.");const n=s.forScope(e.nodeScope.modelScope);n.fetch({collection:t.collectionId,objectId:t.modelId,success:function(i){var o=n._fromJSON(i,t.collectionId);for(var r in t.model!==o&&(t.model&&t.model.off("change",t.onModelChangedCallback),t.model=o,o.on("change",t.onModelChangedCallback)),e.flagOutputDirty("id"),delete i.objectId,i)e.hasOutput("prop-"+r)&&e.flagOutputDirty("prop-"+r);e.sendSignalOnOutput("fetched")},error:function(t){e.setError(t||"Failed to fetch.")}})}))},scheduleStore:function(){var e=this._internal;e.model&&this.scheduleOnce("Store",(function(){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0})}))},registerOutputIfNeeded:function(e){this.hasOutput(e)||e.startsWith("prop-")&&this.registerOutput(e,{getter:l.bind(this,e.substring("prop-".length))})},registerInputIfNeeded:function(e){if(this.hasInput(e))return;const t={};if(t[e])return this.registerInput(e,{set:o.createSetter({valueChangedToTrue:t[e]})});const n={collectionName:this.setCollectionID.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});e.startsWith("prop-")&&this.registerInput(e,{set:u.bind(this,e.substring("prop-".length))})}}};function l(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function u(e,t){this._internal.inputValues[e]=t}function c(e,t,n,i){var o=[];const r=i.getMetaData("dbCollections"),s=i.getMetaData("systemCollections");if(o.push({name:"collectionName",displayName:"Class",group:"General",type:{name:"enum",enums:[{label:"User",value:"_User"},{label:"Role",value:"_Role"}].concat(void 0!==r?r.map((e=>({value:e.name,label:e.name}))):[]),allowEditOnly:!0},plug:"input"}),t.collectionName&&r){var a=r.find((e=>e.name===t.collectionName));if(void 0===a&&s&&(a=s.find((e=>e.name===t.collectionName))),a&&a.schema&&a.schema.properties){var l=a.schema.properties;for(var u in l){var c=l[u];if(!o.find((e=>e.name===u)))if("Relation"===c.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};o.push({type:{name:e[c.type]?e[c.type]:"*"},plug:"output",group:"Properties",name:"prop-"+u,displayName:u}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:u+" Changed",name:"changed-"+u})}}}}n.sendDynamicPorts(e,o)}e.exports={node:a,setup:function(e,t){function n(n){c(n.id,n.parameters,e.editorConnection,t),n.on("parameterUpdated",(function(i){c(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.dbCollections",(function(i){s.invalidateCollections(),c(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.systemCollections",(function(i){s.invalidateCollections(),c(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbModel2",(function(e){n(e)}));for(const e of t.getNodesWithType("DbModel2"))n(e)}))}}},9357:(e,t,n)=>{"use strict";const{Node:i}=n(6291);n(7498);var o=n(8033);const r=n(7569);var s={node:{name:"DeleteDbModelProperties",docs:"https://docs.noodl.net/nodes/data/cloud-data/delete-record",displayNodeName:"Delete Record",shortDesc:"Stores any amount of properties and can be used standalone or together with Collections and For Each nodes.",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.storageDelete()}}},outputs:{deleted:{type:"signal",displayName:"Success",group:"Events"}},methods:{storageDelete:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageDelete",(function(){t.model?r.forScope(e.nodeScope.ModelScope).delete({collection:t.collectionId,objectId:t.model.getId(),success:function(){t.model.notify("delete"),e.sendSignalOnOutput("deleted")},error:function(t){e.setError(t||"Failed to delete.")}}):e.setError("Missing Record Id")}))}}}};o.addBaseInfo(s,{includeInputProperties:!1}),o.addModelId(s),e.exports=s},4337:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(1020),s=n(7498),a=n(7569),l=n(6370);var u={name:"FilterDBModels",docs:"https://docs.noodl.net/nodes/data/cloud-data/filter-records",displayNodeName:"Filter Records",shortDesc:"Filter, sort and limit array",category:"Data",color:"data",initialize:function(){var e=this;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("filter")&&e.scheduleFilter()},this._internal.cloudStoreEvents=function(t){!0!==e.isInputConnected("filter")&&void 0!==e._internal.visualFilter&&void 0!==e._internal.collection&&t.collection===e._internal.collectionName&&void 0!==t.objectId&&e._internal.collection.contains(s.get(t.objectId))&&e.scheduleFilter()},a.instance.on("save",this._internal.cloudStoreEvents),this._internal.enabled=!0,this._internal.filterSettings={},this._internal.filterParameters={}},getInspectInfo(){const e=this._internal.filteredCollection;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.items}]:{type:"text",value:"[Not executed yet]"}},inputs:{items:{type:"array",displayName:"Items",group:"General",set(e){this.bindCollection(e),!1===this.isInputConnected("filter")&&this.scheduleFilter()}},enabled:{type:"boolean",group:"General",displayName:"Enabled",default:!0,set:function(e){this._internal.enabled=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()}},filter:{type:"signal",group:"Actions",displayName:"Filter",valueChangedToTrue:function(){this.scheduleFilter()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.filteredCollection}},firstItemId:{type:"string",displayName:"First Record Id",group:"General",getter:function(){if(void 0!==this._internal.filteredCollection){const e=this._internal.filteredCollection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.filteredCollection?this._internal.filteredCollection.size():0}},modified:{group:"Events",type:"signal",displayName:"Filtered"}},prototypeExtensions:{unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection(),a.instance.off("save",this._internal.cloudStoreEvents)},getLimit:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterLimit||10:void 0},getSkip:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterSkip||0:void 0},scheduleFilter:function(){this.collectionChangedScheduled||(this.collectionChangedScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{if(this.collectionChangedScheduled=!1,this._internal.collection){var e=[].concat(this._internal.collection.items);if(this._internal.enabled){const r=this._internal.visualFilter;if(void 0!==r){var t=l.convertVisualFilter(r,{queryParameters:this._internal.filterParameters,collectionName:this._internal.collectionName});t&&(e=e.filter((e=>l.matchesQuery(e,t))))}var n=this._internal.visualSorting;if(void 0!==n&&n.length>0)var i=l.convertVisualSorting(n);i&&e.sort(l.compareObjects.bind(this,i));var o=this.getSkip();o&&(e=e.slice(o,e.length));var s=this.getLimit();s&&(e=e.slice(0,s))}this._internal.filteredCollection=r.create(e),this.sendSignalOnOutput("modified"),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")}})))},setCollectionName:function(e){this._internal.collectionName=e},setVisualFilter:function(e){this._internal.visualFilter=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()},setVisualSorting:function(e){this._internal.visualSorting=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()},setFilterParameter:function(e,t){this._internal.filterParameters[e]=t,!1===this.isInputConnected("filter")&&this.scheduleFilter()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"collectionName"===e?this.registerInput(e,{set:this.setCollectionName.bind(this)}):"visualFilter"===e?this.registerInput(e,{set:this.setVisualFilter.bind(this)}):"visualSorting"===e?this.registerInput(e,{set:this.setVisualSorting.bind(this)}):e.startsWith("fp-")?this.registerInput(e,{set:this.setFilterParameter.bind(this,e.substring("fp-".length))}):void this.registerInput(e,{set:c.bind(this,e)})}}};function c(e,t){this._internal.filterSettings[e]=t,!1===this.isInputConnected("filter")&&this.scheduleFilter()}function p(e,t,n,i){var o=[];if(o.push({name:"collectionName",type:{name:"enum",enums:void 0!==i?i.map((e=>({value:e.name,label:e.name}))):[],allowEditOnly:!0},displayName:"Class",plug:"input",group:"General"}),o.push({type:"boolean",plug:"input",group:"Limit",name:"filterEnableLimit",displayName:"Use limit"}),t.filterEnableLimit&&(o.push({type:"number",default:10,plug:"input",group:"Limit",name:"filterLimit",displayName:"Limit"}),o.push({type:"number",default:0,plug:"input",group:"Limit",name:"filterSkip",displayName:"Skip"})),void 0!==t.collectionName){var r=i.find((e=>e.name===t.collectionName));if(r&&r.schema&&r.schema.properties){const a=JSON.parse(JSON.stringify(r.schema)),l={Boolean:!0,String:!0,Date:!0,Number:!0,Pointer:!0};for(var s in a.properties)l[a.properties[s].type]||delete a.properties[s];o.push({name:"visualFilter",plug:"input",type:{name:"query-filter",schema:a,allowEditOnly:!0},displayName:"Filter",group:"Filter"}),o.push({name:"visualSorting",plug:"input",type:{name:"query-sorting",schema:a,allowEditOnly:!0},displayName:"Sorting",group:"Sorting"})}if(void 0!==t.visualFilter){const u={};function c(e){void 0!==e&&(void 0!==e.rules?e.rules.forEach((e=>c(e))):void 0!==e.input&&(u[e.input]=!0))}c(t.visualFilter),Object.keys(u).forEach((e=>{o.push({name:"fp-"+e,plug:"input",type:"*",displayName:e,group:"Filter Parameters"})}))}}n.sendDynamicPorts(e,o)}e.exports={node:u,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.FilterDBModels",(function(n){p(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(i){p(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){a.invalidateCollections(),p(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.systemCollections",(function(t){a.invalidateCollections(),p(n.id,n.parameters,e.editorConnection,t)}))}))}}},2554:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Collection=__webpack_require__(1020),Model=__webpack_require__(7498);function _addBaseInfo(e){Object.assign(e.node,{category:"Data",color:"data"})}function _addModelId(e,t){const n=void 0===t||t.includeInputs,i=void 0===t||t.includeOutputs;Object.assign(e.node,{inputs:e.node.inputs||{},outputs:e.node.outputs||{},methods:e.node.methods||{}}),n&&(Object.assign(e.node,{usePortAsLabel:"modelId"}),e.node.dynamicports=(e.node.dynamicports||[]).concat([{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}]),Object.assign(e.node.inputs,{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Id Source",group:"General",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof Model&&(e=e.getId()),this._internal.modelId=e,this.setModelID(e)}}})),i&&Object.assign(e.node.outputs,{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}}}),Object.assign(e.node.methods,{setModelID:function(e){var t=(this.nodeScope.modelScope||Model).get(e);this.setModel(t)},setModel:function(e){this._internal.model=e,this.flagOutputDirty("id")}}),e.node.getInspectInfo||(e.node.getInspectInfo=function(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Object]"})}function _addInputProperties(def){var _def={node:Object.assign({},def.node),setup:def.setup},_methods=Object.assign({},def.node.methods);Object.assign(def.node,{inputs:def.node.inputs||{},outputs:def.node.outputs||{},methods:def.node.methods||{}}),Object.assign(def,{setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&(t.on("nodeAdded."+def.node.name,(function(t){function n(){var n=[];const i=[{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Number",value:"number"},{label:"Date",value:"date"},{label:"Array",value:"array"},{label:"Object",value:"object"},{label:"Any",value:"*"}];var o=t.parameters.properties;if(o)for(var r in o=o?o.split(","):void 0){var s=o[r];n.push({type:{name:void 0===t.parameters["type-"+s]?"*":t.parameters["type-"+s]},plug:"input",group:"Property Values",displayName:s,name:"prop-"+s}),n.push({type:{name:"enum",enums:i,allowEditOnly:!0},default:"any",plug:"input",group:"Property Types",displayName:s,default:"*",name:"type-"+s})}e.editorConnection.sendDynamicPorts(t.id,n,{detectRenamed:{plug:"input"}})}n(),t.on("parameterUpdated",(function(e){n()}))})),_def.setup&&_def.setup(e,t))}}),Object.assign(def.node,{initialize:function(){var e=this._internal;e.inputValues={},e.inputTypes={},_def.node.initialize&&_def.node.initialize.call(this)}}),Object.assign(def.node.outputs,{}),Object.assign(def.node.inputs,{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties to set",set:function(e){}}}),Object.assign(def.node.methods,{_pushInputValues:function(model){var internal=this._internal;const _defaultValueForType={boolean:!1,string:"",number:0,date:new Date},_allKeys={};for(const e in internal.inputTypes)_allKeys[e]=!0;for(const e in internal.inputValues)_allKeys[e]=!0;const properties=this.model.parameters.properties||"",validProperties=properties.split(","),keysToSet=Object.keys(_allKeys).filter((e=>-1!==validProperties.indexOf(e)));for(const i of keysToSet){var value=internal.inputValues[i];if(void 0!==value){if(void 0!==internal.inputTypes[i]&&"array"===internal.inputTypes[i]&&"string"==typeof value){this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+i);try{value=eval(value)}catch(e){-1!==value.indexOf("[")||-1!==value.indexOf("{")?(this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"invalid-array-"+i,{showGlobally:!0,message:"Invalid array<br>"+e.toString()}),value=[]):value=Collection.get(value)}}void 0!==internal.inputTypes[i]&&"object"===internal.inputTypes[i]&&"string"==typeof value&&(value=(this.nodeScope.modelScope||Model).get(value)),model.set(i,value,{resolve:!0})}else model.set(i,_defaultValueForType[internal.inputTypes[i]],{resolve:!0})}},scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledStore=!1,e.model&&(this._pushInputValues(e.model),this.sendSignalOnOutput("stored"))}))}},registerInputIfNeeded:function(e){this.hasInput(e)||(e.startsWith("prop-")&&this.registerInput(e,{set:this._setInputValue.bind(this,e.substring("prop-".length))}),e.startsWith("type-")&&this.registerInput(e,{set:this._setInputType.bind(this,e.substring("type-".length))}),_methods&&_methods.registerInputIfNeeded&&_def.node.methods.registerInputIfNeeded.call(this,e))},_setInputValue:function(e,t){this._internal.inputValues[e]=t},_setInputType:function(e,t){this._internal.inputTypes[e]=t}})}module.exports={addInputProperties:_addInputProperties,addModelId:_addModelId,addBaseInfo:_addBaseInfo}},670:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r={name:"Model2",docs:"https://docs.noodl.net/nodes/data/object/object-node",displayNodeName:"Object",shortDesc:"Stores any amount of properties and can be used standalone or together with Collections and For Each nodes.",category:"Data",usePortAsLabel:"modelId",color:"data",dynamicports:[{name:"conditionalports/extended",condition:"idSource = explicit OR idSource NOT SET",inputs:["modelId"]}],initialize:function(){var e=this._internal;e.inputValues={},e.dirtyValues={};var t=this;this._internal.onModelChangedCallback=function(e){!0!==t.isInputConnected("fetch")&&(t.hasOutput("prop-"+e.name)&&t.flagOutputDirty("prop-"+e.name),t.hasOutput("changed-"+e.name)&&t.sendSignalOnOutput("changed-"+e.name),t.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Object]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"}},inputs:{idSource:{type:{name:"enum",enums:[{label:"Specify explicitly",value:"explicit"},{label:"From repeater",value:"foreach"}],allowEditOnly:!0},default:"explicit",displayName:"Get Id from",group:"General",set:function(e){"foreach"===e&&this.scheduleAfterInputsHaveUpdated((()=>{for(var e=this.nodeScope.componentOwner;void 0!==e&&void 0===e._forEachModel&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;this.setModel(void 0!==e?e._forEachModel:void 0)}))}},modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof o?e=e.getId():"object"==typeof e&&(e=o.create(e).getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set:function(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetModel()}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.dirtyValues)e.model.set(t,e.inputValues[t],{resolve:!0});e.dirtyValues={}}}))}},scheduleSetModel:function(){this.hasScheduledSetModel||(this.hasScheduledSetModel=!0,this._internal,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledSetModel=!1,this.setModelID(this._internal.modelId)})))},setModelID:function(e){var t=(this.nodeScope.modelScope||o).get(e);this.setModel(t),this.sendSignalOnOutput("fetched")},setModel:function(e){for(var t in this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput("prop-"+t)&&this.flagOutputDirty("prop-"+t)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded:function(e){this.hasOutput(e)||e.startsWith("prop-")&&this.registerOutput(e,{getter:s.bind(this,e.substring("prop-".length))})},registerInputIfNeeded:function(e){this.hasInput(e)||e.startsWith("prop-")&&this.registerInput(e,{set:a.bind(this,e.substring("prop-".length))})}}};function s(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function a(e,t){this._internal.inputValues[e]=t;const n=this._internal.model;(!n||n.get(e)!==t)&&(this._internal.dirtyValues[e]=!0,this.scheduleStore())}function l(e,t,n){var i=[],o=t.properties;if(o)for(var r in o=o?o.split(","):void 0){var s=o[r];i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"prop-"+s,displayName:s}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Model2",(function(t){l(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(function(n){l(t.id,t.parameters,e.editorConnection)}))}))}}},4293:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(8033);const s=n(7569);var a={node:{name:"NewDbModelProperties",docs:"https://docs.noodl.net/nodes/data/cloud-data/create-new-record",displayName:"Create New Record",usePortAsLabel:"collectionName",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.storageInsert()}},sourceObjectId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Source Object Id",group:"General",set:function(e){e instanceof o&&(e=e.getId()),this._internal.sourceObjectId=e}}},outputs:{created:{type:"signal",displayName:"Success",group:"Events"}},methods:{storageInsert:function(){const e=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageInsert",(()=>{const t=Object.assign({},e.sourceObjectId?(this.nodeScope.modelScope||o).get(e.sourceObjectId).data:{},e.inputValues),n=s.forScope(this.nodeScope.modelScope);n.create({collection:e.collectionId,data:t,acl:this._getACL(),success:t=>{const i=n._fromJSON(t,e.collectionId);this.setModel(i),this.sendSignalOnOutput("created")},error:e=>{this.setError(e||"Failed to insert.")}})}))}}}};r.addBaseInfo(a),r.addModelId(a,{includeOutputs:!0}),r.addInputProperties(a),r.addAccessControl(a),e.exports=a},8222:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(2554),s={node:{name:"NewModel",docs:"https://docs.noodl.net/nodes/data/object/create-new-object",displayNodeName:"Create New Object",inputs:{new:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}}},outputs:{created:{type:"signal",displayName:"Done",group:"Events"}},methods:{scheduleNew:function(){this.hasScheduledNew||(this.hasScheduledNew=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledNew=!1;const e=(this.nodeScope.modelScope||o).get();this._pushInputValues(e),this.setModel(e),this.sendSignalOnOutput("created")})))}}}};r.addBaseInfo(s),r.addModelId(s,{includeOutputs:!0}),r.addInputProperties(s),e.exports=s},2287:e=>{var t={name:"REST2",displayNodeName:"REST",docs:"https://docs.noodl.net/nodes/data/rest",category:"Data",color:"data",initialize:function(){this._internal.inputValues={},this._internal.outputValues={},this._internal.outputValuesProxy=new Proxy(this._internal.outputValues,{set:(e,t,n)=>(n!==this._internal.outputValues[t]&&(this.registerOutputIfNeeded("out-"+t),this._internal.outputValues[t]=n,this.flagOutputDirty("out-"+t)),!0)}),this._internal.self={}},getInspectInfo(){return this._internal.inspectData?{type:"value",value:this._internal.inspectData}:{type:"text",value:"[Not executed yet]"}},inputs:{resource:{type:"string",displayName:"Resource",group:"Request",default:"/",set:function(e){this._internal.resource=e}},method:{type:{name:"enum",enums:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"},{label:"DELETE",value:"DELETE"}]},displayName:"Method",group:"Request",default:"GET",set:function(e){this._internal.method=e}},requestScript:{type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Request",default:"//Add custom code to setup the request object before the request\n//is made.\n//\n//*Request.resource     contains the resource path of the request.\n//*Request.method       contains the method, GET, POST, PUT or DELETE.\n//*Request.headers      is a map where you can add additional headers.\n//*Request.parameters   is a map the parameters that will be appended\n//                      to the url.\n//*Request.content      contains the content of the request as a javascript\n//                      object.\n//\n",group:"Scripts",set:function(e){try{this._internal.requestFunc=new Function("Inputs","Outputs","Request",e)}catch(e){console.log(e)}}},responseScript:{type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Response",default:"// Add custom code to convert the response content to outputs\n//\n//*Response.status    The status code of the response\n//*Response.content   The content of the response as a javascript\n//                    object.\n//*Response.request   The request object that resulted in the response.\n//\n//*Inputs and *Outputs contain the inputs and outputs of the node.\n",group:"Scripts",set:function(e){try{this._internal.responseFunc=new Function("Inputs","Outputs","Response",e)}catch(e){console.log(e)}}},fetch:{type:"signal",displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}},cancel:{type:"signal",displayName:"Cancel",group:"Actions",valueChangedToTrue:function(){this.cancelFetch()}}},outputs:{failure:{type:"signal",displayName:"Failure",group:"Events"},success:{type:"signal",displayName:"Success",group:"Events"},canceled:{type:"signal",displayName:"Canceled",group:"Events"}},prototypeExtensions:{getScriptOutputValue:function(e){return this._internal.outputValues[e]},setScriptInputValue:function(e,t){return this._internal.inputValues[e]=t},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("out-")?this.registerOutput(e,{getter:this.getScriptOutputValue.bind(this,e.substring("out-".length))}):void 0},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("in-")?this.registerInput(e,{set:this.setScriptInputValue.bind(this,e.substring("in-".length))}):void 0},scheduleFetch:function(){var e=this._internal;e.hasScheduledFetch||(e.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated(this.doFetch.bind(this)))},doResponse:function(e,t,n){this._internal.responseFunc&&this._internal.responseFunc.apply(this._internal.self,[this._internal.inputValues,this._internal.outputValuesProxy,{status:e,content:t,request:n}]),this._internal.inspectData={status:e,content:t},e>=200&&e<300?this.sendSignalOnOutput("success"):this.sendSignalOnOutput("failure")},doExternalFetch:function(e){var t=e.resource;if(Object.keys(e.parameters).length>0){var n=Object.keys(e.parameters).map((function(t){return t+"="+encodeURIComponent(e.parameters[t])}));t+="?"+n.join("&")}if("undefined"==typeof _noodl_cloud_runtime_version){var i=this,o=new window.XMLHttpRequest;for(var r in this._xhr=o,o.open(e.method,t,!0),e.headers)o.setRequestHeader(r,e.headers[r]);o.onreadystatechange=function(){var t=!1;if(4===this.readyState||this.readyState===XMLHttpRequest.DONE){var n=this.status,o=this.getResponseHeader("content-type"),r=this.response;if(delete this._xhr,o){const s=-1!==(o=o.toLowerCase()).indexOf("json")?JSON.parse(r):r;i.doResponse(n,s,e),t=!0}!1===t&&i.doResponse(n,r,e)}},o.onerror=function(e){delete this._xhr,i.sendSignalOnOutput("failure")},o.onabort=function(){delete this._xhr,i.sendSignalOnOutput("canceled")},e.content?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e.content))):o.send()}else{const n=Object.assign({},e.headers,e.content?{"Content-Type":"application/json"}:{});fetch(t,{method:e.method,headers:n,body:e.content?JSON.stringify(e.content):void 0}).then((t=>{const n=t.headers.get("content-type");n?-1!==n.indexOf("/json")?t.json().then((n=>{this.doResponse(t.status,n,e)})):this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"rest-run-waring-",{message:"REST only supports json content type in response."}):t.text().then((n=>{this.doResponse(t.status,n,e)}))})).catch((e=>{console.log("REST: Failed to request",t),console.log(e),this.sendSignalOnOutput("failure")}))}},doFetch:function(){this._internal.hasScheduledFetch=!1;var e=this._internal.resource;if(e)for(var t in this._internal.inputValues)e=e.replace("{"+t+"}",this._internal.inputValues[t]);var n={resource:e,headers:{},method:void 0!==this._internal.method?this._internal.method:"GET",parameters:{}};this._internal.requestFunc&&this._internal.requestFunc.apply(this._internal.self,[this._internal.inputValues,this._internal.outputValuesProxy,n]),this.doExternalFetch(n)},cancelFetch:function(){"undefined"==typeof _noodl_cloud_runtime_version?this._xhr&&this._xhr.abort():this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"rest-run-waring-",{message:"REST doesn't support cancel in cloud functions."})}}};function n(e,t,n,i,o,r){if(o.editorConnection.clearWarning(i.component.name,i.id,"rest-run-waring-"+n),void 0===e)return void o.editorConnection.clearWarning(i.component.name,i.id,"rest-parse-waring-"+n);try{new Function(...t,e),o.editorConnection.clearWarning(i.component.name,i.id,"rest-parse-waring-"+n)}catch(e){o.editorConnection.sendWarning(i.component.name,i.id,"rest-parse-waring-"+n,{message:"<strong>"+n+"</strong>: "+e.message,showGlobally:!0})}function s(e){return void 0!==r.find((t=>t.name===e))}const a=e.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),l=a.match(/Inputs\.[A-Za-z0-9]+/g);if(l){const e={};l.forEach((t=>{e[t.substring("Inputs.".length)]=!0})),Object.keys(e).forEach((e=>{s("in-"+e)||r.push({name:"in-"+e,displayName:e,plug:"input",type:"*",group:"Inputs"})}))}const u=a.match(/Outputs\.[A-Za-z0-9]+/g);if(u){const e={};u.forEach((t=>{e[t.substring("Outputs.".length)]=!0})),Object.keys(e).forEach((e=>{s("out-"+e)||r.push({name:"out-"+e,displayName:e,plug:"output",type:"*",group:"Outputs"})}))}}e.exports={node:t,setup:function(e,t){function i(t){function i(){if(t.parameters){var i=[];if(t.parameters.resource){var o=t.parameters.resource.match(/\{[A-Za-z0-9_]*\}/g);for(var r in o){var s=o[r].replace("{","").replace("}","");a("in-"+s)||i.push({name:"in-"+s,displayName:s,type:"string",plug:"input",group:"Inputs"})}}t.parameters.requestScript&&n(t.parameters.requestScript,["Inputs","Outputs","Request"],"Request script",t,e,i),t.parameters.responseScript&&n(t.parameters.responseScript,["Inputs","Outputs","Response"],"Response script",t,e,i),e.editorConnection.sendDynamicPorts(t.id,i)}function a(e){for(var t=0;t<i.length;t++)if(i[t].name===e&&"input"===i[t].plug)return!0;return!1}}i(),t.on("parameterUpdated",(function(){i()}))}e.editorConnection&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.REST2",(function(e){i(e)}));for(const e of t.getNodesWithType("REST2"))i(e)}))}}},9463:(e,t,n)=>{"use strict";const{Node:i}=n(6291);n(7498);var o=n(8033);const r=n(7569);var s={node:{name:"SetDbModelProperties",docs:"https://docs.noodl.net/nodes/data/cloud-data/set-record-properties",displayNodeName:"Set Record Properties",usePortAsLabel:"collectionName",dynamicports:[{name:"conditionalports/extended",condition:"storeType = cloud OR storeType NOT SET",inputs:["storeProperties"]}],inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){void 0===this._internal.storeType||"cloud"===this._internal.storeType?this.scheduleSave():this.scheduleStore()}},storeProperties:{displayName:"Properties to  store",group:"General",type:{name:"enum",enums:[{label:"Only specified",value:"specified"},{label:"All",value:"all"}]},default:"specified",set:function(e){this._internal.storeProperties=e}},storeType:{displayName:"Store to",group:"General",type:{name:"enum",enums:[{label:"Cloud and local",value:"cloud"},{label:"Local only",value:"local"}]},default:"cloud",set:function(e){this._internal.storeType=e}}},outputs:{stored:{type:"signal",displayName:"Success",group:"Events"}},methods:{scheduleSave:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageSave",(function(){if(t.model){var n=t.model;for(var i in t.inputValues)n.set(i,t.inputValues[i],{resolve:!0});r.forScope(e.nodeScope.modelScope).save({collection:t.collectionId,objectId:n.getId(),data:"all"===t.storeProperties?n.data:t.inputValues,acl:e._getACL(),success:function(t){for(var i in t)n.set(i,t[i]);e.sendSignalOnOutput("stored")},error:function(t){e.setError(t||"Failed to save.")}})}else e.setError("Missing Record Id")}))},scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}}))}}}}};o.addBaseInfo(s),o.addModelId(s),o.addInputProperties(s),o.addAccessControl(s),e.exports=s},220:(e,t,n)=>{"use strict";const{Node:i}=n(6291);n(7498);var o=n(2554),r={node:{name:"SetModelProperties",docs:"https://docs.noodl.net/nodes/data/object/set-object-properties",displayNodeName:"Set Object Properties",inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}}},outputs:{stored:{type:"signal",displayName:"Done",group:"Events"}}}};o.addBaseInfo(r),o.addModelId(r),o.addInputProperties(r),e.exports=r},6256:e=>{"use strict";const t={name:"Date To String",docs:"https://docs.noodl.net/nodes/utilities/date-to-string",category:"Utilities",initialize:function(){this._internal.formatString="{year}-{month}-{date}"},inputs:{formatString:{displayName:"Format",type:"string",default:"{year}-{month}-{date}",set:function(e){this._internal.formatString!==e&&(this._internal.formatString=e,void 0!==this._internal.currentInput&&(this._format(),this.flagOutputDirty("currentValue")))}},input:{type:{name:"date"},displayName:"Date",set:function(e){const t="string"==typeof e?new Date(e):e;this._internal.currentInput!==t&&(this._internal.currentInput=t,this._format(),this.flagOutputDirty("currentValue"),this.sendSignalOnOutput("inputChanged"))}}},outputs:{currentValue:{type:"string",displayName:"Date String",group:"Value",getter:function(){return this._internal.dateString}},inputChanged:{type:"signal",displayName:"Date Changed",group:"Signals"}},methods:{_format(){const e=this._internal.currentInput,t=this._internal.formatString,n=("0"+e.getDate()).slice(-2),i=("0"+(e.getMonth()+1)).slice(-2),o=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),r=e.getFullYear(),s=("0"+e.getHours()).slice(-2),a=("0"+e.getMinutes()).slice(-2),l=("0"+e.getSeconds()).slice(-2);this._internal.dateString=t.replace(/\{date\}/g,n).replace(/\{month\}/g,i).replace(/\{monthShort\}/g,o).replace(/\{year\}/g,r).replace(/\{hours\}/g,s).replace(/\{minutes\}/g,a).replace(/\{seconds\}/g,l)}}};e.exports={node:t}},6290:(e,t,n)=>{"use strict";const i=n(2806),o={name:"Expression",docs:"https://docs.noodl.net/nodes/math/expression",usePortAsLabel:"expression",category:"CustomCode",color:"javascript",initialize:function(){var e=this._internal;e.scope={},e.hasScheduledEvaluation=!1,e.code=void 0,e.cachedValue=0,e.currentExpression="",e.compiledFunction=void 0,e.inputNames=[],e.inputValues=[]},getInspectInfo(){return this._internal.cachedValue},inputs:{expression:{group:"General",inputPriority:1,type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Expression",set:function(e){var t=this._internal;t.currentExpression=r+"return ("+e+");",t.compiledFunction=void 0;var n=l(e),o=i(n,t.inputNames),s=i(t.inputNames,n),a=this;s.forEach((function(e){a.deregisterInput(e),delete t.scope[e]})),o.forEach((function(e){a.hasInput(e)||(a.registerInput(e,{set:function(n){t.scope[e]=n,this.isInputConnected("run")||this._scheduleEvaluateExpression()}}),t.scope[e]=0,a._inputValues[e]=0)})),t.inputNames=Object.keys(t.scope),this.isInputConnected("run")||this._scheduleEvaluateExpression()}},run:{group:"Actions",displayName:"Run",type:"signal",valueChangedToTrue:function(){this._scheduleEvaluateExpression()}}},outputs:{result:{group:"Result",type:"*",displayName:"Result",getter:function(){return this._internal.currentExpression?this._internal.cachedValue:0}},isTrue:{group:"Result",type:"boolean",displayName:"Is True",getter:function(){return!!this._internal.currentExpression&&!!this._internal.cachedValue}},isFalse:{group:"Result",type:"boolean",displayName:"Is False",getter:function(){return!this._internal.currentExpression||!this._internal.cachedValue}},isTrueEv:{group:"Events",type:"signal",displayName:"On True"},isFalseEv:{group:"Events",type:"signal",displayName:"On False"}},prototypeExtensions:{registerInputIfNeeded:{value:function(e){this.hasInput(e)||(this._internal.scope[e]=0,this._inputValues[e]=0,this.registerInput(e,{set:function(t){this._internal.scope[e]=t,this.isInputConnected("run")||this._scheduleEvaluateExpression()}}))}},_scheduleEvaluateExpression:{value:function(){var e=this._internal;!1===e.hasScheduledEvaluation&&(e.hasScheduledEvaluation=!0,this.flagDirty(),this.scheduleAfterInputsHaveUpdated((function(){var t=e.cachedValue;e.cachedValue=this._calculateExpression(),t!==e.cachedValue&&(this.flagOutputDirty("result"),this.flagOutputDirty("isTrue"),this.flagOutputDirty("isFalse")),e.cachedValue?this.sendSignalOnOutput("isTrueEv"):this.sendSignalOnOutput("isFalseEv"),e.hasScheduledEvaluation=!1})))}},_calculateExpression:{value:function(){var e=this._internal;e.compiledFunction||(e.compiledFunction=this._compileFunction());for(var t=0;t<e.inputNames.length;++t){var n=e.scope[e.inputNames[t]];e.inputValues[t]=n}try{return e.compiledFunction.apply(null,e.inputValues)}catch(e){console.error("Error in expression:",e.message)}return 0}},_compileFunction:{value:function(){var e=this._internal.currentExpression,t=Object.keys(this._internal.scope),n=e+t.join(" ");if(!1===s.hasOwnProperty(n)){t.push(e);try{s[n]=function(e,t){function n(){return e.apply(this,t)}return n.prototype=e.prototype,new n}(Function,t)}catch(e){console.error("Failed to compile JS function",e.message)}}return s[n]}}}};var r=["var min = Math.min,    max = Math.max,    cos = Math.cos,    sin = Math.sin,    tan = Math.tan,    sqrt = Math.sqrt,    pi = Math.PI,    round = Math.round,    floor = Math.floor,    ceil = Math.ceil,    abs = Math.abs,    random = Math.random;"].join(""),s={},a=["min","max","cos","sin","tan","sqrt","pi","round","floor","ceil","abs","random","Math","window","document","undefined","Vars","true","false","null"];function l(e){var t=[];function n(e){-1===a.indexOf(e)&&(t.some((function(t){return t===e}))||t.push(e))}var i=(e=e.replace(/\"([^\"]*)\"/g,"").replace(/\'([^\']*)\'/g,"")).matchAll(/[a-zA-Z\_\$][a-zA-Z0-9\.\_\$]*/g);for(const e of i){var o=e[0];-1!==o.indexOf(".")&&(o=o.split(".")[0]),n(o)}return t}function u(e,t,n){var i=l(t).map((function(e){return{group:"Parameters",name:e,type:{name:"*",editAsType:"string"},plug:"input"}}));n.sendDynamicPorts(e,i)}function c(e,t){try{new Function(t.parameters.expression),e.clearWarning(t.component.name,t.id,"expression-compile-error")}catch(n){e.sendWarning(t.component.name,t.id,"expression-compile-error",{message:n.message})}}e.exports={node:o,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Expression",(function(t){t.parameters.expression&&(u(t.id,t.parameters.expression,e.editorConnection),c(e.editorConnection,t)),t.on("parameterUpdated",(function(n){"expression"===n.name&&(u(t.id,t.parameters.expression,e.editorConnection),c(e.editorConnection,t))}))}))}}},7383:e=>{"use strict";function t(e){if(void 0!==e)return!e}const n={name:"Inverter",docs:"https://docs.noodl.net/nodes/logic/inverter",category:"Logic",initialize:function(){this._internal.currentValue=void 0},getInspectInfo(){return String(t(this._internal.currentValue))},inputs:{value:{type:{name:"boolean"},displayName:"Value",set:function(e){this._internal.currentValue=e,this.flagOutputDirty("result")}}},outputs:{result:{type:"boolean",displayName:"Result",getter:function(){return t(this._internal.currentValue)}}}};e.exports={node:n}},1048:e=>{"use strict";const t={name:"Or",docs:"https://docs.noodl.net/nodes/logic/or",category:"Logic",initialize:function(){this._internal.inputs=[]},getInspectInfo(){return this._internal.inputs.some(n)},numberedInputs:{input:{type:"boolean",displayPrefix:"Input",createSetter:e=>function(t){this._internal.inputs[e]!==t&&(this._internal.inputs[e]=t,this.flagOutputDirty("result"))}}},outputs:{result:{type:"boolean",displayName:"Result",getter:function(){return this._internal.inputs.some(n)}}}};function n(e){return!!e}e.exports={node:t}},2658:(e,t,n)=>{const{Node:i}=n(6291),o=n(960),r=n(7498),s={name:"RunTasks",displayNodeName:"Run Tasks",docs:"https://docs.noodl.net/nodes/data/run-tasks",color:"data",category:"Data",initialize(){this._internal.queuedOperations=[],this._internal.state="idle",this._internal.maxRunningTasks=10,this._internal.activeTasks=new Map},inputs:{items:{group:"Data",displayName:"Items",type:"array",set:function(e){e&&e!==this._internal.items&&(this._internal.items=e)}},stopOnFailure:{group:"General",displayName:"Stop On Failure",type:"boolean",default:!1,set:function(e){this._internal.stopOnFailure=e}},maxRunningTasks:{group:"General",displayName:"Max Running Tasks",type:"number",default:10,set:function(e){this._internal.maxRunningTasks=e}},taskTemplate:{type:"component",displayName:"Template",group:"General",set:function(e){this._internal.template=e}},run:{group:"General",displayName:"Do",type:"signal",valueChangedToTrue:function(){this.scheduleRun()}},abort:{group:"General",displayName:"Abort",type:"signal",valueChangedToTrue:function(){this.scheduleAbort()}}},outputs:{success:{type:"signal",group:"Events",displayName:"Success"},failure:{type:"signal",group:"Events",displayName:"Failure"},done:{type:"signal",group:"Events",displayName:"Done"},aborted:{type:"signal",group:"Events",displayName:"Aborted"}},methods:{scheduleRun(){var e=this._internal;e.hasScheduledRun||(e.hasScheduledRun=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._queueOperation((()=>{e.hasScheduledRun=!1,this.run()}))})))},scheduleAbort(){var e=this._internal;e.hasScheduledAbort||(e.hasScheduledAbort=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._queueOperation((()=>{e.hasScheduledAbort=!1,this.abort()}))})))},async createTaskComponent(e){const t=this._internal,n=(this.nodeScope.modelScope||r).create(e);var i=await this.nodeScope.createNode(t.template,o(),{_forEachModel:n,_forEachNode:this});const s=i.isInputConnected.bind(i);for(var a in i.isInputConnected=e=>"Do"===e||s(e),i.hasInput("Id")&&i.setInputValue("Id",n.getId()),i.hasInput("id")&&i.setInputValue("id",n.getId()),i._inputs)void 0!==n.data[a]&&i.setInputValue(a,n.data[a]);return i._internal.creatorCallbacks={onOutputChanged:(e,t,o)=>{!1!==o&&void 0!==o||!0!==t||this.itemOutputSignalTriggered(e,n,i)}},i},async startTask(e){const t=this._internal;try{const i=await this.createTaskComponent(e);t.runningTasks++,"Do",(n=i).queueInput("Do",!0),n.queueInput("Do",!1),t.activeTasks.set(i.id,i)}catch(e){console.log(e)}var n},async run(){const e=this._internal;if(this.context.editorConnection&&("idle"!==e.state?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks",{message:"Cannot start when not in idle mode"}):e.template?e.items?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks",{message:"No items array provided."}):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"run-tasks",{message:"No task template specified."})),"idle"===e.state&&e.template&&e.items){e.state="running",e.numTasks=e.items.length,e.failedTasks=0,e.completedTasks=0,e.queuedTasks=[].concat(e.items),e.runningTasks=0,0===e.items.length&&(this.sendSignalOnOutput("success"),e.state="idle");for(let t=0;t<Math.min(e.maxRunningTasks,e.queuedTasks.length);t++){const t=e.queuedTasks.shift();if(!t)break;this.startTask(t)}}},abort:function(){this._internal.state="aborted"},itemOutputSignalTriggered:function(e,t,n){const i=this._internal;if("idle"===i.state)return;const o=()=>{if("aborted"===i.state)return this.sendSignalOnOutput("aborted"),void(i.state="idle");if(i.completedTasks===i.numTasks)0===i.failedTasks?this.sendSignalOnOutput("success"):this.sendSignalOnOutput("failure"),this.sendSignalOnOutput("done"),i.state="idle";else if(i.stopOnFailure)if(0===i.failedTasks){i.runningTasks++;const e=i.queuedTasks.shift();e&&this.startTask(e)}else this.sendSignalOnOutput("failure"),this.sendSignalOnOutput("aborted");else{i.runningTasks++;const e=i.queuedTasks.shift();e&&this.startTask(e)}};"Success"===e?(i.completedTasks++,i.runningTasks--,o()):"Failure"===e&&(i.completedTasks++,i.failedTasks++,i.runningTasks--,o()),i.activeTasks.delete(n.id),this.nodeScope.deleteNode(n)},_queueOperation(e){this._internal.queuedOperations.push(e),this._runQueueOperations()},async _runQueueOperations(){if(!this.runningOperations){for(this.runningOperations=!0;this._internal.queuedOperations.length;){const e=this._internal.queuedOperations.shift();await e()}this.runningOperations=!1}}},_deleteAllTasks(){for(const e of this._internal.activeTasks)this.nodeScope.deleteNode(e);this._internal.activeTasks.clear()},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._deleteAllTasks()}};e.exports={node:s}},7070:(e,t,n)=>{const i=n(592),o={name:"JavaScriptFunction",displayNodeName:"Function",docs:"https://docs.noodl.net/nodes/javascript/function",category:"CustomCode",color:"javascript",exportDynamicPorts:!0,initialize:function(){this._internal.inputValues={},this._internal.outputValues={},this._internal.outputValuesProxy=new Proxy(this._internal.outputValues,{set:(e,t,n)=>{if(!this._deleted)return n!==this._internal.outputValues[t]&&(this.registerOutputIfNeeded("out-"+t),this._internal.outputValues[t]=n,this.flagOutputDirty("out-"+t)),!0}}),this._internal._this={}},getInspectInfo(){return[{type:"value",value:{inputs:this._internal.inputValues,outputs:this._internal.outputValues}}]},inputs:{scriptInputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Inputs",set(e){}},scriptOutputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Outputs",set(e){}},functionScript:{displayName:"Script",plug:"input",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},group:"General",set(e){void 0!==e?(this._internal.func=this.parseScript(e),this.isInputConnected("run")||this.scheduleRun()):this._internal.func=void 0}},run:{type:"signal",displayName:"Run",group:"Actions",valueChangedToTrue:function(){this.scheduleRun()}}},outputs:{},methods:{scheduleRun:function(){this.runScheduled||(this.runScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.runScheduled=!1,this._deleted||this.runScript()})))},runScript:async function(){const e=this._internal.func;if(void 0===e)return;const t=this._internal.inputValues,n=this._internal.outputValuesProxy;for(const e in this.model.outputPorts)if(this._isSignalType(e)){const t=()=>{this.hasOutput(e)&&this.sendSignalOnOutput(e)};this._internal.outputValues[e.substring("out-".length)]=t,this._internal.outputValues[e.substring("out-".length)].send=t}try{await e.apply(this._internal._this,[t,n,i.createNoodlAPI(this.nodeScope.modelScope),i.getComponentScopeForNode(this)])}catch(e){console.log("Error in JS node run code.",Object.getPrototypeOf(e).constructor.name+": "+e.message,e.stack),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-function-run-waring",{showGlobally:!0,message:e.message,stack:e.stack})}},setScriptInputValue:function(e,t){this._internal.inputValues[e]=t,this.isInputConnected("run")||this.scheduleRun()},getScriptOutputValue:function(e){if(!this._isSignalType(e))return this._internal.outputValues[e]},setScriptInputType:function(e,t){this._internal.inputTypes[e]=t},setScriptOutputType:function(e,t){this._internal.outputTypes[e]=t},parseScript:function(e){var t;try{t=new(0,Object.getPrototypeOf((async function(){})).constructor)("Inputs","Outputs","Noodl","Component",i.getCodePrefix()+e)}catch(e){console.log("Error while parsing action script: "+e)}return t},_isSignalType:function(e){return this.model.outputPorts[e]&&"signal"===this.model.outputPorts[e].type},registerInputIfNeeded:function(e){if(!this.hasInput(e)){if(e.startsWith("in-")){const t=e.substring("in-".length),n={set:this.setScriptInputValue.bind(this,t)};this.model&&this.model.parameters["intype-"+t]&&(n.type=this.model.parameters["intype-"+t]),this.registerInput(e,n)}if(e.startsWith("intype-")){const t=e.substring("intype-".length);this.registerInput(e,{set(e){this.hasInput("in"+t)&&(this.getInput("in"+t).type=e)}})}e.startsWith("outtype-")&&this.registerInput(e,{set(){}})}},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("out-")?this.registerOutput(e,{getter:this.getScriptOutputValue.bind(this,e.substring("out-".length))}):void 0}}},r=[{value:"string",label:"String"},{value:"boolean",label:"Boolean"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"date",label:"Date"},{value:"array",label:"Array"},{value:"color",label:"Color"}];e.exports={node:o,setup:function(e,t){function n(t){function n(){var n=[];const o=r.concat([{value:"signal",label:"Signal"}]);void 0!==t.parameters.scriptOutputs&&t.parameters.scriptOutputs.length>0&&t.parameters.scriptOutputs.forEach((e=>{n.push({name:"outtype-"+e.label,displayName:"Type",editorName:e.label+" | Type",plug:"input",type:{name:"enum",enums:o,allowEditOnly:!0},default:"string",parent:"scriptOutputs",parentItemId:e.id}),n.push({name:"out-"+e.label,displayName:e.label,plug:"output",type:t.parameters["outtype-"+e.label]||"*",group:"Outputs"})})),void 0!==t.parameters.scriptInputs&&t.parameters.scriptInputs.length>0&&t.parameters.scriptInputs.forEach((e=>{n.push({name:"intype-"+e.label,displayName:"Type",editorName:e.label+" | Type",plug:"input",type:{name:"enum",enums:r,allowEditOnly:!0},default:"string",parent:"scriptInputs",parentItemId:e.id}),n.push({name:"in-"+e.label,displayName:e.label,plug:"input",type:t.parameters["intype-"+e.label]||"string",group:"Inputs"})})),function(e,t,n,o,r){if(o.editorConnection.clearWarning(n.component.name,n.id,"js-function-run-waring"),void 0!==e){try{new(0,Object.getPrototypeOf((async function(){})).constructor)("Inputs","Outputs","Noodl","Component",e),o.editorConnection.clearWarning(n.component.name,n.id,"js-function-parse-waring")}catch(e){o.editorConnection.sendWarning(n.component.name,n.id,"js-function-parse-waring",{showGlobally:!0,message:e.message})}i.parseAndAddPortsFromScript(e,r,{inputPrefix:"in-",outputPrefix:"out-"})}else o.editorConnection.clearWarning(n.component.name,n.id,"js-function-parse-waring")}(t.parameters.functionScript,0,t,e,n),n.forEach((e=>{"signal"===e.type&&"output"===e.plug&&(t.outputPorts[e.name]=e)})),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.JavaScriptFunction",(function(e){n(e)}));for(const e of t.getNodesWithType("JavaScriptFunction"))n(e)}))}}},6325:e=>{const t={name:"String Format",docs:"https://docs.noodl.net/nodes/string-manipulation/string-format",category:"String Manipulation",initialize(){const e=this._internal;e.format="",e.cachedResult="",e.resultDirty=!1,e.inputValues={}},getInspectInfo(){return this.formatValue()},inputs:{format:{type:{name:"string",multiline:!0},displayName:"Format",set(e){this._internal.format!==e&&(this._internal.format=e,this._internal.resultDirty=!0,this.scheduleFormat())}}},outputs:{formatted:{type:"string",displayName:"Formatted",get(){return this.formatValue()}}},methods:{formatValue(){var e=this._internal;if(e.resultDirty){var t=e.format,n=e.format.match(/\{[A-Za-z0-9_]*\}/g),i=[];n&&(i=n.map((function(e){return e.replace("{","").replace("}","")}))),i.forEach((function(n){var i=e.inputValues[n];t=t.replace("{"+n+"}",void 0!==i?i:"")})),e.cachedResult=t,e.resultDirty=!1}return e.cachedResult},registerInputIfNeeded(e){this.hasInput(e)||this.registerInput(e,{set:n.bind(this,e)})},scheduleFormat(){this.formatScheduled||(this.formatScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.formatValue(),this.flagOutputDirty("formatted"),this.formatScheduled=!1})))}}};function n(e,t){this._internal.inputValues[e]!==t&&(this._internal.inputValues[e]=t,this._internal.resultDirty=!0,this.scheduleFormat())}function i(e,t,n){var i=(t.match(/\{[A-Za-z0-9_]*\}/g)||[]).map((function(e){return e.replace("{","").replace("}","")})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return{name:e,type:"string",plug:"input"}}));n.sendDynamicPorts(e,i)}e.exports={node:t,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.String Format",(function(t){t.parameters.format&&i(t.id,t.parameters.format,e.editorConnection),t.on("parameterUpdated",(function(n){"format"===n.name&&i(t.id,t.parameters.format,e.editorConnection)}))}))}}},4087:e=>{const t={name:"String Mapper",docs:"https://docs.noodl.net/nodes/string-manipulation/string-mapper",category:"Utilities",initialize:function(){this._internal.inputs=[],this._internal.mappings=[]},getInspectInfo(){return this._internal.mappedString},numberedInputs:{input:{type:"string",displayPrefix:"Input",group:"Inputs",index:10,createSetter:e=>function(t){t=void 0===t?"":t.toString(),this._internal.inputs[e]=t,this.scheduleMapping()}},output:{type:"string",displayPrefix:"Mapping",index:1001,group:"Mappings",createSetter:e=>function(t){t=void 0===t?"":t.toString(),this._internal.mappings[e]=t,this.scheduleMapping()}}},inputs:{inputString:{type:{name:"string"},index:1,displayName:"Input String",set:function(e){this._internal.currentInputString=void 0!==e?e.toString():void 0,this.scheduleMapping()}},defaultMapping:{type:"string",displayName:"Default",index:1e3,group:"Mappings",set:function(e){this._internal.defaultMapping=e,this.scheduleMapping()}}},outputs:{mappedString:{type:"string",displayName:"Mapped String",group:"Value",getter:function(){return this._internal.mappedString}}},prototypeExtensions:{doMapping:function(){this._internal.hasScheduledFetch=!1;var e=this._internal.inputs.indexOf(this._internal.currentInputString);this._internal.mappedString=-1!==e?this._internal.mappings[e]:this._internal.defaultMapping,this.flagOutputDirty("mappedString")},scheduleMapping:function(){var e=this._internal;e.hasScheduledFetch||(e.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated(this.doMapping.bind(this)))}}};e.exports={node:t}},546:e=>{"use strict";e.exports={node:{name:"Substring",docs:"https://docs.noodl.net/nodes/string-manipulation/substring",category:"String Manipulation",initialize:function(){var e=this._internal;e.startIndex=0,e.endIndex=-1,e.cachedResult="",e.inputString="",e.resultDirty=!1},inputs:{start:{type:"number",displayName:"Start",default:0,set:function(e){this._internal.startIndex=e,this._internal.resultDirty=!0,this.flagOutputDirty("result")}},end:{type:"number",displayName:"End",default:0,set:function(e){this._internal.endIndex=e,this._internal.resultDirty=!0,this.flagOutputDirty("result")}},string:{type:{name:"string"},displayName:"String",default:"",set:function(e){e=e.toString(),this._internal.inputString=e,this._internal.resultDirty=!0,this.flagOutputDirty("result")}}},outputs:{result:{type:"string",displayName:"Result",getter:function(){var e=this._internal;return e.resultDirty&&(-1===e.endIndex?e.cachedResult=e.inputString.substr(e.startIndex):e.cachedResult=e.inputString.substr(e.startIndex,e.endIndex-e.startIndex),e.resultDirty=!1),e.cachedResult}}}}}},6788:(e,t,n)=>{"use strict";const i=n(7498),o={name:"Unique Id",docs:"https://docs.noodl.net/nodes/utilities/unique-id",category:"String Manipulation",initialize:function(){this._internal.guid=i.guid()},getInspectInfo(){return this._internal.guid},inputs:{new:{displayName:"New",valueChangedToTrue:function(){this._internal.guid=i.guid(),this.flagOutputDirty("guid")}}},outputs:{guid:{type:"string",displayName:"Id",getter:function(){return this._internal.guid}}},prototypeExtensions:{}};e.exports={node:o}},7822:(e,t,n)=>{"use strict";const i=n(6291);var o={name:"net.noodl.user.SetUserProperties",docs:"https://docs.noodl.net/nodes/data/user/set-user-properties",displayNodeName:"Set User Properties",category:"Cloud Services",color:"data",initialize:function(){this._internal.userProperties={}},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{store:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},email:{displayName:"Email",type:"string",group:"General",set:function(e){this._internal.email=e}},username:{displayName:"Username",type:"string",group:"General",set:function(e){this._internal.username=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-set-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-set-warning")},scheduleStore:function(){const e=this._internal;!0!==this.storeScheduled&&(this.storeScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.storeScheduled=!1,i.Services.UserService.forScope(this.nodeScope.modelScope).setUserProperties({email:this._internal.email,username:this._internal.username,properties:e.userProperties,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))},setUserProperty:function(e,t){this._internal.userProperties[e]=t},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("prop-")?this.registerInput(e,{set:this.setUserProperty.bind(this,e.substring("prop-".length))}):void 0}}};function r(e,t,n,i){var o=[];if(i){var r=i.find((e=>"_User"===e.name));if(r&&r.schema&&r.schema.properties){var s=r.schema.properties;const e="undefined"==typeof _noodl_cloud_runtime_version?["authData","createdAt","updatedAt","email","username","emailVerified","password"]:["authData","createdAt","updatedAt","email","username"];for(var a in s)if(-1===e.indexOf(a)){var l=s[a];if(!o.find((e=>e.name===a)))if("Relation"===l.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};o.push({type:{name:e[l.type]?e[l.type]:"*"},plug:"input",group:"Properties",name:"prop-"+a,displayName:a})}}}}n.sendDynamicPorts(e,o)}e.exports={node:o,setup:function(e,t){function n(n){r(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections")),n.on("parameterUpdated",(function(i){r(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections"))})),t.on("metadataChanged.systemCollections",(function(t){r(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.net.noodl.user.SetUserProperties",(function(e){n(e)}));for(const e of t.getNodesWithType("net.noodl.user.SetUserProperties"))n(e)}))}}},9259:(e,t,n)=>{"use strict";const i=n(6291),{Node:o}=n(6291);var r={name:"net.noodl.user.User",docs:"https://docs.noodl.net/nodes/data/user/user-node",displayNodeName:"User",category:"Cloud Services",color:"data",initialize:function(){var e=this;this._internal.onModelChangedCallback=function(t){e.isInputConnected("fetch")||(e.hasOutput("prop-"+t.name)&&e.flagOutputDirty("prop-"+t.name),e.hasOutput("changed-"+t.name)&&e.sendSignalOnOutput("changed-"+t.name),e.sendSignalOnOutput("changed"))};const t=i.Services.UserService.forScope(this.nodeScope.modelScope);this.setUserModel(t.current),t.on("loggedIn",(()=>{this.setUserModel(t.current),this.hasOutput("loggedIn")&&this.sendSignalOnOutput("loggedIn")})),t.on("sessionGained",(()=>{this.setUserModel(t.current)})),t.on("loggedOut",(()=>{this.setUserModel(void 0),this.hasOutput("loggedOut")&&this.sendSignalOnOutput("loggedOut")})),t.on("sessionLost",(()=>{this.setUserModel(void 0),this.hasOutput("sessionLost")&&this.sendSignalOnOutput("sessionLost")}))},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:this._internal.model.data}]:"[No Model]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return void 0!==this._internal.model?this._internal.model.getId():void 0}},fetched:{type:"signal",displayName:"Fetched",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}},username:{type:"string",displayName:"Username",group:"General",getter:function(){return void 0!==this._internal.model?this._internal.model.get("username"):void 0}},email:{type:"string",displayName:"Email",group:"General",getter:function(){return void 0!==this._internal.model?this._internal.model.get("email"):void 0}},authenticated:{type:"boolean",displayName:"Authenticated",group:"General",getter:function(){return void 0!==this._internal.model}}},inputs:{fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}}},methods:{_onNodeDeleted:function(){o.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},scheduleOnce:function(e,t){const n=this,i="hasScheduled"+e;this._internal[i]||(this._internal[i]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[i]=!1,t()})))},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-warning")},setUserModel(e){const t=this._internal;if(t.model!==e&&(t.model&&t.model.off("change",t.onModelChangedCallback),t.model=e,e&&e.on("change",t.onModelChangedCallback)),this.flagOutputDirty("id"),this.flagOutputDirty("authenticated"),this.flagOutputDirty("email"),this.flagOutputDirty("username"),e)for(var n in e.data)this.hasOutput("prop-"+n)&&this.flagOutputDirty("prop-"+n)},scheduleFetch:function(){this._internal,this.scheduleOnce("Fetch",(()=>{const e=i.Services.UserService.forScope(this.nodeScope.modelScope);e.fetchCurrentUser({success:t=>{this.setUserModel(e.current),this.sendSignalOnOutput("fetched")},error:e=>{this.setError(e||"Failed to fetch.")}})}))},registerOutputIfNeeded:function(e){this.hasOutput(e)||("loggedOut"!==e&&"loggedIn"!==e&&"sessionLost"!==e?e.startsWith("prop-")&&this.registerOutput(e,{getter:this.getUserProperty.bind(this,e.substring("prop-".length))}):this.registerOutput(e,{getter:()=>{}}))},getUserProperty:function(e){return void 0!==this._internal.model?this._internal.model.get(e):void 0}}};function s(e,t,n,i){var o=[];if(i){var r=i.find((e=>"_User"===e.name));if(r&&r.schema&&r.schema.properties){var s=r.schema.properties;const e=["authData","password","username","email"];for(var a in s)if(-1===e.indexOf(a)){var l=s[a];if(!o.find((e=>e.name===a)))if("Relation"===l.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};o.push({type:{name:e[l.type]?e[l.type]:"*"},plug:"output",group:"Properties",name:"prop-"+a,displayName:a}),o.push({type:"signal",plug:"output",group:"Changed Events",displayName:a+" Changed",name:"changed-"+a})}}}}"undefined"==typeof _noodl_cloud_runtime_version&&(o.push({plug:"output",name:"loggedIn",type:"signal",displayName:"Logged In",group:"Events"}),o.push({plug:"output",name:"loggedOut",type:"signal",displayName:"Logged Out",group:"Events"}),o.push({plug:"output",name:"sessionLost",type:"signal",displayName:"Session Lost",group:"Events"})),n.sendDynamicPorts(e,o)}e.exports={node:r,setup:function(e,t){function n(n){s(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections")),n.on("parameterUpdated",(function(i){s(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections"))})),t.on("metadataChanged.systemCollections",(function(t){s(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.net.noodl.user.User",(function(e){n(e)}));for(const e of t.getNodesWithType("net.noodl.user.User"))n(e)}))}}},9125:(e,t,n)=>{"use strict";const i=n(5953).createDefinition({name:"Boolean",docs:"https://docs.noodl.net/nodes/data/boolean",startValue:!1,type:{name:"boolean"},cast:function(e){return Boolean(e)}});e.exports={node:i}},9345:(e,t,n)=>{"use strict";const i=n(5953).createDefinition({name:"Number",docs:"https://docs.noodl.net/nodes/data/number",startValue:0,type:{name:"number"},cast:function(e){return Number(e)}});e.exports={node:i}},2610:(e,t,n)=>{"use strict";const i=n(5953),{NodeDefinition:o}=n(6291),r=i.createDefinition({name:"String",docs:"https://docs.noodl.net/nodes/data/string",shortDesc:"Contains a string (text).",startValue:"",type:{name:"string"},cast:function(e){return String(e)},onChanged:function(){this.flagOutputDirty("length")}});o.extend(r,{outputs:{length:{type:"number",displayName:"Length",getter:function(){return this._internal.currentValue.length}}}}),e.exports={node:r}},5953:e=>{"use strict";e.exports={createDefinition:function(e){return{name:e.name,docs:e.docs,shortDesc:e.shortDesc,category:"Variables",initialize:function(){this._internal.currentValue=e.startValue,this._internal.latestValue=0},getInspectInfo(){return[{type:"color"===e.type.name?"color":"text",value:this._internal.currentValue}]},inputs:{value:{type:e.type,displayName:"Value",default:e.startValue,set:function(e){!1===this.isInputConnected("saveValue")?this.setValueTo(e):this._internal.latestValue=e}},saveValue:{displayName:"Set",valueChangedToTrue:function(){this.scheduleAfterInputsHaveUpdated((function(){this.setValueTo(this._internal.latestValue),this.sendSignalOnOutput("stored")}))}}},outputs:{savedValue:{type:e.type.name,displayName:"Value",getter:function(){return this._internal.currentValue}},changed:{type:"signal",displayName:"Changed"},stored:{type:"signal",displayName:"Stored"}},prototypeExtensions:{setValueTo:function(t){t=e.cast(t);const n=this._internal.currentValue!==t;this._internal.currentValue=t,n&&(this.flagOutputDirty("savedValue"),this.sendSignalOnOutput("changed"),e.onChanged&&e.onChanged.call(this))}}}}}},7852:(e,t,n)=>{"use strict";const i=n(960);function o(e,t){this.context=e,this.nodes={},this.componentOwner=t,this.componentInstanceChildren={}}o.prototype.addConnection=function(e){try{t=e,["sourceId","sourcePort","targetId","targetPort"].forEach((function(e){if(!t[e])throw new Error("Missing "+e)}))}catch(e){throw new Error("Error in connection: "+e.message)}var t;try{var n=this.getNodeWithId(e.sourceId),i=this.getNodeWithId(e.targetId);i.registerInputIfNeeded(e.targetPort),n.registerOutputIfNeeded(e.sourcePort),i.connectInput(e.targetPort,n,e.sourcePort)}catch(e){console.error(e.message)}},o.prototype.setNodeParameters=function(e,t){const n=this.context.variants.getVariant(t.type,t.variant);if(n)e.setVariant(n);else{const n=t.parameters;var i=Object.keys(n);if(this.context.nodeRegister.hasNode(e.name)){var o=this.context.nodeRegister.getNodeMetadata(e.name);i.sort((function(e,t){var n=o.inputs[e],i=o.inputs[t];return(i?i.inputPriority:0)-(n?n.inputPriority:0)}))}i.forEach((t=>{e.registerInputIfNeeded(t),!1!==e.hasInput(t)&&e.queueInput(t,n[t])}))}},o.prototype.createNodeFromModel=async function(e){if("Component Children"!==e.type){var t;try{(t=await this.createNode(e.type,e.id)).setNodeModel(e)}catch(t){return console.error(t.message),void(this.context.editorConnection&&this.context.isWarningTypeEnabled("nodescope")&&this.context.editorConnection.sendWarning(this.componentOwner.name,e.id,"nodelibrary-unknown-node",{message:t.message,showGlobally:!0}))}e.variant&&t.setVariant&&t.setVariant(e.variant),this.setNodeParameters(t,e),e.parent&&this.insertNodeInTree(t,e)}else if(e.parent){var n=this.getNodeWithId(e.parent.id);this.componentOwner.setChildRoot(n)}},o.prototype.insertNodeInTree=function(e,t){var n=this.getNodeWithId(t.parent.id),i=t.parent.children.indexOf(t);if(!n.addChild)throw new Error("Node "+n.id+" of type "+n.constructor.name+" can't have children");n.addChild(e,i)},o.prototype.getNodeWithId=function(e){if(!1===this.nodes.hasOwnProperty(e))throw new Error("Unknown node id "+e);return this.nodes[e]},o.prototype.hasNodeWithId=function(e){return this.nodes.hasOwnProperty(e)},o.prototype.createPrimitiveNode=function(e,t,n){if(t||(t=i()),this.nodes.hasOwnProperty(t))throw Error("duplicate id "+t);const o=this.context.nodeRegister.createNode(e,t,this);if(n)for(const e in n)o[e]=n[e];return this.nodes[t]=o,o},o.prototype.createNode=async function(e,t,n){if(t||(t=i()),this.nodes.hasOwnProperty(t))throw Error("duplicate id "+t);let o;if(this.context.nodeRegister.hasNode(e)){if(o=this.context.nodeRegister.createNode(e,t,this),n)for(const e in n)o[e]=n[e]}else o=await this.context.createComponentInstanceNode(e,t,this,n),this.componentInstanceChildren[t]=o;return this.nodes[t]=o,o},o.prototype.getNodesWithIdRecursive=function(e){var t=n(5097),i=[];return function e(n,i,o){n.nodes.hasOwnProperty(i)&&o.push(n.nodes[i]),Object.keys(n.nodes).filter((function(e){return n.nodes[e]instanceof t})).forEach((function(t){e(n.nodes[t].nodeScope,i,o)}))}(this,e,i),i},o.prototype.getNodesWithType=function(e){var t=this;return Object.keys(this.nodes).filter((function(n){return t.nodes[n].name===e})).map((function(e){return t.nodes[e]}))},o.prototype.getNodesWithTypeRecursive=function(e){var t=n(5097),i=this,o=[];return o=o.concat(i.getNodesWithType(e)),Object.keys(i.nodes).filter((function(e){return i.nodes[e]instanceof t})).forEach((function(t){var n=i.nodes[t].nodeScope.getNodesWithTypeRecursive(e);o=o.concat(n)})),o},o.prototype.getAllNodesRecursive=function(){var e=n(5097);let t=[];return(()=>{t=t.concat(Object.values(this.nodes)),Object.keys(this.nodes).filter((t=>this.nodes[t]instanceof e)).forEach((e=>{var n=this.nodes[e].nodeScope.getAllNodesRecursive();t=t.concat(n)}))})(),t},o.prototype.getAllNodesWithVariantRecursive=function(e){return this.getAllNodesRecursive().filter((t=>t.variant===e))},o.prototype.onNodeModelRemoved=function(e){var t=this.getNodeWithId(e.id);e.parent&&this.getNodeWithId(e.parent.id).removeChild(t),t._onNodeDeleted(),delete this.nodes[t.id],delete this.componentInstanceChildren[t.id]},o.prototype.removeConnection=function(e){this.getNodeWithId(e.targetId).removeInputConnection(e.targetPort,e.sourceId,e.sourcePort)},o.prototype.setComponentModel=async function(e){this.componentModel=e;for(const t of e.getAllNodes())await this.createNodeFromModel(t);e.getAllConnections().forEach((e=>this.addConnection(e))),e.on("connectionAdded",(e=>this.addConnection(e)),this),e.on("connectionRemoved",this.removeConnection,this),e.on("nodeAdded",this.createNodeFromModel,this);var t=this;e.on("nodeParentWillBeRemoved",(function(e){if("Component Children"===e.type)return void(e.parent&&this.componentOwner.setChildRoot(null));const n=t.getNodeWithId(e.id);n.parent&&n.parent.removeChild(n)}),this),e.on("nodeParentUpdated",(function(e){if("Component Children"===e.type){var n=this.getNodeWithId(e.parent.id);this.componentOwner.setChildRoot(n)}else{var i=t.getNodeWithId(e.id);t.insertNodeInTree(i,e)}}),this),e.on("nodeRemoved",(function(e){"Component Children"!==e.type&&t.onNodeModelRemoved(e)}),this);for(const e in this.nodes){const t=this.nodes[e];t.nodeScopeDidInitialize&&t.nodeScopeDidInitialize()}},o.prototype.reset=function(){this.componentModel&&(this.componentModel.removeListenersWithRef(this),this.componentModel=void 0),Object.keys(this.nodes).forEach((e=>{this.nodes.hasOwnProperty(e)&&this.deleteNode(this.nodes[e])}))},o.prototype.deleteNode=function(e){if(!1!==this.nodes.hasOwnProperty(e.id)){if(e.parent&&e.parent.removeChild(e),e.getChildren&&e.getChildren().forEach((t=>{e.removeChild(t),(t.parentNodeScope||t.nodeScope).deleteNode(t)})),this.componentModel){const t=this.componentModel.getConnectionsFrom(e.id),n=this.componentModel.getConnectionsTo(e.id);t.concat(n).forEach((e=>{this.nodes.hasOwnProperty(e.targetId)&&this.nodes.hasOwnProperty(e.sourceId)&&this.removeConnection(e)}))}e._onNodeDeleted(),delete this.nodes[e.id],delete this.componentInstanceChildren[e.id]}else console.error("Node doesn't belong to this scope",e.id,e.name)},o.prototype.sendEventFromThisScope=function(e,t,n,i,o){if(i)for(var r=this.getNodesWithType("Event Receiver").filter((function(t){return t.getChannelName()===e})),s=0;s<r.length;s++)if(r[s].handleEvent(t))return!0;if("parent"===n&&this.componentOwner.parentNodeScope){const i=this.componentOwner.parent?this.componentOwner.parent.nodeScope:this.componentOwner.parentNodeScope;if(!i)return;i.sendEventFromThisScope(e,t,n,!0)}else if("children"===n){var a=this.nodes;for(var l in a)(u=a[l].children)&&u.forEach((i=>{if(i.name&&this.context.hasComponentModelWithName(i.name)&&i.nodeScope.sendEventFromThisScope(e,t,n,!0))return!0}))}else if("siblings"===n){let n;if(n=this.componentOwner.parent?this.componentOwner.parent.nodeScope:this.componentOwner.parentNodeScope,!n)return;for(var l in a=n.nodes){var u;(u=a[l].children)&&u.filter((e=>e.name&&this.context.hasComponentModelWithName(e.name)&&e.nodeScope!==this)).forEach((n=>{if(n.nodeScope.sendEventFromThisScope(e,t,null,!0))return!0}))}}return!1},e.exports=o},1179:e=>{"use strict";function t(e){if(!e.owner)throw new Error("Owner must be set");this.getter=e.getter,this.connections=[],this.owner=e.owner,this.name=e.name,this.onFirstConnectionAdded=e.onFirstConnectionAdded,this.onLastConnectionRemoved=e.onLastConnectionRemoved,this._id=void 0}Object.defineProperties(t.prototype,{value:{get:function(){return this.getter.call(this.owner)}},id:{get:function(){return this._id||(this._id=this.owner.id+this.name),this._id}},registerConnection:{value:function(e,t){this.connections.push({node:e,inputPortName:t}),1===this.connections.length&&this.onFirstConnectionAdded&&this.onFirstConnectionAdded.call(this.owner)}},deregisterConnection:{value:function(e,t){for(var n=0;n<this.connections.length;n++){var i=this.connections[n];if(i.node===e&&i.inputPortName===t){this.connections.splice(n,1);break}}0===this.connections.length&&this.onLastConnectionRemoved&&this.onLastConnectionRemoved.call(this.owner)}},flagDependeesDirty:{value:function(e){for(var t=0,n=this.connections.length;t<n;t++)this.connections[t].node.flagDirty()}},sendValue:{value:function(e){this._lastUpdateIteration!==this.owner._updatedAtIteration?(this._lastUpdateIteration=this.owner._updatedAtIteration,this.valuesSendThisIteration=0):this.valuesSendThisIteration++,this.valuesSendThisIteration>500&&(this.owner._cyclicLoop=!0);for(var t=0,n=this.connections.length;t<n;t++){var i=this.connections[t];i.node._setValueFromConnection(i.inputPortName,e)}}},hasConnections:{value:function(){return this.connections.length>0}}}),e.exports=t},6911:e=>{"use strict";e.exports={generateProjectSettings:function(e,t){const n={dynamicports:[],ports:[]};return function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.settings&&i.settings.forEach((function(t){e.ports.push(t)}))}}(n,t),n}}},4047:(e,t,n)=>{var i=n(1489);function o(){}o.events=new i,e.exports=o},6546:e=>{"use strict";function t(e,t){for(var n in this.duration=t.duration||0,this._isRunning=!1,this._hasCalledOnStart=!1,this.scheduler=e,this.repeatCount=1,this.delay=0,t)this[n]=t[n]}function n(e){this.requestFrame=e,this.runningTimers=[],this.newTimers=[]}t.prototype.start=function(){return this._isRunning&&this.stop(),this.scheduler.scheduleTimer(this),this},t.prototype.stop=function(){this.scheduler.stopTimer(this),this._hasCalledOnStart=!1,this._isRunning=!1,this._wasStopped=!0},t.prototype.isRunning=function(){return this._isRunning},t.prototype.durationLeft=function(){return this._durationLeft},n.prototype.createTimer=function(e){return new t(this,e)},n.prototype.scheduleTimer=function(e){-1===this.newTimers.indexOf(e)&&(0===e.repeatCount&&(e.repeatCount=1e5),this.newTimers.push(e),this.requestFrame())},n.prototype.stopTimer=function(e){var t;e._isRunning?(-1!==(t=this.runningTimers.indexOf(e))&&this.runningTimers.splice(t,1),e.onStop&&!e._wasStopped&&e.onStop()):-1!==(t=this.newTimers.indexOf(e))&&this.newTimers.splice(t,1)},n.prototype.runTimers=function(e){var t,n,i=[],o=[],r=[],s=this.runningTimers.length;for(t=0;t<s;++t)r[t]=this.runningTimers[t];for(t=0;t<s;++t)if((n=r[t])&&e>=n._start){var a;!1===n._hasCalledOnStart&&n.onStart&&(n.onStart(),n._hasCalledOnStart=!0),a=n.duration>0?(e-n._start)/(n.duration*n.repeatCount):1,n._durationLeft=n.duration*(1-a);var l=a*n.repeatCount-Math.floor(a*n.repeatCount);a>=1&&(l=1),n.onRunning&&n.onRunning(l),a<1&&n._isRunning?i.push(n):n._wasStopped||o.push(n)}else i.push(n);for(this.runningTimers=i,t=0;t<o.length;++t)o[t]._isRunning=!1,o[t]._hasCalledOnStart=!1,o[t].onFinish&&o[t].onFinish();if(this.newTimers.length>0){for(t=0;t<this.newTimers.length;++t)(n=this.newTimers[t])._start=e+n.delay,n._isRunning=!0,n._wasStopped=!1,this.runningTimers.push(n),0===n.delay&&(n.onStart&&(n.onStart(),n._hasCalledOnStart=!0),n.onRunning&&n.onRunning(0));this.newTimers.length=0}},n.prototype.hasPendingTimers=function(){return this.runningTimers.length>0||this.newTimers.length>0},e.exports=n},667:(e,t,n)=>{"use strict";function i(e){const t=String(e);return!t||"/"===t[0]||t.includes("://")||t.startsWith("data:")?t:(Noodl.baseUrl||"/")+t}n.r(t),n.d(t,{getAbsoluteUrl:()=>i})},8886:e=>{e.exports=class{constructor({graphModel:e,getNodeScope:t}){this.getNodeScope=t,e&&(this.graphModel=e,e.on("variantUpdated",(e=>this.onVariantUpdated(e))))}getVariant(e,t){if(this.graphModel)return this.graphModel.getVariant(e,t)}onVariantUpdated(e){const t=this.getNodeScope();if(!t)return;const n=t.getNodesWithTypeRecursive(e.typename).filter((t=>t.variant?t.variant.name===e.name:t.model&&t.model.variant===e.name));for(const t of n)t.setVariant(e)}}},7157:(e,t,n)=>{const i=n(6291),o={run:async(e,t)=>new Promise(((n,o)=>{const r=i.instance.getMetaData("cloudservices");if(void 0===r)return void o("No cloud services defined in this project.");const s=r.appId||r.workspaceId+"-"+r.instanceId,a=i.instance.editorConnection.isRunningLocally()?`http://${window.location.hostname}:8577`:r.endpoint;!function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e)}},n.open(t.method||"GET",t.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",t.appId),n.setRequestHeader("Content-Type","application/json");const o=i.instance.getMetaData("cloudservices");o&&o.deployVersion&&n.setRequestHeader("x-noodl-cloud-version",o.deployVersion);var r=localStorage["Parse/"+t.appId+"/currentUser"];if(void 0!==r)try{const e=JSON.parse(r);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}n.send(JSON.stringify(t.content))}("/functions/"+encodeURIComponent(e),{appId:s,endpoint:a,content:t,method:"POST",success:e=>{n(e?e.result:void 0)},error:e=>{o(e)}})}))};e.exports=o},5295:(e,t,n)=>{const i=n(7569),o=n(2036),r={upload:async(e,t)=>new Promise(((n,r)=>{i.instance.uploadFile({file:e,onUploadProgress:e=>{t&&t.onProgress&&t.onProgress(e)},success:e=>{n(new o(e))},error:e=>{r(e)}})}))};e.exports=r},5612:(e,t,n)=>{const i=n(9883),o=n(6291),r={showPopup:async(e,t)=>new Promise((n=>{r._noodlRuntime.context.showPopup(e,t,{onClosePopup:(e,t)=>{n({action:e.replace("closeAction-",""),parameters:t})}})})),navigate(e,t,n){i.instance.navigate(e,{target:t,params:n})},navigateToPath(e,t){let n,i;var r=o.instance.getProjectSettings().navigationPathType;void 0===r||"hash"===r?n=e:i=e;var s=[];if(t&&void 0!==t.query)for(let e in t.query)s.push(e+"="+t.query[e]);var a=(void 0!==i?i:"")+(s.length>=1?"?"+s.join("&"):"")+(void 0!==n?"#"+n:"");window.history.pushState({},"",a),dispatchEvent(new PopStateEvent("popstate",{}))}};e.exports=r},575:(e,t,n)=>{const i=n(6149),o={logIn:async e=>new Promise(((t,n)=>{i.instance.logIn({username:e.username,password:e.password,success:()=>{t()},error:e=>{n(e)}})})),signUp:async e=>new Promise(((t,n)=>{i.instance.signUp({username:e.username,password:e.password,email:e.email,properties:e.properties,success:()=>{t()},error:e=>{n(e)}})})),become:async e=>new Promise(((t,n)=>{i.instance.fetchCurrentUser({sessionToken:e,success:()=>{t()},error:e=>{n(e)}})})),on(e,t){i.instance.on(e,t)},off(e,t){i.instance.off(e,t)}},r={logOut:async()=>new Promise(((e,t)=>{i.instance.logOut({success:()=>{e()},error:e=>{t(e)}})})),save:async()=>new Promise(((e,t)=>{const n=Object.assign({},r.Properties.data);i.instance.setUserProperties({properties:n,success:()=>{e()},error:e=>{t(e)}})})),fetch:async()=>new Promise(((e,t)=>{i.instance.fetchCurrentUser({success:()=>{e()},error:e=>{t(e)}})}))};Object.defineProperty(o,"Current",{get:function(){const e=i.instance.current;return void 0===e?void 0:(r.email=e.email,r.username=e.username,r.id=e.id,r.emailVerified=e.emailVerified,r.Properties=e,r)}}),e.exports=o},1924:e=>{"use strict";var t={easeOutQuartic:function(e,t,n){return-(t-e)*(--n*n*n*n-1)+e},easeInQuartic:function(e,t,n){return n*n*n*n*(t-e)+e},easeInOutQuartic:function(e,t,n){return(n*=2)<1?(t-e)/2*n*n*n*n+e:-(t-e)/2*((n-=2)*n*n*n-2)+e},easeOutCubic:function(e,t,n){return(t-e)*(--n*n*n+1)+e},easeInCubic:function(e,t,n){return n*n*n*(t-e)+e},easeInOutCubic:function(e,t,n){return(n*=2)<1?(t-e)/2*n*n*n+e:(t-e)/2*((n-=2)*n*n+2)+e},easeOutQuadratic:function(e,t,n){return-(t-e)*n*(n-2)+e},easeInQuadratic:function(e,t,n){return n*n*(t-e)+e},easeInOutQuadratic:function(e,t,n){return(n*=2)<1?(t-e)/2*n*n+e:-(t-e)/2*((n-=1)*(n-2)-1)+e},linear:function(e,t,n){return e+(t-e)*n}};t.easeIn=t.easeInCubic,t.easeOut=t.easeOutCubic,t.easeInOut=t.easeInOutCubic,e.exports=t},1243:(e,t,n)=>{"use strict";var i=n(5310);const{getAbsoluteUrl:o}=n(667);function r(){this.loadedFontFamilies={},this.fontCssFamiliesAdded={},this.fontCallbacks={};var e=this;["Arial","Arial Black","Courier New","Helvetica","Impact","Lucida Console","Tahoma","Times New Roman"].forEach((function(t){e.loadedFontFamilies[t]=!0}))}r.prototype.loadFont=function(e){var t,n=(t=e=o(e),t.replace(/\.[^/.]+$/,"")).split("/").pop();if(this.loadedFontFamilies[n])this.fontCallbacks[n]&&this.fontCallbacks[n].forEach((function(e){e()}));else if(!this.fontCssFamiliesAdded[n]){this.fontCssFamiliesAdded[n]=!0;var r=document.createElement("style");r.type="text/css",r.appendChild(document.createTextNode("                    @font-face {                        font-family: '"+n+"';                        src: url('"+e+"');                    }                ")),document.head.appendChild(r);var s=this;i.load({timeout:6e5,custom:{families:[n]},fontactive:function(e){s.loadedFontFamilies[e]=!0,s.fontCallbacks[e]&&s.fontCallbacks[e].forEach((function(e){e()}))}})}},r.prototype.callWhenFontIsActive=function(e,t){this.loadedFontFamilies[e]?t():(this.fontCallbacks[e]||(this.fontCallbacks[e]=[]),this.fontCallbacks[e].push(t))},r.instance=new r,e.exports=r},7397:e=>{e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},6207:(e,t,n)=>{"use strict";const i=n(1924),o=n(5107);function r(e){this.name=e.name,this.startValue=0,this.endValue=0,this.currentValue=void 0,this.startMode="implicit",this.ease=e.ease,this.node=e.node,this.hasSampledStartValue=!1;var t=this;this.animation=e.node.context.timerScheduler.createTimer({startValue:0,endValue:0,onRunning:function(e){var n=t.ease(this.startValue,this.endValue,e);t.setCurrentValue(n)}}),this.animation.startValue=0,this.animation.endValue=0}Object.defineProperties(r.prototype,{setCurrentValue:{value:function(e){this.currentValue=e,this.node.flagOutputDirty(this.name)}},play:{value:function(e,t){if(void 0===e&&(console.log("Animation warning, start value is undefined"),e=0),void 0!==t){var n=this.animation;n.startValue=e,this.setCurrentValue(e),n.endValue=t,n.duration=this.node._internal.duration,n.start()}else console.error("Animation error, start:",e,"end:",t)}},playToEnd:{value:function(){!1!==this.hasConnections()&&(this.updateStartValue(),this.play(this.getTargetsCurrentValue(),this.endValue))}},playToStart:{value:function(){!1!==this.hasConnections()&&(this.updateStartValue(),this.play(this.getTargetsCurrentValue(),this.startValue))}},replayToEnd:{value:function(){!1!==this.hasConnections()&&(this.updateStartValue(),this.play(this.startValue,this.endValue))}},replayToStart:{value:function(){!1!==this.hasConnections()&&this.play(this.endValue,this.startValue)}},hasConnections:{value:function(){return this.node.getOutput(this.name).hasConnections()}},getTargetsCurrentValue:{value:function(){var e=this.node.getOutput(this.name).connections;const t=e[0].node.getInputValue(e[0].inputPortName);return t instanceof Object&&t.hasOwnProperty("value")?t.value:t}},updateStartValue:{value:function(){"implicit"!==this.startMode||this.hasSampledStartValue||(this.hasSampledStartValue=!0,this.startValue=this.getTargetsCurrentValue())}},stop:{value:function(){this.animation.stop(),this.setCurrentValue(void 0)}},jumpToStart:{value:function(){this.animation.stop(),this.setCurrentValue(this.startValue)}},jumpToEnd:{value:function(){this.animation.stop(),this.setCurrentValue(this.endValue)}}});var s={name:"Animation",docs:"https://docs.noodl.net/nodes/animation/animation",shortDesc:"Node that can animate any number of values, with different types of easing curves.",category:"Animation",deprecated:!0,initialize:function(){var e=this._internal;e.duration=300,e.ease=i.easeOut,e._isPlayingToEnd=!1,e.animations=[],e.cubicBezierPoints=[0,0,0,0],e.cubicBezierFunction=void 0;var t=this;e.animation=this.context.timerScheduler.createTimer({onFinish:function(){!1===e._isPlayingToEnd?t.sendSignalOnOutput("hasReachedStart"):t.sendSignalOnOutput("hasReachedEnd")}})},inputs:{duration:{index:0,type:"number",displayName:"Duration (ms)",group:"Animation Properties",default:300,set:function(e){this._internal.duration=e}},easingCurve:{index:10,type:{name:"enum",enums:[{value:"easeOut",label:"Ease Out"},{value:"easeIn",label:"Ease In"},{value:"linear",label:"Linear"},{value:"easeInOut",label:"Ease In Out"},{value:"cubicBezier",label:"Cubic Bezier"}]},group:"Animation Properties",displayName:"Easing Curve",default:"easeOut",set:function(e){var t;"cubicBezier"===e?(this.updateCubicBezierFunction(),t=this._internal.cubicBezierFunction):t=i[e],this._internal.ease=t}},playToEnd:{index:20,group:"Play",displayName:"To End",editorName:"Play To End",valueChangedToTrue:function(){this._internal._isPlayingToEnd=!0;var e=this._internal.animation,t=this._internal.animations,n=this;this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var i=0;i<t.length;i++)t[i].ease=n._internal.ease,t[i].playToEnd()}))}},playToStart:{index:21,group:"Play",displayName:"To Start",editorName:"Play To Start",valueChangedToTrue:function(){this._internal._isPlayingToEnd=!1;var e=this._internal.animation,t=this._internal.animations,n=this;this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var i=0;i<t.length;i++)t[i].ease=n._internal.ease,t[i].playToStart()}))}},replayToEnd:{index:22,group:"Play",displayName:"From Start To End",editorName:"Play From Start To End",valueChangedToTrue:function(){var e=this._internal.animation,t=this._internal.animations,n=this;this._internal._isPlayingToEnd=!0,this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var i=0;i<t.length;i++)t[i].ease=n._internal.ease,t[i].replayToEnd()}))}},replayToStart:{index:23,group:"Play",displayName:"From End To Start",editorName:"Play From End To Start",valueChangedToTrue:function(){this._internal._isPlayingToEnd=!1;var e=this._internal.animation,t=this._internal.animations,n=this;this.scheduleAfterInputsHaveUpdated((function(){e.duration=n._internal.duration,e.start();for(var i=0;i<t.length;i++)t[i].ease=n._internal.ease,t[i].replayToStart()}))}},stop:{index:60,group:"Instant Actions",displayName:"Stop",valueChangedToTrue:function(){var e=this._internal.animation,t=this._internal.animations;e.stop();for(var n=0;n<t.length;n++)t[n].stop()}},jumpToStart:{index:61,group:"Instant Actions",displayName:"Jump To Start",valueChangedToTrue:function(){for(var e=this._internal.animations,t=0;t<e.length;t++)e[t].jumpToStart();this.sendSignalOnOutput("hasReachedStart")}},jumpToEnd:{index:62,group:"Instant Actions",displayName:"Jump To End",valueChangedToTrue:function(){for(var e=this._internal.animations,t=0;t<e.length;t++)e[t].jumpToEnd();this.sendSignalOnOutput("hasReachedEnd")}},cubicBezierP1X:{displayName:"P1 X",group:"Cubic Bezier",type:{name:"number"},index:11,set:function(e){this._internal.cubicBezierPoints[0]=Math.min(1,Math.max(0,e)),this.updateCubicBezierFunction()}},cubicBezierP1Y:{displayName:"P1 Y",group:"Cubic Bezier",type:{name:"number"},index:12,set:function(e){this._internal.cubicBezierPoints[1]=e,this.updateCubicBezierFunction()}},cubicBezierP2X:{displayName:"P2 X",group:"Cubic Bezier",type:{name:"number"},index:13,set:function(e){this._internal.cubicBezierPoints[2]=Math.min(1,Math.max(0,e)),this.updateCubicBezierFunction()}},cubicBezierP2Y:{displayName:"P2 Y",group:"Cubic Bezier",type:{name:"number"},index:14,set:function(e){this._internal.cubicBezierPoints[3]=e,this.updateCubicBezierFunction()}}},outputs:{hasReachedStart:{type:"signal",group:"Signals",displayName:"Has Reached Start"},hasReachedEnd:{type:"signal",group:"Signals",displayName:"Has Reached End"}},dynamicports:[{condition:"easingCurve = cubicBezier",inputs:["cubicBezierP1X","cubicBezierP1Y","cubicBezierP2X","cubicBezierP2Y"]},{name:"expand/basic",indexStep:100,template:[{name:"{{portname}}.startMode",type:{name:"enum",enums:[{value:"explicit",label:"Explicit"},{value:"implicit",label:"Implicit"}],allowEditOnly:!0},plug:"input",group:"{{portname}} Animation",displayName:"Start Mode",default:"implicit",index:1e3},{name:"{{portname}}.endValue",type:"number",plug:"input",group:"{{portname}} Animation",displayName:"End Value",editorName:"End Value | {{portname}} ",default:0,index:1002}]},{name:"expand/basic",condition:"'{{portname}}.startMode' = explicit",indexStep:100,template:[{name:"{{portname}}.startValue",plug:"input",type:"number",displayName:"Start Value",editorName:"Start Value | {{portname}}",group:"{{portname}} Animation",default:0,index:1001}]}],panels:[{name:"PortEditor",title:"Animations",plug:"output",type:{name:"number"},group:"Animation Values"}],prototypeExtensions:{updateCubicBezierFunction:{value:function(){var e=this._internal.cubicBezierPoints,t=o(e);this._internal.cubicBezierFunction=function(e,n,o){return i.linear(e,n,t.get(o))},this._internal.ease=this._internal.cubicBezierFunction}},_registerAnimationGroup:{value:function(e){var t=new r({node:this,ease:this._internal.ease,name:e});this._internal.animations.push(t);var n={};n[e+".startMode"]={set:function(e){t.startMode=e}},n[e+".startValue"]={default:0,set:function(e){t.startValue=e}},n[e+".endValue"]={default:0,set:function(e){t.endValue=e}},this.registerInputs(n),this.registerOutput(e,{getter:function(){return t.currentValue}})}},registerInputIfNeeded:{value:function(e){if(!this.hasInput(e)){var t=e.indexOf("."),n=e.substr(0,t);this.hasOutput(n)||this._registerAnimationGroup(n)}}},registerOutputIfNeeded:{value:function(e){this.hasOutput(e)||this._registerAnimationGroup(e)}}}};e.exports={node:s}},6457:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=n(7498),r={name:"Component State",displayNodeName:"Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/component-object",deprecated:!0,initialize:function(){this._internal.inputValues={},this._internal.onModelChangedCallback=e=>{!1===this.isInputConnected("fetch")&&(this.hasOutput("value-"+e.name)&&this.flagOutputDirty("value-"+e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))};const e=o.get("componentState"+this.nodeScope.componentOwner.getInstanceId());this._internal.model=e,e.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){const e=this._internal.model.data;return Object.keys(e).map((t=>({type:"text",value:t+": "+e[t]})))},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},store:{displayName:"Set",group:"Actions",valueChangedToTrue(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue(){this.scheduleFetch()}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},stored:{type:"signal",displayName:"Stored",group:"Events"}},methods:{scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{for(var t in this.hasScheduledStore=!1,e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}))}},scheduleFetch(){this.hasScheduledFetch||(this.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledFetch=!1,this.fetch()})))},fetch(){for(var e in this._internal.model.data)this.hasOutput("value-"+e)&&(this.flagOutputDirty("value-"+e),this.hasOutput("changed-"+e)&&this.sendSignalOnOutput("changed-"+e));this.sendSignalOnOutput("fetched")},_onNodeDeleted(){i.prototype._onNodeDeleted.call(this),this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){if(this.hasOutput(e))return;const t=e.split("-"),n=t[t.length-1];this.registerOutput(e,{get(){return this._internal.model.get(n,{resolve:!0})}})},registerInputIfNeeded:function(e){if(this.hasInput(e))return;const t=e.split("-"),n=t[t.length-1];e.startsWith("value-")&&this.registerInput(e,{set(e){this._internal.inputValues[n]=e,!1===this.isInputConnected("store")&&this.scheduleStore()}})}}};function s(e,t,n){const i=[];if(t.properties){var o=t.properties.split(",");for(var r in o){var s=o[r];i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"value-"+s,displayName:s}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Component State",(t=>{s(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{("properties"===n.name||n.name.startsWith("type-"))&&s(t.id,t.parameters,e.editorConnection)}))}))}}},1260:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(1020),s={name:"Collection",docs:"https://docs.noodl.net/nodes/data/array",displayNodeName:"Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",deprecated:!0,initialize:function(){var e=this,t=!1;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("fetch")&&(t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.sendSignalOnOutput("changed"),e.flagOutputDirty("count"),t=!1}))))},this._internal.sourceCollectionChangedCallback=function(){!0!==e.isInputConnected("store")&&e.scheduleCopyItems()}},getInspectInfo(){if(this._internal.collection)return"Count: "+this._internal.collection.size()},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Id",group:"General",set:function(e){e instanceof r&&(e=e.getId()),this._internal.collectionId=e,!1===this.isInputConnected("fetch")?this.setCollectionID(e):this.flagOutputDirty("id")}},items:{type:"array",group:"General",displayName:"Items",set:function(e){var t=this;void 0!==e&&e!==this._internal.collection&&(this._internal.pendingSourceCollection=e,!1===this.isInputConnected("store")&&this.scheduleAfterInputsHaveUpdated((function(){t.setSourceCollection(e)})))}},modifyId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Item Id",group:"Modify",set:function(e){this._internal.modifyId=e}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},add:{displayName:"Add",group:"Modify",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(void 0!==t.modifyId&&(void 0===t.collection&&!1===this.isInputConnected("fetch")&&e.setCollection(r.get()),void 0!==t.collection)){var n=o.get(t.modifyId);t.collection.add(n),e.sendSignalOnOutput("modified")}}))}},remove:{displayName:"Remove",group:"Modify",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(void 0!==t.modifyId&&(void 0===t.collection&&!1===this.isInputConnected("fetch")&&e.setCollection(r.get()),void 0!==t.collection)){var n=o.get(t.modifyId);t.collection.remove(n),e.sendSignalOnOutput("modified")}}))}},clear:{displayName:"Clear",group:"Modify",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){void 0===t.collection&&!1===this.isInputConnected("fetch")&&e.setCollection(r.get()),void 0!==t.collection&&(t.collection.set([]),e.sendSignalOnOutput("modified"),e.sendSignalOnOutput("count"))}))}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetCollection()}},new:{displayName:"New",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}}},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.collection?this._internal.collection.getId():this._internal.collectionId}},items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},modified:{group:"Events",type:"signal",displayName:"Modified"},changed:{group:"Events",type:"signal",displayName:"Changed"},stored:{group:"Events",type:"signal",displayName:"Stored"},fetched:{group:"Events",type:"signal",displayName:"Fetched"},created:{group:"Events",type:"signal",displayName:"Created"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(r.get(e))},setCollection:function(e){this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback),this._internal.collection=e,this.flagOutputDirty("id"),e.on("change",this._internal.collectionChangedCallback),this.flagOutputDirty("items"),this.flagOutputDirty("count")},setSourceCollection:function(e){var t=this._internal;t.sourceCollection&&t.sourceCollection instanceof r&&t.sourceCollection.off("change",t.sourceCollectionChangedCallback),t.sourceCollection=e,t.sourceCollection instanceof r&&t.sourceCollection.on("change",t.sourceCollectionChangedCallback),this._copySourceItems()},scheduleSetCollection:function(){var e=this;this.hasScheduledSetCollection||(this.hasScheduledSetCollection=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledSetCollection=!1,e.setCollectionID(e._internal.collectionId),e.sendSignalOnOutput("fetched")})))},scheduleStore:function(){var e=this;if(!this.hasScheduledStore){this.hasScheduledStore=!0;var t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledStore=!1,e.setSourceCollection(t.pendingSourceCollection),e.sendSignalOnOutput("stored")}))}},_copySourceItems:function(){var e=this._internal;void 0===e.collection&&!1===this.isInputConnected("fetch")&&this.setCollection(r.get()),e.collection&&e.collection.set(e.sourceCollection)},scheduleCopyItems:function(){var e=this;this._internal,this.hasScheduledCopyItems||(this.hasScheduledCopyItems=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledCopyItems=!1,e._copySourceItems()})))},scheduleNew:function(){var e=this;if(!this.hasScheduledNew){this.hasScheduledNew=!0;var t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledNew=!1,e.setCollection(r.get()),t.sourceCollection&&t.collection.set(t.sourceCollection),e.sendSignalOnOutput("created")}))}},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback)}}};e.exports={node:s}},4140:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(7498),s=n(1020),a=n(7569),l=n(592);function u(e,t){const n=Object.keys(e);if(0===n.length)return{};if(1!==n.length)return t.error("Filter must only have one key found "+n.join(","));const i={},o=n[0];if(void 0!==e.and&&Array.isArray(e.and))i.$and=e.and.map((e=>u(e,t)));else if(void 0!==e.or&&Array.isArray(e.or))i.$or=e.or.map((e=>u(e,t)));else if(void 0!==e.idEqualTo)i.objectId={$eq:e.idEqualTo};else if(void 0!==e.idContainedIn)i.objectId={$in:e.idContainedIn};else if(void 0!==e.relatedTo){var s=e.relatedTo.id;if(void 0===s)return t.error("Must provide id in relatedTo filter");var l=e.relatedTo.key;if(void 0===l)return t.error("Must provide key in relatedTo filter");var c=r.get(s);i.$relatedTo={object:{__type:"Pointer",objectId:s,className:c._class},key:l}}else if("object"==typeof e[o]){const n=e[o];if(void 0!==n.equalTo)i[o]={$eq:n.equalTo};else if(void 0!==n.notEqualTo)i[o]={$ne:n.notEqualTo};else if(void 0!==n.lessThan)i[o]={$lt:n.lessThan};else if(void 0!==n.greaterThan)i[o]={$gt:n.greaterThan};else if(void 0!==n.lessThanOrEqualTo)i[o]={$lte:n.lessThanOrEqualTo};else if(void 0!==n.greaterThanOrEqualTo)i[o]={$gte:n.greaterThanOrEqualTo};else if(void 0!==n.exists)i[o]={$exists:n.exists};else if(void 0!==n.containedIn)i[o]={$in:n.containedIn};else if(void 0!==n.notContainedIn)i[o]={$nin:n.notContainedIn};else if(void 0!==n.pointsTo){if(c=r.get(n.pointsTo),a._collections[t.collectionName])var p=a._collections[t.collectionName].schema;var d=p&&p.properties&&p.properties[o]?p.properties[o].targetClass:void 0;"Relation"===(p&&p.properties&&p.properties[o]?p.properties[o].type:void 0)?i[o]={__type:"Pointer",objectId:n.pointsTo,className:d}:Array.isArray(n.pointsTo)?i[o]={$in:n.pointsTo.map((e=>({__type:"Pointer",objectId:e,className:d})))}:i[o]={$eq:{__type:"Pointer",objectId:n.pointsTo,className:d}}}else if(void 0!==n.matchesRegex)i[o]={$regex:n.matchesRegex,$options:n.options};else if(void 0!==n.text&&void 0!==n.text.search){var h=n.text.search;i[o]="string"==typeof h?{$text:{$search:{$term:h,$caseSensitive:!1}}}:{$text:{$search:{$term:h.term,$language:h.language,$caseSensitive:h.caseSensitive,$diacriticSensitive:h.diacriticSensitive}}}}}else t.error("Unrecognized filter keys "+n.join(","));return i}var c={name:"DbCollection",docs:"https://docs.noodl.net/nodes/cloud-services/collection",displayNodeName:"Query Collection",shortDesc:"A database collection.",category:"Cloud Services",usePortAsLabel:"collectionName",color:"data",deprecated:!0,initialize:function(){var e=this,t=!1;this._internal.collectionChangedCallback=function(){t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.sendSignalOnOutput("modified"),e.flagOutputDirty("count"),e.flagOutputDirty("firstItemId"),t=!1})))},this._internal.storageSettings={}},inputs:{},outputs:{id:{type:"string",displayName:"Name",group:"General",getter:function(){return this._internal.name}},items:{type:"array",displayName:"Result",group:"General",getter:function(){return this._internal.collection}},firstItemId:{type:"string",displayName:"First Item Id",group:"General",getter:function(){if(this._internal.collection){var e=this._internal.collection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},modified:{group:"Events",type:"signal",displayName:"Modified"},fetched:{group:"Events",type:"signal",displayName:"Fetched"},failure:{group:"Events",type:"signal",displayName:"Failure"},error:{type:"string",displayName:"Error",group:"Events",getter:function(){return this._internal.error}}},prototypeExtensions:{setCollectionName:function(e){this._internal.name=e,this.flagOutputDirty("id")},setCollection:function(e){this.bindCollection(e),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")},unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection()},setError:function(e){this._internal.err=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure")},fetch:function(){var e=this._internal;this.context.editorConnection&&(void 0===this._internal.name?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"query-collection",{message:"No collection specified for query"}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"query-collection")),e.fetchScheduled||(e.fetchScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.fetchScheduled=!1;const t=s.get(),n=this.getStorageFilter();a.instance.query({collection:this._internal.name,where:n.where,sort:n.sort,limit:this.getStorageLimit(),skip:this.getStorageSkip(),success:e=>{void 0!==e&&t.set(e.map((e=>{var n=a._fromJSON(e,this._internal.name);return n.on("delete",(()=>t.remove(n))),n}))),this.setCollection(t),this.sendSignalOnOutput("fetched")},error:e=>{this.setCollection(t),this.setError(e||"Failed to fetch.")}})})))},getStorageFilter:function(){const e=this._internal.storageSettings;if(void 0===e.storageFilterType||"simple"===e.storageFilterType){if(e.storageFilter){const i=e.storageFilter.split(",");var t=[];i.forEach((function(n){const i={};var o="$"+(e["storageFilterOp-"+n]||"eq");i[n]={},i[n][o]=e["storageFilterValue-"+n],t.push(i)}));var n=t.length>1?{$and:t}:t[0]}if(e.storageSort){const t=e.storageSort.split(",");var i=[];t.forEach((function(t){i.push(("descending"===e["storageSort-"+t]?"-":"")+t)}))}return{where:n,sort:i}}if("json"===e.storageFilterType){if(!this._internal.filterFunc)try{var o=e.storageJSONFilter;o=o.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),this._internal.filterVariables=o.match(/\$[A-Za-z0-9]+/g)||[];var r=["filter","where","sort","Inputs"].concat(this._internal.filterVariables).concat([o]);this._internal.filterFunc=Function.apply(null,r)}catch(e){this._internal.filterFunc=void 0,console.log("Error while parsing filter script: "+e)}if(!this._internal.filterFunc)return;var s={},a=(i=[],this),l=function(e){s=u(e,{collectionName:a._internal.name,error:function(e){a.context.editorConnection.sendWarning(a.nodeScope.componentOwner.name,a.id,"query-collection-filter",{message:e})}})};const t={};for(let n in e)n.startsWith("storageFilterValue-")&&(t[n.substring("storageFilterValue-".length)]=e[n]);var c=[l,l,function(e){i=e},t];this._internal.filterVariables.forEach((t=>{c.push(e["storageFilterValue-"+t.substring(1)])}));try{this._internal.filterFunc.apply(this,c)}catch(e){console.log("Error while running filter script: "+e)}return{where:s,sort:i}}},getStorageLimit:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageLimit||10:void 0},getStorageSkip:function(){const e=this._internal.storageSettings;return e.storageEnableLimit?e.storageSkip||0:void 0},registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:p.bind(this,e)})},registerInputIfNeeded:function(e){if(this.hasInput(e))return;const t={storageFetch:this.fetch.bind(this)};if(t[e])return this.registerInput(e,{set:o.createSetter({valueChangedToTrue:t[e]})});const n={collectionName:this.setCollectionName.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});this.registerInput(e,{set:d.bind(this,e)})}}};function p(e){return this._internal.storageSettings[e]}function d(e,t){this._internal.storageSettings[e]=t}function h(e,t,n,i){var o=[];if(o.push({name:"collectionName",type:{name:"enum",enums:void 0!==i?i.map((e=>({value:e.name,label:e.name}))):[],allowEditOnly:!0},displayName:"Collecton Name",plug:"input",group:"General"}),o.push({name:"storageFilterType",type:{name:"enum",allowEditOnly:!0,enums:[{value:"simple",label:"Simple"},{value:"json",label:"Advanced"}]},displayName:"Filter",default:"simple",plug:"input",group:"General"}),o.push({type:"boolean",plug:"input",group:"Limit",name:"storageEnableLimit",displayName:"Use limit"}),t.storageEnableLimit&&(o.push({type:"number",default:10,plug:"input",group:"Limit",name:"storageLimit",displayName:"Limit"}),o.push({type:"number",default:0,plug:"input",group:"Limit",name:"storageSkip",displayName:"Skip"})),o.push({type:"signal",plug:"input",group:"Storage",name:"storageFetch",displayName:"Fetch"}),void 0===t.storageFilterType||"simple"===t.storageFilterType){o.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Filter",name:"storageFilter",displayName:"Filter"});const e={string:[{value:"eq",label:"Equals"},{value:"ne",label:"Not Equals"}],boolean:[{value:"eq",label:"Equals"},{value:"ne",label:"Not Equals"}],number:[{value:"eq",label:"Equals"},{value:"ne",label:"Not Equals"},{value:"lt",label:"Less than"},{value:"gt",label:"Greater than"},{value:"gte",label:"Greater than or equal"},{value:"lte",label:"Less than or equal"}]};t.storageFilter&&t.storageFilter.split(",").forEach((n=>{o.push({type:{name:"enum",enums:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"}]},default:"string",plug:"input",group:n+" filter",displayName:"Type",editorName:n+" filter | Type",name:"storageFilterType-"+n});var i=t["storageFilterType-"+n];o.push({type:{name:"enum",enums:e[i||"string"]},default:"eq",plug:"input",group:n+" filter",displayName:"Op",editorName:n+" filter| Op",name:"storageFilterOp-"+n}),o.push({type:i||"string",plug:"input",group:n+" filter",displayName:"Value",editorName:n+" Filter Value",name:"storageFilterValue-"+n})})),o.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Sort",name:"storageSort",displayName:"Sort"}),t.storageSort&&t.storageSort.split(",").forEach((e=>{o.push({type:{name:"enum",enums:[{value:"ascending",label:"Ascending"},{value:"descending",label:"Descending"}]},default:"ascending",plug:"input",group:e+" sort",displayName:"Sort",editorName:e+" sorting",name:"storageSort-"+e})}))}else if("json"===t.storageFilterType){o.push({type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},plug:"input",group:"Filter",name:"storageJSONFilter",default:"// Write your query script here, check out the reference documentation for examples\nwhere({ })\n",displayName:"Filter"});var r=t.storageJSONFilter;if(r){var s=(r=r.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,"")).match(/\$[A-Za-z0-9]+/g);if(s){const e={};s.forEach((t=>{e[t]=!0})),Object.keys(e).forEach((e=>{o.push({name:"storageFilterValue-"+e.substring(1),displayName:e.substring(1),group:"Filter Values",plug:"input",type:{name:"*",allowConnectionsOnly:!0}})}))}l.parseAndAddPortsFromScript(r,o,{inputPrefix:"storageFilterValue-",inputGroup:"Filter Values",inputType:{name:"*",allowConnectionsOnly:!0},skipOutputs:!0})}}n.sendDynamicPorts(e,o)}e.exports={node:c,setup:function(e,t){function n(n){h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(i){i.name.startsWith("storage")&&h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)})),t.on("metadataChanged.cloudservices",(function(e){a.instance._initCloudServices()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbCollection",(function(e){n(e)}));for(const e of t.getNodesWithType("DbCollection"))n(e)}))}}},4122:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(3958);var s=n(7498);const a=n(7569);var l={},u={},c={name:"DbModel",docs:"https://docs.noodl.net/nodes/cloud-services/model",displayNodeName:"Model",shortDesc:"Database model",category:"Cloud Services",usePortAsLabel:"$ndlCollectionName",color:"data",deprecated:!0,initialize:function(){var e=this._internal;e.inputValues={},e.relationModelIds={};var t=this;this._internal.onModelChangedCallback=function(e){t.isInputConnected("fetch")||(t.hasOutput(e.name)&&t.flagOutputDirty(e.name),t.hasOutput("changed-"+e.name)&&t.sendSignalOnOutput("changed-"+e.name),t.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.data}]:"[No Model]"},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},saved:{type:"signal",displayName:"Saved",group:"Events"},stored:{type:"signal",displayName:"Stored",group:"Events"},created:{type:"signal",displayName:"Created",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},deleted:{type:"signal",displayName:"Deleted",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Events",getter:function(){return this._internal.error}}},inputs:{modelId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Id",group:"General",set:function(e){e instanceof s&&(e=e.getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set:function(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},save:{displayName:"Save",group:"Actions",valueChangedToTrue:function(){this.storageSave()}},delete:{displayName:"Delete",group:"Actions",valueChangedToTrue:function(){this.storageDelete()}},new:{displayName:"New",group:"Actions",valueChangedToTrue:function(){this.storageNew()}},insert:{displayName:"Insert",group:"Actions",valueChangedToTrue:function(){this.storageInsert()}}},methods:{setCollectionID:function(e){this._internal.collectionId=e,this.clearWarnings()},setModelID:function(e){var t=s.get(e);this.setModel(t)},setModel:function(e){for(var t in this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput(t)&&this.flagOutputDirty(t);this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},scheduleOnce:function(e,t){const n=this,i="hasScheduled"+e;this._internal[i]||(this._internal[i]=!0,this.scheduleAfterInputsHaveUpdated((function(){n._internal[i]=!1,t()})))},_hasChangesPending:function(){const e=this._internal;var t=e.model;for(var n in e.inputValues)if(r(t.data[n],e.inputValues[n]))return!0;return!1},scheduleFetch:function(){var e=this;const t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("Fetch",(function(){void 0!==t.modelId&&""!==t.modelId&&a.instance.fetch({collection:t.collectionId,objectId:t.modelId,success:function(n){var i=a._fromJSON(n,t.collectionId);for(var o in t.model!==i&&(t.model&&t.model.off("change",t.onModelChangedCallback),t.model=i,i.on("change",t.onModelChangedCallback)),e.flagOutputDirty("id"),delete n.objectId,n)e.hasOutput(o)&&e.flagOutputDirty(o);e.sendSignalOnOutput("fetched")},error:function(t){e.setError(t||"Failed to fetch.")}})}))},scheduleStore:function(){var e=this,t=this._internal;t.model&&this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("Store",(function(){for(var n in t.inputValues)t.model.set(n,t.inputValues[n],{resolve:!0});e.sendSignalOnOutput("stored")}))},storageSave:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageSave",(function(){if(t.model){var n=t.model;for(var i in t.inputValues)n.set(i,t.inputValues[i],{resolve:!0});a.instance.save({collection:t.collectionId,objectId:n.getId(),data:n.data,success:function(t){for(var i in t)n.set(i,t[i]);e.sendSignalOnOutput("saved")},error:function(t){e.setError(t||"Failed to save.")}})}}))},storageDelete:function(){const e=this;if(!this._internal.model)return;const t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageDelete",(function(){a.instance.delete({collection:t.collectionId,objectId:t.model.getId(),success:function(){t.model.notify("delete"),e.sendSignalOnOutput("deleted")},error:function(t){e.setError(t||"Failed to delete.")}})}))},storageInsert:function(){const e=this,t=this._internal;this.checkWarningsBeforeCloudOp()&&this.scheduleOnce("StorageInsert",(function(){var n=e._getModelInitData();a.instance.create({collection:t.collectionId,data:n,success:function(n){const i=a._fromJSON(n,t.collectionId);e.setModel(i),e.sendSignalOnOutput("created"),e.sendSignalOnOutput("saved")},error:function(t){e.setError(t||"Failed to insert.")}})}))},checkWarningsBeforeCloudOp(){return this.clearWarnings(),!!this._internal.collectionId||(this.setError("No collection name specified"),!1)},setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"storage-op-warning")},onRelationAdd:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageAddRelation",(function(){if(n.model){var i=n.model,o=n.relationModelIds[e];void 0!==o&&a.instance.addRelation({collection:n.collectionId,objectId:i.getId(),key:e,targetObjectId:o,targetClass:s.get(o)._class,success:function(n){for(var o in n)i.set(o,n[o]);t.sendSignalOnOutput("$relation-added-"+e)},error:function(e){t.setError(e||"Failed to add relation.")}})}}))},onRelationRemove:function(e){const t=this,n=this._internal;this.scheduleOnce("StorageRemoveRelation",(function(){if(n.model){var i=n.model,o=n.relationModelIds[e];void 0!==o&&a.instance.removeRelation({collection:n.collectionId,objectId:i.getId(),key:e,targetObjectId:o,targetClass:s.get(o)._class,success:function(n){for(var o in n)i.set(o,n[o]);t.sendSignalOnOutput("$relation-removed-"+e)},error:function(e){t.setError(e||"Failed to remove relation.")}})}}))},setRelationModelId:function(e,t){this._internal.relationModelIds[e]=t},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("$relation-added-")||e.startsWith("$relation-removed-")?this.registerOutput(e,{getter:function(){}}):void this.registerOutput(e,{getter:p.bind(this,e)})},_getModelInitData:function(){var e=this._internal,t={};for(var n in e.inputValues)t[n]=e.inputValues[n];if(this._internal.modelInitCode)try{new Function("initialize",this._internal.modelInitCode)((function(e){for(var n in e)"function"==typeof e[n]?t[n]=e[n]():t[n]=e[n]}))}catch(e){console.log("Error while initializing model: "+e)}return t},setModelInitCode:function(e){this._internal.modelInitCode=e},registerInputIfNeeded:function(e){if(this.hasInput(e))return;if(e.startsWith("$relation-add-"))return this.registerInput(e,{set:o.createSetter({valueChangedToTrue:this.onRelationAdd.bind(this,e.substring("$relation-add-".length))})});if(e.startsWith("$relation-remove-"))return this.registerInput(e,{set:o.createSetter({valueChangedToTrue:this.onRelationRemove.bind(this,e.substring("$relation-remove-".length))})});if(e.startsWith("$relation-modelid-"))return this.registerInput(e,{set:this.setRelationModelId.bind(this,e.substring("$relation-modelid-".length))});const t={};if(t[e])return this.registerInput(e,{set:o.createSetter({valueChangedToTrue:t[e]})});const n={$ndlCollectionName:this.setCollectionID.bind(this),$ndlModelInitCode:this.setModelInitCode.bind(this)};if(n[e])return this.registerInput(e,{set:n[e]});this.registerInput(e,{set:d.bind(this,e)})}}};function p(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function d(e,t){this._internal.inputValues[e]=t}function h(e,t,n,i){var o=[],r=t.properties;if(r){for(var s in r=r?r.split(","):void 0){var a=r[s];o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:a}),o.push({type:"signal",plug:"output",group:"Events",displayName:"Changed "+a,name:"changed-"+a})}var c=function(e,t){if(e&&t&&e.length===t.length){for(var n={},i=0;i<e.length;i++){if(-1===t.indexOf(e[i])){if(n.before)return;n.before=e[i]}if(-1===e.indexOf(t[i])){if(n.after)return;n.after=t[i]}}return n.before&&n.after?n:void 0}}(u[e],r);if(u[e]=r,c)var p={plug:"input/output",patterns:["{{*}}"],before:c.before,after:c.after}}if(o.push({name:"$ndlCollectionName",displayName:"Class",group:"General",type:{name:"enum",enums:void 0!==i?i.map((e=>({value:e.name,label:e.name}))):[],allowEditOnly:!0},plug:"input"}),t.$ndlCollectionName&&i){var d=i.find((e=>e.name===t.$ndlCollectionName));if(d&&d.schema&&d.schema.properties){var h=d.schema.properties;for(var f in h)a=h[f],o.find((e=>e.name===f))||("Relation"===a.type?(o.push({type:"signal",plug:"input",group:f+" Relation",name:"$relation-add-"+f,displayName:"Add",editorName:f+" | Add"}),o.push({type:"signal",plug:"input",group:f+" Relation",name:"$relation-remove-"+f,displayName:"Remove",editorName:f+" | Remove"}),o.push({type:{name:"string",allowConnectionsOnly:!0},plug:"input",group:f+" Relation",name:"$relation-modelid-"+f,displayName:"Model Id",editorName:f+" | Model Id"}),o.push({type:"signal",plug:"output",group:f+" Relation",name:"$relation-removed-"+f,displayName:"Removed",editorName:f+" | Removed"}),o.push({type:"signal",plug:"output",group:f+" Relation",name:"$relation-added-"+f,displayName:"Added",editorName:f+" | Added"})):(o.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:f}),o.push({type:"signal",plug:"output",group:"Events",displayName:"Changed "+f,name:"changed-"+f})))}}o.push({name:"$ndlModelInitCode",displayName:"Initialize",group:"Scripts",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},default:"initialize({\n\t// Here you can initialize new models\n\t//myProperty:'Some init value',\n\t//anotherProperty:function() { return 'Some other value' }\n})\n",plug:"input"});var g=JSON.stringify(o);l[e]!==g&&(l[e]=g,n.sendDynamicPorts(e,o,{renamed:p}))}e.exports={node:c,setup:function(e,t){function n(n){h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(i){h(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){a.invalidateCollections(),h(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.DbModel",(function(e){n(e)}));for(const e of t.getNodesWithType("DbModel"))n(e)}))}}},469:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r={name:"Model",docs:"https://docs.noodl.net/nodes/data/object",displayNodeName:"Object",shortDesc:"Stores any amount of properties and can be used standalone or together with Collections and For Each nodes.",category:"Data",usePortAsLabel:"modelId",color:"data",deprecated:!0,initialize:function(){this._internal.inputValues={};var e=this;this._internal.onModelChangedCallback=function(t){!0!==e.isInputConnected("fetch")&&(e.hasOutput(t.name)&&e.flagOutputDirty(t.name),e.hasOutput("changed-"+t.name)&&e.sendSignalOnOutput("changed-"+t.name),e.sendSignalOnOutput("changed"))}},getInspectInfo(){const e=this._internal.model;if(!e)return"[No Object]";const t=[{type:"text",value:"Id: "+e.getId()}],n=this._internal.model.data;return t.concat(Object.keys(n).map((e=>({type:"text",value:e+": "+n[e]}))))},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.model?this._internal.model.getId():this._internal.modelId}},stored:{type:"signal",displayName:"Stored",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},created:{type:"signal",displayName:"Created",group:"Events"}},inputs:{modelId:{type:{name:"string",identifierOf:"ModelName",identifierDisplayName:"Object Ids"},displayName:"Id",group:"General",set:function(e){e instanceof o&&(e=e.getId()),this._internal.modelId=e,!1===this.isInputConnected("fetch")?this.setModelID(e):this.flagOutputDirty("id")}},properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set:function(e){}},new:{displayName:"New",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetModel()}},clear:{displayName:"Clear",group:"Actions",valueChangedToTrue:function(){var e=this._internal;if(e.model)for(var t in e.inputValues)e.model.set(t,void 0,{resolve:!0})}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}}))}},scheduleNew:function(){if(!this.hasScheduledNew){this.hasScheduledNew=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledNew=!1;const t=o.get();for(var n in e.inputValues)t.set(n,e.inputValues[n],{resolve:!0});this.setModel(t),this.sendSignalOnOutput("created"),this.sendSignalOnOutput("stored")}))}},scheduleSetModel:function(){this.hasScheduledSetModel||(this.hasScheduledSetModel=!0,this._internal,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledSetModel=!1,this.setModelID(this._internal.modelId)})))},setModelID:function(e){var t=o.get(e);this.setModel(t),this.sendSignalOnOutput("fetched")},setModel:function(e){for(var t in this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=e,this.flagOutputDirty("id"),e.on("change",this._internal.onModelChangedCallback),e.data)this.hasOutput(t)&&this.flagOutputDirty(t)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:s.bind(this,e)})},registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set:a.bind(this,e)})}}};function s(e){return this._internal.model?this._internal.model.get(e,{resolve:!0}):void 0}function a(e,t){if(this._internal.inputValues[e]=t,!1===this.isInputConnected("store")&&!1===this.isInputConnected("new")){const n=this._internal.model;(!n||n.get(e)!==t)&&this.scheduleStore()}}function l(e,t,n){var i=[],o=t.properties;if(o)for(var r in o=o?o.split(","):void 0){var s=o[r];i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:s}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Model",(function(t){l(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(function(n){l(t.id,t.parameters,e.editorConnection)}))}))}}},9040:(e,t,n)=>{var i=n(592),o=n(3401),r={name:"REST",shortDesc:"The REST node is used to connect to REST endpoints to make request and expose data from these endpoints.",category:"Data",color:"data",deprecated:!0,initialize:function(){this._internal.requestInputs={},this._internal.responseOutputs={},this._internal.backendProperties={},this._internal.hasPendingFetch=!1,this._internal.useExternalFile=!1},dynamicports:[{name:"conditionalports/basic",condition:"backendType = external OR backendType NOT SET",ports:[{name:"backendEndpoint",plug:"input",type:{name:"string"},displayName:"Endpoint",group:"Backend"}]},{name:"conditionalports/basic",condition:"backendType = prototype",ports:[{name:"backendScript",plug:"input",type:{name:"string",codeeditor:"javascript",allowEditOnly:!0},displayName:"Script",default:"//Add prototype backend code to response to the request\n//\n//*context.request                      contains the request object as passed from the\n//                                      request script.\n//*context.sendResponse(status,content) should be called to send a response back\n//                                      to the request script with status code\n//                                      and a javascript object with the content\n//                                      of the response.\ncontext.sendResponse(200,{result:'success'});\n",group:"Backend"}]},{name:"conditionalports/basic",condition:"useExternalFile = no OR useExternalFile NOT SET",ports:[{name:"code",displayName:"Script",group:"Request",plug:"input",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},default:"define({\n\t// The input ports of the REST node, name of input and type\n\tinputs:{\n\t    //ExampleInput:'number',\n\t},\n\t\n\t// The output ports of the REST node, name of output and type\n\toutputs:{\n\t    //ExampleOutput:'string',\n\t},\n\t\n\t//Add custom code to setup the request object before the request\n\t//is made.\n\t//\n\t//*request.resource     contains the resource path of the request.\n\t//*request.method       contains the method, GET, POST, PUT or DELETE.\n\t//*request.headers      is a map where you can add additional headers.\n\t//*request.parameters   is a map the parameters that will be appended\n\t//                      to the url.\n\t//*request.content      contains the content of the request as a javascript\n\t//                      object.\n\t//\n\t// The inputs and outputs maps can also be accessed via *this.inputs and\n\t// *this.outputs.\n\trequest:function(inputs,request) {\n\t},\n\t\n\t// Add custom code to convert the response content to outputs\n\t//\n\t//*response.status    The status code of the response\n\t//*response.content   The content of the response as a javascript\n\t//                    object.\n\t//*response.request   The request object that resulted in the response.\n\t//\n\t// The inputs and outputs maps can also be accessed via *this.inputs and\n\t// *this.outputs.\n\tresponse:function(outputs,response) {\n\t}\n})\n"}]},{name:"conditionalports/basic",condition:"useExternalFile = yes",ports:[{name:"externalFile",displayName:"File Path",group:"Request",plug:"input",type:{name:"source",allowEditOnly:!0}}]}],inputs:{resource:{type:"string",displayName:"Resource",group:"Request",default:"/",set:function(e){this._internal.resource=e}},method:{type:{name:"enum",enums:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"},{label:"DELETE",value:"DELETE"}]},displayName:"Method",group:"Request",default:"GET",set:function(e){this._internal.method=e}},useExternalFile:{type:{name:"enum",enums:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],allowEditOnly:!0},default:"no",displayName:"Use External File",group:"Request",set:function(e){this._internal.isWaitingForExternalFileToLoad="yes"===e,this._internal.useExternalFile="yes"===e}},code:{displayName:"Script",group:"Request",plug:"input",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},set:function(e){e&&this.scheduleAfterInputsHaveUpdated((function(){if(!1===this._internal.useExternalFile){var t=i.createFromCode(e,this.nodeScope.noodlJavascriptAPI);this._onCodeParsed(t)}}))}},externalFile:{set:function(e){if(!1!==this._internal.useExternalFile){var t=this;i.createFromURL(e,this.nodeScope.noodlJavascriptAPI,(function(e){t._internal.isWaitingForExternalFileToLoad=!1,t._onCodeParsed(e),!0===t._internal.hasPendingFetch&&(t._internal.hasPendingFetch=!1,t.doFetch())}))}}},fetch:{type:"signal",displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleFetch()}},cancel:{type:"signal",displayName:"Cancel",group:"Actions",valueChangedToTrue:function(){this.cancelFetch()}},backendType:{type:{name:"enum",enums:[{label:"External",value:"external"},{label:"Prototype",value:"prototype"}],allowEditOnly:!0},displayName:"Backend type",group:"Backend",default:"external",set:function(e){this._internal.backendType=e}}},outputs:{fetching:{type:"boolean",displayName:"Fetching",group:"Status",getter:function(){return!!this._internal.fetching}},started:{type:"signal",displayName:"Started",group:"Signals"},completed:{type:"signal",displayName:"Completed",group:"Signals"},statusOK:{type:"signal",displayName:"Status OK",group:"Signals"},statusFail:{type:"signal",displayName:"Status Fail",group:"Signals"}},prototypeExtensions:{_onCodeParsed:function(e){if(this.context.editorConnection&&(e.error?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-parse-waring",{message:e.error}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"js-parse-waring")),!e.error){var t=this;Object.keys(e.outputs).forEach((function(e){t.registerOutputIfNeeded(e)})),this._internal.requestFunction=e.definedObject.request,this._internal.responseFunction=e.definedObject.response}},registerOutputIfNeeded:function(e){this.hasOutput(e)||this.registerOutput(e,{getter:s.bind(this,e)})},registerInputIfNeeded:function(e){var t=this;this.hasInput(e)||(0===e.indexOf("backend")?this.registerInput(e,{set:function(n){t._internal.backendProperties[e]=n}}):this.registerInput(e,{set:a.bind(this,e)}))},scheduleFetch:function(){var e=this._internal;e.hasScheduledFetch||(e.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated(this.doFetch.bind(this)))},doResponse:function(e,t,n){if(this._internal.responseFunction){var i={inputs:this._internal.requestInputs,outputs:this._internal.responseOutputs};this._internal.responseFunction.apply(i,[this._internal.responseOutputs,{status:e,content:t,request:n}])}for(var o in this._internal.responseOutputs)this.hasOutput(o)&&this.flagOutputDirty(o);200===e?this.sendSignalOnOutput("statusOK"):this.sendSignalOnOutput("statusFail"),this._internal.fetching=!1,this.flagOutputDirty("fetching"),this.sendSignalOnOutput("completed")},doExternalFetch:function(e){var t=this,n=new window.XMLHttpRequest,i=this._internal.backendProperties.backendEndpoint+e.resource;if(Object.keys(e.parameters).length>0){var r=Object.keys(e.parameters).map((function(t){return t+"="+encodeURIComponent(e.parameters[t])}));i+="?"+r.join("&")}for(var s in n.open(e.method,i,!0),e.headers)n.setRequestHeader(s,e.headers[s]);n.onreadystatechange=function(){this.response;var n=!1;if(4===this.readyState||this.readyState===XMLHttpRequest.DONE){var i=this.status,r=this.getResponseHeader("content-type"),s=this.response;r&&(-1!==(r=r.toLowerCase()).indexOf("/json")?(t.doResponse(i,JSON.parse(s),e),n=!0):-1!==r.indexOf("/xml")&&(o.parseString(s,(function(n,o){t.doResponse(i,n?s:o,e)})),n=!0)),!1===n&&t.doResponse(i,s,e)}},n.onerror=function(){console.log("REST: Failed to request",i)},e.content?(n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(e.content))):n.send()},doPrototypeFetch:function(e){var t=this,n=this._internal.backendProperties.backendScript;new Function("context",n)({request:e,sendResponse:function(n,i){t.doResponse(n,i,e)}})},doFetch:function(){if(this._internal.hasScheduledFetch=!1,!0!==this._internal.useExternalFile||!0!==this._internal.isWaitingForExternalFileToLoad){this.sendSignalOnOutput("started"),this._internal.fetching=!0,this.flagOutputDirty("fetching");var e=this._internal.resource;for(var t in this._internal.requestInputs)e=e.replace("{"+t+"}",this._internal.requestInputs[t]);var n={resource:e,headers:{},method:void 0!==this._internal.method?this._internal.method:"GET",parameters:{}};if(this._internal.requestFunction){var i={inputs:this._internal.requestInputs,outputs:this._internal.responseOutputs};this._internal.requestFunction.apply(i,[this._internal.requestInputs,n])}void 0===this._internal.backendType||"external"===this._internal.backendType?this.doExternalFetch(n):this.doPrototypeFetch(n)}else this._internal.hasPendingFetch=!0}}};function s(e){return this._internal.responseOutputs[e]}function a(e,t){this._internal.requestInputs[e]=t}function l(e,t){if(e.parameters){var n=[];if(e.parameters.resource){var o=e.parameters.resource.match(/\{[A-Za-z0-9_]*\}/g);for(var r in o){var s=o[r].replace("{","").replace("}","");n.push({name:s,type:"string",plug:"input",group:"Inputs"})}}if(e.parameters.externalFile&&"yes"===e.parameters.useExternalFile){var a=e.parameters.externalFile;i.createFromURL(a,null,(function(i){i.getPorts().forEach((function(e){l(e.name)||n.push(e)})),t.sendDynamicPorts(e.id,n)}))}else e.parameters.code&&(i.createFromCode(e.parameters.code,null).getPorts().forEach((function(e){l(e.name)||n.push(e)})),t.sendDynamicPorts(e.id,n))}function l(e){for(var t=0;t<n.length;t++)if(n[t].name===e)return!0;return!1}}e.exports={node:r,setup:function(e,t){e.editorConnection&&t.on("nodeAdded.REST",(function(t){l(t,e.editorConnection),t.on("parameterUpdated",(function(n){l(t,e.editorConnection)}))}))}}},3685:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r={name:"Variable",docs:"https://docs.noodl.net/nodes/data/variable",category:"Data",usePortAsLabel:"name",color:"data",deprecated:!0,initialize:function(){var e=this,t=this._internal;this._internal.onModelChangedCallback=function(n){e.isInputConnected("fetch")||n.name!==t.name||(e.sendSignalOnOutput("changed"),e.flagOutputDirty("value"))},t.variablesModel=o.get("--ndl--global-variables"),t.variablesModel.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){return this._internal.name?this._internal.variablesModel.get(this._internal.name):"[No value set]"},outputs:{name:{type:"string",displayName:"Name",group:"General",getter:function(){return this._internal.name}},stored:{type:"signal",displayName:"Stored",group:"Events"},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},value:{type:"*",displayName:"Value",group:"General",getter:function(){var e=this._internal;if(e.name)return e.variablesModel.get(e.name)}}},inputs:{name:{type:{name:"string",identifierOf:"VariableName",identifierDisplayName:"Variable names"},displayName:"Name",group:"General",set:function(e){!1===this.isInputConnected("fetch")?this.setVariableName(e):(this._internal.name=e,this.flagOutputDirty("name"))}},store:{displayName:"Set",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setVariableName(this._internal.name)}},value:{type:"*",displayName:"Value",group:"General",set:function(e){this._internal.value=e,!1===this.isInputConnected("store")&&this.scheduleStore()}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((function(){this.hasScheduledStore=!1,e.variablesModel.set(e.name,e.value),this.sendSignalOnOutput("stored")}))}},setVariableName:function(e){this._internal.name=e,this.flagOutputDirty("name"),this.flagOutputDirty("value"),this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.variablesModel.off("change",this._internal.onModelChangedCallback)}}};e.exports={node:r}},4789:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o={name:"Globals",shortDesc:"A node used to communicate values across the project.",category:"Utilities",color:"component",deprecated:!0,initialize:function(){this._internal.listeners=[]},panels:[{name:"PortEditor",context:["select","connectTo","connectFrom"],title:"Globals",plug:"input/output",type:{name:"*"}}],prototypeExtensions:{_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this);for(var e=this.context.globalsEventEmitter,t=0;t<this._internal.listeners.length;t++){var n=this._internal.listeners[t];e.removeListener(n.name,n.listener)}this._internal.listeners=[]},_newOutputValueReceived:{value:function(e){this._cachedInputValues[e]=this.context.globalValues[e],this.flagOutputDirty(e)}},registerInputIfNeeded:{value:function(e){this.hasInput(e)||this.registerInput(e,{set:this.context.setGlobalValue.bind(this.context,e)})}},registerOutputIfNeeded:{value:function(e){if(!this.hasOutput(e)){var t=this._newOutputValueReceived.bind(this,e),n=this.context.globalsEventEmitter;this._internal.listeners.push({name:e,listener:t}),n.on(e,t),this.registerOutput(e,{getter:function(){return this.context.globalValues[e]}})}}}}};e.exports={node:o}},3055:e=>{"use strict";const t={name:"Gyroscope",docs:"https://docs.noodl.net/nodes/sensors/device-orientation",shortDesc:"The orientation of a device. Works on phones, tablets and other devices with the required sensors.",displayNodeName:"Device Orientation",category:"Sensors",deprecated:!0,initialize:function(){this._internal.alpha=0,this._internal.beta=0,this._internal.gamma=0;var e=n.bind(this);window.addEventListener("deviceorientation",e),this.context.eventEmitter.once("applicationDataReloaded",(function(){window.removeEventListener("deviceorientation",e)}))},outputs:{rotationX:{type:"number",displayName:"Rotation X",getter:function(){return-this._internal.beta}},rotationY:{type:"number",displayName:"Rotation Y",getter:function(){return this._internal.gamma}},rotationZ:{type:"number",displayName:"Rotation Z",getter:function(){return-this._internal.alpha}}}};function n(e){e.alpha!==this._internal.alpha&&(this._internal.alpha=e.alpha,this.flagOutputDirty("rotationZ")),e.beta!==this._internal.beta&&(this._internal.beta=e.beta,this.flagOutputDirty("rotationX")),e.gamma!==this._internal.gamma&&(this._internal.gamma=e.gamma,this.flagOutputDirty("rotationY"))}e.exports={node:t}},9765:(e,t,n)=>{"use strict";const i=n(1924),o={name:"Number Blend",docs:"https://docs.noodl.net/nodes/interpolation/number-blend",shortDesc:"Computes a result output based on blending (linearly interpolating) between the inputs.",category:"Interpolation",deprecated:!0,initialize:function(){var e=this._internal;e.inputs=[],e.blendValue=0,e.result=0,e.clamp=!1},getInspectInfo(){return this._internal.result},prototypeExtensions:{updateResult:function(){var e=this._internal.inputs;if(0===e.length)return 0;var t=Math.floor(this._internal.blendValue),n=this._internal.blendValue-t;t>=e.length-1?this._internal.clamp?(t=e.length-1,n=0):(n+=t-(e.length-1),t=e.length-1):t<=0&&(this._internal.clamp?(t=0,n=0):(n+=t,t=0)),0===n||1===e.length?this._internal.result=e[t]:t===e.length-1&&n>0?this._internal.result=i.linear(e[t-1],e[t],n+1):this._internal.result=i.linear(e[t],e[t+1],n),this.flagOutputDirty("result")}},numberedInputs:{input:{type:"number",displayPrefix:"Number",createSetter:e=>function(t){const n=this._internal.inputs;n[e]!==t&&(n[e]=t||0,this.updateResult())}}},inputs:{blendValue:{type:"number",displayName:"Blend Value",default:0,set:function(e){this._internal.blendValue=e,this.updateResult()}},clamp:{type:"boolean",displayName:"Clamp",default:!1,set:function(e){this._internal.clamp=!!e,this.updateResult()}}},outputs:{result:{type:"number",displayName:"Result",getter:function(){return this._internal.result}}}};e.exports={node:o}},8596:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=n(7498),r=new(0,n(2699).EventEmitter);r.setMaxListeners(1e6);const s={name:"Parent Component State",displayNodeName:"Parent Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/parent-component-object",deprecated:!0,initialize(){this._internal.inputValues={},this._internal.onModelChangedCallback=e=>{!0!==this.isInputConnected("fetch")&&(this.hasOutput(e.name)&&this.flagOutputDirty(e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))},this.onComponentStateNodesChanged=()=>{const e=this.findParentComponentStateModelId();this._internal.modelId!==e&&(this._internal.modelId=e,!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId))},r.on("componentStateNodesChanged",this.onComponentStateNodesChanged),this.updateComponentState()},nodeScopeDidInitialize(){this._internal.modelId||this.context.scheduleAfterUpdate((()=>{this.updateComponentState()}))},getInspectInfo(){if(!this._internal.model)return"No parent component state found";const e=[{type:"text",value:this._internal.parentComponentName}],t=this._internal.model.data;return e.concat(Object.keys(t).map((e=>({type:"text",value:e+": "+t[e]}))))},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},store:{displayName:"Set",group:"Actions",valueChangedToTrue(){this.scheduleStore()}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setModelId(this._internal.modelId)}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},stored:{type:"signal",displayName:"Stored",group:"Events"}},methods:{updateComponentState(){this._internal.modelId=this.findParentComponentStateModelId(),!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId)},findParentComponentStateModelId(){const e=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("Component State").length>0?n:e(n)}(this.nodeScope.componentOwner);if(e)return this._internal.parentComponentName=e.name,"componentState"+e.getInstanceId()},setModelId(e){if(this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=void 0,!e)return;const t=o.get(e);for(var n in this._internal.model=t,t.on("change",this._internal.onModelChangedCallback),t.data)this.hasOutput(n)&&this.flagOutputDirty(n),this.hasOutput("changed-"+n)&&this.sendSignalOnOutput("changed-"+n);this.sendSignalOnOutput("changed"),this.sendSignalOnOutput("fetched")},scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model){for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0});this.sendSignalOnOutput("stored")}}))}},_onNodeDeleted(){i.prototype._onNodeDeleted.call(this),r.off("componentStateNodesChanged",this.onComponentStateNodesChanged),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){this.hasOutput(e)||this.registerOutput(e,{get(){if(this._internal.model)return this._internal.model.get(e,{resolve:!0})}})},registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set(t){this._internal.inputValues[e]=t,!1===this.isInputConnected("store")&&this.scheduleStore()}})}}};function a(e,t,n){const i=[];var o=t.properties&&t.properties.split(",");for(var r in o){var s=o[r];i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:s,displayName:s}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input/output"}})}e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&(t.on("nodeAdded.Parent Component State",(t=>{a(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{a(t.id,t.parameters,e.editorConnection)}))})),t.on("nodeAdded.Component State",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}),0)})),t.on("nodeRemoved.Component State",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}))})))}}},6329:e=>{"use strict";const t={name:"Script Downloader",docs:"https://docs.noodl.net/nodes/javascript/script-downloader",shortDesc:"Script Downloader allows you load external Javascript libraries. ",category:"Javascript",color:"javascript",deprecated:!0,initialize:function(){var e=this._internal;e.loaded=!1,e.scripts=[],e.loadedScripts={},e.startLoad=!0},inputs:{startLoad:{type:"boolean",default:!0,displayName:"Load on start",group:"General",set:function(e){this._internal.startLoad=e}},load:{displayName:"Load",group:"Actions",valueChangedToTrue:function(){this.scheduleUpdateScripts()}}},outputs:{loaded:{type:"signal",displayName:"Loaded"}},numberedInputs:{input:{displayPrefix:"Script",group:"External scripts",type:"string",index:3008,createSetter:function(e){return function(t){t=t.toString(),this._internal.scripts[e]=t,this._internal.loadStarted||(this._internal.loadStarted=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.loadStarted=!1,this._internal.startLoad&&this.updateScripts()})))}}}},methods:{removeLoadTerminator:function(){var e="sentinel_"+this.id,t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)},scheduleUpdateScripts:function(){const e=this;this._internal.updateScriptsScheduled||(this._internal.updateScriptsScheduled=!0,this.scheduleAfterInputsHaveUpdated((function(){e._internal.updateScriptsScheduled=!1,e.updateScripts()})))},updateScripts:function(){var e="sentinel_"+this.id;this.removeLoadTerminator();var t=this._internal.scripts;t=t.filter((function(e){return""!==e}));for(var n=document.head.getElementsByTagName("script"),i={},o=0;o<n.length;o++)void 0!==(r=n[o]).src&&""!==r.src&&(i[r.src]=r);for(o=0;o<t.length;o++){var r=t[o].trim();if(!this._internal.loadedScripts.hasOwnProperty(r)){if(i.hasOwnProperty(r))continue;var s=document.createElement("script");s.src=r,s.async=!1,document.head.appendChild(s)}}var a=this,l=document.createElement("script");l.onload=l.onreadystatechange=function(e){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a._internal.loaded=!0,a.sendSignalOnOutput("loaded"),a.removeLoadTerminator())},l.id=e,l.src="load_terminator.js",l.async=!1,document.head.appendChild(l)}}};e.exports={node:t,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()}}},418:(e,t,n)=>{"use strict";const{EdgeTriggeredInput:i}=n(6291),o={name:"Signal To Index",docs:"https://docs.noodl.net/nodes/logic/signal-to-index",shortDesc:"Maps signal inputs to their index value.",category:"Logic",deprecated:!0,initialize:function(){this._internal.currentIndex=0},getInspectInfo(){return"Index: "+this._internal.currentIndex},numberedInputs:{input:{type:"boolean",displayPrefix:"Signal",createSetter:function(e){return i.createSetter({valueChangedToTrue:this.onValueChangedToTrue.bind(this,e)})},selectors:{startIndex:{displayName:"Start Index",set:function(e){this._internal.currentIndex=e,this.flagOutputDirty("index")}}}}},outputs:{index:{displayName:"Index",type:"number",getter:function(){return this._internal.currentIndex}},signalTriggered:{displayName:"Signal Triggered",type:"signal"}},prototypeExtensions:{onValueChangedToTrue:function(e){this.sendSignalOnOutput("signalTriggered"),this._internal.currentIndex!==e&&(this._internal.currentIndex=e,this.flagOutputDirty("index"))}}};e.exports={node:o}},4563:e=>{"use strict";const t={name:"String Selector",displayNodeName:"Index To String",shortDesc:"Choose between multiple strings.",category:"Utilities",deprecated:!0,initialize:function(){this._internal.inputs=[],this._internal.currentSelectedIndex=0,this._internal.indexChanged=!1},getInspectInfo(){return this._internal.inputs[this._internal.currentSelectedIndex]},numberedInputs:{input:{type:"string",displayPrefix:"String for ",group:"Inputs",createSetter:function(e){return function(t){t=t?t.toString():"",this._internal.inputs[e]=t,this._internal.currentSelectedIndex===e&&this.flagOutputDirty("currentValue")}}}},inputs:{index:{type:{name:"number"},displayName:"Index",default:0,set:function(e){e|=0,this._internal.currentSelectedIndex=e,this.flagOutputDirty("currentValue"),this.sendSignalOnOutput("indexChanged")}}},outputs:{currentValue:{type:"string",displayName:"Current Value",group:"Value",getter:function(){return this._internal.inputs[this._internal.currentSelectedIndex]}},indexChanged:{type:"signal",displayName:"Index Changed",group:"Signals"}}};e.exports={node:t}},5106:(e,t,n)=>{"use strict";var i=n(1924),o={name:"Transition",docs:"https://docs.noodl.net/nodes/animation/transition",shortDesc:"This node can interpolate smooothely for the current value to a target value.",category:"Animation",deprecated:!0,initialize:function(){var e=this,t=this._internal;t.currentNumber=0,t.numberInitialized=!1,t.animationStarted=!1,t.setCurrentNumberEnabled=!1,t.overrideValue=0,t._animation=this.context.timerScheduler.createTimer({duration:300,startValue:0,endValue:0,ease:i.easeOut,onStart:function(){t.animationStarted=!0},onRunning:function(n){t.currentNumber=this.ease(this.startValue,this.endValue,n),e.flagOutputDirty("currentValue")},onFinish:function(){e.sendSignalOnOutput("atTargetValue")}})},inputs:{targetValue:{type:{name:"number"},displayName:"Target Value",group:"Target Value",default:void 0,set:function(e){if(!0===e?e=1:!1===e&&(e=0),e=Number(e),!isNaN(e)){var t=this._internal;if(!1===t.numberInitialized)return t.currentNumber=e,t.numberInitialized=!0,t._animation.endValue=e,void this.flagOutputDirty("currentValue");e!==t._animation.endValue&&(t._animation.startValue=t.currentNumber,t._animation.endValue=e,t._animation.start())}}},"overrideCurrentValue.value":{type:{name:"number"},group:"Override Value",displayName:"Override Value",editorName:"Value|Override Value",set:function(e){this._internal.overrideValue=e}},"overrideCurrentValue.do":{group:"Override Value",displayName:"Do",editorName:"Do|Override Value",valueChangedToTrue:function(){r.call(this,this._internal.overrideValue)}},duration:{type:"number",group:"Parameters",displayName:"Duration",default:300,set:function(e){this._internal._animation.duration=e}},delay:{type:"number",group:"Parameters",displayName:"Delay",default:0,set:function(e){this._internal._animation.delay=e}},easingCurve:{type:{name:"enum",enums:[{value:"easeOut",label:"Ease Out"},{value:"easeIn",label:"Ease In"},{value:"linear",label:"Linear"},{value:"easeInOut",label:"Ease In Out"}]},default:"easeOut",displayName:"Easing Curve",group:"Parameters",set:function(e){this._internal._animation.ease=i[e]}}},outputs:{currentValue:{type:"number",displayName:"Current Value",group:"Current State",getter:function(){return this._internal.currentNumber}},atTargetValue:{type:"signal",displayName:"At Target Value",group:"Signals"}}};function r(e){var t=this._internal._animation;t.stop(),t.startValue=e,this.scheduleAfterInputsHaveUpdated((function(){t.endValue!==e&&t.start()})),this._internal.currentNumber=e,this.flagOutputDirty("currentValue")}e.exports={node:o}},5017:(e,t,n)=>{const{EdgeTriggeredInput:i}=n(6291),o={name:"NavigationClosePopup",displayNodeName:"Close Popup",category:"Navigation",docs:"https://docs.noodl.net/nodes/popups/close-popup",initialize:function(){this._internal.resultValues={}},inputs:{results:{type:{name:"stringlist",allowEditOnly:!0},group:"Results",set:function(e){this._internal.results=e}},closeActions:{type:{name:"stringlist",allowEditOnly:!0},group:"Close Actions",set:function(e){this._internal.closeActions=e}},close:{type:"Signal",displayName:"Close",group:"Actions",valueChangedToTrue:function(){this.scheduleClose()}}},methods:{setResultValue:function(e,t){this._internal.resultValues[e]=t},_setCloseCallback:function(e){this._internal.closeCallback=e},scheduleClose:function(){var e=this,t=this._internal;t.hasScheduledClose||(t.hasScheduledClose=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledClose=!1,e.close()})))},close:function(){this._internal.closeCallback&&this._internal.closeCallback(this._internal.closeAction,this._internal.resultValues)},closeActionTriggered:function(e){this._internal.closeAction=e,this.scheduleClose()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("result-")?this.registerInput(e,{set:this.setResultValue.bind(this,e.substring("result-".length))}):e.startsWith("closeAction-")?this.registerInput(e,{set:i.createSetter({valueChangedToTrue:this.closeActionTriggered.bind(this,e)})}):void 0}}};e.exports={node:o,setup:function(e,t){function n(t){function n(){var n=[],i=t.parameters.results;if(i)for(var o in i=i?i.split(","):void 0){var r=i[o];n.push({type:{name:"*"},plug:"input",group:"Results",name:"result-"+r,displayName:r})}var s=t.parameters.closeActions;if(s)for(var o in s=s?s.split(","):void 0)r=s[o],n.push({type:"signal",plug:"input",group:"Close Actions",name:"closeAction-"+r,displayName:r});e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"results"!==e.name&&"closeActions"!==e.name||n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.NavigationClosePopup",(function(e){n(e)}));for(const e of t.getNodesWithType("NavigationClosePopup"))n(e)}))}}},4776:e=>{const t={name:"PageStackNavigateBack",displayNodeName:"Pop Component Stack",category:"Navigation",docs:"https://docs.noodl.net/nodes/component-stack/pop-component",inputs:{navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue:function(){this.scheduleNavigate()}},results:{type:{name:"stringlist",allowEditOnly:!0},group:"Results",set:function(e){this._internal.results=e}},backActions:{type:{name:"stringlist",allowEditOnly:!0},group:"Back Actions",set:function(e){this._internal.backActions=e}}},initialize:function(){this._internal.resultValues={}},methods:{scheduleNavigate:function(){var e=this,t=this._internal;t.hasScheduledNavigate||(t.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledNavigate=!1,e.navigate()})))},_setBackCallback(e){this._internal.backCallback=e},navigate(){void 0!==this._internal.backCallback&&this._internal.backCallback({backAction:this._internal.backAction,results:this._internal.resultValues})},setResultValue:function(e,t){this._internal.resultValues[e]=t},backActionTriggered:function(e){this._internal.backAction=e,this.scheduleNavigate()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("result-")?this.registerInput(e,{set:this.setResultValue.bind(this,e.substring("result-".length))}):e.startsWith("backAction-")?this.registerInput(e,{set:_createSignal({valueChangedToTrue:this.backActionTriggered.bind(this,e)})}):void 0}}};e.exports={node:t,setup:function(e,t){function n(t){function n(){var n=[],i=t.parameters.results;if(i)for(var o in i=i?i.split(","):void 0){var r=i[o];n.push({type:{name:"*"},plug:"input",group:"Results",name:"result-"+r,displayName:r})}var s=t.parameters.backActions;if(s)for(var o in s=s?s.split(","):void 0)r=s[o],n.push({type:"signal",plug:"input",group:"Back Actions",name:"backAction-"+r,displayName:r});e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"results"!==e.name&&"backActions"!==e.name||n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.PageStackNavigateBack",(function(e){n(e)}));for(const e of t.getNodesWithType("PageStackNavigateBack"))n(e)}))}}},4399:(e,t,n)=>{"use strict";const i=n(6291),o={name:"PageStackNavigateToPath",displayNodeName:"Navigate To Path",category:"Navigation",docs:"https://docs.noodl.net/nodes/navigation/navigate-to-path",initialize:function(){var e=this._internal;e.params={},e.query={}},inputs:{path:{type:{name:"string"},displayName:"Path",group:"General",set:function(e){this._internal.path=e}},queryNames:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Query",group:"Query",set:function(e){this._internal.queryNames=e}},navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue:function(){this.scheduleNavigate()}}},outputs:{},methods:{scheduleNavigate:function(){var e=this,t=this._internal;t.hasScheduledNavigate||(t.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledNavigate=!1,e.navigate()})))},navigate(){var e=this._internal,t=e.path;if(void 0!==t){var n,o,r=e.path.match(/\{[A-Za-z0-9_]*\}/g),s=[];r&&(s=r.map((function(e){return e.replace("{","").replace("}","")}))),s.forEach((function(n){var i=e.params[n];t=t.replace("{"+n+"}",void 0!==i?i:"")}));var a=i.instance.getProjectSettings().navigationPathType;void 0===a||"hash"===a?o=t:n=t;var l=[];void 0!==e.queryNames&&e.queryNames.split(",").forEach((t=>{void 0!==e.query[t]&&l.push(t+"="+e.query[t])}));var u=(void 0!==n?n:"")+(l.length>=1?"?"+l.join("&"):"")+(void 0!==o?"#"+o:"");console.log(u),window.history.pushState({},"",u),dispatchEvent(new PopStateEvent("popstate",{}))}},setParam(e,t){this._internal.params[e]=t},setQuery(e,t){this._internal.query[e]=t},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("p-")?this.registerInput(e,{set:this.setParam.bind(this,e.substring("p-".length))}):e.startsWith("q-")?this.registerInput(e,{set:this.setQuery.bind(this,e.substring("q-".length))}):void 0}}};e.exports={node:o,setup:function(e,t){function n(t){function n(){var n=[];void 0!==t.parameters.path&&(n=(t.parameters.path.match(/\{[A-Za-z0-9_]*\}/g)||[]).map((function(e){return e.replace("{","").replace("}","")})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return{name:"p-"+e,displayName:e,group:"Parameter",type:"*",plug:"input"}}))),void 0!==t.parameters.queryNames&&t.parameters.queryNames.split(",").forEach((e=>{n.push({name:"q-"+e,displayName:e,group:"Query",plug:"input",type:"*"})})),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.PageStackNavigateToPath",(function(e){n(e)}));for(const e of t.getNodesWithType("PageStackNavigateToPath"))n(e)}))}}},2431:(e,t,n)=>{function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=n(4548),a=n(8969),l={name:"PageStackNavigate",displayNodeName:"Push Component To Stack",category:"Navigation",docs:"https://docs.noodl.net/nodes/component-stack/push-component",initialize:function(){this._internal.transitionParams={},this._internal.pageParams={},this._internal.backResults={}},inputs:{stack:{type:{name:"string",identifierOf:"PackStack"},displayName:"Stack",group:"General",default:"Main",set:function(e){this._internal.stack=e}},mode:{type:{name:"enum",enums:[{label:"Push",value:"push"},{label:"Replace",value:"replace"}]},displayName:"Mode",default:"push",group:"General",set:function(e){this._internal.navigationMode=e}},navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue:function(){this.scheduleNavigate()}}},outputs:{navigated:{type:"signal",displayName:"Navigated",group:"Events"}},methods:{scheduleNavigate:function(){var e=this,t=this._internal;t.hasScheduledNavigate||(t.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledNavigate=!1,e.navigate()})))},navigate(){"push"===this._internal.navigationMode||void 0===this._internal.navigationMode?a.instance.navigate(this._internal.stack,{target:this._internal.target,transition:o(o({},{type:this._internal.transition}),this._internal.transitionParams),params:this._internal.pageParams,backCallback:(e,t)=>{for(var n in this._internal.backResults=t,t)this.hasOutput("backResult-"+n)&&this.flagOutputDirty("backResult-"+n);void 0!==e&&this.sendSignalOnOutput(e)},hasNavigated:()=>{this.sendSignalOnOutput("navigated")}}):"replace"===this._internal.navigationMode&&a.instance.replace(this._internal.stack,{target:this._internal.target,params:this._internal.pageParams,hasNavigated:()=>{this.scheduleAfterInputsHaveUpdated((()=>{this.sendSignalOnOutput("navigated")}))}})},setTransitionParam:function(e,t){this._internal.transitionParams[e]=t},setPageParam:function(e,t){this._internal.pageParams[e]=t},getBackResult:function(e,t){return this._internal.backResults[e]},setTargetPageId:function(e){this._internal.target=e},setTransition:function(e){this._internal.transition=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"target"===e?this.registerInput(e,{set:this.setTargetPageId.bind(this)}):"transition"===e?this.registerInput(e,{set:this.setTransition.bind(this)}):e.startsWith("tr-")?this.registerInput(e,{set:this.setTransitionParam.bind(this,e.substring("tr-".length))}):e.startsWith("pm-")?this.registerInput(e,{set:this.setPageParam.bind(this,e.substring("pm-".length))}):void 0},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("backResult-")?this.registerOutput(e,{getter:this.getBackResult.bind(this,e.substring("backResult-".length))}):e.startsWith("backAction-")?this.registerOutput(e,{getter:function(){}}):void 0}}};e.exports={node:l,setup:function(e,t){function n(n){function i(){var i=[];if("push"===n.parameters.mode||void 0===n.parameters.mode){i.push({name:"transition",plug:"input",type:{name:"enum",enums:Object.keys(s)},default:"Push",displayName:"Transition",group:"Transition"});var o=n.parameters.transition||"Push";s[o]&&(i=i.concat(s[o].ports(n.parameters)))}var r=t.getNodesWithType("Page Stack").find((e=>(e.parameters.name||"Main")===(n.parameters.stack||"Main")));if(void 0!==r){var a=r.parameters.pages;if(void 0!==a&&a.length>0){i.push({plug:"input",type:{name:"enum",enums:a.map((e=>({label:e.label,value:e.id}))),allowEditOnly:!0},group:"General",displayName:"Target Page",name:"target",default:a[0].id});var l=n.parameters.target||a[0].id,u=r.parameters["pageComp-"+l];if(void 0!==u){const e=t.components[u];if(void 0!==e){for(var c in e.inputPorts)i.push({name:"pm-"+c,displayName:c,type:"*",plug:"input",group:"Parameters"});for(const t of e.getNodesWithType("PageStackNavigateBack"))void 0!==t.parameters.backActions&&t.parameters.backActions.split(",").forEach((e=>{i.find((t=>t.name==="backAction-"+e))||i.push({name:"backAction-"+e,displayName:e,type:"signal",plug:"output",group:"Back Actions"})})),t.parameters.results&&t.parameters.results.split(",").forEach((e=>{i.find((t=>t.name==="backResult-"+e))||i.push({name:"backResult-"+e,displayName:e,type:"*",plug:"output",group:"Back Results"})}))}}}}e.editorConnection.sendDynamicPorts(n.id,i)}function o(){var e=t.getNodesWithType("Page Stack").find((e=>e.parameters.name===n.parameters.stack));if(void 0!==e){var o=e.parameters.pages;if(void 0!==o&&0!==o.length){var r=e.parameters["pageComp-"+(n.parameters.target||o[0].id)];if(void 0!==r){var s=t.components[r];if(void 0!==s){s.on("inputPortAdded",i),s.on("inputPortRemoved",i);for(const e of s.getNodesWithType("PageStackNavigateBack"))e.on("parameterUpdated",i);s.on("nodeAdded",(e=>{"PageStackNavigateBack"===e.type&&(e.on("parameterUpdated",i),i())})),s.on("nodeWasRemoved",(e=>{"PageStackNavigateBack"===e.type&&i()}))}}}}}function r(e){e.on("parameterUpdated",(function(e){"pages"!==e.name&&"name"!==e.name||i()}))}i(),o(),n.on("parameterUpdated",(function(e){"target"===e.name?(o(),i()):("stack"===e.name||"mode"===e.name||"transition"===e.name||e.name.startsWith("tr-"))&&i()})),t.on("nodeAdded.Page Stack",r),t.on("nodeWasRemoved.Page Stack",i);for(const e of t.getNodesWithType("Page Stack"))r(e)}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.PageStackNavigate",(function(e){n(e)}));for(const e of t.getNodesWithType("PageStackNavigate"))n(e)}))}}},8969:e=>{class t{constructor(){this._pageStacks={},this._navigationQueue=[]}_performNavigation(e,t,n){if(e=e||"Main",this._pageStacks[e])for(const i of this._pageStacks[e])"navigate"===n?i.navigate(t):i.replace(t);else this._navigationQueue.push({name:e,args:t,type:n})}navigate(e,t){e=e||"Main",this._performNavigation(e,t,"navigate")}replace(e,t){e=e||"Main",this._performNavigation(e,t,"replace")}registerPageStack(e,t){e=e||"Main",this._pageStacks[e]||(this._pageStacks[e]=[]),this._pageStacks[e].push(t);let n=!1,i=!1,o=0;for(;o<this._navigationQueue.length;){const r=this._navigationQueue[o];r.name===e?("navigate"===r.type?(n||(t.reset(),n=!0),t.navigate(r.args)):t.replace(r.args),i=!0,this._navigationQueue.splice(o,1)):o++}i||t.reset()}deregisterPageStack(e,t){if(e=e||"Main",!this._pageStacks[e])return;const n=this._pageStacks[e].indexOf(t);-1!==n&&(this._pageStacks[e].splice(n,1),0===this._pageStacks[e].length&&delete this._pageStacks[e])}}t.instance=new t,e.exports=t},628:(e,t,n)=>{"use strict";n(6291),e.exports={node:{name:"PageInputs",displayNodeName:"Page Inputs",category:"Navigation",docs:"https://docs.noodl.net/nodes/navigation/page-inputs",color:"component",initialize:function(){this._internal.params={}},inputs:{pathParams:{type:{name:"stringlist",allowEditOnly:!0},group:"Path Parameters"},queryParams:{type:{name:"stringlist",allowEditOnly:!0},group:"Query Parameters"}},outputs:{},methods:{_setPageParams:function(e){for(var t in e)this._internal.params[t]=e[t],this.hasOutput("pm-"+t)&&this.flagOutputDirty("pm-"+t)},getPageParam:function(e){return this._internal.params[e]},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("pm-")?this.registerOutput(e,{getter:this.getPageParam.bind(this,e.substring("pm-".length))}):void 0}}}}},9883:(e,t,n)=>{const i=n(6291);class o{constructor(){this._routers={},this._navigationQueue=[]}navigate(e,t){setTimeout((()=>{const n=Object.keys(this._routers);if(1===n.length&&(e=n[0]),this._routers[e])for(const n of this._routers[e])n.navigate(t);else this._navigationQueue.push({name:e,args:t})}),1)}registerRouter(e,t){e=e||"Main",this._routers[e]||(this._routers[e]=[]),this._routers[e].push(t);let n=!1,i=0;for(;i<this._navigationQueue.length;){const o=this._navigationQueue[i];o.name===e?(t.navigate(o.args),n=!0,this._navigationQueue.splice(i,1)):i++}n||t.reset()}deregisterRouter(e,t){if(e=e||"Main",!this._routers[e])return;const n=this._routers[e].indexOf(t);-1!==n&&(this._routers[e].splice(n,1),0===this._routers[e].length&&delete this._routers[e])}getPagesForRouter(e){const t=i.instance.graphModel.routerIndex.routers;if(void 0===t||0===t.length)return[];const n=void 0===e?[t[0]]:t.filter((t=>t.name===e)),o=new Set;return n.forEach((e=>{const t=e.pages;void 0!==t&&void 0!==t.routes&&t.routes.forEach((e=>{o.add(e)}))})),Array.from(o).map((e=>this.getPageInfoForComponent(e))).filter((e=>!!e))}getPageInfoForComponent(e){return i.instance.graphModel.routerIndex.pages.find((t=>t.component===e))}}o.instance=new o,e.exports=o},1165:(e,t,n)=>{const i=n(9883),o={name:"RouterNavigate",displayNodeName:"Navigate",category:"Navigation",docs:"https://docs.noodl.net/nodes/navigation/navigate",initialize:function(){this._internal.pageParams={}},inputs:{navigate:{displayName:"Navigate",group:"Actions",valueChangedToTrue:function(){this.scheduleNavigate()}}},outputs:{navigated:{type:"signal",displayName:"Navigated",group:"Events"}},methods:{scheduleNavigate:function(){var e=this,t=this._internal;t.hasScheduledNavigate||(t.hasScheduledNavigate=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledNavigate=!1,e.navigate()})))},navigate(){i.instance.navigate(this._internal.router,{target:this._internal.target,params:this._internal.pageParams,hasNavigated:()=>{this.scheduleAfterInputsHaveUpdated((()=>{this.sendSignalOnOutput("navigated")}))}})},setPageParam:function(e,t){this._internal.pageParams[e]=t},setTargetPage:function(e){this._internal.target=e},setRouter:function(e){this._internal.router=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"target"===e?this.registerInput(e,{set:this.setTargetPage.bind(this)}):"router"===e?this.registerInput(e,{set:this.setRouter.bind(this)}):e.startsWith("pm-")?this.registerInput(e,{set:this.setPageParam.bind(this,e.substring("pm-".length))}):void 0}}};e.exports={node:o,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()}}},3874:e=>{e.exports={node:{name:"NavigationShowPopup",displayNodeName:"Show Popup",category:"Navigation",docs:"https://docs.noodl.net/nodes/popups/show-popup",initialize:function(){this._internal.popupParams={},this._internal.closeResults={}},inputs:{target:{type:"component",displayName:"Target",group:"General",set:function(e){this._internal.target=e}},show:{type:"signal",displayName:"Show",group:"Actions",valueChangedToTrue:function(){this.scheduleShow()}}},outputs:{Closed:{type:"signal"}},methods:{setPopupParam:function(e,t){this._internal.popupParams[e]=t},getCloseResult:function(e){return this._internal.closeResults[e]},scheduleShow:function(){var e=this,t=this._internal;t.hasScheduledShow||(t.hasScheduledShow=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledShow=!1,e.show()})))},show:function(){null!=this._internal.target&&this.context.showPopup(this._internal.target,this._internal.popupParams,{senderNode:this.nodeScope.componentOwner,onClosePopup:(e,t)=>{for(var n in this._internal.closeResults=t,t)this.hasOutput("closeResult-"+n)&&this.flagOutputDirty("closeResult-"+n);e?this.sendSignalOnOutput(e):this.sendSignalOnOutput("Closed")}})},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("popupParam-")?this.registerInput(e,{set:this.setPopupParam.bind(this,e.substring("popupParam-".length))}):void 0},registerOutputIfNeeded:function(e){if(!this.hasOutput(e))return e.startsWith("closeResult-")?this.registerOutput(e,{getter:this.getCloseResult.bind(this,e.substring("closeResult-".length))}):e.startsWith("closeAction-")?this.registerOutput(e,{getter:function(){}}):void 0}}},setup:function(e,t){function n(n){function i(){var i=[],o=n.parameters.target;if(void 0!==o){var r=t.components[o];if(r){for(var s in r.inputPorts)i.push({name:"popupParam-"+s,displayName:s,type:"*",plug:"input",group:"Params"});for(const e of r.getNodesWithType("NavigationClosePopup"))void 0!==e.parameters.closeActions&&e.parameters.closeActions.split(",").forEach((e=>{i.find((t=>t.name===e))||i.push({name:"closeAction-"+e,displayName:e,type:"signal",plug:"output",group:"Close Actions"})})),void 0!==e.parameters.results&&e.parameters.results.split(",").forEach((e=>{i.push({name:"closeResult-"+e,displayName:e,type:"*",plug:"output",group:"Close Results"})}))}}e.editorConnection.sendDynamicPorts(n.id,i)}function o(e){if(void 0!==e){var n=t.components[e];if(void 0!==n){n.on("inputPortAdded",i),n.on("inputPortRemoved",i);for(const e of n.getNodesWithType("NavigationClosePopup"))e.on("parameterUpdated",i);n.on("nodeAdded",(e=>{"NavigationClosePopup"===e.type&&(e.on("parameterUpdated",i),i())})),n.on("nodeWasRemoved",(e=>{"NavigationClosePopup"===e.type&&i()}))}}}i(),o(n.parameters.target),n.on("parameterUpdated",(function(e){"target"===e.name&&(i(),o(n.parameters.target))}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.NavigationShowPopup",(function(e){n(e)}));for(const e of t.getNodesWithType("NavigationShowPopup"))n(e)}))}}},4548:(e,t,n)=>{e.exports={None:n(449),Push:n(5403),Popup:n(7812)}},449:(e,t,n)=>{const i=n(5911);e.exports=class extends i{constructor(e,t,n){super(),this.from=e,this.to=t,this.timing={dur:0,delay:0}}update(e){}forward(e){}back(e){}static ports(){return[]}}},7812:(e,t,n)=>{const i=n(5911),o=n(5107);e.exports=class extends i{constructor(e,t,n){super(),this.from=e,this.to=t,this.timing=n.timing||{curve:[0,0,.58,1],dur:300,delay:0},this.distance=n.shift||{value:25,unit:"%"},"number"==typeof this.distance&&(this.distance={value:this.distance,unit:"%"}),this.direction=n.direction||"Right",this.timing.curve[0]=Math.min(1,Math.max(0,this.timing.curve[0])),this.timing.curve[2]=Math.min(1,Math.max(0,this.timing.curve[2])),this.ease=o.apply(null,this.timing.curve).get,this.fadein=void 0!==n.fadein&&n.fadein,this.zoom=n.zoom||{value:25,unit:"%"},"number"==typeof this.zoom&&(this.zoom={value:this.zoom,unit:"%"})}update(e){if("In"===this.direction||"Out"===this.direction){var t=this.zoom.value/100;t="Out"===this.direction?-t:t,this.to.setStyle({transform:"scale("+(1-t*(1-e))+")",opacity:this.crossfade?e:1})}else{var n=this.distance.value,i=this.distance.unit;const t={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}},o={x:t[this.direction].x*n,y:t[this.direction].y*n};this.to.setStyle({transform:"translate("+o.x*(e-1)+i+","+o.y*(e-1)+i+")",opacity:this.fadein?e:1})}}forward(e){var t=this.ease(e);this.update(t)}back(e){var t=this.ease(e);this.update(1-t)}static ports(e){var t=[];return t.push({name:"tr-direction",displayName:"Direction",group:"Transition",type:{name:"enum",enums:["Right","Left","Up","Down","In","Out"]},default:"Right",plug:"input"}),"In"===e["tr-direction"]||"Out"===e["tr-direction"]?t.push({name:"tr-zoom",displayName:"Zoom",group:"Transition",type:{name:"number",units:["%"]},default:{value:25,unit:"%"},plug:"input"}):t.push({name:"tr-shift",displayName:"Shift Distance",group:"Transition",type:{name:"number",units:["%","px"]},default:{value:25,unit:"%"},plug:"input"}),t.push({name:"tr-fadein",displayName:"Fade In",group:"Transition",type:"boolean",default:!1,plug:"input"}),t.push({name:"tr-timing",displayName:"Timing",group:"Transition",type:"curve",plug:"input"}),t}}},5403:(e,t,n)=>{const i=n(5911),o=n(5107);e.exports=class extends i{constructor(e,t,n){super(),this.from=e,this.to=t,this.timing=n.timing||{curve:[0,0,.58,1],dur:300,delay:0},this.distance=n.shift||{value:25,unit:"%"},"number"==typeof this.distance&&(this.distance={value:this.distance,unit:"%"}),this.direction=n.direction||"Left",this.timing.curve[0]=Math.min(1,Math.max(0,this.timing.curve[0])),this.timing.curve[2]=Math.min(1,Math.max(0,this.timing.curve[2])),this.ease=o.apply(null,this.timing.curve).get,this.crossfade=void 0!==n.crossfade&&n.crossfade,this.darkOverlay=void 0===n.darkoverlay||n.darkoverlay,this.darkOverlayAmount=void 0===n.darkoverlayamount?.5:n.darkoverlayamount,this.zoom=n.zoom||{value:25,unit:"%"},"number"==typeof this.zoom&&(this.zoom={value:this.zoom,unit:"%"}),this.darkOverlay&&(this.darkOverlay=e.nodeScope.createPrimitiveNode("Group"),this.darkOverlay.setInputValue("position","absolute"),this.darkOverlay.setInputValue("sizeMode","explicit"),this.darkOverlay.setInputValue("width",{value:100,unit:"%"}),this.darkOverlay.setInputValue("height",{value:100,unit:"%"}),this.darkOverlay.setInputValue("backgroundColor","#000000"),this.darkOverlay.setInputValue("opacity",0))}update(e){if("In"===this.direction||"Out"===this.direction){var t=this.zoom.value/100;t="Out"===this.direction?-t:t,this.from.setStyle({transform:"scale("+(1+t*e)+")",opacity:this.crossfade?1-e:1}),this.to.setStyle({transform:"scale("+(1-t*(1-e))+")",opacity:this.crossfade?e:1})}else{var n=this.distance.value,i=this.distance.unit;const t={Up:{x:0,y:-1},Down:{x:0,y:1},Left:{x:-1,y:0},Right:{x:1,y:0}},o={x:t[this.direction].x*n,y:t[this.direction].y*n},r={x:100*t[this.direction].x,y:100*t[this.direction].y};this.from.setStyle({transform:"translate("+o.x*e+i+","+o.y*e+i+")",opacity:this.crossfade?1-e:1}),this.to.setStyle({transform:"translate("+r.x*(e-1)+i+","+r.y*(e-1)+"%)",opacity:this.crossfade?e:1})}this.darkOverlay&&this.darkOverlay.setStyle({opacity:e*this.darkOverlayAmount})}forward(e){var t=this.ease(e);this.update(t)}back(e){var t=this.ease(e);this.update(1-t)}start(e){super.start(e),this.darkOverlay&&this.from.addChild(this.darkOverlay)}end(e){this.darkOverlay&&this.from.removeChild(this.darkOverlay),super.end(e)}static ports(e){const t=[];return t.push({name:"tr-direction",displayName:"Direction",group:"Transition",type:{name:"enum",enums:["Right","Left","Up","Down","In","Out"]},default:"Left",plug:"input"}),"In"===e["tr-direction"]||"Out"===e["tr-direction"]?t.push({name:"tr-zoom",displayName:"Zoom",group:"Transition",type:{name:"number",units:["%"]},default:{value:25,unit:"%"},plug:"input"}):t.push({name:"tr-shift",displayName:"Shift Distance",group:"Transition",type:{name:"number",units:["%","px"]},default:{value:25,unit:"%"},plug:"input"}),t.push({name:"tr-crossfade",displayName:"Crossfade",group:"Transition",type:"boolean",default:!1,plug:"input"}),t.push({name:"tr-darkoverlay",displayName:"Dark Overlay",group:"Transition",type:"boolean",default:!0,plug:"input"}),t.push({name:"tr-darkoverlayamount",displayName:"Dark Overlay Amount",group:"Transition",type:"number",default:.5,plug:"input"}),t.push({name:"tr-timing",displayName:"Timing",group:"Transition",type:"curve",plug:"input"}),t}}},5911:e=>{e.exports=class{constructor(){this._frame=this.frame.bind(this)}start(e){this.cb=e.end,this.timing.delay+this.timing.dur===0?this.end():(this.transitionForward=!e.back,this.startTime=window.performance.now(),requestAnimationFrame(this._frame))}frame(){var e=(window.performance.now()-(this.startTime+this.timing.delay))/this.timing.dur,t=Math.max(0,Math.min(e,1));this.transitionForward?this.forward(t):this.back(t),window.performance.now()<=this.startTime+this.timing.dur+this.timing.delay?requestAnimationFrame(this._frame):this.end()}end(){this.cb&&this.cb()}}},9169:(e,t,n)=>{"use strict";var i=n(1924),o={name:"net.noodl.animatetovalue",docs:"https://docs.noodl.net/nodes/logic/animate-to-value",displayName:"Animate To Value",shortDesc:"This node can interpolate smooothely from the current value to a target value.",category:"Animation",initialize:function(){var e=this,t=this._internal;t.currentNumber=0,t.numberInitialized=!1,t.animationStarted=!1,t.setCurrentNumberEnabled=!1,t.overrideValue=0,t._animation=this.context.timerScheduler.createTimer({duration:300,startValue:0,endValue:0,ease:i.easeOut,onStart:function(){t.animationStarted=!0},onRunning:function(n){t.currentNumber=this.ease(this.startValue,this.endValue,n),e.flagOutputDirty("currentValue")},onFinish:function(){e.sendSignalOnOutput("atTargetValue")}})},getInspectInfo(){return this._internal.currentNumber},inputs:{targetValue:{type:{name:"number"},displayName:"Target Value",group:"Target Value",default:void 0,set:function(e){if(!0===e?e=1:!1===e&&(e=0),e=Number(e),!isNaN(e)){var t=this._internal;if(!1===t.numberInitialized)return t.currentNumber=e,t.numberInitialized=!0,t._animation.endValue=e,void this.flagOutputDirty("currentValue");e!==t._animation.endValue&&(t._animation.startValue=t.currentNumber,t._animation.endValue=e,t._animation.start())}}},duration:{type:"number",group:"Parameters",displayName:"Duration",default:300,set:function(e){this._internal._animation.duration=e}},delay:{type:"number",group:"Parameters",displayName:"Delay",default:0,set:function(e){this._internal._animation.delay=e}},easingCurve:{type:{name:"enum",enums:[{value:"easeOut",label:"Ease Out"},{value:"easeIn",label:"Ease In"},{value:"linear",label:"Linear"},{value:"easeInOut",label:"Ease In Out"}]},default:"easeOut",displayName:"Easing Curve",group:"Parameters",set:function(e){this._internal._animation.ease=i[e]}}},outputs:{currentValue:{type:"number",displayName:"Current Value",group:"Current State",getter:function(){return this._internal.currentNumber}},atTargetValue:{type:"signal",displayName:"At Target Value",group:"Signals"}}};e.exports={node:o}},8368:(e,t,n)=>{"use strict";const i=n(1924);function o(e,t){for(var n=0;n<3;++n){var i=1+2*n;e[n]=parseInt(t.substring(i,i+2),16)}}function r(e){var t=e.toString(16);return 1==t.length?"0"+t:t}let s=[0,0,0],a=[0,0,0],l=[0,0,0];const u={name:"Color Blend",docs:"https://docs.noodl.net/nodes/utilities/color-blend",shortDesc:"Given any number of input colors this node can interpolate between these and give the result color as output.",category:"Interpolation",getInspectInfo(){return[{type:"color",value:this._internal.resultColor}]},initialize(){const e=this._internal;e.resultColor="#000000",e.blendValue=0,e.colors=[]},numberedInputs:{color:{type:"color",displayPrefix:"Color",createSetter:e=>function(t){this._internal.colors[e]=t,this.updateColor()}}},inputs:{blendValue:{type:"number",displayName:"Blend Value",default:0,set:function(e){this._internal.blendValue=e,this.updateColor()}}},outputs:{result:{type:"color",displayName:"Result",getter:function(){return this._internal.resultColor}}},methods:{updateColor(){var e=this._internal.colors;if(0!==e.length){var t,n,u,c=(0,t=e.length-1,n=this._internal.blendValue,Math.max(0,Math.min(t,n))),p=Math.floor(c),d=c-p;0===d?this._internal.resultColor=h(p):(o(s,h(p)),o(a,h(p+1)),l[0]=Math.floor(i.linear(s[0],a[0],d)),l[1]=Math.floor(i.linear(s[1],a[1],d)),l[2]=Math.floor(i.linear(s[2],a[2],d)),this._internal.resultColor="#"+r((u=l)[0])+r(u[1])+r(u[2])),this.flagOutputDirty("result")}function h(t){return e[t]?e[t]:"#000000"}}}};e.exports={node:u}},4888:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=n(7498);e.exports={extendSetComponentObjectProperties:function(e){function t(e,t,n){var i=[];const o=[{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Number",value:"number"},{label:"Date",value:"date"},{label:"Array",value:"array"},{label:"Object",value:"object"},{label:"Any",value:"*"}];var r=t.properties;if(r)for(var s in r=r?r.split(","):void 0){var a=r[s];i.push({type:{name:void 0===t["type-"+a]?"*":t["type-"+a]},plug:"input",group:"Property Values",displayName:a,name:"prop-"+a}),i.push({type:{name:"enum",enums:o,allowEditOnly:!0},default:"any",plug:"input",group:"Property Types",displayName:a,default:"*",name:"type-"+a})}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input"}})}return{node:{name:e.name,displayNodeName:e.displayName,category:"Component Utilities",color:"component",docs:e.docs,initialize:function(){this._internal.inputValues={}},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},store:{type:"signal",group:"Actions",displayName:"Do",valueChangedToTrue(){this.scheduleStore()}}},outputs:{stored:{type:"signal",group:"Events",displayName:"Done"}},methods:{getComponentObjectId:e.getComponentObjectId,scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{const t=o.get(this.getComponentObjectId());for(var n in this.hasScheduledStore=!1,e.inputValues)t.set(n,e.inputValues[n],{resolve:!0});this.sendSignalOnOutput("stored")}))}},registerInputIfNeeded:function(e){if(!this.hasInput(e))if(e.startsWith("prop-")){const t=e.substring("prop-".length);this.registerInput(e,{set(e){this._internal.inputValues[t]=e}})}else e.startsWith("type-")&&this.registerInput(e,{set(e){}})}}},setup:function(n,i){n.editorConnection&&n.editorConnection.isRunningLocally()&&i.on("nodeAdded."+e.name,(e=>{t(e.id,e.parameters,n.editorConnection),e.on("parameterUpdated",(i=>{("properties"===i.name||i.name.startsWith("type-"))&&t(e.id,e.parameters,n.editorConnection)}))}))}}}}},3004:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=n(7498),r={name:"net.noodl.ComponentObject",displayNodeName:"Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/component-object",initialize:function(){this._internal.inputValues={},this._internal.dirtyValues={},this._internal.onModelChangedCallback=e=>{!1===this.isInputConnected("fetch")&&(this.hasOutput("value-"+e.name)&&this.flagOutputDirty("value-"+e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))};const e=o.get("componentState"+this.nodeScope.componentOwner.getInstanceId());this._internal.model=e,e.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){return{type:"value",value:this._internal.model.data}},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue(){this.scheduleFetch()}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"}},methods:{scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{for(var t in this.hasScheduledStore=!1,e.dirtyValues)e.model.set(t,e.inputValues[t],{resolve:!0});e.dirtyValues={}}))}},scheduleFetch(){this.hasScheduledFetch||(this.hasScheduledFetch=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.hasScheduledFetch=!1,this.fetch()})))},fetch(){for(var e in this._internal.model.data)this.hasOutput("value-"+e)&&(this.flagOutputDirty("value-"+e),this.hasOutput("changed-"+e)&&this.sendSignalOnOutput("changed-"+e));this.sendSignalOnOutput("fetched")},_onNodeDeleted(){i.prototype._onNodeDeleted.call(this),this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){if(this.hasOutput(e))return;const t=e.split("-"),n=t[t.length-1];this.registerOutput(e,{get(){return this._internal.model.get(n,{resolve:!0})}})},registerInputIfNeeded:function(e){if(!this.hasInput(e)&&e.startsWith("value-")){const t=e.substring("value-".length);this.registerInput(e,{set(e){this._internal.inputValues[t]=e,this._internal.dirtyValues[t]=!0,this.scheduleStore()}})}}}};function s(e,t,n){const i=[];if(t.properties){var o=t.properties.split(",");for(var r in o){var s=o[r];i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"value-"+s,displayName:s}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input/output"}})}e.exports={node:r,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.net.noodl.ComponentObject",(t=>{s(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{"properties"===n.name&&s(t.id,t.parameters,e.editorConnection)}))}))}}},5531:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=n(7498),r=new(0,n(2699).EventEmitter);r.setMaxListeners(1e6);const s={name:"net.noodl.ParentComponentObject",displayNodeName:"Parent Component Object",category:"Component Utilities",color:"component",docs:"https://docs.noodl.net/nodes/component-utilities/parent-component-object",initialize(){this._internal.inputValues={},this._internal.onModelChangedCallback=e=>{!1===this.isInputConnected("fetch")&&(this.hasOutput("value-"+e.name)&&this.flagOutputDirty("value-"+e.name),this.hasOutput("changed-"+e.name)&&this.sendSignalOnOutput("changed-"+e.name),this.sendSignalOnOutput("changed"))},this.onComponentStateNodesChanged=()=>{const e=this.findParentComponentStateModelId();this._internal.modelId!==e&&(this._internal.modelId=e,!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId))},r.on("componentStateNodesChanged",this.onComponentStateNodesChanged),this.updateComponentState()},nodeScopeDidInitialize(){this._internal.modelId||this.context.scheduleAfterUpdate((()=>{this.updateComponentState()}))},getInspectInfo(){if(!this._internal.model)return"No parent component state found";const e=[{type:"text",value:this._internal.parentComponentName}],t=this._internal.model.data;return e.concat(Object.keys(t).map((e=>({type:"text",value:e+": "+t[e]}))))},inputs:{properties:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Properties",group:"Properties",set(e){}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setModelId(this._internal.modelId)}}},outputs:{changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"}},methods:{updateComponentState(){this._internal.modelId=this.findParentComponentStateModelId(),!1===this.isInputConnected("fetch")&&this.setModelId(this._internal.modelId)},findParentComponentStateModelId(){const e=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("net.noodl.ComponentObject").length>0?n:e(n)}(this.nodeScope.componentOwner);if(e)return this._internal.parentComponentName=e.name,"componentState"+e.getInstanceId()},setModelId(e){if(this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback),this._internal.model=void 0,!e)return;const t=o.get(e);for(var n in this._internal.model=t,t.on("change",this._internal.onModelChangedCallback),t.data)this.hasOutput("value-"+n)&&this.flagOutputDirty("value-"+n),this.hasOutput("changed-"+n)&&this.sendSignalOnOutput("changed-"+n);this.sendSignalOnOutput("changed"),this.sendSignalOnOutput("fetched")},scheduleStore(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((()=>{if(this.hasScheduledStore=!1,e.model)for(var t in e.inputValues)e.model.set(t,e.inputValues[t],{resolve:!0})}))}},_onNodeDeleted(){i.prototype._onNodeDeleted.call(this),r.off("componentStateNodesChanged",this.onComponentStateNodesChanged),this._internal.model&&this._internal.model.off("change",this._internal.onModelChangedCallback)},registerOutputIfNeeded(e){if(this.hasOutput(e))return;const t=e.substring("value-".length);this.registerOutput(e,{get(){if(this._internal.model)return this._internal.model.get(t,{resolve:!0})}})},registerInputIfNeeded:function(e){if(!this.hasInput(e)&&e.startsWith("value-")){const t=e.substring("value-".length);this.registerInput(e,{set(e){this._internal.inputValues[t]=e,this.scheduleStore()}})}}}};function a(e,t,n){const i=[];var o=t.properties&&t.properties.split(",");for(var r in o){var s=o[r];i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input/output",group:"Properties",name:"value-"+s,displayName:s}),i.push({type:"signal",plug:"output",group:"Changed Events",displayName:s+" Changed",name:"changed-"+s})}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input/output"}})}e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&(t.on("nodeAdded.net.noodl.ParentComponentObject",(t=>{a(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(n=>{a(t.id,t.parameters,e.editorConnection)}))})),t.on("nodeAdded.net.noodl.ComponentObject",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}),0)})),t.on("nodeRemoved.net.noodl.ComponentObject",(e=>{setTimeout((()=>{r.emit("componentStateNodesChanged")}))})))}}},228:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=(n(7498),n(4888));e.exports=o.extendSetComponentObjectProperties({name:"net.noodl.SetComponentObjectProperties",displayName:"Set Component Object Properties",docs:"https://docs.noodl.net/nodes/component-utilities/set-component-object-properties",getComponentObjectId:function(){return"componentState"+this.nodeScope.componentOwner.getInstanceId()}})},9773:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=(n(7498),n(4888));e.exports=o.extendSetComponentObjectProperties({name:"net.noodl.SetParentComponentObjectProperties",displayName:"Set Parent Component Object Properties",docs:"https://docs.noodl.net/nodes/component-utilities/set-parent-component-object-properties",getComponentObjectId:function(){const e=function e(t){let n;if(t.getRoots().length>0){const e=t.getRoots()[0];e.getVisualParentNode?e.getVisualParentNode()&&(n=e.getVisualParentNode().nodeScope.componentOwner):e.parentNodeScope&&(n=t.parentNodeScope.componentOwner)}else t.parentNodeScope&&(n=t.parentNodeScope.componentOwner);if(n&&n.nodeScope&&n.nodeScope.componentOwner!==t)return n.nodeScope.getNodesWithType("net.noodl.ComponentObject").length>0?n:e(n)}(this.nodeScope.componentOwner);if(e)return this._internal.parentComponentName=e.name,"componentState"+e.getInstanceId()}})},9887:(e,t,n)=>{const i=n(6291),o=n(7569);var r={name:"Cloud Function",category:"Cloud Services",color:"data",usePortAsLabel:"functionName",docs:"https://docs.noodl.net/nodes/data/cloud-data/cloud-function",deprecated:!0,initialize:function(){this._internal.paramsValues={}},getInspectInfo(){const e=this._internal.lastCallResult;return e?[{type:"value",value:e}]:"[Not executed yet]"},inputs:{functionName:{type:"string",displayName:"Function Name",group:"General",set:function(e){this._internal.functionName=e}},params:{group:"Parameters",type:{name:"stringlist",allowEditOnly:!0},set:function(e){this._internal.params=e}},call:{type:"signal",displayName:"Call",group:"Actions",valueChangedToTrue:function(){this.scheduleCall()}}},outputs:{success:{type:"signal",displayName:"Success",group:"Signals"},failure:{type:"signal",displayName:"Failure",group:"Signals"},result:{type:"*",displayName:"Result",group:"Output",getter:function(){return this._internal.result}}},methods:{registerOutputIfNeeded:function(e){this.hasOutput(e)},setParamsValue:function(e,t){this._internal.paramsValues[e]=t},registerInputIfNeeded:function(e){this.hasInput(e)||e.startsWith("pm-")&&this.registerInput(e,{set:this.setParamsValue.bind(this,e.substring("pm-".length))})},scheduleCall:function(){var e=this._internal;e.hasScheduledCall||(e.hasScheduledCall=!0,this.scheduleAfterInputsHaveUpdated(this.doCall.bind(this)))},doCall:function(){this._internal.hasScheduledCall=!1;const e=i.instance.getMetaData("cloudservices");if(void 0===e)return console.log("No cloud services defined in this project."),this._internal.lastCallResult={status:"failure",res:"No active cloud services in this project"},void this.sendSignalOnOutput("failure");var t=e.appId||e.workspaceId+"-"+e.instanceId,n=e.endpoint;!function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e)}},n.open(t.method||"GET",t.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",t.appId),n.setRequestHeader("Content-Type","application/json");var i=localStorage["Parse/"+t.appId+"/currentUser"];if(void 0!==i)try{const e=JSON.parse(i);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}n.send(JSON.stringify(t.content))}("/functions/"+encodeURIComponent(this._internal.functionName),{appId:t,endpoint:n,content:this._internal.paramsValues,method:"POST",success:e=>{void 0!==(e=e.result)?(this._internal.result=o._deserializeJSON(e),this.flagOutputDirty("result"),this._internal.lastCallResult={status:"success",result:this._internal.result},this.sendSignalOnOutput("success")):this.sendSignalOnOutput("failure")},error:e=>{this._internal.lastCallResult={status:"failure",res:e},this.sendSignalOnOutput("failure")}})}}};e.exports={node:r,setup:function(e,t){function n(t){function n(){var n=[],i=t.parameters.params;if(void 0!==i)for(var o in i=i.split(",")){var r=i[o];n.push({type:"*",plug:"input",group:"Parameters",name:"pm-"+r,displayName:r})}e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"params"===e.name&&n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Cloud Function",(function(e){n(e)}));for(const e of t.getNodesWithType("Cloud Function"))n(e)}))}}},3846:(e,t,n)=>{const i=n(6291);n(7569);var o={name:"CloudFunction2",displayName:"Cloud Function",category:"Cloud Services",color:"data",usePortAsLabel:"function",docs:"https://docs.noodl.net/nodes/data/cloud-data/cloud-function",initialize:function(){this._internal.paramsValues={},this._internal.resultsValues={}},getInspectInfo(){const e=this._internal.lastCallResult;return e?[{type:"value",value:e}]:"[Not executed yet]"},inputs:{call:{type:"signal",displayName:"Call",group:"Actions",valueChangedToTrue:function(){this.scheduleCall()}}},outputs:{success:{type:"signal",displayName:"Success",group:"Signals"},failure:{type:"signal",displayName:"Failure",group:"Signals"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure")},getResultsValue:function(e){return this._internal.resultsValues[e]},registerOutputIfNeeded:function(e){this.hasOutput(e)||e.startsWith("out-")&&this.registerOutput(e,{getter:this.getResultsValue.bind(this,e.substring("out-".length))})},setParamsValue:function(e,t){this._internal.paramsValues[e]=t},setFunctionName:function(e){this._internal.functionName=e},registerInputIfNeeded:function(e){this.hasInput(e)||("function"===e&&this.registerInput(e,{set:this.setFunctionName.bind(this)}),e.startsWith("in-")&&this.registerInput(e,{set:this.setParamsValue.bind(this,e.substring("in-".length))}))},scheduleCall:function(){var e=this._internal;e.hasScheduledCall||(e.hasScheduledCall=!0,this.scheduleAfterInputsHaveUpdated(this.doCall.bind(this)))},doCall:function(){this._internal.hasScheduledCall=!1;const e=i.instance.getMetaData("cloudservices");this.context.editorConnection&&(void 0===e||void 0===e.endpoint?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"cloud-function-2",{message:"No cloud services defined in this project."}):void 0===this._internal.functionName?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"cloud-function-2",{message:"No function specified"}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"cloud-function-2"));const t=e.appId||e.workspaceId+"-"+e.instanceId,n=this.context.editorConnection.isRunningLocally()?`http://${window.location.hostname}:8577`:e.endpoint;!function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e):t.error(e)}},n.open(t.method||"GET",t.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",t.appId),n.setRequestHeader("Content-Type","application/json");const o=i.instance.getMetaData("cloudservices");o&&o.deployVersion&&n.setRequestHeader("x-noodl-cloud-version",o.deployVersion);var r=localStorage["Parse/"+t.appId+"/currentUser"];if(void 0!==r)try{const e=JSON.parse(r);n.setRequestHeader("X-Parse-Session-Token",e.sessionToken)}catch(e){}n.send(JSON.stringify(t.content))}("/functions/"+encodeURIComponent(this._internal.functionName),{appId:t,endpoint:n,content:this._internal.paramsValues,method:"POST",success:e=>{if(void 0===e)this._internal.lastCallResult={status:"success",parameters:this._internal.paramsValues,results:"empty"};else{const t=e.result||{};for(let e in t)this._internal.resultsValues[e]=t[e],this.hasOutput("out-"+e)&&this.flagOutputDirty("out-"+e);this._internal.lastCallResult={status:"success",parameters:this._internal.paramsValues,results:this._internal.resultsValues}}this.sendSignalOnOutput("success")},error:e=>{const t="string"==typeof e?e:e.error||"Failed running cloud function.";this._internal.lastCallResult={status:"failure",error:t},this.setError(t)}})}}};e.exports={node:o,setup:function(e,t){}}},7796:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(1020),s={name:"CollectionInsert",docs:"https://docs.noodl.net/nodes/data/array/insert-into-array",displayNodeName:"Insert Object Into Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",initialize:function(){},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Array Id",group:"General",set:function(e){e instanceof r&&(e=e.getId()),this.setCollectionID(e)}},modifyId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Object Id",group:"Modify",set:function(e){this._internal.modifyId=e}},add:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"insert-warning"),void 0!==t.modifyId)if(void 0!==t.collection){var n=o.get(t.modifyId);t.collection.add(n),e.sendSignalOnOutput("modified")}else this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"insert-warning",{showGlobally:!0,message:"No Array Id specified"});else this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"insert-warning",{showGlobally:!0,message:"No Object Id specified"})}))}}},outputs:{modified:{group:"Events",type:"signal",displayName:"Done"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(r.get(e))},setCollection:function(e){this._internal.collection=e}}};e.exports={node:s}},952:(e,t,n)=>{"use strict";const{Node:i}=n(6291);n(7498);var o=n(1020),r={name:"CollectionNew",docs:"https://docs.noodl.net/nodes/data/array/create-new-array",displayNodeName:"Create New Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",color:"data",initialize:function(){},inputs:{new:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleNew()}},items:{type:"array",group:"General",displayName:"Items",set:function(e){this._internal.sourceCollection=e}}},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.collection?this._internal.collection.getId():this._internal.collectionId}},created:{group:"Events",type:"signal",displayName:"Done"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(o.get(e))},setCollection:function(e){this._internal.collection=e,this.flagOutputDirty("id")},scheduleNew:function(){var e=this;this.hasScheduledNew||(this.hasScheduledNew=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledNew=!1;const t=o.get();void 0!==this._internal.sourceCollection&&t.set(this._internal.sourceCollection),e.setCollection(t),e.sendSignalOnOutput("created")})))}}};e.exports={node:r}},9112:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(1020),s={name:"CollectionRemove",docs:"https://docs.noodl.net/nodes/data/array/remove-from-array",displayNodeName:"Remove Object From Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",initialize:function(){},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Array Id",group:"General",set:function(e){e instanceof r&&(e=e.getId()),this.setCollectionID(e)}},modifyId:{type:{name:"string",allowConnectionsOnly:!0},displayName:"Object Id",group:"Modify",set:function(e){this._internal.modifyId=e}},remove:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){var e=this,t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){if(void 0!==t.modifyId&&void 0!==t.collection){var n=o.get(t.modifyId);t.collection.remove(n),e.sendSignalOnOutput("modified")}}))}}},outputs:{modified:{group:"Events",type:"signal",displayName:"Done"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(r.get(e))},setCollection:function(e){this._internal.collection=e}}};e.exports={node:s}},4340:(e,t,n)=>{"use strict";const{Node:i}=n(6291);n(7498);var o=n(1020),r={name:"Collection2",docs:"https://docs.noodl.net/nodes/data/array/array-node",displayNodeName:"Array",shortDesc:"A collection of models, mainly used together with a For Each Node.",category:"Data",usePortAsLabel:"collectionId",color:"data",initialize:function(){var e=this,t=!1;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("fetch")&&(t||(t=!0,e.scheduleAfterInputsHaveUpdated((function(){e.sendSignalOnOutput("changed"),e.flagOutputDirty("count"),t=!1}))))},this._internal.sourceCollectionChangedCallback=function(){!0!==e.isInputConnected("store")&&e.scheduleCopyItems()}},getInspectInfo(){const e=this._internal.collection;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.items}]:{type:"text",value:"[No Array]"}},inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Id",group:"General",set:function(e){e instanceof o&&(e=e.getId()),this._internal.collectionId=e,!1===this.isInputConnected("fetch")?this.setCollectionID(e):this.flagOutputDirty("id")}},items:{type:"array",group:"General",displayName:"Items",set:function(e){var t=this;void 0!==e&&e!==this._internal.collection&&(this._internal.pendingSourceCollection=e,!1===this.isInputConnected("store")&&this.scheduleAfterInputsHaveUpdated((function(){t.setSourceCollection(e)})))}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.scheduleSetCollection()}}},outputs:{id:{type:"string",displayName:"Id",group:"General",getter:function(){return this._internal.collection?this._internal.collection.getId():this._internal.collectionId}},items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.collection?this._internal.collection.size():0}},changed:{group:"Events",type:"signal",displayName:"Changed"},fetched:{group:"Events",type:"signal",displayName:"Fetched"}},prototypeExtensions:{setCollectionID:function(e){this.setCollection(o.get(e))},setCollection:function(e){this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback),this._internal.collection=e,this.flagOutputDirty("id"),e.on("change",this._internal.collectionChangedCallback),this.flagOutputDirty("items"),this.flagOutputDirty("count")},setSourceCollection:function(e){var t=this._internal;t.sourceCollection&&t.sourceCollection instanceof o&&t.sourceCollection.off("change",t.sourceCollectionChangedCallback),t.sourceCollection=e,t.sourceCollection instanceof o&&t.sourceCollection.on("change",t.sourceCollectionChangedCallback),this._copySourceItems()},scheduleSetCollection:function(){var e=this;this.hasScheduledSetCollection||(this.hasScheduledSetCollection=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledSetCollection=!1,e.setCollectionID(e._internal.collectionId),e.sendSignalOnOutput("fetched")})))},scheduleStore:function(){var e=this;if(!this.hasScheduledStore){this.hasScheduledStore=!0;var t=this._internal;this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledStore=!1,e.setSourceCollection(t.pendingSourceCollection)}))}},_copySourceItems:function(){var e=this._internal;void 0===e.collection&&!1===this.isInputConnected("fetch")&&this.setCollection(o.get()),e.collection&&e.collection.set(e.sourceCollection)},scheduleCopyItems:function(){var e=this;this._internal,this.hasScheduledCopyItems||(this.hasScheduledCopyItems=!0,this.scheduleAfterInputsHaveUpdated((function(){e.hasScheduledCopyItems=!1,e._copySourceItems()})))},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.collection&&this._internal.collection.off("change",this._internal.collectionChangedCallback)}}};e.exports={node:r}},3570:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(1020),s=n(7498);function a(e,t){for(var n in e instanceof s&&(e=e.data),t instanceof s&&(t=t.data),this){var i=e[n],o=t[n];if(i!==o)return"string"==typeof i&&"string"==typeof o?1===this[n]?i>o?1:-1:i>o?-1:1:"number"==typeof i&&"number"==typeof o?1===this[n]?i-o:o-i:1===this[n]?i>o?1:-1:i>o?-1:1}return 0}var l={name:"Filter Collection",docs:"https://docs.noodl.net/nodes/data/array/array-filter",displayNodeName:"Array Filter",shortDesc:"Filter, sort and limit array",category:"Data",color:"data",initialize:function(){var e=this;this._internal.collectionChangedCallback=function(){!0!==e.isInputConnected("filter")&&e.scheduleFilter()},this._internal.enabled=!0,this._internal.filterSettings={}},getInspectInfo(){const e=this._internal.filteredCollection;return e?[{type:"text",value:"Id: "+e.getId()},{type:"value",value:e.items}]:{type:"text",value:"[Not executed yet]"}},inputs:{items:{type:"array",displayName:"Items",group:"General",set(e){this.bindCollection(e),!1===this.isInputConnected("filter")&&this.scheduleFilter()}},enabled:{type:"boolean",group:"General",displayName:"Enabled",default:!0,set:function(e){this._internal.enabled=e,!1===this.isInputConnected("filter")&&this.scheduleFilter()}},filter:{type:"signal",group:"Actions",displayName:"Filter",valueChangedToTrue:function(){this.scheduleFilter()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.filteredCollection}},firstItemId:{type:"string",displayName:"First Item Id",group:"General",getter:function(){if(void 0!==this._internal.filteredCollection){const e=this._internal.filteredCollection.get(0);if(void 0!==e)return e.getId()}}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.filteredCollection?this._internal.filteredCollection.size():0}},modified:{group:"Events",type:"signal",displayName:"Filtered"}},prototypeExtensions:{unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection()},getFilter:function(){const e=this._internal.filterSettings,t=["case"];if(e.filterFilter){const i=e.filterFilter.split(",");var n={};return i.forEach((function(i){var o="$"+(e["filterFilterOp-"+i]||"eq");n[i]={},n[i][o]=e["filterFilterValue-"+i],t.forEach((t=>{var o=e["filterFilterOption-"+t+"-"+i];o&&(n[i]["$"+t]=o)}))})),n}},getSort:function(){const e=this._internal.filterSettings;if(e.filterSort){const n=e.filterSort.split(",");var t={};return n.forEach((function(n){t[n]="descending"===e["filterSort-"+n]?-1:1})),t}},getLimit:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterLimit||10:void 0},getSkip:function(){const e=this._internal.filterSettings;return e.filterEnableLimit?e.filterSkip||0:void 0},scheduleFilter:function(){this.collectionChangedScheduled||(this.collectionChangedScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{if(this.collectionChangedScheduled=!1,this._internal.collection){var e=[].concat(this._internal.collection.items);if(this._internal.enabled){var t=this.getFilter();t&&(e=e.filter((e=>function(e,t){for(var n in t){var i=t[n];if(void 0!==i.$neq){if(e[n]==i.$neq)return!1}else{if(void 0===e[n])return!1;if(void 0!==i.$eq&&e[n]!=i.$eq)return!1;if(!(void 0===i.$gt||e[n]>i.$gt))return!1;if(!(void 0===i.$lt||e[n]<i.$lt))return!1;if(!(void 0===i.$gte||e[n]>=i.$gte))return!1;if(!(void 0===i.$lte||e[n]<=i.$lte))return!1;if(void 0!==i.$regex){var o=e[n]+"";if(!new RegExp(i.$regex,!0!==i.$case?"i":void 0).test(o))return!1}}}return!0}(e.data,t))));var n=this.getSort();n&&e.sort(a.bind(n));var i=this.getSkip();i&&(e=e.slice(i,e.length));var o=this.getLimit();o&&(e=e.slice(0,o))}this._internal.filteredCollection=r.create(e),this.sendSignalOnOutput("modified"),this.flagOutputDirty("firstItemId"),this.flagOutputDirty("items"),this.flagOutputDirty("count")}})))},registerInputIfNeeded:function(e){this.hasInput(e)||this.registerInput(e,{set:u.bind(this,e)})}}};function u(e,t){this._internal.filterSettings[e]=t,!1===this.isInputConnected("filter")&&this.scheduleFilter()}function c(e,t,n,i){var o=[];o.push({type:"boolean",plug:"input",group:"Limit",name:"filterEnableLimit",displayName:"Use limit"}),t.filterEnableLimit&&(o.push({type:"number",default:10,plug:"input",group:"Limit",name:"filterLimit",displayName:"Limit"}),o.push({type:"number",default:0,plug:"input",group:"Limit",name:"filterSkip",displayName:"Skip"})),o.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Filter",name:"filterFilter",displayName:"Filter"}),o.push({type:{name:"stringlist",allowEditOnly:!0},plug:"input",group:"Sort",name:"filterSort",displayName:"Sort"});const r={string:[{value:"eq",label:"Equals"},{value:"neq",label:"Not Equals"},{value:"regex",label:"Matches RegEx"}],boolean:[{value:"eq",label:"Equals"},{value:"neq",label:"Not Equals"}],number:[{value:"eq",label:"Equals"},{value:"neq",label:"Not Equals"},{value:"lt",label:"Less than"},{value:"gt",label:"Greater than"},{value:"gte",label:"Greater than or equal"},{value:"lte",label:"Less than or equal"}]};t.filterFilter&&t.filterFilter.split(",").forEach((e=>{o.push({type:{name:"enum",enums:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"}]},default:"string",plug:"input",group:e+" filter",displayName:"Type",editorName:e+" filter | Type",name:"filterFilterType-"+e});var n=t["filterFilterType-"+e];o.push({type:{name:"enum",enums:r[n||"string"]},default:"eq",plug:"input",group:e+" filter",displayName:"Op",editorName:e+" filter| Op",name:"filterFilterOp-"+e}),"regex"===t["filterFilterOp-"+e]&&o.push({type:"boolean",default:!1,plug:"input",group:e+" filter",displayName:"Case sensitive",editorName:e+" filter| Case",name:"filterFilterOption-case-"+e}),o.push({type:n||"string",plug:"input",group:e+" filter",displayName:"Value",editorName:e+" Filter Value",name:"filterFilterValue-"+e})})),t.filterSort&&t.filterSort.split(",").forEach((e=>{o.push({type:{name:"enum",enums:[{value:"ascending",label:"Ascending"},{value:"descending",label:"Descending"}]},default:"ascending",plug:"input",group:e+" sort",displayName:"Sort",editorName:e+" sorting",name:"filterSort-"+e})})),n.sendDynamicPorts(e,o)}e.exports={node:l,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Filter Collection",(function(n){c(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections")),n.on("parameterUpdated",(function(i){i.name.startsWith("filter")&&c(n.id,n.parameters,e.editorConnection,t.getMetaData("dbCollections"))})),t.on("metadataChanged.dbCollections",(function(t){c(n.id,n.parameters,e.editorConnection)}))}))}}},4013:(e,t,n)=>{const{Node:i}=n(6291),o=n(7397),r=n(1020),s=n(7363),a=n(6291),{useEffect:l}=s;function u(e){const{didMount:t,willUnmount:n}=e;return l((()=>(t(),()=>{n()})),[]),null}const c={name:"For Each",displayNodeName:"Repeater",docs:"https://docs.noodl.net/nodes/ui-controls/repeater",color:"visual",category:"Visual",dynamicports:[{name:"conditionalports/extended",condition:"templateType = explicit OR templateType NOT SET",inputs:["template"]},{name:"conditionalports/extended",condition:"templateType = dynamic",inputs:["templateScript"]}],initialize(){this._internal.itemNodes=[],this._internal.itemOutputSignals={},this._internal.itemOutputs={},this._internal.collection=r.get(),this._internal.queuedOperations=[],this._internal.mountedOperations=[],this._internal.collection.on("add",(async e=>{this._internal.target&&this._queueOperation((async()=>{const t=this._internal.target.getChildren().indexOf(this)+1;await this.addItem(e.item,t+e.index)}))})),this._internal.collection.on("remove",(e=>{this._queueOperation((()=>{this.removeItem(e.item)}))})),this._internal.onItemsCollectionChanged=()=>{a.instance.getProjectSettings().repeaterDisabledWhenUnmounted&&!this.isMounted?this._internal.mountedOperations.push((()=>{this._internal.collection.set(this._internal.items)})):this._queueOperation((()=>{this._internal.collection.set(this._internal.items)}))},this.addDeleteListener((()=>{this._deleteAllItemNodes()}))},inputs:{items:{group:"Data",displayName:"Items",type:"array",set:function(e){e&&e!==this._internal.items&&this.bindCollection(e)}},templateType:{group:"Appearance",displayName:"Template Type",type:{name:"enum",enums:[{label:"Explicit",value:"explicit"},{label:"Dynamic",value:"dynamic"}]},default:"explicit",set:function(e){this._internal.templateType=e,this.scheduleRefresh()}},template:{type:"component",displayName:"Template",group:"Appearance",set:function(e){this._internal.template=e,this.scheduleRefresh()}},templateScript:{type:{name:"string",codeeditor:"javascript",allowEditOnly:!0},displayName:"Script",group:"Appearance",default:"// Set the 'component' variable to the name of the desired component for this item.\n// Component name must start with a '/'.\n// A component in a sheet is referred to by '/#Sheet Name/Comopnent Name'.\n// The data for each item is available in a variable called 'item'\ncomponent = '/MyComponent';",set:function(e){try{this._internal.templateFunction=new Function("item","var component;"+e+";return component;")}catch(e){console.log(e),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"foreach-syntax-warning",{message:"<strong>Syntax</strong>: "+e.message})}this.scheduleRefresh()}},refresh:{group:"Appearance",displayName:"Refresh",type:"signal",valueChangedToTrue:function(){this.scheduleRefresh()}}},outputs:{itemActionItemId:{type:"string",group:"Actions",displayName:"Item Id",getter:function(){return this._internal.itemActionItemId}}},prototypeExtensions:{updateTarget:function(e){this._internal.target=e?this.nodeScope.getNodeWithId(e):void 0,this.scheduleRefresh()},setNodeModel:function(e){i.prototype.setNodeModel.call(this,e),e.parent&&this.updateTarget(e.parent.id);var t=this;e.on("parentUpdated",(function(e){t.updateTarget(e?e.id:void 0)}),this)},scheduleRefresh:function(){var e=this._internal;e.hasScheduledRefresh||(e.hasScheduledRefresh=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._queueOperation((()=>{this.refresh()}))})))},unbindCurrentCollection:function(){var e=this._internal.items;e&&(r.instanceOf(e)&&e.off("change",this._internal.onItemsCollectionChanged),this._internal.items=void 0)},bindCollection:function(e){var t=this._internal;this.unbindCurrentCollection(),r.instanceOf(e)&&e.on("change",this._internal.onItemsCollectionChanged),t.items=e,this.scheduleCopyItems()},getTemplateForModel:function(e){var t=this._internal;if(void 0===t.templateType||"explicit"===t.templateType)return t.template;if(t.templateFunction){try{var n=t.templateFunction(e)}catch(e){console.log(e),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"foreach-dynamic-warning",{message:"<strong>Dynamic template</strong>: "+e.message})}if(n&&(n.startsWith("./")&&(n=this.model.component.name+n.substring(1)),n.startsWith("../"))){const e=this.model.component.name.split("/");n=e.slice(0,e.length-1).join("/")+n.substring(2)}return n}},_mapInputs:function(e,t){void 0!==this._internal.inputMapFunc&&this._internal.inputMapFunc((function(n){for(var i in n)e.hasInput(i)&&("function"==typeof n[i]?e.setInputValue(i,n[i](t)):"string"==typeof n[i]&&e.setInputValue(i,t.get(n[i])))}),t)},addItem:async function(e,t){var n=this._internal,i=this.getTemplateForModel(e);if(i){var r=await this.nodeScope.createNode(i,o(),{_forEachModel:e,_forEachNode:this});if(void 0===this._internal.inputMapFunc){for(var s in r.hasInput("Id")&&r.setInputValue("Id",e.getId()),r.hasInput("id")&&r.setInputValue("id",e.getId()),r._inputs)void 0!==e.data[s]&&r.setInputValue(s,e.data[s]);r._forEachModelChangeListener=function(e){r._inputs[e.name]&&r.setInputValue(e.name,e.value)},e.on("change",r._forEachModelChangeListener),r.componentModel.on("inputPortAdded",(t=>{"id"===t.name&&r.setInputValue("id",e.getId()),"Id"===t.name&&r.setInputValue("Id",e.getId()),void 0!==e.data[t.name]&&r.setInputValue(t.name,e.data[t.name])}),this)}else this._mapInputs(r,e),r._forEachModelChangeListener=()=>this._mapInputs(r,e),e.on("change",r._forEachModelChangeListener);r._internal.creatorCallbacks={onOutputChanged:(t,i,o)=>{!1!==o&&void 0!==o||!0!==i||!n.itemOutputSignals[t]||this.itemOutputSignalTriggered(t,e,r)}};for(var a=r.nodeScope.getNodesWithType("For Each Actions"),l=0;l<a.length;l++)a[l].signalAdded();n.itemNodes.push(r),n.target.addChild(r,t)}},removeItem:function(e){var t=this._internal;if(t.target){var n=function(){var n=t.target.getChildren();for(var i in n){var o=n[i];if(o._forEachModel===e&&!o._forEachRemoveInProgress)return o}}();if(n){var i=n.nodeScope.getNodesWithType("For Each Actions");i&&i.length>0?(n._forEachRemoveInProgress=!0,i[0].tryRemove((()=>this._deleteItem(n)))):this._deleteItem(n);var o=t.itemNodes.indexOf(n);-1!==o&&t.itemNodes.splice(o,1)}}},_deleteItem(e){e._forEachModel.off("change",e._forEachModelChangeListener),e.model&&e.model.removeListenersWithRef(this),e.componentModel&&e.componentModel.removeListenersWithRef(this);const t=e.parent;!e._deleted&&t&&(t.removeChild(e),this.nodeScope.deleteNode(e))},_deleteAllItemNodes:function(){if(this._internal.itemNodes){for(const e of this._internal.itemNodes)this._deleteItem(e);this._internal.itemNodes=[]}},refresh:async function(){var e=this._internal;if(e.hasScheduledRefresh=!1,!e.template&&!e.templateFunction||!e.items)return;if(this._deleteAllItemNodes(),!e.target)return;const t=this._internal.target.getChildren().indexOf(this)+1;for(var n=0;n<e.collection.size();n++){var i=e.collection.get(n);await this.addItem(i,t+n)}},_queueOperation(e){this._internal.queuedOperations.push(e),this._runQueueOperations()},async _runQueueOperations(){if(!this.runningOperations)if(this.runningOperations=!0,a.instance.getProjectSettings().repeaterCreateComponentsAsync){const e=async()=>{const t=performance.now();for(;this._internal.queuedOperations.length&&performance.now()-t<25;){const e=this._internal.queuedOperations.shift();await e()}this._internal.queuedOperations.length?setTimeout(e,0):this.runningOperations=!1};e()}else{for(;this._internal.queuedOperations.length;){const e=this._internal.queuedOperations.shift();await e()}this.runningOperations=!1}},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.queuedOperations.length=0,this.unbindCurrentCollection()},render(){return s.createElement(u,{didMount:()=>this.didMount(),willUnmount:()=>this.willUnmount()})},didMount(){this.isMounted=!0;for(const e of this._internal.mountedOperations)this._queueOperation(e);this._internal.mountedOperations=[]},willUnmount(){this.isMounted=!1},getItemActionParameter:function(e){if(this._internal.itemActionParameters)return this._internal.itemActionParameters[e]},scheduleCopyItems:function(){this._internal.hasScheduledCopyItems||(this._internal.hasScheduledCopyItems=!0,this.scheduleAfterInputsHaveUpdated((()=>{this._internal.hasScheduledCopyItems=!1,void 0!==this._internal.items&&(a.instance.getProjectSettings().repeaterDisabledWhenUnmounted&&!this.isMounted?this._internal.mountedOperations.push((()=>{this._internal.collection.set(this._internal.items)})):this._internal.collection.set(this._internal.items))})))},itemOutputSignalTriggered:function(e,t,n){this._internal.itemActionItemId=t.getId(),this._internal.itemActionSignal=e,this.flagOutputDirty("itemActionItemId"),this._internal.hasScheduledTriggerItemOutputSignal||(this._internal.hasScheduledTriggerItemOutputSignal=!0,this.context.scheduleAfterUpdate((()=>{for(var e in this._internal.hasScheduledTriggerItemOutputSignal=!1,n._outputs){var t="itemOutput-"+e;this.hasOutput(t)&&(this._internal.itemOutputs[e]=n._outputs[e].value,this.flagOutputDirty(t))}this.sendSignalOnOutput("itemOutputSignal-"+this._internal.itemActionSignal)})))},getItemOutput:function(e){return this._internal.itemOutputs[e]},registerOutputIfNeeded:function(e){this.hasOutput(e)||(e.startsWith("itemOutputSignal-")?(this._internal.itemOutputSignals[e.substring("itemOutputSignal-".length)]=!0,this.registerOutput(e,{getter:function(){}})):e.startsWith("itemOutput-")&&this.registerOutput(e,{getter:this.getItemOutput.bind(this,e.substring("itemOutput-".length))}))},setInputMappingScript:function(e){if(this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"foreach-inputmapping-warning"),this._internal.inputMappingScript=e,this._internal.inputMappingScript)try{this._internal.inputMapFunc=new Function("map","object",this._internal.inputMappingScript)}catch(e){this._internal.inputMapFunc=void 0,this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"foreach-inputmapping-warning",{message:"<strong>Input mapping</strong>: "+e.message})}else this._internal.inputMapFunc=void 0;this.scheduleRefresh()},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"inputMappingScript"===e?this.registerInput(e,{set:this.setInputMappingScript.bind(this)}):void 0}}};function p(e){return"object"==typeof e?e.name:e}e.exports={ForEachComponent:u,node:c,setup:function(e,t){function n(n){function i(){var i=n.parameters.template;if(void 0!==i){var o=[],r=t.components[i];if(void 0!==r){for(var s in r.outputPorts)"signal"===p((u=r.outputPorts[s]).type)?o.push({name:"itemOutputSignal-"+s,displayName:s,type:"signal",plug:"output",group:"Item Signals"}):o.push({name:"itemOutput-"+s,displayName:s,type:u.type,plug:"output",group:"Item Outputs"});var a="";for(var l in r.inputPorts){var u;"signal"!==p((u=r.inputPorts[l]).type)&&(a+="\t'"+l+"': '"+l+"',\n")}o.push({name:"inputMappingScript",type:{name:"string",codeeditor:"javascript"},displayName:"Script",group:"Input Mapping",default:"// Here you add mappings between the properties of the item objects and the inputs of the components.\n// 'myComponentInput': 'myObjectProperty',\n// 'anotherComponentInput': function () { return object.get('someProperty') + ' ' + object.get('otherProp') }\n// These are the default mappings based on the selected template component.\nmap({\n{{#mappings}}})\n".replace("{{#mappings}}",a),plug:"input"}),e.editorConnection.sendDynamicPorts(n.id,o,{detectRenamed:{plug:"output",prefix:"itemOutput"}})}}}function o(e){if(void 0!==e){var n=t.components[e];void 0!==n&&(n.on("outputPortAdded",i),n.on("outputPortRemoved",i),n.on("outputPortTypesUpdated",i),n.on("inputPortTypesUpdated",i),n.on("inputPortAdded",i),n.on("inputPortRemoved",i))}}i(),o(n.parameters.template),n.on("parameterUpdated",(function(e){"template"===e.name&&(i(),o(n.parameters.template))}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.For Each",(function(e){n(e)}));for(const e of t.getNodesWithType("For Each"))n(e)}))}}},6882:(e,t,n)=>{const{EdgeTriggeredInput:i}=n(6291),o={name:"For Each Actions",docs:"https://docs.noodl.net/nodes/ui-controls/repeater-item",displayNodeName:"Repeater Item",category:"Data",color:"data",inputs:{removeCompleted:{type:{name:"boolean",allowConnectionsOnly:!0},displayName:"Remove Completed",group:"Events",valueChangedToTrue:function(){this._internal.removeCompletedCallback&&this._internal.removeCompletedCallback()}}},outputs:{added:{type:"signal",displayName:"Added",group:"Events"},tryRemove:{type:"signal",displayName:"Try Remove",group:"Events"},itemId:{type:"string",displayName:"Item Id",group:"General",get(){return this.getItemId()}}},prototypeExtensions:{getItemId(){const e=this.nodeScope.componentOwner._forEachModel;return e&&e.getId()},signalAdded:function(){this.sendSignalOnOutput("added")},tryRemove:function(e){this.getOutput("tryRemove").hasConnections()?(this._internal.removeCompletedCallback=e,this.sendSignalOnOutput("tryRemove")):this.scheduleAfterInputsHaveUpdated((function(){e()}))},itemActionTriggered(e){this.scheduleAfterInputsHaveUpdated((()=>{const t=this.getItemId();this.nodeScope.componentOwner._forEachNode.signalItemAction(e,t,this._internal.actionParameters||{})}))},setItemActionParameter(e){this._internal.actionParameters||(this._internal.actionParameters={}),this._internal.actionParameters[e]=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("itemAction-")?this.registerInput(e,{set:i.createSetter({valueChangedToTrue:this.itemActionTriggered.bind(this,e)})}):e.startsWith("itemActionParameter-")?this.registerInput(e,{set:this.setItemActionParameter.bind(this,e)}):void 0}}};e.exports={node:o,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()}}},1413:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r=n(1020),s={name:"Map Collection",docs:"https://docs.noodl.net/nodes/data/array/array-map",displayNodeName:"Array Map",shortDesc:"Map array fields",category:"Data",color:"data",initialize:function(){var e=this;this._internal.collectionChangedCallback=function(){e.scheduleMap()}},inputs:{items:{type:"array",displayName:"Items",group:"General",set:function(e){this.setCollection(e),this.scheduleMap()}},mapScript:{type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},displayName:"Script",default:"map({\n\t// Here you add mappings between the input object and the mapped output object.\n\t//myOutputProp: 'inputProp',\n\t//anotherProperty: function(object) { return object.get('someProperty') + ' ' + object.get('otherProp') }\n})\n",set:function(e){this._internal.mapCode=e;try{this._internal.mapFunc=new Function("map","object",this._internal.mapCode)}catch(e){this._internal.mapFunc=void 0,console.log("Error while parsing map script: "+e)}this.scheduleMap()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.mappedCollection}},count:{type:"number",displayName:"Count",group:"General",getter:function(){return this._internal.mappedCollection?this._internal.mappedCollection.size():0}},modified:{group:"Events",type:"signal",displayName:"Changed"}},prototypeExtensions:{setCollection:function(e){this.bindCollection(e),this.flagOutputDirty("items"),this.flagOutputDirty("count")},unbindCurrentCollection:function(){var e=this._internal.collection;e&&(e.off("change",this._internal.collectionChangedCallback),this._internal.collection=void 0)},bindCollection:function(e){this.unbindCurrentCollection(),this._internal.collection=e,e&&e.on("change",this._internal.collectionChangedCallback)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this.unbindCurrentCollection()},scheduleMap:function(){this.collectionChangedScheduled||(this.collectionChangedScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{if(this.collectionChangedScheduled=!1,void 0!==this._internal.collection){var e=this._internal.collection.map((e=>{var t=o.create();return this._internal.mapFunc((function(n){for(var i in n)"function"==typeof n[i]?t.set(i,n[i](e)):"string"==typeof n[i]&&t.set(i,e.get(n[i]))}),e),t}));this._internal.mappedCollection=r.create(e),this.sendSignalOnOutput("modified"),this.flagOutputDirty("items"),this.flagOutputDirty("count")}})))}}};e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()}}},9986:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o=n(7498),r=n(1020);var s={name:"Set Variable",docs:"https://docs.noodl.net/nodes/data/variable/set-variable",category:"Data",usePortAsLabel:"name",color:"data",initialize:function(){this._internal.variablesModel=o.get("--ndl--global-variables")},outputs:{done:{type:"signal",displayName:"Done",group:"Events"}},inputs:{name:{type:{name:"string",identifierOf:"VariableName",identifierDisplayName:"Variable names"},displayName:"Name",group:"General",set:function(e){this._internal.name=e}},setWith:{type:{name:"enum",enums:[{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Number",value:"number"},{label:"Empty string",value:"emptyString"},{label:"Date",value:"date"},{label:"Object",value:"object"},{label:"Array",value:"array"},{label:"Any",value:"*"}],allowEditOnly:!0},displayName:"Set as",default:"*",group:"General",set:function(e){this._internal.setWith=e}},do:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleStore()}}},methods:{setValue:function(e){this._internal.value=e},scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((function(){this.hasScheduledStore=!1;var t="emptyString"===e.setWith?"":e.value;"object"===e.setWith&&"string"==typeof t&&(t=o.get(t)),"array"===e.setWith&&"string"==typeof t&&(t=r.get(t)),"boolean"===e.setWith&&(t=!!t),e.variablesModel.set(e.name,t,{forceChange:!0}),this.sendSignalOnOutput("done")}))}},registerInputIfNeeded:function(e){this.hasInput(e)||"value"===e&&this.registerInput(e,{set:this.setValue.bind(this)})}}};e.exports={node:s,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.Set Variable",(function(t){function n(){var n=[];"emptyString"===t.parameters.setWith||n.push({type:void 0!==t.parameters.setWith?t.parameters.setWith:"*",plug:"input",group:"General",name:"value",displayName:"Value"}),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){n()}))}))}}},5681:(e,t,n)=>{"use strict";const i=n(1020);var o={name:"Static Data",docs:"https://docs.noodl.net/nodes/data/array/static-array",displayNodeName:"Static Array",shortDesc:"Store static data to populate a Collection with items.",category:"Data",color:"data",getInspectInfo(){if(this._internal.collection)return[{type:"value",value:this._internal.collection.items}]},dynamicports:[{name:"conditionalports/extended",condition:"type = csv OR type NOT SET",inputs:["csv"]},{name:"conditionalports/extended",condition:"type = json",inputs:["json"]}],inputs:{type:{type:{name:"enum",enums:[{label:"CSV",value:"csv"},{label:"JSON",value:"json"}],allowEditOnly:!0},displayName:"Type",group:"General",default:"csv",set:function(e){this._internal.type=e}},csv:{type:{name:"string",codeeditor:"text",allowEditOnly:!0},displayName:"CSV",group:"General",set:function(e){this._internal.csv=e,this.scheduleParseData()}},json:{type:{name:"string",codeeditor:"json",allowEditOnly:!0},displayName:"JSON",group:"General",set:function(e){this._internal.json=e,this.scheduleParseData()}}},outputs:{items:{type:"array",displayName:"Items",group:"General",getter:function(){return this._internal.collection}},count:{type:"number",displayName:"Count",group:"General",get(){return this._internal.collection?this._internal.collection.size():0}}},methods:{scheduleParseData:function(){var e=this._internal;e.hasScheduledParseData||(e.hasScheduledParseData=!0,this.scheduleAfterInputsHaveUpdated(this.parseData.bind(this)))},parseData:function(){var e=this._internal;if(e.hasScheduledParseData=!1,e.collection=i.get(),void 0===e.type||"csv"===e.type){for(var t=function(e,t){t=t||",";for(var n,i=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),o=[[]],r=null;(r=i.exec(e))&&n!==i.lastIndex;){n=i.lastIndex;var s,a=r[1];a.length&&a!==t&&o.push([]),s=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],o[o.length-1].push(s)}return o}(e.csv),n=[],o=t[0],r=1;r<t.length;r++){for(var s=t[r],a={},l=0;l<o.length;l++)a[o[l]]=s[l];n.push(a)}e.collection.set(n),this.flagOutputDirty("items"),this.flagOutputDirty("count")}else if("json"===e.type){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"json-parse-warning");try{const t=JSON.parse(e.json);e.collection.set(t),this.flagOutputDirty("items"),this.flagOutputDirty("count")}catch(e){this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"json-parse-warning",{showGlobally:!0,message:e.message})}}}}};e.exports={node:o}},6097:(e,t,n)=>{"use strict";const{Node:i}=n(6291);var o=n(7498),r={name:"Variable2",displayNodeName:"Variable",docs:"https://docs.noodl.net/nodes/data/variable/variable-node",category:"Data",usePortAsLabel:"name",color:"data",initialize:function(){var e=this,t=this._internal;this._internal.onModelChangedCallback=function(n){e.isInputConnected("fetch")||n.name!==t.name||(e.sendSignalOnOutput("changed"),e.flagOutputDirty("value"))},t.variablesModel=o.get("--ndl--global-variables"),t.variablesModel.on("change",this._internal.onModelChangedCallback)},getInspectInfo(){return this._internal.name?this._internal.variablesModel.get(this._internal.name):"[No value set]"},outputs:{name:{type:"string",displayName:"Name",group:"General",getter:function(){return this._internal.name}},changed:{type:"signal",displayName:"Changed",group:"Events"},fetched:{type:"signal",displayName:"Fetched",group:"Events"},value:{type:"*",displayName:"Value",group:"General",getter:function(){var e=this._internal;if(e.name)return e.variablesModel.get(e.name)}}},inputs:{name:{type:{name:"string",identifierOf:"VariableName",identifierDisplayName:"Variable names"},displayName:"Name",group:"General",set:function(e){!1===this.isInputConnected("fetch")?this.setVariableName(e):(this._internal.name=e,this.flagOutputDirty("name"))}},fetch:{displayName:"Fetch",group:"Actions",valueChangedToTrue:function(){this.setVariableName(this._internal.name)}},value:{type:"*",displayName:"Value",group:"General",set:function(e){this._internal.value=e,this.scheduleStore()}}},prototypeExtensions:{scheduleStore:function(){if(!this.hasScheduledStore){this.hasScheduledStore=!0;var e=this._internal;this.scheduleAfterInputsHaveUpdated((function(){this.hasScheduledStore=!1,e.variablesModel.set(e.name,e.value)}))}},setVariableName:function(e){this._internal.name=e,this.flagOutputDirty("name"),this.flagOutputDirty("value"),this.sendSignalOnOutput("fetched")},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.variablesModel.off("change",this._internal.onModelChangedCallback)}}};e.exports={node:r}},2751:(e,t,n)=>{"use strict";const{Node:i}=n(6291),o={name:"Event Receiver",docs:"https://docs.noodl.net/nodes/events/receive-event",displayNodeName:"Receive Event",category:"Events",usePortAsLabel:"channelName",color:"component",initialize:function(){var e=this._internal;e.outputValues={},e.outputNames=[],e.eventReceived=!1,e._isEnabled=!0,e.channelName=""},inputs:{enabled:{displayName:"Enabled",type:"boolean",default:!0,set:function(e){this._internal._isEnabled=!!e}},consume:{displayName:"Consume",type:{name:"enum",enums:[{label:"Never",value:"never"},{label:"Always",value:"always"}]},default:"never",set:function(e){this._internal.consume=e}},channelName:{type:{name:"string",identifierOf:"EventChannelName"},displayName:"Channel",set:function(e){this._internal.onEventReceivedCallback&&(this.context.eventSenderEmitter.removeListener(this._internal.channelName,this._internal.onEventReceivedCallback),this._internal.onEventReceivedCallback=null),this._internal.channelName=e,this.registerListenersForChannel(e)}}},outputs:{eventReceived:{displayName:"Received",type:"signal"}},prototypeExtensions:{registerOutputIfNeeded:function(e){if(!this.hasOutput(e)){var t=this;this._internal.outputNames.push(e),this.registerOutput(e,{getter:function(){return t._internal.outputValues[e]}})}},handleEvent:function(e){if(!1!==this._internal._isEnabled){for(var t in this.sendSignalOnOutput("eventReceived"),e)this.hasOutput(t)&&(this._internal.outputValues[t]=e[t],this.flagOutputDirty(t));return"always"===this._internal.consume}},onEventReceived:function(e){this.handleEvent(e)},_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.onEventReceivedCallback&&this.context.eventSenderEmitter.removeListener(this._internal.channelName,this._internal.onEventReceivedCallback)},registerListenersForChannel:function(e){var t=this.context.eventSenderEmitter;this._internal.onEventReceivedCallback=this.onEventReceived.bind(this),t.on(e,this._internal.onEventReceivedCallback);var n=this;this.context.eventEmitter.once("applicationDataReloaded",(function(){n._internal.onEventReceivedCallback&&t.removeListener(e,n._internal.onEventReceivedCallback)}))},getChannelName:function(){return this._internal.channelName}}};e.exports={node:o},e.exports={node:o,setup:function(e,t){function n(n){var i=n.parameters.channelName;function o(){var o=t.getNodesWithType("Event Sender").filter((e=>e.parameters.channelName===i)),r={};o.forEach((e=>{const t=e.parameters.payload?e.parameters.payload.split(","):[];for(let e of t)r[e]=!0}));var s=[];for(var a in r)s.push({name:a,type:"*",plug:"output",displayName:a});e.editorConnection.sendDynamicPorts(n.id,s,{detectRenamed:{plug:"output"}})}function r(e){e.on("inputPortAdded",(function(e){o()})),e.on("inputPortRemoved",(function(e){o()})),e.on("parameterUpdated",(function(e){"channelName"===e.name&&o()}))}o(),n.on("parameterUpdated",(function(e){"channelName"===e.name&&(i=e.value,o())})),t.getNodesWithType("Event Sender").forEach(r),t.on("nodeAdded.Event Sender",r),t.on("nodeRemoved.Event Sender",(e=>{o()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Event Receiver",(e=>n(e))),t.getNodesWithType("Event Receiver").forEach((e=>n(e)))}))}}},264:e=>{"use strict";function t(e,t,n){var i=[],o=t.payload;if(o){o=o.split(",");for(const e of o)i.push({type:{name:"*",allowConnectionsOnly:!0},plug:"input",group:"Payload",name:e,displayName:e})}n.sendDynamicPorts(e,i,{detectRenamed:{plug:"input"}})}e.exports={node:{name:"Event Sender",docs:"https://docs.noodl.net/nodes/events/send-event",displayNodeName:"Send Event",category:"Events",usePortAsLabel:"channelName",color:"component",exportDynamicPorts:!0,initialize:function(){this._internal.inputValues={},this._internal.channelName="",this._internal.propagation="global"},inputs:{sendEvent:{displayName:"Send",valueChangedToTrue:function(){var e=this;this.scheduleAfterInputsHaveUpdated((function(){"global"===e._internal.propagation?e.context.sendGlobalEventFromEventSender(e._internal.channelName,e._internal.inputValues):e.nodeScope.sendEventFromThisScope(e._internal.channelName,e._internal.inputValues,e._internal.propagation)}))}},channelName:{type:{name:"string",allowEditOnly:!0,identifierOf:"EventChannelName",identifierDisplayName:"Event Channels"},default:"",group:"Settings",displayName:"Channel Name",set:function(e){this._internal.channelName=e,this._internal.inputValues._channelName=e}},propagation:{type:{name:"enum",enums:[{value:"global",label:"Global"},{value:"parent",label:"Parent"},{value:"children",label:"Children"},{value:"siblings",label:"Siblings"}]},default:"global",group:"Settings",displayName:"Send to",set:function(e){this._internal.propagation=e}},payload:{type:{name:"stringlist",allowEditOnly:!0},group:"Payload"}},prototypeExtensions:{registerInputIfNeeded:{value:function(e){if(!this.hasInput(e)){var t=this;this.registerInput(e,{set:function(n){t._internal.inputValues[e]=n}})}}}}},setup:function(e,n){e.editorConnection&&e.editorConnection.isRunningLocally()&&n.on("nodeAdded.Event Sender",(function(n){t(n.id,n.parameters,e.editorConnection),n.on("parameterUpdated",(function(i){t(n.id,n.parameters,e.editorConnection)}))}))}}},6820:(e,t,n)=>{"use strict";const i=n(6291).Node,o=n(592),r=n(7397);var s={name:"Javascript2",docs:"https://docs.noodl.net/nodes/javascript/script",displayNodeName:"Script",category:"CustomCode",color:"javascript",exportDynamicPorts:!0,initialize:function(){var e=this._internal;e.inputValues={},e.outputValues={},e.outputProperties={},e.runScheduled=!1,e.setupScheduled=!1,e.runNextFrameScheduled=!1,e.isWaitingForExternalFileToLoad=!1,e.useExternalFile=!1,e.runFunction=void 0,e.destroyFunction=void 0,e.setupFunction=void 0,e.hasParsedCode=!1,e.changedInputs={},e.signalScheduled={},e.killed=!1,e.inputQueue=[];var t=this;e.userFunctionScope={createComponent:e=>(e&&e.length>0&&"/"!==e[0]&&(e="/"+e),t.nodeScope.createNode(e,r())),deleteComponent(e){t.nodeScope.deleteNode(e)},flagOutputDirty:function(e){if(!e)throw new Error("Output port name must be specified");t.flagOutputDirty(e)},runNextFrame:function(){e.runNextFrameScheduled||(e.runNextFrameScheduled=!0,t.context.scheduleNextFrame((function(){e.runNextFrameScheduled=!1,e.killed||l.call(t)})))},sendSignalOnOutput:function(e){t.sendSignalOnOutput(e)}},e.onFrameStart=c.bind(this)},dynamicports:[{condition:"useExternalFile = no OR useExternalFile NOT SET",inputs:["code"]},{condition:"useExternalFile = yes",inputs:["externalFile"]}],inputs:{scriptInputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Inputs",set:function(e){}},scriptOutputs:{type:{name:"proplist",allowEditOnly:!0},group:"Script Outputs",set:function(e){}},useExternalFile:{type:{name:"enum",enums:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],allowEditOnly:!0},default:"no",displayName:"Use External File",group:"Code",set:function(e){this._internal.isWaitingForExternalFileToLoad="yes"===e,this._internal.useExternalFile="yes"===e}},code:{displayName:"Code",group:"Code",type:{name:"string",allowEditOnly:!0,codeeditor:"javascript"},default:"",set:function(e){if(e){var t=this;this.scheduleAfterInputsHaveUpdated((function(){if(!1===this._internal.useExternalFile){this._callDestroyFunction();var n=o.createFromCode(e,{node:this});t._onCodeParsed(n)}}))}}},externalFile:{displayName:"File Path",group:"Code",type:{name:"source",allowEditOnly:!0},set:function(e){if(!1!==this._internal.useExternalFile){var t=this;o.createFromURL(e,(function(e){t._internal.isWaitingForExternalFileToLoad=!1,t._onCodeParsed(e)}),{node:this})}}}},prototypeExtensions:{_onNodeDeleted:function(){i.prototype._onNodeDeleted.call(this),this._internal.killed=!0,this._callDestroyFunction()},update:function(){!0===this._internal.isWaitingForExternalFileToLoad?this._dirty=!1:i.prototype.update.call(this)},_onCodeParsed:function(e){const t=this.context.editorConnection;if(t)for(const e of["js-destroy-waring","js-run-waring","js-setup-waring"])t.clearWarning(this.nodeScope.componentOwner.name,this.id,e);if(!e.error){if(Object.keys(this.model.inputPorts).forEach((e=>{const t=this.model.inputPorts[e].type;"color"!==t&&"color"!==t.name||(this._internal.inputValues[e]=void 0,this.hasInput(e)?this.getInput(e).type="color":this.registerInput(e,{type:"color",set:d.bind(this,e)}))})),Object.keys(this.model.outputPorts).forEach((e=>{this.registerOutputIfNeeded(e)})),this._internal.setupFunction=e.setup,this._internal.runFunction=e.change,this._internal.destroyFunction=e.destroy,this._internal.definedObject=e.definedObject,this._internal.setupFunction&&a.call(this),this._internal.runFunction&&l.call(this),this._internal.hasParsedCode=!0,this._internal.inputQueue){for(const{name:e,value:t}of this._internal.inputQueue)this.setInputValue(e,t);this._internal.inputQueue=void 0}e.apis.Node.Inputs=this._internal.inputValues,e.apis.Node.Outputs=this._internal.outputProperties}},registerInputIfNeeded:function(e){this.hasInput(e)||(this._internal.inputValues[e]=void 0,this.registerInput(e,{set:d.bind(this,e)}))},registerOutputIfNeeded:function(e){if(this.hasOutput(e))return;var t=this;const n="signal"===p(this.model.outputPorts[e].type);Object.defineProperty(this._internal.outputProperties,e,{set:function(i){n||(t._internal.outputValues[e]=i,t.flagOutputDirty(e))},get:function(){return n?()=>{t.hasOutput(e)&&t.sendSignalOnOutput(e)}:t._internal.outputValues[e]}}),this.registerOutput(e,{getter:h.bind(this,e)})},_callRunFunction:function(){var e=this._internal;if(e.runFunction&&!e.killed)try{e.runFunction.call(e.userFunctionScope,e.inputValues,e.outputProperties,e.changedInputs)}catch(e){console.log("Error in JS node run code.",Object.getPrototypeOf(e).constructor.name+": "+e.message),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-run-waring",{showGlobally:!0,message:"<strong>run</strong>: "+e.message})}},_callSignalFunction:function(e){var t=this._internal;if(t.definedObject&&!t.killed&&t.definedObject[e]&&"function"==typeof t.definedObject[e])try{t.definedObject[e].call(t.userFunctionScope,t.inputValues,t.outputProperties)}catch(e){console.log("Error in JS node signal function code.",Object.getPrototypeOf(e).constructor.name+": "+e.message),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-run-waring",{showGlobally:!0,message:"<strong>run</strong>: "+e.message})}},_callDestroyFunction:function(){var e=this._internal;if(e.destroyFunction)try{e.destroyFunction.call(e.userFunctionScope,e.inputValues,e.outputProperties)}catch(e){console.log("Error in JS node destroy code.",Object.getPrototypeOf(e).constructor.name+": "+e.message),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-destroy-waring",{showGlobally:!0,message:"<strong>setup</strong>: "+e.message})}},_callSetupFunction:function(){var e=this._internal;if(e.setupFunction&&!e.killed)try{e.setupFunction.call(e.userFunctionScope,e.inputValues,e.outputProperties)}catch(e){console.log("Error in JS node setup code.",Object.getPrototypeOf(e).constructor.name+": "+e.message),this.context.editorConnection&&this.context.isWarningTypeEnabled("javascriptExecution")&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"js-setup-waring",{showGlobally:!0,message:"<strong>setup</strong>: "+e.message})}}}};function a(){this._internal.setupScheduled||(this._internal.setupScheduled=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.killed||(this._callSetupFunction(),this._internal.setupScheduled=!1)})))}function l(){this._internal.runScheduled||this._internal.killed||(this._internal.runScheduled=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.killed||(this._callRunFunction(),this._internal.changedInputs={},this._internal.runScheduled=!1)})))}function u(e){this._internal.signalScheduled[e]||this._internal.killed||(this._internal.signalScheduled[e]=!0,this.scheduleAfterInputsHaveUpdated((function(){this._internal.killed||(this._callSignalFunction(e),this._internal.signalScheduled[e]=!1)})))}function c(){this._internal.runNextFrame=!1,l.call(this)}function p(e){return"string"==typeof e?e:e.name}function d(e,t){!0===this._internal.hasParsedCode?void 0!==this.model.inputPorts[e]&&"signal"===p(this.model.inputPorts[e].type)?this._internal.definedObject&&"function"==typeof this._internal.definedObject[e]&&t&&u.call(this,e):(this._internal.inputValues[e]=t,this._internal.changedInputs[e]=!0,l.call(this)):this._internal.inputQueue.push({name:e,value:t})}function h(e){return this._internal.outputValues[e]}e.exports={node:s,setup:function(e,t){function n(t){function n(){var n=[];const i=[{value:"string",label:"String"},{value:"boolean",label:"Boolean"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"array",label:"Array"}],r=[{value:"string",label:"String"},{value:"boolean",label:"Boolean"},{value:"number",label:"Number"},{value:"object",label:"Object"},{value:"array",label:"Array"},{value:"signal",label:"Signal"}];void 0!==t.parameters.scriptOutputs&&t.parameters.scriptOutputs.length>0&&t.parameters.scriptOutputs.forEach((e=>{n.push({name:"outtype-"+e.label,displayName:"Type",plug:"input",type:{name:"enum",enums:r,allowEditOnly:!0},default:"string",parent:"scriptOutputs",parentItemId:e.id}),n.push({name:e.label,plug:"output",type:t.parameters["outtype-"+e.label]||"*",group:"Outputs"})})),void 0!==t.parameters.scriptInputs&&t.parameters.scriptInputs.length>0&&t.parameters.scriptInputs.forEach((e=>{n.push({name:"intype-"+e.label,displayName:"Type",plug:"input",type:{name:"enum",enums:i,allowEditOnly:!0},default:"string",parent:"scriptInputs",parentItemId:e.id}),n.push({name:e.label,plug:"input",type:t.parameters["intype-"+e.label]||"string",group:"Inputs"})})),function(e,t,n){var i=t.editorConnection;if(e.parameters)if(e.parameters.externalFile&&"yes"===e.parameters.useExternalFile){var r=e.parameters.externalFile;o.createFromURL(r,a)}else e.parameters.code?a(o.createFromCode(e.parameters.code)):(s(),n([]));function s(){for(const t of["js-parse-waring","js-destroy-waring","js-run-waring","js-setup-waring"])i.clearWarning(e.component.name,e.id,t)}function a(t){t.error?i.sendWarning(e.component.name,e.id,"js-parse-waring",{showGlobally:!0,message:t.error}):s(),n(t.getPorts())}}(t,e,(function(i){i.forEach((e=>{n.find((t=>t.name===e.name&&t.plug===e.plug))||n.push(e)})),e.editorConnection.sendDynamicPorts(t.id,n)}))}n(),t.on("parameterUpdated",(function(e){n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Javascript2",(function(e){n(e)}));for(const e of t.getNodesWithType("Javascript2"))n(e)}))}}},6331:e=>{"use strict";const t={name:"Number Remapper",docs:"https://docs.noodl.net/nodes/math/number-remapper",category:"Math",initialize:function(){var e=this._internal;e._currentInputValue=0,e._remappedValue=0,e._minInputValue=0,e._maxInputValue=0,e._minOutputValue=0,e._maxOutputValue=1,e._clampOutput=!0},getInspectInfo(){return this._internal._remappedValue},inputs:{inputValue:{group:"Value to Remap",type:{name:"number",allowConnectionOnly:!0},default:0,displayName:"Input Value",set:function(e){this._internal._currentInputValue=e,this._calculateNewOutputValue()}},minInputValue:{group:"Input Parameters",type:{name:"number"},default:0,displayName:"Input Minimum",set:function(e){this._internal._minInputValue=e,this._calculateNewOutputValue()}},maxInputValue:{group:"Input Parameters",type:{name:"number"},default:0,displayName:"Input Maximum",set:function(e){this._internal._maxInputValue=e,this._calculateNewOutputValue()}},minOutputValue:{group:"Output Parameters",type:{name:"number"},default:0,displayName:"Output Minimum",set:function(e){this._internal._minOutputValue=e,this._calculateNewOutputValue()}},maxOutputValue:{group:"Output Parameters",type:{name:"number"},default:1,displayName:"Output Maximum",set:function(e){this._internal._maxOutputValue=e,this._calculateNewOutputValue()}},clamp:{group:"Output Parameters",type:{name:"boolean",allowEditOnly:!0},default:!0,displayName:"Clamp Output",set:function(e){this._internal._clampOutput=!!e,this._calculateNewOutputValue()}}},outputs:{remappedValue:{type:"number",displayName:"Remapped Value",group:"Outputs",getter:function(){return this._internal._remappedValue}}},prototypeExtensions:{_calculateNewOutputValue:{value:function(){var e,t=this._internal;e=t._maxInputValue===t._minInputValue?0:(t._currentInputValue-t._minInputValue)/(t._maxInputValue-t._minInputValue),t._clampOutput&&(e=Math.max(0,Math.min(1,e))),t._remappedValue=t._minOutputValue+e*(t._maxOutputValue-t._minOutputValue),this.flagOutputDirty("remappedValue")}}}};e.exports={node:t}},1701:e=>{"use strict";const t={name:"Open File Picker",docs:"https://docs.noodl.net/nodes/utilities/open-file-picker",category:"Utilities",getInspectInfo(){if(this._internal.file)return this._internal.file.path},initialize(){const e=document.createElement("input");e.type="file",this._internal.inputElement=e},inputs:{open:{type:"signal",displayName:"Open",group:"Actions",valueChangedToTrue(){const e=this._internal.inputElement;e.accept=this._internal.acceptedFileTypes,e.onchange=t=>{this._internal.file=t.target.files[0],this.flagOutputDirty("file"),this.flagOutputDirty("path"),this.flagOutputDirty("name"),this.flagOutputDirty("sizeInBytes"),this.flagOutputDirty("type"),this.sendSignalOnOutput("success"),e.onchange=null},e.click()}},acceptedFileTypes:{group:"General",type:"string",displayName:"Accepted file types",set(e){this._internal.acceptedFileTypes=e}}},outputs:{file:{type:"*",displayName:"File",group:"General",get(){return this._internal.file}},path:{displayName:"Path",group:"Metadata",type:"string",get(){return this._internal.file&&this._internal.file.path}},name:{displayName:"Name",group:"Metadata",type:"string",get(){return this._internal.file&&this._internal.file.name}},sizeInBytes:{displayName:"Size in bytes",group:"Metadata",type:"number",get(){return this._internal.file&&this._internal.file.size}},type:{displayName:"Type",group:"Metadata",type:"string",get(){return this._internal.file&&this._internal.file.type}},success:{type:"signal",group:"Events",displayName:"Success"}}};e.exports={node:t}},4923:e=>{"use strict";const t={name:"Screen Resolution",docs:"https://docs.noodl.net/nodes/utilities/screen-resolution",category:"Utilities",initialize(){window.addEventListener("resize",(()=>{this._viewportSizeChanged()})),this._viewportSizeChanged()},getInspectInfo(){return this._internal.width+" x "+this._internal.height},outputs:{width:{type:"number",displayName:"Width",get(){return this._internal.width}},height:{type:"number",displayName:"Height",get(){return this._internal.height}},aspectRatio:{type:"number",displayName:"Aspect Ratio",get(){return this._internal.width/this._internal.height}}},methods:{_viewportSizeChanged(){this._internal.width=window.innerWidth,this._internal.height=window.innerHeight,this.flagAllOutputsDirty()}}};e.exports={node:t}},9458:(e,t,n)=>{"use strict";const{EdgeTriggeredInput:i}=n(6291),o=n(1924),r=n(5107),s={},a={};function l(e,t){if("transparent"===t||!t)return void(e[3]=0);const n=(t.length-1)/2;for(let i=0;i<n;++i){const n=1+2*i;e[i]=parseInt(t.substring(n,n+2),16)}}function u(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function c(e){return"#"+u(e[0])+u(e[1])+u(e[2])+u(e[3])}const p={name:"States",docs:"https://docs.noodl.net/nodes/utilities/logic/states",shortDesc:"Define states with values and this node can interpolate between these values when the state is changed.",category:"Animation",initialize:function(){var e=this,t=this._internal;t.useTransitions=!0,t.currentValues={},t.stateParameters={},t.stateParameterTypes={},t.startValues={},t.bezierEaseCurves={},t.transitionFuncs={},t.valuesAreInitialised=!1,t.animation=this.context.timerScheduler.createTimer({duration:300,ease:o.easeOut,onStart:function(){t.values;var n=t.startValues,i=t.stateParameters,o=t.stateParameterTypes,r="value-"+t.state+"-";for(var s in this.targetValues={},this.startValues={},this.valueTypes={},this.transitionCurves)"number"===o["type-"+s]||void 0===o["type-"+s]?(this.valueTypes[s]="number",this.startValues[s]=n[s],this.targetValues[s]=i[r+s]||0):"color"===o["type-"+s]&&(this.valueTypes[s]="color",this.startValues[s]=[0,0,0,255],l(this.startValues[s],e.context.styles.resolveColor(n[s]||"#000000")),this.targetValues[s]=[0,0,0,255],l(this.targetValues[s],e.context.styles.resolveColor(i[r+s]||"#000000")))},onRunning:function(n){var i=n*this.duration,r=t.currentValues,s=[0,0,0,255];for(var a in this.transitionCurves){var l=this.transitionCurves[a];if(i<l.delay)r[a]=this.startValues[a];else if(i>=l.delay+l.dur)r[a]="color"===this.valueTypes[a]?c(this.targetValues[a]):this.targetValues[a];else{var u=t.transitionFuncs[a].get((i-l.delay)/l.dur);if("number"===this.valueTypes[a])r[a]=o.linear(Number(this.startValues[a]),Number(this.targetValues[a]),u);else if("color"===this.valueTypes[a]){let e=this.startValues[a],t=this.targetValues[a];s[0]=Math.floor(o.linear(e[0],t[0],u)),s[1]=Math.floor(o.linear(e[1],t[1],u)),s[2]=Math.floor(o.linear(e[2],t[2],u)),s[3]=Math.floor(o.linear(e[3],t[3],u)),r[a]=c(s)}}e.flagOutputDirty(a)}},onFinish:function(){var n="reached-"+t.state;e.hasOutput(n)&&e.sendSignalOnOutput(n)}})},getInspectInfo(){return`Current state: ${this._internal.state}`},inputs:{states:{type:{name:"stringlist",allowEditOnly:!0},displayName:"States",group:"States",set:function(e){if(this._internal.states=e?e.split(","):[],this._internal.states.length>0){var t=this;t._internal.state||this.scheduleGoToState(t._internal.startState||t._internal.states[0])}}},values:{type:{name:"stringlist",allowEditOnly:!0},displayName:"Values",group:"Values",set:function(e){var t=this._internal;for(var n in t.values=e.split(","),t.values)this.registerOutputIfNeeded(t.values[n])}},toggle:{group:"Go to state",displayName:"Toggle",valueChangedToTrue:function(){var e=this._internal;if(e.states){var t=(e.states.indexOf(e.state)+1)%e.states.length;this.scheduleGoToState(e.states[t])}}},useTransitions:{type:"boolean",displayName:"Use Transitions",group:"General",default:!0,set:function(e){this._internal.useTransitions=e}}},outputs:{currentState:{type:"string",displayName:"State",group:"Current State",getter:function(){return this._internal.state}},stateChanged:{type:"signal",displayName:"State Changed",group:"Current State"}},prototypeExtensions:{registerOutputIfNeeded:function(e){var t=this._internal;this.hasOutput(e)||this.registerOutput(e,{getter:function(){return t.currentValues[e]}})},registerInputIfNeeded:function(e){var t=this,n=this._internal;if(!this.hasInput(e))if(0===e.indexOf("to-")){var o=e.substring(3);this.registerInput(e,{set:i.createSetter({valueChangedToTrue:function(){this.scheduleGoToState(o)}})})}else if("startState"===e)this.registerInput(e,{set:function(e){this._internal.startState=e,this.scheduleGoToState(e)}});else if("currentState"===e)this.registerInput(e,{set:this.scheduleGoToState.bind(this)});else if(0===e.indexOf("type-"))this.registerInput(e,{set:function(t){n.stateParameterTypes[e]=t}});else if(0===e.indexOf("value-")){var r=e.split("-"),s=(o=r[1],r[2]);this.registerInput(e,{set:function(i){n.stateParameters[e]=i,n.state===o&&(n.currentValues[s]=i,t.flagOutputDirty(s))}})}else 0===e.search(/duration-/g)?this.registerInput(e,{set:function(t){n.stateParameters[e]=t}}):0===e.search(/transition/g)&&(o=e.substring(11),this.registerInput(e,{set:function(t){n.stateParameters[e]=t}}))},setCurrentState:function(e){this.scheduleGoToState(e)},jumpToState:function(e){var t=this._internal;if(t.states&&(e||(e=t.states[0]),t.state!==e)){t.animation.stop();var n="value-"+e+"-";for(var i in t.values){var o=t.values[i];t.currentValues[o]=t.stateParameters[n+o]||0,this.flagOutputDirty(o)}t.state=e,this.flagOutputDirty("currentState"),t.valuesAreInitialised&&this.sendSignalOnOutput("stateChanged"),t.valuesAreInitialised=!0,this.updateAtStatePorts()}},scheduleGoToState:function(e){var t=this;this._internal.goToState=e,this.hasScheduledGoToState||(this.hasScheduledGoToState=!0,this.scheduleAfterInputsHaveUpdated((function(){t.hasScheduledGoToState=!1,t.goToState(t._internal.goToState)})))},goToState:function(e){var t=this._internal;if(t.states&&(e||(e=t.states[0]),t.state!==e))if(t.valuesAreInitialised){var n=0,i=0,o={};for(var s in t.values){var a=t.values[s];t.startValues[a]=t.currentValues[a];const c=t.stateParameterTypes["type-"+a];if("boolean"===c){var l=t.stateParameters["value-"+e+"-"+a];t.currentValues[a]=void 0!==l&&!!l,this.flagOutputDirty(a)}else if("string"===c||"textStyle"===c)t.currentValues[a]=t.stateParameters["value-"+e+"-"+a],this.flagOutputDirty(a);else{var u=t.stateParameters["transition-"+e+"-"+a];u||(u=t.stateParameters["transitiondef-"+e]||{curve:[0,0,.58,1],dur:300,delay:0}),0===u.dur&&0===u.delay||!t.useTransitions?(t.currentValues[a]=t.stateParameters["value-"+e+"-"+a],this.flagOutputDirty(a)):(t.transitionFuncs[a]=r(u.curve),o[a]=u,n=Math.min(n,u.delay),i=Math.max(i,u.dur+u.delay))}}if((i>0||n>0)&&(t.animation.transitionCurves=o,t.animation.duration=i,t.animation.delay=n,t.animation.start()),t.state=e,this.flagOutputDirty("currentState"),this.sendSignalOnOutput("stateChanged"),this.updateAtStatePorts(),0==i&&0==n){var c="reached-"+t.state;this.hasOutput(c)&&this.sendSignalOnOutput(c)}}else this.jumpToState(e)},updateAtStatePorts:function(){var e=this._internal,t=e.states;for(var n in t){var i=t[n],o="at-"+i;e.currentValues[o]=e.state===i,this.hasOutput(o)&&this.flagOutputDirty(o)}}}};function d(e,t){if(e&&t&&e.length===t.length){for(var n={},i=0;i<e.length;i++){if(-1===t.indexOf(e[i])){if(n.before)return;n.before=e[i]}if(-1===e.indexOf(t[i])){if(n.after)return;n.after=t[i]}}return n.before&&n.after?n:void 0}}function h(e,t,n){var i=t.states,o=t.values,r=[];for(var l in o=o?o.split(","):void 0){var u=o[l];r.push({type:{name:t["type-"+u]||"number",allowConnectionsOnly:!0},plug:"output",group:"Values",name:u}),r.push({type:{name:"enum",enums:[{label:"Number",value:"number"},{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Color",value:"color"},{label:"Text Style",value:"textStyle"}],allowEditOnly:!0},default:"number",plug:"input",group:"Types",displayName:u,name:"type-"+u})}(i=i?i.split(","):void 0)&&i.forEach((function(e){o&&o.forEach((function(n){r.push({plug:"input",type:t["type-"+n]||"number",group:e+" Values",name:"value-"+e+"-"+n,displayName:n,editorName:e+"|"+n})})),o&&!1!==t.useTransitions&&(r.push({plug:"input",type:"curve",displayName:"Default",default:{curve:[0,0,.58,1],dur:300,delay:0},group:e+" Transitions",name:"transitiondef-"+e}),o.forEach((function(n){void 0!==t["type-"+n]&&"number"!==t["type-"+n]&&"color"!==t["type-"+n]||r.push({plug:"input",type:{name:"curve"},default:t["transitiondef-"+e]||{curve:[0,0,.58,1],dur:300,delay:0},group:e+" Transitions",name:"transition-"+e+"-"+n,displayName:n,editorName:"Transition "+e+"|"+n})}))),r.push({plug:"input",type:{name:"signal",allowConnectionsOnly:!0},displayName:"To "+e,name:"to-"+e,group:"Go to state"}),r.push({plug:"output",type:"boolean",displayName:"At "+e,name:"at-"+e,group:"Current state"}),r.push({plug:"output",type:"signal",displayName:"Has Reached "+e,name:"reached-"+e,group:"Current state"})})),i&&r.push({plug:"input",type:{name:"enum",enums:i},group:"States",displayName:"State",name:"currentState",default:t.startState||i[0]});var c=d(s[e],i);s[e]=i;var p=d(a[e],o);if(a[e]=o,c){var h={plug:"input",before:c.before,after:c.after,patterns:["transition-{{*}}","to-{{*}}","at-{{*}}","reached-{{*}}"]};o&&o.forEach((function(e){h.patterns.push("value-{{*}}-"+e)}))}else p&&(h=[{plug:"output",before:p.before,after:p.after,patterns:["{{*}}"]},{plug:"input",before:p.before,after:p.after,patterns:["type-{{*}}"]},{plug:"input",before:p.before,after:p.after,patterns:i?i.map((function(e){return"value-"+e+"-{{*}}"})):void 0}]);n.sendDynamicPorts(e,r,{renamed:h})}e.exports={node:p,setup:function(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("nodeAdded.States",(function(t){t.parameters.states&&h(t.id,t.parameters,e.editorConnection),t.on("parameterUpdated",(function(n){("useTransitions"===n.name||"states"===n.name||"values"===n.name||n.name.startsWith("transition")||n.name.startsWith("type-"))&&h(t.id,t.parameters,e.editorConnection)}))}))}}},3722:e=>{"use strict";const t={name:"Switch",docs:"https://docs.noodl.net/nodes/logic/switch",category:"Logic",initialize:function(){this._internal.state=!1,this._internal.initialized=!1},getInspectInfo(){return this._internal.state},inputs:{on:{displayName:"On",group:"Change State",valueChangedToTrue:function(){!0!==this._internal.state&&(this._internal.state=!0,this.flagOutputDirty("state"),this.emitSignals())}},off:{displayName:"Off",group:"Change State",valueChangedToTrue:function(){!1!==this._internal.state&&(this._internal.state=!1,this.flagOutputDirty("state"),this.emitSignals())}},flip:{displayName:"Flip",group:"Change State",valueChangedToTrue:function(){this._internal.state=!this._internal.state,this.flagOutputDirty("state"),this.emitSignals()}},onFromStart:{type:"boolean",displayName:"State",group:"General",default:!1,set:function(e){this._internal.state=!!e,this.flagOutputDirty("state"),this.emitSignals()}}},outputs:{state:{type:"boolean",displayName:"Current State",getter:function(){return this._internal.state}},switchedToOn:{displayName:"Switched To On",type:"signal",group:"Signals"},switchedToOff:{displayName:"Switched To Off",type:"signal",group:"Signals"}},prototypeExtensions:{emitSignals:function(){!0===this._internal.state?this.sendSignalOnOutput("switchedToOn"):this.sendSignalOnOutput("switchedToOff")}}};e.exports={node:t}},5536:e=>{"use strict";const t={name:"Timer",docs:"https://docs.noodl.net/nodes/utilities/delay",displayName:"Delay",category:"Utilities",initialize:function(){var e=this;this._internal._animation=this.context.timerScheduler.createTimer({duration:0,onStart:function(){e.sendSignalOnOutput("timerStarted")},onFinish:function(){e.sendSignalOnOutput("timerFinished")}}),this.addDeleteListener((()=>{this._internal._animation.stop()}))},getInspectInfo(){return this._internal._animation.isRunning()?Math.floor(this._internal._animation.durationLeft()/10)/100+" seconds":"Not running"},inputs:{start:{displayName:"Start",valueChangedToTrue:function(){!1===this._internal._animation._isRunning&&this._internal._animation.start()}},restart:{displayName:"Restart",valueChangedToTrue:function(){this._internal._animation.start()}},duration:{type:"number",displayName:"Duration",default:0,set:function(e){this._internal._animation.duration=e}},startDelay:{type:"number",displayName:"Start Delay",default:0,set:function(e){this._internal._animation.delay=e}},stop:{displayName:"Stop",valueChangedToTrue:function(){this._internal._animation.stop()}}},outputs:{timerStarted:{type:"signal",displayName:"Started"},timerFinished:{type:"signal",displayName:"Finished"}}};e.exports={node:t}},1522:(e,t,n)=>{"use strict";const i=n(2036),o=n(7569),r={name:"Upload File",docs:"https://docs.noodl.net/nodes/data/cloud-data/upload-file",category:"Cloud Services",color:"data",getInspectInfo(){return this._internal.response},inputs:{file:{group:"General",displayName:"File",type:"*",set(e){this._internal.file=e}},upload:{type:"signal",displayName:"Upload",group:"Actions",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{const e=this._internal.file;e?o.instance.uploadFile({file:e,onUploadProgress:e=>{this._internal.progressTotal=e.total,this._internal.progressLoaded=e.loaded,this.flagOutputDirty("progressTotalBytes"),this.flagOutputDirty("progressLoadedBytes"),this.flagOutputDirty("progressLoadedPercent"),this.sendSignalOnOutput("progressChanged")},success:e=>{this._internal.cloudFile=new i(e),this.flagOutputDirty("cloudFile"),this.sendSignalOnOutput("success")},error:e=>this.setError(e)}):this.setError("No file specified")}))}}},outputs:{cloudFile:{group:"General",displayName:"Cloud File",type:"cloudfile",get(){return this._internal.cloudFile}},success:{group:"Events",displayName:"Success",type:"signal"},failure:{group:"Events",displayName:"Failure",type:"signal"},error:{type:"string",displayName:"Error",group:"Error",get(){return this._internal.error}},errorStatus:{type:"number",displayName:"Error Status Code",group:"Error",get(){return this._internal.errorStatus}},progressChanged:{type:"signal",displayName:"Progress Changed",group:"Events"},progressTotalBytes:{type:"number",displayName:"Total Bytes",group:"Progress",get(){return this._internal.progressTotal}},progressLoadedBytes:{type:"number",displayName:"Uploaded Bytes",group:"Progress",get(){return this._internal.progressLoaded}},progressLoadedPercent:{type:"number",displayName:"Uploaded Percent",group:"Progress",get(){return this._internal.progressTotal?this._internal.progressLoaded/this._internal.progressTotal*100:0}}},methods:{setError(e){this._internal.error=e.hasOwnProperty("error")?e.error:e,this._internal.errorStatus=e.code||e.status||0,this.flagOutputDirty("error"),this.flagOutputDirty("errorStatus"),this.sendSignalOnOutput("failure")}}};e.exports={node:r}},6830:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(6149);var s={name:"net.noodl.user.LogIn",docs:"https://docs.noodl.net/nodes/data/user/log-in",displayNodeName:"Log In",category:"Cloud Services",color:"data",initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{login:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleLogIn()}},username:{displayName:"Username",type:"string",group:"General",set:function(e){this._internal.username=e}},password:{displayName:"Password",type:"string",group:"General",set:function(e){this._internal.password=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning")},scheduleLogIn:function(){this._internal,!0!==this.logInScheduled&&(this.logInScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.logInScheduled=!1,r.instance.logIn({username:this._internal.username,password:this._internal.password,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},6282:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(6149);var s={name:"net.noodl.user.LogOut",docs:"https://docs.noodl.net/nodes/data/user/log-out",displayNodeName:"Log Out",category:"Cloud Services",color:"data",initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{login:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleLogOut()}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning")},scheduleLogOut:function(){this._internal,!0!==this.logOutScheduled&&(this.logOutScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.logOutScheduled=!1,r.instance.logOut({success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},888:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(6149);var s={name:"net.noodl.user.RequestPasswordReset",docs:"https://docs.noodl.net/nodes/data/user/request-password-reset",displayNodeName:"Request Password Reset",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{send:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleRequestPasswordReset()}},email:{type:"string",displayName:"Email",group:"General",set:function(e){this._internal.email=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning")},scheduleRequestPasswordReset:function(){this._internal,!0!==this.sendScheduled&&(this.sendScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.sendScheduled=!1,r.instance.requestPasswordReset({email:this._internal.email,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},2472:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(6149);var s={name:"net.noodl.user.ResetPassword",docs:"https://docs.noodl.net/nodes/data/user/reset-password",displayNodeName:"Reset Password",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{reset:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleResetPassword()}},token:{type:"string",displayName:"Token",group:"General",set:function(e){this._internal.token=e}},username:{type:"string",displayName:"Username",group:"General",set:function(e){this._internal.username=e}},newPassword:{type:"string",displayName:"New Password",group:"General",set:function(e){this._internal.newPassword=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning")},scheduleResetPassword:function(){this._internal,!0!==this.resetPasswordScheduled&&(this.resetPasswordScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.resetPasswordScheduled=!1,r.instance.resetPassword({token:this._internal.token,username:this._internal.username,newPassword:this._internal.newPassword,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},2410:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(6149);var s={name:"net.noodl.user.SendEmailVerification",docs:"https://docs.noodl.net/nodes/data/user/send-email-verification",displayNodeName:"Send Email Verification",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{send:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleSendEmailVerification()}},email:{type:"string",displayName:"Email",group:"General",set:function(e){this._internal.email=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-send-email-verification-warning")},scheduleSendEmailVerification:function(){this._internal,!0!==this.sendScheduled&&(this.sendScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.sendScheduled=!1,r.instance.sendEmailVerification({email:this._internal.email,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},327:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(6149);var s={name:"net.noodl.user.SignUp",docs:"https://docs.noodl.net/nodes/data/user/sign-up",displayNodeName:"Sign Up",category:"Cloud Services",color:"data",initialize:function(){this._internal.userProperties={}},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{signup:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleSignUp()}},username:{displayName:"Username",type:"string",group:"General",set:function(e){this._internal.username=e}},password:{displayName:"Password",type:"string",group:"General",set:function(e){this._internal.password=e}},email:{displayName:"Email",type:"string",group:"General",set:function(e){this._internal.email=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-login-warning")},scheduleSignUp:function(){const e=this._internal;!0!==this.signUpScheduled&&(this.signUpScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.signUpScheduled=!1,r.instance.signUp({username:this._internal.username,password:this._internal.password,email:this._internal.email,properties:e.userProperties,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))},setUserProperty:function(e,t){this._internal.userProperties[e]=t},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("prop-")?this.registerInput(e,{set:this.setUserProperty.bind(this,e.substring("prop-".length))}):void 0}}};function a(e,t,n,i){var o=[];if(i){var r=i.find((e=>"_User"===e.name));if(r&&r.schema&&r.schema.properties){var s=r.schema.properties;const e=["authData","password","username","createdAt","updatedAt","emailVerified","email"];for(var a in s)if(-1===e.indexOf(a)){var l=s[a];if(!o.find((e=>e.name===a)))if("Relation"===l.type);else{const e={String:"string",Boolean:"boolean",Number:"number",Date:"date"};o.push({type:{name:e[l.type]?e[l.type]:"*"},plug:"input",group:"Properties",name:"prop-"+a,displayName:a})}}}}n.sendDynamicPorts(e,o)}e.exports={node:s,setup:function(e,t){function n(n){a(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections")),n.on("parameterUpdated",(function(i){a(n.id,n.parameters,e.editorConnection,t.getMetaData("systemCollections"))})),t.on("metadataChanged.systemCollections",(function(t){a(n.id,n.parameters,e.editorConnection,t)}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.net.noodl.user.SignUp",(function(e){n(e)}));for(const e of t.getNodesWithType("net.noodl.user.SignUp"))n(e)}))}}},6149:(e,t,n)=>{function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=n(6291),a=n(2699).EventEmitter,l=n(7397),u=n(7569);class c{constructor(){this._initCloudServices(),this.events=new a,this.events.setMaxListeners(1e5),this.getUserFromLocalStorage()&&(this.current=this.getUserModel(),this.fetchCurrentUser({success:()=>{},error:()=>{delete localStorage["Parse/"+this.appId+"/currentUser"],delete this.current,this.events.emit("sessionLost")}}))}getUserFromLocalStorage(){const e=localStorage["Parse/"+this.appId+"/currentUser"];if(e)try{return JSON.parse(e)}catch(e){}}_initCloudServices(){const e=s.instance.getMetaData("cloudservices");e&&(this.appId=e.appId||e.workspaceId+"-"+e.instanceId,this.endpoint=e.endpoint)}on(){this.events.on.apply(this.events,arguments)}off(){this.events.off.apply(this.events,arguments)}_makeRequest(e,t){if(this.endpoint){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var e;try{e=JSON.parse(n.response)}catch(e){}200===n.status||201===n.status?t.success(e||n.response):t.error(e||{error:n.responseText,status:n.status})}},n.open(t.method||"GET",this.endpoint+e,!0),n.setRequestHeader("X-Parse-Application-Id",this.appId);var i=localStorage["Parse/"+this.appId+"/installationId"];if(void 0===i&&(i=localStorage["Parse/"+this.appId+"/installationId"]=l()),n.setRequestHeader("X-Parse-Installation-Id",i),t.sessionToken)n.setRequestHeader("X-Parse-Session-Token",t.sessionToken);else{var o=this.getUserFromLocalStorage();void 0!==o&&n.setRequestHeader("X-Parse-Session-Token",o.sessionToken)}n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t.content))}else t.error&&t.error({error:"No active cloud service",status:0})}logIn(e){this._makeRequest("/login",{method:"POST",content:{username:e.username,password:e.password,_method:"GET"},success:t=>{localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(t),this.current=this.getUserModel(),e.success(t),this.events.emit("loggedIn")},error:t=>{e.error(t.error)}})}logOut(e){this._makeRequest("/logout",{method:"POST",content:{},success:t=>{delete localStorage["Parse/"+this.appId+"/currentUser"],delete this.current,e.success(),this.events.emit("loggedOut")},error:t=>{e.error(t.error)}})}signUp(e){const t=e.properties?u._serializeObject(o({},e.properties),"_User"):{};this._makeRequest("/users",{method:"POST",content:Object.assign({},t,{username:e.username,password:e.password,email:e.email}),success:t=>{const n=Object.assign(t,{username:e.username},e.properties);localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(n),this.current=this.getUserModel(),e.success(t),this.events.emit("loggedIn")},error:t=>{e.error(t.error)}})}setUserProperties(e){const t=this.getCurrentUser();if(void 0!==t){const n=u._serializeObject(o({},e.properties),"_User"),i=Object.assign({},{email:e.email,username:e.username},n);delete i.emailVerified,delete i.createdAt,delete i.updatedAt,this._makeRequest("/users/"+t.objectId,{method:"PUT",content:i,success:n=>{Object.assign(t,i),localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(t),this.current=this.getUserModel(),e.success(n)},error:t=>{e.error(t.error)}})}}fetchCurrentUser(e){this._makeRequest("/users/me",{method:"GET",sessionToken:e.sessionToken,success:t=>{localStorage["Parse/"+this.appId+"/currentUser"]=JSON.stringify(t),this.current=this.getUserModel(),this.events.emit("sessionGained"),e.success(t)},error:t=>{209===t.code&&(delete localStorage["Parse/"+this.appId+"/currentUser"],this.events.emit("sessionLost")),e.error(t.error)}})}verifyEmail(e){this._makeRequest("/apps/"+this.appId+"/verify_email?username="+e.username+"&token="+e.token,{method:"GET",success:t=>{-1!==t.indexOf("Successfully verified your email")?e.success():t.indexOf("Invalid Verification Link")?e.error("Invalid verification token"):e.error("Failed to verify email")},error:t=>{e.error(t.error)}})}sendEmailVerification(e){this._makeRequest("/verificationEmailRequest",{method:"POST",content:{email:e.email},success:t=>{e.success()},error:t=>{e.error(t.error)}})}resetPassword(e){this._makeRequest("/apps/"+this.appId+"/request_password_reset",{method:"POST",content:{username:e.username,token:e.token,new_password:e.newPassword},success:t=>{-1!==t.indexOf("Password successfully reset")||-1!==t.indexOf("Successfully updated your password")?e.success():t.indexOf("Invalid Link")?e.error("Invalid verification token"):e.error("Failed to verify email")},error:t=>{e.error(t.error)}})}requestPasswordReset(e){this._makeRequest("/requestPasswordReset",{method:"POST",content:{email:e.email},success:t=>{e.success()},error:t=>{e.error(t.error)}})}getCurrentUser(){var e=localStorage["Parse/"+this.appId+"/currentUser"];if(void 0!==e)return JSON.parse(e)}getUserModel(){const e=this.getCurrentUser();if(void 0!==e)return delete e.sessionToken,delete e.ACL,delete e.className,delete e.__type,u._fromJSON(e,"_User")}}var p;c.forScope=e=>c.instance,Object.defineProperty(c,"instance",{get:function(){return void 0===p&&(p=new c),p}}),s.Services.UserService=c,e.exports=c},1676:(e,t,n)=>{"use strict";const{Node:i,EdgeTriggeredInput:o}=n(6291),r=n(6149);var s={name:"net.noodl.user.VerifyEmail",docs:"https://docs.noodl.net/nodes/data/user/verify-email",displayNodeName:"Verify Email",category:"Cloud Services",color:"data",deprecated:!0,initialize:function(){this._internal},getInspectInfo(){},outputs:{success:{type:"signal",displayName:"Success",group:"Events"},failure:{type:"signal",displayName:"Failure",group:"Events"},error:{type:"string",displayName:"Error",group:"Error",getter:function(){return this._internal.error}}},inputs:{verify:{displayName:"Do",group:"Actions",valueChangedToTrue:function(){this.scheduleVerifyEmail()}},token:{type:"string",displayName:"Token",group:"General",set:function(e){this._internal.token=e}},username:{type:"string",displayName:"Username",group:"General",set:function(e){this._internal.username=e}}},methods:{setError:function(e){this._internal.error=e,this.flagOutputDirty("error"),this.sendSignalOnOutput("failure"),this.context.editorConnection&&this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning",{message:e,showGlobally:!0})},clearWarnings(){this.context.editorConnection&&this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"user-verify-email-warning")},scheduleVerifyEmail:function(){this._internal,!0!==this.logOutScheduled&&(this.logOutScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.logOutScheduled=!1,r.instance.verifyEmail({token:this._internal.token,username:this._internal.username,success:()=>{this.sendSignalOnOutput("success")},error:e=>{this.setError(e)}})})))}}};e.exports={node:s,setup:function(e,t){}}},7427:e=>{"use strict";const t={name:"Value Changed",docs:"https://docs.noodl.net/nodes/logic/value-changed",category:"Logic",initialize:function(){this._internal.lastValue=void 0,this._internal.changeCount=0},getInspectInfo(){return this._internal.changeCount?"Triggered "+this._internal.changeCount+(1===this._internal.changeCount?" time":" times"):"Not triggered"},inputs:{value:{type:"*",displayName:"Input",set:function(e){this._internal.lastValue!==e&&(this._internal.changeCount++,this.sendSignalOnOutput("valueChanged"),this._internal.lastValue=e)}}},outputs:{valueChanged:{type:"signal",displayName:"Value Changed"}}};e.exports={node:t}},500:(e,t,n)=>{"use strict";const i=n(5953);e.exports={node:i.createDefinition({name:"Color",docs:"https://docs.noodl.net/nodes/data/color",startValue:"#f1f2f4",type:{name:"color"},cast:function(e){return e}})}},1157:e=>{const t=new Map,n={name:"CSS Definition",docs:"https://docs.noodl.net/nodes/utilities/css-definition",category:"CustomCode",color:"javascript",initialize:function(){this._internal.style="";const e=this.getStyleRefId();this.addDeleteListener((()=>{t.set(e,t.get(e)-1),0===t.get(e)&&(this.removeStyleDeclaration(),t.delete(e))})),t.has(e)||t.set(e,0),t.set(e,t.get(e)+1)},inputs:{style:{index:4005,type:{name:"string",allowEditOnly:!0,codeeditor:"css"},displayName:"Style",group:"Content",default:"",set:function(e){this.updateStyle(e)}}},outputs:{},methods:{getStyleRefId:function(){return"style_"+this.id},removeStyleDeclaration:function(){var e=this.getStyleRefId(),t=document.getElementById(e);null!==t&&t.parentNode.removeChild(t)},updateStyle:function(e){var t=this._internal,n=this.getStyleRefId();if(t.style=e,null!==e){var i=document.getElementById(n);null===i&&((i=document.createElement("style")).id=n,i.type="text/css",document.head.appendChild(i)),i.innerHTML="\n"+e+"\n"}else this.removeStyleDeclaration()}}};e.exports={node:n}},8742:e=>{e.exports=function(e,t,n,i,o,r,s){void 0===s&&(s=this.options);var a=e-t,l=Math.abs(a)/n,u=s.deceleration,c=(s.swipeBounceTime,{destination:e+l/u*(a<0?-1:1),duration:s.swipeTime,rate:15});return this.hooks.trigger(this.hooks.eventTypes.momentum,c,a),c.destination<i?(c.destination=r?Math.max(i-r/4,i-r/c.rate*l):i,c.duration=Math.abs(c.destination-e)/l):c.destination>o&&(c.destination=r?Math.min(o+r/4,o+r/c.rate*l):o,c.duration=Math.abs(c.destination-e)/l),c.destination=Math.round(c.destination),c}},5766:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,r=l(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),c=0,p=a>0?s-4:s;for(n=0;n<p;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,i=e.length,o=i%3,r=[],s=16383,a=0,l=i-o;a<l;a+=s)r.push(u(e,a,a+s>l?l:a+s));return 1===o?(t=e[i-1],r.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[i-2]<<8)+e[i-1],r.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),r.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=r.length;s<a;++s)n[s]=r[s],i[r.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,i){for(var o,r,s=[],a=t;a<i;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(r=o)>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},5107:e=>{var t=.1,n="function"==typeof Float32Array;function i(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function r(e){return 3*e}function s(e,t,n){return((i(t,n)*e+o(t,n))*e+r(t))*e}function a(e,t,n){return 3*i(t,n)*e*e+2*o(t,n)*e+r(t)}function l(e,t,i,o){if(4===arguments.length)return new l([e,t,i,o]);if(!(this instanceof l))return new l(e);if(!e||4!==e.length)throw new Error("BezierEasing: points must contains 4 values");for(var r=0;r<4;++r)if("number"!=typeof e[r]||isNaN(e[r])||!isFinite(e[r]))throw new Error("BezierEasing: points should be integers.");if(e[0]<0||e[0]>1||e[2]<0||e[2]>1)throw new Error("BezierEasing x values must be in [0, 1] range.");this._str="BezierEasing("+e+")",this._css="cubic-bezier("+e+")",this._p=e,this._mSampleValues=n?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}l.prototype={get:function(e){var t=this._p[0],n=this._p[1],i=this._p[2],o=this._p[3];return this._precomputed||this._precompute(),t===n&&i===o?e:0===e?0:1===e?1:s(this._getTForX(e),n,o)},getPoints:function(){return this._p},toString:function(){return this._str},toCSS:function(){return this._css},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],i=this._p[3];this._precomputed=!0,e===t&&n===i||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],n=this._p[2],i=0;i<11;++i)this._mSampleValues[i]=s(i*t,e,n)},_getTForX:function(e){for(var n=this._p[0],i=this._p[2],o=this._mSampleValues,r=0,l=1;10!==l&&o[l]<=e;++l)r+=t;var u=r+(e-o[--l])/(o[l+1]-o[l])*t,c=a(u,n,i);return c>=.001?function(e,t,n,i){for(var o=0;o<4;++o){var r=a(t,n,i);if(0===r)return t;t-=(s(t,n,i)-e)/r}return t}(e,u,n,i):0===c?u:function(e,t,n,i,o){var r,a,l=0;do{(r=s(a=t+(n-t)/2,i,o)-e)>0?n=a:t=a}while(Math.abs(r)>1e-7&&++l<10);return a}(e,r,r+t,n,i)}},l.css={ease:l.ease=l(.25,.1,.25,1),linear:l.linear=l(0,0,1,1),"ease-in":l.easeIn=l(.42,0,1,1),"ease-out":l.easeOut=l(0,0,.58,1),"ease-in-out":l.easeInOut=l(.42,0,.58,1)},e.exports=l},8834:(e,t,n)=>{"use strict";const i=n(5766),o=n(2333),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let i=a(n);const o=i.write(e,t);return o!==n&&(i=i.slice(0,o)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const o=function(e){if(l.isBuffer(e)){const t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||J(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return c(e),a(e<0?0:0|f(e))}function d(e){const t=e.length<0?0:0|f(e.length),n=a(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function f(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(o)return i?-1:$(e).length;t=(""+t).toLowerCase(),o=!0}}function m(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return N(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),J(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,o){let r,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let i=-1;for(r=n;r<a;r++)if(u(e,r)===u(t,-1===i?0:r-i)){if(-1===i&&(i=r),r-i+1===l)return i*s}else-1!==i&&(r-=r-i),i=-1}else for(n+l>a&&(n=a-l),r=n;r>=0;r--){let n=!0;for(let i=0;i<l;i++)if(u(e,r+i)!==u(t,i)){n=!1;break}if(n)return r}return-1}function S(e,t,n,i){n=Number(n)||0;const o=e.length-n;i?(i=Number(i))>o&&(i=o):i=o;const r=t.length;let s;for(i>r/2&&(i=r/2),s=0;s<i;++s){const i=parseInt(t.substr(2*s,2),16);if(J(i))return s;e[n+s]=i}return s}function _(e,t,n,i){return X($(t,e.length-n),e,n,i)}function w(e,t,n,i){return X(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function O(e,t,n,i){return X(G(t),e,n,i)}function C(e,t,n,i){return X(function(e,t){let n,i,o;const r=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,o=n%256,r.push(o),r.push(i);return r}(t,e.length-n),e,n,i)}function N(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);const i=[];let o=t;for(;o<n;){const t=e[o];let r=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=n){let n,i,a,l;switch(s){case 1:t<128&&(r=t);break;case 2:n=e[o+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(r=l));break;case 3:n=e[o+1],i=e[o+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(r=l));break;case 4:n=e[o+1],i=e[o+2],a=e[o+3],128==(192&n)&&128==(192&i)&&128==(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&a,l>65535&&l<1114112&&(r=l))}}null===r?(r=65533,s=1):r>65535&&(r-=65536,i.push(r>>>10&1023|55296),r=56320|1023&r),i.push(r),o+=s}return function(e){const t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=x));return n}(i)}t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return p(e)},l.allocUnsafeSlow=function(e){return p(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,r=Math.min(n,i);o<r;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))o+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,o)):Uint8Array.prototype.set.call(i,t,o);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,o)}o+=t.length}return i},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,o){if(Y(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let r=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(r,s),u=this.slice(i,o),c=e.slice(t,n);for(let e=0;e<a;++e)if(u[e]!==c[e]){r=u[e],s=c[e];break}return r<s?-1:s<r?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let r=!1;for(;;)switch(i){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function P(e,t,n){let i="";n=Math.min(e.length,n);for(let o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function T(e,t,n){let i="";n=Math.min(e.length,n);for(let o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function E(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let o="";for(let i=t;i<n;++i)o+=K[e[i]];return o}function D(e,t,n){const i=e.slice(t,n);let o="";for(let e=0;e<i.length-1;e+=2)o+=String.fromCharCode(i[e]+256*i[e+1]);return o}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,i,o,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function j(e,t,n,i,o){W(t,i,o,e,n,7);let r=Number(t&BigInt(4294967295));e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function A(e,t,n,i,o){W(t,i,o,e,n,7);let r=Number(t&BigInt(4294967295));e[n+7]=r,r>>=8,e[n+6]=r,r>>=8,e[n+5]=r,r>>=8,e[n+4]=r;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function M(e,t,n,i,o,r){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,i,r){return t=+t,n>>>=0,r||M(e,0,n,4),o.write(e,t,n,i,23,4),n+4}function V(e,t,n,i,r){return t=+t,n>>>=0,r||M(e,0,n,8),o.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let i=this[e],o=1,r=0;for(;++r<t&&(o*=256);)i+=this[e+r]*o;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))})),l.prototype.readBigUInt64BE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(o)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let i=this[e],o=1,r=0;for(;++r<t&&(o*=256);)i+=this[e+r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let i=t,o=1,r=this[e+--i];for(;i>0&&(o*=256);)r+=this[e+--i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||q(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);let o=1,r=0;for(this[t]=255&e;++r<n&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);let o=n-1,r=1;for(this[t+o]=255&e;--o>=0&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Q((function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Q((function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let o=0,r=1,s=0;for(this[t]=255&e;++o<n&&(r*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/r>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let o=n-1,r=1,s=0;for(this[t+o]=255&e;--o>=0&&(r*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/r>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Q((function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Q((function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const o=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const r=l.isBuffer(e)?e:l.from(e,i),s=r.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=r[o%s]}return this};const L={};function U(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function B(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function W(e,t,n,i,o,r){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let o;throw o=r>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(r+1)}${i}`:`>= -(2${i} ** ${8*(r+1)-1}${i}) and < 2 ** ${8*(r+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new L.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||q(t,e.length-(n+1))}(i,o,r)}function z(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new L.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=B(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=B(o)),o+="n"),i+=` It must be ${t}. Received ${o}`,i}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function $(e,t){let n;t=t||1/0;const i=e.length;let o=null;const r=[];for(let s=0;s<i;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&r.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function G(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,n,i){let o;for(o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const K=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let o=0;o<16;++o)t[i+o]=e[n]+e[o]}return t}();function Q(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},2699:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}g(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,o)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function u(e,t,n,i){var o,r,s,u;if(a(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,u=c,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=c.bind(i);return o.listener=n,i.wrapFn=o,o}function d(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var u=l.length,c=f(l,u);for(n=0;n<u;++n)i(c[n],this,t)}return!0},r.prototype.addListener=function(e,t){return u(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return u(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,p(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,p(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,o,r,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},2333:(e,t)=>{t.read=function(e,t,n,i,o){var r,s,a=8*o-i-1,l=(1<<a)-1,u=l>>1,c=-7,p=n?o-1:0,d=n?-1:1,h=e[t+p];for(p+=d,r=h&(1<<-c)-1,h>>=-c,c+=a;c>0;r=256*r+e[t+p],p+=d,c-=8);for(s=r&(1<<-c)-1,r>>=-c,c+=i;c>0;s=256*s+e[t+p],p+=d,c-=8);if(0===r)r=1-u;else{if(r===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,i),r-=u}return(h?-1:1)*s*Math.pow(2,r-i)},t.write=function(e,t,n,i,o,r){var s,a,l,u=8*r-o-1,c=(1<<u)-1,p=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:r-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(s++,l/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(t*l-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+h]=255&s,h+=f,s/=256,u-=8);e[n+h-f]|=128*g}},1285:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},2806:(e,t,n)=>{var i="__lodash_hash_undefined__",o=/^\[object .+?Constructor\]$/,r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,s="object"==typeof self&&self&&self.Object===Object&&self,a=r||s||Function("return this")();function l(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function u(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,i){for(var o=e.length,r=-1;++r<o;)if(t(e[r],r,e))return r;return-1}(e,d);for(var i=-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}(e,t)>-1}function c(e,t,n){for(var i=-1,o=e?e.length:0;++i<o;)if(n(t,e[i]))return!0;return!1}function p(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}function d(e){return e!=e}function h(e,t){return e.has(t)}var f,g=Array.prototype,m=Function.prototype,y=Object.prototype,v=a["__core-js_shared__"],b=(f=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",S=m.toString,_=y.hasOwnProperty,w=y.toString,O=RegExp("^"+S.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=a.Symbol,N=y.propertyIsEnumerable,I=g.splice,x=C?C.isConcatSpreadable:void 0,P=Math.max,T=V(a,"Map"),E=V(Object,"create");function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function j(e){var t=-1,n=e?e.length:0;for(this.__data__=new R;++t<n;)this.add(e[t])}function A(e,t){for(var n,i,o=e.length;o--;)if((n=e[o][0])===(i=t)||n!=n&&i!=i)return o;return-1}function M(e,t,n,i,o){var r=-1,s=e.length;for(n||(n=L),o||(o=[]);++r<s;){var a=e[r];t>0&&n(a)?t>1?M(a,t-1,n,i,o):p(o,a):i||(o[o.length]=a)}return o}function F(e,t){var n,i,o=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function V(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!$(e)||b&&b in e)return!1;var t=H(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?O:o;return t.test(function(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function L(e){return z(e)||function(e){return q(e)&&_.call(e,"callee")&&(!N.call(e,"callee")||"[object Arguments]"==w.call(e))}(e)||!!(x&&e&&e[x])}D.prototype.clear=function(){this.__data__=E?E(null):{}},D.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},D.prototype.get=function(e){var t=this.__data__;if(E){var n=t[e];return n===i?void 0:n}return _.call(t,e)?t[e]:void 0},D.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:_.call(t,e)},D.prototype.set=function(e,t){return this.__data__[e]=E&&void 0===t?i:t,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(e){var t=this.__data__,n=A(t,e);return!(n<0||(n==t.length-1?t.pop():I.call(t,n,1),0))},k.prototype.get=function(e){var t=this.__data__,n=A(t,e);return n<0?void 0:t[n][1]},k.prototype.has=function(e){return A(this.__data__,e)>-1},k.prototype.set=function(e,t){var n=this.__data__,i=A(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},R.prototype.clear=function(){this.__data__={hash:new D,map:new(T||k),string:new D}},R.prototype.delete=function(e){return F(this,e).delete(e)},R.prototype.get=function(e){return F(this,e).get(e)},R.prototype.has=function(e){return F(this,e).has(e)},R.prototype.set=function(e,t){return F(this,e).set(e,t),this},j.prototype.add=j.prototype.push=function(e){return this.__data__.set(e,i),this},j.prototype.has=function(e){return this.__data__.has(e)};var U,B,W=(U=function(e,t){return q(e)?function(e,t,n,i){var o,r=-1,s=u,a=!0,l=e.length,p=[],d=t.length;if(!l)return p;n&&(t=function(e,t){for(var n=-1,i=e?e.length:0,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}(t,(o=n,function(e){return o(e)}))),i?(s=c,a=!1):t.length>=200&&(s=h,a=!1,t=new j(t));e:for(;++r<l;){var f=e[r],g=n?n(f):f;if(f=i||0!==f?f:0,a&&g==g){for(var m=d;m--;)if(t[m]===g)continue e;p.push(f)}else s(t,g,i)||p.push(f)}return p}(e,M(t,1,q,!0)):[]},B=P(void 0===B?U.length-1:B,0),function(){for(var e=arguments,t=-1,n=P(e.length-B,0),i=Array(n);++t<n;)i[t]=e[B+t];t=-1;for(var o=Array(B+1);++t<B;)o[t]=e[t];return o[B]=i,l(U,this,o)}),z=Array.isArray;function q(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!H(e)}(e)}function H(e){var t=$(e)?w.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function $(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=W},3958:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",o=9007199254740991,r="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",p="[object Map]",d="[object Number]",h="[object Object]",f="[object Promise]",g="[object RegExp]",m="[object Set]",y="[object String]",v="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",_=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,O={};O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O[r]=O[s]=O[b]=O[a]=O[S]=O[l]=O[u]=O[c]=O[p]=O[d]=O[h]=O[g]=O[m]=O[y]=O[v]=!1;var C="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,N="object"==typeof self&&self&&self.Object===Object&&self,I=C||N||Function("return this")(),x=t&&!t.nodeType&&t,P=x&&e&&!e.nodeType&&e,T=P&&P.exports===x,E=T&&C.process,D=function(){try{return E&&E.binding&&E.binding("util")}catch(e){}}(),k=D&&D.isTypedArray;function R(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function j(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function A(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var M,F,V,L=Array.prototype,U=Function.prototype,B=Object.prototype,W=I["__core-js_shared__"],z=U.toString,q=B.hasOwnProperty,H=(M=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",$=B.toString,G=RegExp("^"+z.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=T?I.Buffer:void 0,Y=I.Symbol,J=I.Uint8Array,K=B.propertyIsEnumerable,Q=L.splice,Z=Y?Y.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=X?X.isBuffer:void 0,ne=(F=Object.keys,V=Object,function(e){return F(V(e))}),ie=Pe(I,"DataView"),oe=Pe(I,"Map"),re=Pe(I,"Promise"),se=Pe(I,"Set"),ae=Pe(I,"WeakMap"),le=Pe(Object,"create"),ue=ke(ie),ce=ke(oe),pe=ke(re),de=ke(se),he=ke(ae),fe=Y?Y.prototype:void 0,ge=fe?fe.valueOf:void 0;function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ve;++t<n;)this.add(e[t])}function Se(e){var t=this.__data__=new ye(e);this.size=t.size}function _e(e,t){for(var n=e.length;n--;)if(Re(e[n][0],t))return n;return-1}function we(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=q.call(e,Z),n=e[Z];try{e[Z]=void 0;var i=!0}catch(e){}var o=$.call(e);return i&&(t?e[Z]=n:delete e[Z]),o}(e):function(e){return $.call(e)}(e)}function Oe(e){return Ue(e)&&we(e)==r}function Ce(e,t,n,i,o){return e===t||(null==e||null==t||!Ue(e)&&!Ue(t)?e!=e&&t!=t:function(e,t,n,i,o,c){var f=Ae(e),v=Ae(t),_=f?s:Ee(e),w=v?s:Ee(t),O=(_=_==r?h:_)==h,C=(w=w==r?h:w)==h,N=_==w;if(N&&Me(e)){if(!Me(t))return!1;f=!0,O=!1}if(N&&!O)return c||(c=new Se),f||Be(e)?Ne(e,t,n,i,o,c):function(e,t,n,i,o,r,s){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!r(new J(e),new J(t)));case a:case l:case d:return Re(+e,+t);case u:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case p:var c=j;case m:var h=1&i;if(c||(c=A),e.size!=t.size&&!h)return!1;var f=s.get(e);if(f)return f==t;i|=2,s.set(e,t);var v=Ne(c(e),c(t),i,o,r,s);return s.delete(e),v;case"[object Symbol]":if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,_,n,i,o,c);if(!(1&n)){var I=O&&q.call(e,"__wrapped__"),x=C&&q.call(t,"__wrapped__");if(I||x){var P=I?e.value():e,T=x?t.value():t;return c||(c=new Se),o(P,T,n,i,c)}}return!!N&&(c||(c=new Se),function(e,t,n,i,o,r){var s=1&n,a=Ie(e),l=a.length;if(l!=Ie(t).length&&!s)return!1;for(var u=l;u--;){var c=a[u];if(!(s?c in t:q.call(t,c)))return!1}var p=r.get(e);if(p&&r.get(t))return p==t;var d=!0;r.set(e,t),r.set(t,e);for(var h=s;++u<l;){var f=e[c=a[u]],g=t[c];if(i)var m=s?i(g,f,c,t,e,r):i(f,g,c,e,t,r);if(!(void 0===m?f===g||o(f,g,n,i,r):m)){d=!1;break}h||(h="constructor"==c)}if(d&&!h){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(d=!1)}return r.delete(e),r.delete(t),d}(e,t,n,i,o,c))}(e,t,n,i,Ce,o))}function Ne(e,t,n,i,o,r){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var u=r.get(e);if(u&&r.get(t))return u==t;var c=-1,p=!0,d=2&n?new be:void 0;for(r.set(e,t),r.set(t,e);++c<a;){var h=e[c],f=t[c];if(i)var g=s?i(f,h,c,t,e,r):i(h,f,c,e,t,r);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!R(t,(function(e,t){if(s=t,!d.has(s)&&(h===e||o(h,e,n,i,r)))return d.push(t);var s}))){p=!1;break}}else if(h!==f&&!o(h,f,n,i,r)){p=!1;break}}return r.delete(e),r.delete(t),p}function Ie(e){return function(e,t,n){var i=t(e);return Ae(e)?i:function(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}(i,n(e))}(e,We,Te)}function xe(e,t){var n,i,o=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Le(e)||function(e){return!!H&&H in e}(e))&&(Fe(e)?G:_).test(ke(e))}(n)?n:void 0}me.prototype.clear=function(){this.__data__=le?le(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(le){var n=t[e];return n===i?void 0:n}return q.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return le?void 0!==t[e]:q.call(t,e)},me.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=le&&void 0===t?i:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=_e(t,e);return!(n<0||(n==t.length-1?t.pop():Q.call(t,n,1),--this.size,0))},ye.prototype.get=function(e){var t=this.__data__,n=_e(t,e);return n<0?void 0:t[n][1]},ye.prototype.has=function(e){return _e(this.__data__,e)>-1},ye.prototype.set=function(e,t){var n=this.__data__,i=_e(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(oe||ye),string:new me}},ve.prototype.delete=function(e){var t=xe(this,e).delete(e);return this.size-=t?1:0,t},ve.prototype.get=function(e){return xe(this,e).get(e)},ve.prototype.has=function(e){return xe(this,e).has(e)},ve.prototype.set=function(e,t){var n=xe(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},be.prototype.add=be.prototype.push=function(e){return this.__data__.set(e,i),this},be.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.clear=function(){this.__data__=new ye,this.size=0},Se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Se.prototype.get=function(e){return this.__data__.get(e)},Se.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ye){var i=n.__data__;if(!oe||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(i)}return n.set(e,t),this.size=n.size,this};var Te=ee?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var i=-1,o=null==t?0:t.length,r=0,s=[];++i<o;){var a=t[i];l=a,K.call(e,l)&&(s[r++]=a)}var l;return s}(ee(e)))}:function(){return[]},Ee=we;function De(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||w.test(e))&&e>-1&&e%1==0&&e<t}function ke(e){if(null!=e){try{return z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Re(e,t){return e===t||e!=e&&t!=t}(ie&&Ee(new ie(new ArrayBuffer(1)))!=S||oe&&Ee(new oe)!=p||re&&Ee(re.resolve())!=f||se&&Ee(new se)!=m||ae&&Ee(new ae)!=v)&&(Ee=function(e){var t=we(e),n=t==h?e.constructor:void 0,i=n?ke(n):"";if(i)switch(i){case ue:return S;case ce:return p;case pe:return f;case de:return m;case he:return v}return t});var je=Oe(function(){return arguments}())?Oe:function(e){return Ue(e)&&q.call(e,"callee")&&!K.call(e,"callee")},Ae=Array.isArray,Me=te||function(){return!1};function Fe(e){if(!Le(e))return!1;var t=we(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Le(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ue(e){return null!=e&&"object"==typeof e}var Be=k?function(e){return function(t){return e(t)}}(k):function(e){return Ue(e)&&Ve(e.length)&&!!O[we(e)]};function We(e){return null!=(t=e)&&Ve(t.length)&&!Fe(t)?function(e,t){var n=Ae(e),i=!n&&je(e),o=!n&&!i&&Me(e),r=!n&&!i&&!o&&Be(e),s=n||i||o||r,a=s?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=a.length;for(var u in e)!t&&!q.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||De(u,l))||a.push(u);return a}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||B))return ne(e);var t,n,i=[];for(var o in Object(e))q.call(e,o)&&"constructor"!=o&&i.push(o);return i}(e);var t}e.exports=function(e,t){return Ce(e,t)}},8262:(e,t,n)=>{"use strict";var i=n(3586);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n,n}},3980:(e,t,n)=>{e.exports=n(8262)()},3586:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1997:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return p.default}}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}(n(7363)),r=f(n(3980)),s=f(n(1533)),a=f(n(6499)),l=n(4688),u=n(3585),c=n(136),p=f(n(3816)),d=f(n(1177)),h=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m.apply(this,arguments)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function w(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(g,e);var t,n,i,r,c,f=(r=g,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(c){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),N(O(t=f.call(this,e)),"onDragStart",(function(e,n){if((0,d.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,u.createDraggableData)(O(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),N(O(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",n);var i,o,r=(0,u.createDraggableData)(O(t),n),s={x:r.x,y:r.y};if(t.props.bounds){var a=s.x,l=s.y;s.x+=t.state.slackX,s.y+=t.state.slackY;var c=(i=(0,u.getBoundPosition)(O(t),s.x,s.y),o=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return r}}(i,o)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=c[0],h=c[1];s.x=p,s.y=h,s.slackX=t.state.slackX+(a-s.x),s.slackY=t.state.slackY+(l-s.y),r.x=s.x,r.y=s.y,r.deltaX=s.x-t.state.x,r.deltaY=s.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(s)})),N(O(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,u.createDraggableData)(O(t),n)))return!1;(0,d.default)("Draggable: onDragStop: %j",n);var i={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,r=o.x,s=o.y;i.x=r,i.y=s}t.setState(i)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:v({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=g,i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,i=t.prevPropsPosition;return!n||i&&n.x===i.x&&n.y===i.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:i}),{x:n.x,y:n.y,prevPropsPosition:v({},n)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:s.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),i=t.defaultPosition,r=t.defaultClassName,s=t.defaultClassNameDragging,c=t.defaultClassNameDragged,d=t.position,f=t.positionOffset,g=(t.scale,function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,h)),y={},b=null,S=!Boolean(d)||this.state.dragging,_=d||i,w={x:(0,u.canDragX)(this)&&S?this.state.x:_.x,y:(0,u.canDragY)(this)&&S?this.state.y:_.y};this.state.isElementSVG?b=(0,l.createSVGTransform)(w,f):y=(0,l.createCSSTransform)(w,f);var O=(0,a.default)(n.props.className||"",r,(N(e={},s,this.state.dragging),N(e,c,this.state.dragged),e));return o.createElement(p.default,m({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(n),{className:O,style:v(v({},n.props.style),y),transform:b}))}}])&&S(t.prototype,n),i&&S(t,i),Object.defineProperty(t,"prototype",{writable:!1}),g}(o.Component);t.default=I,N(I,"displayName","Draggable"),N(I,"propTypes",v(v({},p.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe})),N(I,"defaultProps",v(v({},p.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},3816:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}(n(7363)),r=p(n(3980)),s=p(n(1533)),a=n(4688),l=n(3585),u=n(136),c=p(n(1177));function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={start:"touchstart",move:"touchmove",stop:"touchend"},O={start:"mousedown",move:"mousemove",stop:"mouseup"},C=O,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(p,e);var t,n,i,r,u=(i=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(i);if(r){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function p(){var e;g(this,p);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return _(b(e=u.call.apply(u,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),_(b(e),"mounted",!1),_(b(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var i=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof i.defaultView.Node)||e.props.handle&&!(0,a.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,a.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var o=(0,a.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var r=(0,l.getControlPosition)(t,o,b(e));if(null!=r){var s=r.x,u=r.y,p=(0,l.createCoreData)(b(e),s,u);(0,c.default)("DraggableCore: handleDragStart: %j",p),(0,c.default)("calling",e.props.onStart),!1!==e.props.onStart(t,p)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(i),e.setState({dragging:!0,lastX:s,lastY:u}),(0,a.addEvent)(i,C.move,e.handleDrag),(0,a.addEvent)(i,C.stop,e.handleDragStop))}}})),_(b(e),"handleDrag",(function(t){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,b(e));if(null!=n){var i=n.x,o=n.y;if(Array.isArray(e.props.grid)){var r=i-e.state.lastX,s=o-e.state.lastY,a=h((0,l.snapToGrid)(e.props.grid,r,s),2);if(r=a[0],s=a[1],!r&&!s)return;i=e.state.lastX+r,o=e.state.lastY+s}var u=(0,l.createCoreData)(b(e),i,o);if((0,c.default)("DraggableCore: handleDrag: %j",u),!1!==e.props.onDrag(t,u)&&!1!==e.mounted)e.setState({lastX:i,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var p=document.createEvent("MouseEvents");p.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(p)}}})),_(b(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,b(e));if(null!=n){var i=n.x,o=n.y;if(Array.isArray(e.props.grid)){var r=i-e.state.lastX||0,s=o-e.state.lastY||0,u=h((0,l.snapToGrid)(e.props.grid,r,s),2);r=u[0],s=u[1],i=e.state.lastX+r,o=e.state.lastY+s}var p=(0,l.createCoreData)(b(e),i,o);if(!1===e.props.onStop(t,p)||!1===e.mounted)return!1;var d=e.findDOMNode();d&&e.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(d.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",p),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),d&&((0,c.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(d.ownerDocument,C.move,e.handleDrag),(0,a.removeEvent)(d.ownerDocument,C.stop,e.handleDragStop))}}})),_(b(e),"onMouseDown",(function(t){return C=O,e.handleDragStart(t)})),_(b(e),"onMouseUp",(function(t){return C=O,e.handleDragStop(t)})),_(b(e),"onTouchStart",(function(t){return C=w,e.handleDragStart(t)})),_(b(e),"onTouchEnd",(function(t){return C=w,e.handleDragStop(t)})),e}return t=p,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,a.addEvent)(e,w.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,a.removeEvent)(t,O.move,this.handleDrag),(0,a.removeEvent)(t,w.move,this.handleDrag),(0,a.removeEvent)(t,O.stop,this.handleDragStop),(0,a.removeEvent)(t,w.stop,this.handleDragStop),(0,a.removeEvent)(e,w.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current:s.default.findDOMNode(this)}},{key:"render",value:function(){return o.cloneElement(o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(o.Component);t.default=N,_(N,"displayName","DraggableCore"),_(N,"propTypes",{allowAnyClick:r.default.bool,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),_(N,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},1327:(e,t,n)=>{"use strict";var i=n(1997),o=i.default,r=i.DraggableCore;e.exports=o,e.exports.default=o,e.exports.DraggableCore=r},4688:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=h,t.addEvent=function(e,t,n,i){if(e){var o=l({capture:!0},i);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}},t.addUserSelectStyles=function(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&h(e.body,"react-draggable-transparent-selection")}},t.createCSSTransform=function(e,t){var n=d(e,t,"px");return u({},(0,r.browserPrefixToKey)("transform",r.default),n)},t.createSVGTransform=function(e,t){return d(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,o.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,o.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=d,t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,o.int)(n.paddingTop))-(0,o.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,o.int)(n.paddingLeft))-(0,o.int)(n.paddingRight)},t.matchesSelector=p,t.matchesSelectorAndParentsTo=function(e,t,n){var i=e;do{if(p(i,t))return!0;if(i===n)return!1;i=i.parentNode}while(i);return!1},t.offsetXYFromParent=function(e,t,n){var i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-i.left)/n,y:(e.clientY+t.scrollTop-i.top)/n}},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,o.int)(n.borderTopWidth))+(0,o.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,o.int)(n.borderLeftWidth))+(0,o.int)(n.borderRightWidth)},t.removeClassName=f,t.removeEvent=function(e,t,n,i){if(e){var o=l({capture:!0},i);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&f(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var o=n(136),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(2185));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="";function p(e,t){return c||(c=(0,o.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,o.isFunction)(e[t])}))),!!(0,o.isFunction)(e[c])&&e[c](t)}function d(e,t,n){var i=e.x,o=e.y,r="translate(".concat(i).concat(n,",").concat(o).concat(n,")");if(t){var s="".concat("string"==typeof t.x?t.x:t.x+n),a="".concat("string"==typeof t.y?t.y:t.y+n);r="translate(".concat(s,", ").concat(a,")")+r}return r}function h(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function f(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},2185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=o,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=i;var n=["Moz","Webkit","O","ms"];function i(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(i in r)return"";for(var s=0;s<n.length;s++)if(o(i,n[s])in r)return n[s];return""}function o(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,i=0;i<e.length;i++)n?(t+=e[i].toUpperCase(),n=!1):"-"===e[i]?n=!0:t+=e[i];return t}(e)):e}var r=i();t.default=r},1177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},3585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){var o=e.state,s=!(0,i.isNum)(o.lastX),a=r(e);return s?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-o.lastX,deltaY:n-o.lastY,lastX:o.lastX,lastY:o.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var s=e.props.bounds;s="string"==typeof s?s:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(s);var a=r(e);if("string"==typeof s){var l,u=a.ownerDocument,c=u.defaultView;if(!((l="parent"===s?a.parentNode:u.querySelector(s))instanceof c.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');var p=l,d=c.getComputedStyle(a),h=c.getComputedStyle(p);s={left:-a.offsetLeft+(0,i.int)(h.paddingLeft)+(0,i.int)(d.marginLeft),top:-a.offsetTop+(0,i.int)(h.paddingTop)+(0,i.int)(d.marginTop),right:(0,o.innerWidth)(p)-(0,o.outerWidth)(a)-a.offsetLeft+(0,i.int)(h.paddingRight)-(0,i.int)(d.marginRight),bottom:(0,o.innerHeight)(p)-(0,o.outerHeight)(a)-a.offsetTop+(0,i.int)(h.paddingBottom)-(0,i.int)(d.marginBottom)}}return(0,i.isNum)(s.right)&&(t=Math.min(t,s.right)),(0,i.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,i.isNum)(s.left)&&(t=Math.max(t,s.left)),(0,i.isNum)(s.top)&&(n=Math.max(n,s.top)),[t,n]},t.getControlPosition=function(e,t,n){var i="number"==typeof t?(0,o.getTouch)(e,t):null;if("number"==typeof t&&!i)return null;var s=r(n),a=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,o.offsetXYFromParent)(i||e,a,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var i=n(136),o=n(4688);function r(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},136:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var n=0,i=e.length;n<i;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},6499:(e,t,n)=>{"use strict";function i(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function o(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(o&&(o+=" "),o+=t);return o}n.r(t),n.d(t,{clsx:()=>o,default:()=>r});const r=o},4452:e=>{"use strict";var t={};function n(e,n,i){i||(i=Error);var o=function(e){var t,i;function o(t,i,o){return e.call(this,function(e,t,i){return"string"==typeof n?n:n(e,t,i)}(t,i,o))||this}return i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,o}(i);o.prototype.name=i.name,o.prototype.code=e,t[e]=o}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var o,r,s,a,l;if("string"==typeof t&&(r="not ",t.substr(0,r.length)===r)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(o," ").concat(i(t,"type"));else{var u=("number"!=typeof l&&(l=0),l+".".length>(a=e).length||-1===a.indexOf(".",l)?"argument":"property");s='The "'.concat(e,'" ').concat(u," ").concat(o," ").concat(i(t,"type"))}return s+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},7073:(e,t,n)=>{"use strict";var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var o=n(8051),r=n(2557);n(1285)(u,o);for(var s=i(r.prototype),a=0;a<s.length;a++){var l=s[a];u.prototype[l]||(u.prototype[l]=r.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||process.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5163:(e,t,n)=>{"use strict";e.exports=o;var i=n(7640);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(1285)(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},8051:(e,t,n)=>{"use strict";var i;e.exports=C,C.ReadableState=O,n(2699).EventEmitter;var o,r=function(e,t){return e.listeners(t).length},s=n(5010),a=n(8834).Buffer,l=n.g.Uint8Array||function(){},u=n(6602);o=u&&u.debuglog?u.debuglog("stream"):function(){};var c,p,d,h=n(6637),f=n(2262),g=n(7605).getHighWaterMark,m=n(4452).q,y=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,b=m.ERR_METHOD_NOT_IMPLEMENTED,S=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(1285)(C,s);var _=f.errorOrDestroy,w=["error","close","destroy","pause","resume"];function O(e,t,o){i=i||n(7073),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",o),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=n(214).s),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function C(e){if(i=i||n(7073),!(this instanceof C))return new C(e);var t=this instanceof i;this._readableState=new O(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function N(e,t,n,i,r){o("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,E(e)))}}(e,u);else if(r||(s=function(e,t){var n,i;return i=t,a.isBuffer(i)||i instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(u,t)),s)_(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),i)u.endEmitted?_(e,new S):I(e,u,t,!0);else if(u.ended)_(e,new v);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?I(e,u,t,!1):D(e,u)):I(e,u,t,!1)}else i||(u.reading=!1,D(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function I(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),D(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=f.destroy,C.prototype._undestroy=f.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=a.from(e,t),t=""),n=!0),N(this,e,t,!1,n)},C.prototype.unshift=function(e){return N(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){c||(c=n(214).s);var t=new c(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,o="";null!==i;)o+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var x=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(E,e))}function E(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function D(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(k,e,t))}function k(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function R(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function j(e){o("readable nexttick read 0"),e.read(0)}function A(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function V(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(L,t,e))}function L(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?V(this):T(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&V(this),null;var i,r=t.needReadable;return o("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",r=!0),t.ended||t.reading?o("reading or ended",r=!1):r&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(n,t))),null===(i=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&V(this)),null!==i&&this.emit("data",i),i},C.prototype._read=function(e){_(this,new b("_read()"))},C.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===process.stdout||e===process.stderr?f:a;function a(){o("onend"),e.end()}i.endEmitted?process.nextTick(s):n.once("end",s),e.on("unpipe",(function t(r,s){o("onunpipe"),r===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,o("cleanup"),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",t),n.removeListener("end",a),n.removeListener("end",f),n.removeListener("data",c),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(e,"data")&&(t.flowing=!0,M(e))}}(n);e.on("drain",l);var u=!1;function c(t){o("ondata");var r=e.write(t);o("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==U(i.pipes,e))&&!u&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(t){o("onerror",t),f(),e.removeListener("error",p),0===r(e,"error")&&_(e,t)}function d(){e.removeListener("finish",h),f()}function h(){o("onfinish"),e.removeListener("close",d),f()}function f(){o("unpipe"),n.unpipe(e)}return n.on("data",c),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",p),e.once("close",d),e.once("finish",h),e.emit("pipe",n),i.flowing||(o("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<o;r++)i[r].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?T(this):i.reading||process.nextTick(j,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(R,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(R,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(A,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){o("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var s=0;s<w.length;s++)e.on(w[s],this.emit.bind(this,w[s]));return this._read=function(t){o("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(1029)),p(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=F,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===d&&(d=n(352)),d(C,e,t)})},7640:(e,t,n)=>{"use strict";e.exports=c;var i=n(4452).q,o=i.ERR_METHOD_NOT_IMPLEMENTED,r=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n(7073);function u(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new r);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",p)}function p(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(1285)(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new o("_transform()"))},c.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var o=this._readableState;(i.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},2557:(e,t,n)=>{"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var o=i.callback;t.pendingcb--,o(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=C,C.WritableState=O;var r,s={deprecate:n(5803)},a=n(5010),l=n(8834).Buffer,u=n.g.Uint8Array||function(){},c=n(2262),p=n(7605).getHighWaterMark,d=n(4452).q,h=d.ERR_INVALID_ARG_TYPE,f=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,m=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,S=d.ERR_UNKNOWN_ENCODING,_=c.errorOrDestroy;function w(){}function O(e,t,r){o=o||n(7073),e=e||{},"boolean"!=typeof r&&(r=t instanceof o),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(process.nextTick(o,i),process.nextTick(E,e,t),e._writableState.errorEmitted=!0,_(e,i)):(o(i),e._writableState.errorEmitted=!0,_(e,i),E(e,t))}(e,n,i,t,o);else{var r=P(n)||e.destroyed;r||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),i?process.nextTick(I,e,n,r,o):I(e,n,r,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function C(e){var t=this instanceof(o=o||n(7073));if(!t&&!r.call(C,this))return new C(e);this._writableState=new O(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function N(e,t,n,i,o,r,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(o,t.onwrite):e._write(o,r,t.onwrite),t.sync=!1}function I(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),E(e,t)}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,r=new Array(o),s=t.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)r[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;r.allBuffers=l,N(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,p=n.callback;if(N(e,t,!1,t.objectMode?1:u.length,u,c,p),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),E(e,t)}))}function E(e,t){var n=P(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(1285)(C,a),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!r.call(this,e)||this===C&&e&&e._writableState instanceof O}})):r=function(e){return e instanceof this},C.prototype.pipe=function(){_(this,new m)},C.prototype.write=function(e,t,n){var i,o=this._writableState,r=!1,s=!o.objectMode&&(i=e,l.isBuffer(i)||i instanceof u);return s&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=w),o.ending?function(e,t){var n=new b;_(e,n),process.nextTick(t,n)}(this,n):(s||function(e,t,n,i){var o;return null===n?o=new v:"string"==typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(_(e,o),process.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,r=function(e,t,n,i,o,r){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,i,o);i!==s&&(n=!0,o="buffer",i=s)}var a=t.objectMode?1:i.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:o,isBuf:n,callback:r,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else N(e,t,!1,a,i,o,r);return u}(this,o,s,e,t,n)),r},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||x(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new f("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,E(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=c.destroy,C.prototype._undestroy=c.undestroy,C.prototype._destroy=function(e,t){t(e)}},1029:(e,t,n)=>{"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(9885),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),p=Symbol("handlePromise"),d=Symbol("stream");function h(e,t){return{value:e,done:t}}function f(e){var t=e[s];if(null!==t){var n=e[d].read();null!==n&&(e[c]=null,e[s]=null,e[a]=null,t(h(n,!1)))}}function g(e){process.nextTick(f,e)}var m=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(i={get stream(){return this[d]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[l]?n(e[l]):t(h(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[u]?n(h(void 0,!0)):t[p](n,i)}),i)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(h(o,!1));n=new Promise(this[p])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),o(i,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(h(void 0,!0))}))}))})),i),m);e.exports=function(e){var t,n=Object.create(y,(o(t={},d,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,u,{value:e._readableState.endEmitted,writable:!0}),o(t,p,{value:function(e,t){var i=n[d].read();i?(n[c]=null,n[s]=null,n[a]=null,e(h(i,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[c]=null,r(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[c]=null,n[s]=null,n[a]=null,t(e)),void(n[l]=e)}var i=n[s];null!==i&&(n[c]=null,n[s]=null,n[a]=null,i(h(void 0,!0))),n[u]=!0})),e.on("readable",g.bind(null,n)),n}},6637:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=n(8834).Buffer,a=n(4854).inspect,l=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,i,o=s.allocUnsafe(e>>>0),r=this.head,a=0;r;)t=r.data,n=o,i=a,s.prototype.copy.call(t,n,i),a+=r.data.length,r=r.next;return o}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var o=t.data,r=e>o.length?o.length:e;if(r===o.length?i+=o:i+=o.slice(0,e),0==(e-=r)){r===o.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(r));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var o=n.data,r=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,r),0==(e-=r)){r===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(r));break}++i}return this.length-=i,t}},{key:l,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&r(t.prototype,n),e}()},2262:e=>{"use strict";function t(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var r=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(i,this,e)):process.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?r._writableState?r._writableState.errorEmitted?process.nextTick(n,r):(r._writableState.errorEmitted=!0,process.nextTick(t,r,e)):process.nextTick(t,r,e):o?(process.nextTick(n,r),o(e)):process.nextTick(n,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},9885:(e,t,n)=>{"use strict";var i=n(4452).q.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,n,r){if("function"==typeof n)return e(t,null,n);n||(n={}),r=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];e.apply(this,i)}}}(r||o);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){a=!1,u=!0,s||r.call(t)},p=t._readableState&&t._readableState.endEmitted,d=function(){s=!1,p=!0,a||r.call(t)},h=function(e){r.call(t,e)},f=function(){var e;return s&&!p?(t._readableState&&t._readableState.ended||(e=new i),r.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new i),r.call(t,e)):void 0},g=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",f),t.req?g():t.on("request",g)):a&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",d),t.on("finish",c),!1!==n.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",f)}}},352:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},3495:(e,t,n)=>{"use strict";var i,o=n(4452).q,r=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e,t,o,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=n(9885)),i(e,{readable:t,writable:o},(function(e){if(e)return r(e);a=!0,r()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new s("pipe"))}}function u(e){e()}function c(e,t){return e.pipe(t)}function p(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,o=p(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new r("streams");var s=t.map((function(e,n){var r=n<t.length-1;return l(e,r,n>0,(function(e){i||(i=e),e&&s.forEach(u),r||(s.forEach(u),o(i))}))}));return t.reduce(c)}},7605:(e,t,n)=>{"use strict";var i=n(4452).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,o){var r=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,o,n);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new i(o?n:"highWaterMark",r);return Math.floor(r)}return e.objectMode?16:16384}}},5010:(e,t,n)=>{e.exports=n(2699).EventEmitter},9480:(e,t,n)=>{!function(e){e.parser=function(e,t){return new o(e,t)},e.SAXParser=o,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(t,n){if(!(this instanceof o))return new o(t,n);var r=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(r),r.q=r.c="",r.bufferCheckPosition=e.MAX_BUFFER_LENGTH,r.opt=n||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!t,r.noscript=!(!t&&!r.opt.noscript),r.state=w.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(u)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),C(r,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){T(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return P(n,"Cannot write after close. Assign an onready handler.");if(null===t)return T(n);"object"==typeof t&&(t=t.toString());for(var o=0,r="";r=V(t,o++),n.c=r,r;)switch(n.trackPosition&&(n.position++,"\n"===r?(n.line++,n.column=0):n.column++),n.state){case w.BEGIN:if(n.state=w.BEGIN_WHITESPACE,"\ufeff"===r)continue;F(n,r);continue;case w.BEGIN_WHITESPACE:F(n,r);continue;case w.TEXT:if(n.sawRoot&&!n.closedRoot){for(var s=o-1;r&&"<"!==r&&"&"!==r;)(r=V(t,o++))&&n.trackPosition&&(n.position++,"\n"===r?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(s,o-1)}"<"!==r||n.sawRoot&&n.closedRoot&&!n.strict?(f(r)||n.sawRoot&&!n.closedRoot||E(n,"Text data outside of root node."),"&"===r?n.state=w.TEXT_ENTITY:n.textNode+=r):(n.state=w.OPEN_WAKA,n.startTagPosition=n.position);continue;case w.SCRIPT:"<"===r?n.state=w.SCRIPT_ENDING:n.script+=r;continue;case w.SCRIPT_ENDING:"/"===r?n.state=w.CLOSE_TAG:(n.script+="<"+r,n.state=w.SCRIPT);continue;case w.OPEN_WAKA:if("!"===r)n.state=w.SGML_DECL,n.sgmlDecl="";else if(f(r));else if(y(c,r))n.state=w.OPEN_TAG,n.tagName=r;else if("/"===r)n.state=w.CLOSE_TAG,n.tagName="";else if("?"===r)n.state=w.PROC_INST,n.procInstName=n.procInstBody="";else{if(E(n,"Unencoded <"),n.startTagPosition+1<n.position){var a=n.position-n.startTagPosition;r=new Array(a).join(" ")+r}n.textNode+="<"+r,n.state=w.TEXT}continue;case w.SGML_DECL:"[CDATA["===(n.sgmlDecl+r).toUpperCase()?(N(n,"onopencdata"),n.state=w.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+r==="--"?(n.state=w.COMMENT,n.comment="",n.sgmlDecl=""):"DOCTYPE"===(n.sgmlDecl+r).toUpperCase()?(n.state=w.DOCTYPE,(n.doctype||n.sawRoot)&&E(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===r?(N(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=w.TEXT):g(r)?(n.state=w.SGML_DECL_QUOTED,n.sgmlDecl+=r):n.sgmlDecl+=r;continue;case w.SGML_DECL_QUOTED:r===n.q&&(n.state=w.SGML_DECL,n.q=""),n.sgmlDecl+=r;continue;case w.DOCTYPE:">"===r?(n.state=w.TEXT,N(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=r,"["===r?n.state=w.DOCTYPE_DTD:g(r)&&(n.state=w.DOCTYPE_QUOTED,n.q=r));continue;case w.DOCTYPE_QUOTED:n.doctype+=r,r===n.q&&(n.q="",n.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:n.doctype+=r,"]"===r?n.state=w.DOCTYPE:g(r)&&(n.state=w.DOCTYPE_DTD_QUOTED,n.q=r);continue;case w.DOCTYPE_DTD_QUOTED:n.doctype+=r,r===n.q&&(n.state=w.DOCTYPE_DTD,n.q="");continue;case w.COMMENT:"-"===r?n.state=w.COMMENT_ENDING:n.comment+=r;continue;case w.COMMENT_ENDING:"-"===r?(n.state=w.COMMENT_ENDED,n.comment=x(n.opt,n.comment),n.comment&&N(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+r,n.state=w.COMMENT);continue;case w.COMMENT_ENDED:">"!==r?(E(n,"Malformed comment"),n.comment+="--"+r,n.state=w.COMMENT):n.state=w.TEXT;continue;case w.CDATA:"]"===r?n.state=w.CDATA_ENDING:n.cdata+=r;continue;case w.CDATA_ENDING:"]"===r?n.state=w.CDATA_ENDING_2:(n.cdata+="]"+r,n.state=w.CDATA);continue;case w.CDATA_ENDING_2:">"===r?(n.cdata&&N(n,"oncdata",n.cdata),N(n,"onclosecdata"),n.cdata="",n.state=w.TEXT):"]"===r?n.cdata+="]":(n.cdata+="]]"+r,n.state=w.CDATA);continue;case w.PROC_INST:"?"===r?n.state=w.PROC_INST_ENDING:f(r)?n.state=w.PROC_INST_BODY:n.procInstName+=r;continue;case w.PROC_INST_BODY:if(!n.procInstBody&&f(r))continue;"?"===r?n.state=w.PROC_INST_ENDING:n.procInstBody+=r;continue;case w.PROC_INST_ENDING:">"===r?(N(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=w.TEXT):(n.procInstBody+="?"+r,n.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:y(p,r)?n.tagName+=r:(D(n),">"===r?j(n):"/"===r?n.state=w.OPEN_TAG_SLASH:(f(r)||E(n,"Invalid character in tag name"),n.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:">"===r?(j(n,!0),A(n)):(E(n,"Forward-slash in opening tag not followed by >"),n.state=w.ATTRIB);continue;case w.ATTRIB:if(f(r))continue;">"===r?j(n):"/"===r?n.state=w.OPEN_TAG_SLASH:y(c,r)?(n.attribName=r,n.attribValue="",n.state=w.ATTRIB_NAME):E(n,"Invalid attribute name");continue;case w.ATTRIB_NAME:"="===r?n.state=w.ATTRIB_VALUE:">"===r?(E(n,"Attribute without value"),n.attribValue=n.attribName,R(n),j(n)):f(r)?n.state=w.ATTRIB_NAME_SAW_WHITE:y(p,r)?n.attribName+=r:E(n,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if("="===r)n.state=w.ATTRIB_VALUE;else{if(f(r))continue;E(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",N(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===r?j(n):y(c,r)?(n.attribName=r,n.state=w.ATTRIB_NAME):(E(n,"Invalid attribute name"),n.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(f(r))continue;g(r)?(n.q=r,n.state=w.ATTRIB_VALUE_QUOTED):(E(n,"Unquoted attribute value"),n.state=w.ATTRIB_VALUE_UNQUOTED,n.attribValue=r);continue;case w.ATTRIB_VALUE_QUOTED:if(r!==n.q){"&"===r?n.state=w.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=r;continue}R(n),n.q="",n.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:f(r)?n.state=w.ATTRIB:">"===r?j(n):"/"===r?n.state=w.OPEN_TAG_SLASH:y(c,r)?(E(n,"No whitespace between attributes"),n.attribName=r,n.attribValue="",n.state=w.ATTRIB_NAME):E(n,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(!m(r)){"&"===r?n.state=w.ATTRIB_VALUE_ENTITY_U:n.attribValue+=r;continue}R(n),">"===r?j(n):n.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(n.tagName)">"===r?A(n):y(p,r)?n.tagName+=r:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=w.SCRIPT):(f(r)||E(n,"Invalid tagname in closing tag"),n.state=w.CLOSE_TAG_SAW_WHITE);else{if(f(r))continue;v(c,r)?n.script?(n.script+="</"+r,n.state=w.SCRIPT):E(n,"Invalid tagname in closing tag."):n.tagName=r}continue;case w.CLOSE_TAG_SAW_WHITE:if(f(r))continue;">"===r?A(n):E(n,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var l,u;switch(n.state){case w.TEXT_ENTITY:l=w.TEXT,u="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:l=w.ATTRIB_VALUE_QUOTED,u="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:l=w.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===r?(n[u]+=M(n),n.entity="",n.state=l):y(n.entity.length?h:d,r)?n.entity+=r:(E(n,"Invalid character in entity name"),n[u]+="&"+n.entity+r,n.entity="",n.state=l);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),o=0,r=0,s=i.length;r<s;r++){var a=t[i[r]].length;if(a>n)switch(i[r]){case"textNode":I(t);break;case"cdata":N(t,"oncdata",t.cdata),t.cdata="";break;case"script":N(t,"onscript",t.script),t.script="";break;default:P(t,"Max buffer length exceeded: "+i[r])}o=Math.max(o,a)}var l=e.MAX_BUFFER_LENGTH-o;t.bufferCheckPosition=l+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;I(e=this),""!==e.cdata&&(N(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(N(e,"onscript",e.script),e.script="")}};try{t=n(4851).Stream}catch(e){t=function(){}}var r=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,n){if(!(this instanceof s))return new s(e,n);t.apply(this),this._parser=new o(e,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(e){i.emit("error",e),i._parser.error=null},this._decoder=null,r.forEach((function(e){Object.defineProperty(i,"on"+e,{get:function(){return i._parser["on"+e]},set:function(t){if(!t)return i.removeAllListeners(e),i._parser["on"+e]=t,t;i.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(214).s;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,n){var i=this;return i._parser["on"+e]||-1===r.indexOf(e)||(i._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),t.prototype.on.call(i,e,n)};var a="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",u={xml:a,xmlns:l},c=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function g(e){return'"'===e||"'"===e}function m(e){return">"===e||f(e)}function y(e,t){return e.test(t)}function v(e,t){return!y(e,t)}var b,S,_,w=0;for(var O in e.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],i="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=i})),e.STATE)e.STATE[e.STATE[O]]=O;function C(e,t,n){e[t]&&e[t](n)}function N(e,t,n){e.textNode&&I(e),C(e,t,n)}function I(e){e.textNode=x(e.opt,e.textNode),e.textNode&&C(e,"ontext",e.textNode),e.textNode=""}function x(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function P(e,t){return I(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,C(e,"onerror",t),e}function T(e){return e.sawRoot&&!e.closedRoot&&E(e,"Unclosed root tag"),e.state!==w.BEGIN&&e.state!==w.BEGIN_WHITESPACE&&e.state!==w.TEXT&&P(e,"Unexpected end"),I(e),e.c="",e.closed=!0,C(e,"onend"),o.call(e,e.strict,e.opt),e}function E(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&P(e,t)}function D(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,N(e,"onopentagstart",n)}function k(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],o=n[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function R(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=k(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==a)E(e,"xml: prefix must be bound to "+a+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==l)E(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var o=e.tag,r=e.tags[e.tags.length-1]||e;o.ns===r.ns&&(o.ns=Object.create(r.ns)),o.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,N(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function j(e,t){if(e.opt.xmlns){var n=e.tag,i=k(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(E(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var o=e.tags[e.tags.length-1]||e;n.ns&&o.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){N(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var r=0,s=e.attribList.length;r<s;r++){var a=e.attribList[r],l=a[0],u=a[1],c=k(l,!0),p=c.prefix,d=c.local,h=""===p?"":n.ns[p]||"",f={name:l,value:u,prefix:p,local:d,uri:h};p&&"xmlns"!==p&&!h&&(E(e,"Unbound namespace prefix: "+JSON.stringify(p)),f.uri=p),e.tag.attributes[l]=f,N(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),N(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=w.TEXT:e.state=w.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function A(e){if(!e.tagName)return E(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=w.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=w.SCRIPT);N(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var i=n;t--&&e.tags[t].name!==i;)E(e,"Unexpected close tag");if(t<0)return E(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=w.TEXT);e.tagName=n;for(var o=e.tags.length;o-- >t;){var r=e.tag=e.tags.pop();e.tagName=e.tag.name,N(e,"onclosetag",e.tagName);var s={};for(var a in r.ns)s[a]=r.ns[a];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&r.ns!==l.ns&&Object.keys(r.ns).forEach((function(t){var n=r.ns[t];N(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=w.TEXT}function M(e){var t,n=e.entity,i=n.toLowerCase(),o="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:("#"===(n=i).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),o=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),o=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||o.toLowerCase()!==n?(E(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function F(e,t){"<"===t?(e.state=w.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(E(e,"Non-whitespace before first tag."),e.textNode=t,e.state=w.TEXT)}function V(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}w=e.STATE,String.fromCodePoint||(b=String.fromCharCode,S=Math.floor,_=function(){var e,t,n=16384,i=[],o=-1,r=arguments.length;if(!r)return"";for(var s="";++o<r;){var a=Number(arguments[o]);if(!isFinite(a)||a<0||a>1114111||S(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?i.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,i.push(e,t)),(o+1===r||i.length>n)&&(s+=b.apply(null,i),i.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:_,configurable:!0,writable:!0}):String.fromCodePoint=_)}(t)},6985:function(e,t,n){!function(e,t){"use strict";if(!e.setImmediate){var n,i,o,r,s,a=1,l={},u=!1,c=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(r="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&h(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(r+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){o.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,n=function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(h,0,e)},p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var o={callback:e,args:t};return l[a]=o,n(a),a++},p.clearImmediate=d}function d(e){delete l[e]}function h(e){if(u)setTimeout(h,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),u=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)},4851:(e,t,n)=>{e.exports=o;var i=n(2699).EventEmitter;function o(){i.call(this)}n(1285)(o,i),o.Readable=n(8051),o.Writable=n(2557),o.Duplex=n(7073),o.Transform=n(7640),o.PassThrough=n(5163),o.finished=n(9885),o.pipeline=n(3495),o.Stream=o,o.prototype.pipe=function(e,t){var n=this;function o(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",o),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",o),e.removeListener("drain",r),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},214:(e,t,n)=>{"use strict";var i=n(7805).Buffer,o=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=p,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},r.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var o=s(t[i]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--i<n||-2===o?0:(o=s(t[i]))>=0?(o>0&&(e.lastNeed=o-2),o):--i<n||-2===o?0:(o=s(t[i]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},7805:(e,t,n)=>{var i=n(8834),o=i.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=s),s.prototype=Object.create(o.prototype),r(o,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},173:function(e,t,n){var i=void 0!==n.g&&n.g||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(6985),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==n.g&&n.g.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==n.g&&n.g.clearImmediate||this&&this.clearImmediate},5803:(e,t,n)=>{function i(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},5310:(e,t,n)=>{var i;!function(){function o(e,t,n){return e.call.apply(e.bind,arguments)}function r(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function s(e,t,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:r).apply(null,arguments)}var a=Date.now||function(){return+new Date};function l(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var u=!!window.FontFace;function c(e,t,n,i){if(t=e.c.createElement(t),n)for(var o in n)n.hasOwnProperty(o)&&("style"==o?t.style.cssText=n[o]:t.setAttribute(o,n[o]));return i&&t.appendChild(e.c.createTextNode(i)),t}function p(e,t,n){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t,n){t=t||[],n=n||[];for(var i=e.className.split(/\s+/),o=0;o<t.length;o+=1){for(var r=!1,s=0;s<i.length;s+=1)if(t[o]===i[s]){r=!0;break}r||i.push(t[o])}for(t=[],o=0;o<i.length;o+=1){for(r=!1,s=0;s<n.length;s+=1)if(i[o]===n[s]){r=!0;break}r||t.push(i[o])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(e,t){for(var n=e.className.split(/\s+/),i=0,o=n.length;i<o;i++)if(n[i]==t)return!0;return!1}function g(e,t,n){function i(){a&&o&&r&&(a(s),a=null)}t=c(e,"link",{rel:"stylesheet",href:t,media:"all"});var o=!1,r=!0,s=null,a=n||null;u?(t.onload=function(){o=!0,i()},t.onerror=function(){o=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout((function(){o=!0,i()}),0),p(e,"head",t)}function m(e,t,n,i){var o=e.c.getElementsByTagName("head")[0];if(o){var r=c(e,"script",{src:t}),s=!1;return r.onload=r.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&o.removeChild(r))},o.appendChild(r),setTimeout((function(){s||(s=!0,n&&n(Error("Script load timeout")))}),i||5e3),r}return null}function y(){this.a=0,this.c=null}function v(e){return e.a++,function(){e.a--,S(e)}}function b(e,t){e.c=t,S(e)}function S(e){0==e.a&&e.c&&(e.c(),e.c=null)}function _(e){this.a=e||"-"}function w(e,t){this.c=e,this.f=4,this.a="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function O(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var i=e[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?t.push("'"+i+"'"):t.push(i)}return t.join(",")}function C(e){return e.a+e.f}function N(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function I(e){var t=4,n="n",i=null;return e&&((i=e.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=e.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?t=7:/[1-9]00/.test(i[1])&&(t=parseInt(i[1].substr(0,1),10)))),n+t}function x(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new _("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function P(e){if(e.g){var t=f(e.f,e.a.c("wf","active")),n=[],i=[e.a.c("wf","loading")];t||n.push(e.a.c("wf","inactive")),h(e.f,n,i)}T(e,"inactive")}function T(e,t,n){e.j&&e.h[t]&&(n?e.h[t](n.c,C(n)):e.h[t]())}function E(){this.c={}}function D(e,t){this.c=e,this.f=t,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function k(e){p(e.c,"body",e.a)}function R(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+O(e.c)+";font-style:"+N(e)+";font-weight:"+e.f+"00;"}function j(e,t,n,i,o,r){this.g=e,this.j=t,this.a=i,this.c=n,this.f=o||3e3,this.h=r||void 0}function A(e,t,n,i,o,r,s){this.v=e,this.B=t,this.c=n,this.a=i,this.s=s||"BESbswy",this.f={},this.w=o||3e3,this.u=r||null,this.m=this.j=this.h=this.g=null,this.g=new D(this.c,this.s),this.h=new D(this.c,this.s),this.j=new D(this.c,this.s),this.m=new D(this.c,this.s),e=R(e=new w(this.a.c+",serif",C(this.a))),this.g.a.style.cssText=e,e=R(e=new w(this.a.c+",sans-serif",C(this.a))),this.h.a.style.cssText=e,e=R(e=new w("serif",C(this.a))),this.j.a.style.cssText=e,e=R(e=new w("sans-serif",C(this.a))),this.m.a.style.cssText=e,k(this.g),k(this.h),k(this.j),k(this.m)}_.prototype.c=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},j.prototype.start=function(){var e=this.c.o.document,t=this,n=a(),i=new Promise((function(i,o){!function r(){a()-n>=t.f?o():e.fonts.load(function(e){return N(e)+" "+e.f+"00 300px "+O(e.c)}(t.a),t.h).then((function(e){1<=e.length?i():setTimeout(r,25)}),(function(){o()}))}()})),o=null,r=new Promise((function(e,n){o=setTimeout(n,t.f)}));Promise.race([r,i]).then((function(){o&&(clearTimeout(o),o=null),t.g(t.a)}),(function(){t.j(t.a)}))};var M={D:"serif",C:"sans-serif"},F=null;function V(){if(null===F){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);F=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return F}function L(e,t,n){for(var i in M)if(M.hasOwnProperty(i)&&t===e.f[M[i]]&&n===e.f[M[i]])return!0;return!1}function U(e){var t,n=e.g.a.offsetWidth,i=e.h.a.offsetWidth;(t=n===e.f.serif&&i===e.f["sans-serif"])||(t=V()&&L(e,n,i)),t?a()-e.A>=e.w?V()&&L(e,n,i)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?B(e,e.v):B(e,e.B):function(e){setTimeout(s((function(){U(this)}),e),50)}(e):B(e,e.v)}function B(e,t){setTimeout(s((function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),t(this.a)}),e),0)}function W(e,t,n){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=n}A.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),U(this)};var z=null;function q(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&h(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),T(e,"active")):P(e.a))}function H(e){this.j=e,this.a=new E,this.h=0,this.f=this.g=!0}function $(e,t,n,i,o){var r=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=o||null,a=i||{};if(0===n.length&&r)P(t.a);else{t.f+=n.length,r&&(t.j=r);var l,u=[];for(l=0;l<n.length;l++){var c=n[l],p=a[c.c],d=t.a,f=c;if(d.g&&h(d.f,[d.a.c("wf",f.c,C(f).toString(),"loading")]),T(d,"fontloading",f),d=null,null===z)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=f?42<parseInt(f[1],10):!g}else z=!1;d=z?new j(s(t.g,t),s(t.h,t),t.c,c,t.s,p):new A(s(t.g,t),s(t.h,t),t.c,c,t.s,e,p),u.push(d)}for(l=0;l<u.length;l++)u[l].start()}}),0)}function G(e,t){this.c=e,this.a=t}function X(e,t){this.c=e,this.a=t}function Y(e,t){this.c=e||J,this.a=[],this.f=[],this.g=t||""}W.prototype.g=function(e){var t=this.a;t.g&&h(t.f,[t.a.c("wf",e.c,C(e).toString(),"active")],[t.a.c("wf",e.c,C(e).toString(),"loading"),t.a.c("wf",e.c,C(e).toString(),"inactive")]),T(t,"fontactive",e),this.m=!0,q(this)},W.prototype.h=function(e){var t=this.a;if(t.g){var n=f(t.f,t.a.c("wf",e.c,C(e).toString(),"active")),i=[],o=[t.a.c("wf",e.c,C(e).toString(),"loading")];n||i.push(t.a.c("wf",e.c,C(e).toString(),"inactive")),h(t.f,i,o)}T(t,"fontinactive",e),q(this)},H.prototype.load=function(e){this.c=new l(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,n){var i=[],o=n.timeout;!function(e){e.g&&h(e.f,[e.a.c("wf","loading")]),T(e,"loading")}(t),i=function(e,t,n){var i,o=[];for(i in t)if(t.hasOwnProperty(i)){var r=e.c[i];r&&o.push(r(t[i],n))}return o}(e.a,n,e.c);var r=new W(e.c,t,o);for(e.h=i.length,t=0,n=i.length;t<n;t++)i[t].load((function(t,n,i){$(e,r,t,n,i)}))}(this,new x(this.c,e),e)},G.prototype.load=function(e){function t(){if(r["__mti_fntLst"+i]){var n,o=r["__mti_fntLst"+i](),s=[];if(o)for(var a=0;a<o.length;a++){var l=o[a].fontfamily;null!=o[a].fontStyle&&null!=o[a].fontWeight?(n=o[a].fontStyle+o[a].fontWeight,s.push(new w(l,n))):s.push(new w(l))}e(s)}else setTimeout((function(){t()}),50)}var n=this,i=n.a.projectId,o=n.a.version;if(i){var r=n.c.o;m(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(o?"?v="+o:""),(function(o){o?e([]):(r["__MonotypeConfiguration__"+i]=function(){return n.a},t())})).id="__MonotypeAPIScript__"+i}else e([])},X.prototype.load=function(e){var t,n,i=this.a.urls||[],o=this.a.families||[],r=this.a.testStrings||{},s=new y;for(t=0,n=i.length;t<n;t++)g(this.c,i[t],v(s));var a=[];for(t=0,n=o.length;t<n;t++)if((i=o[t].split(":"))[1])for(var l=i[1].split(","),u=0;u<l.length;u+=1)a.push(new w(i[0],l[u]));else a.push(new w(i[0]));b(s,(function(){e(a,r)}))};var J="https://fonts.googleapis.com/css";function K(e){this.f=e,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},Z={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ee={i:"i",italic:"i",n:"n",normal:"n"},te=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ne(e,t){this.c=e,this.a=t}var ie={Arimo:!0,Cousine:!0,Tinos:!0};function oe(e,t){this.c=e,this.a=t}function re(e,t){this.c=e,this.f=t,this.a=[]}ne.prototype.load=function(e){var t=new y,n=this.c,i=new Y(this.a.api,this.a.text),o=this.a.families;!function(e,t){for(var n=t.length,i=0;i<n;i++){var o=t[i].split(":");3==o.length&&e.f.push(o.pop());var r="";2==o.length&&""!=o[1]&&(r=":"),e.a.push(o.join(r))}}(i,o);var r=new K(o);!function(e){for(var t=e.f.length,n=0;n<t;n++){var i=e.f[n].split(":"),o=i[0].replace(/\+/g," "),r=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,l=(a=a.split(",")).length,u=0;u<l;u++){var c;if((c=a[u]).match(/^[\w-]+$/))if(null==(p=te.exec(c.toLowerCase())))c="";else{if(c=null==(c=p[2])||""==c?"n":ee[c],null==(p=p[1])||""==p)p="4";else var p=Z[p]||(isNaN(p)?"4":p.substr(0,1));c=[c,p].join("")}else c="";c&&s.push(c)}0<s.length&&(r=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=Q[i[0]])&&(e.c[o]=i))}for(e.c[o]||(i=Q[o])&&(e.c[o]=i),i=0;i<r.length;i+=1)e.a.push(new w(o,r[i]))}}(r),g(n,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,n=[],i=0;i<t;i++)n.push(e.a[i].replace(/ /g,"+"));return t=e.c+"?family="+n.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(i),v(t)),b(t,(function(){e(r.a,r.c,ie)}))},oe.prototype.load=function(e){var t=this.a.id,n=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var i=[],o=0;o<t.length;o+=2)for(var r=t[o],s=t[o+1],a=0;a<s.length;a++)i.push(new w(r,s[a]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(i)}}),2e3):e([])},re.prototype.load=function(e){var t=this.f.id,n=this.c.o,i=this;t?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[t]=function(t,n){for(var o=0,r=n.fonts.length;o<r;++o){var s=n.fonts[o];i.a.push(new w(s.name,I("font-weight:"+s.weight+";font-style:"+s.style)))}e(i.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var se=new H(window);se.a.c.custom=function(e,t){return new X(t,e)},se.a.c.fontdeck=function(e,t){return new re(t,e)},se.a.c.monotype=function(e,t){return new G(t,e)},se.a.c.typekit=function(e,t){return new oe(t,e)},se.a.c.google=function(e,t){return new ne(t,e)};var ae={load:s(se.load,se)};void 0===(i=function(){return ae}.call(t,n,t,e))||(e.exports=i)}()},2623:function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},9605:function(e,t,n){(function(){"use strict";var e,i,o,r,s,a={}.hasOwnProperty;e=n(9742),i=n(4433).defaults,r=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},s=function(e){return"<![CDATA["+o(e)+"]]>"},o=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,n,o;for(t in this.options={},n=i[.2])a.call(n,t)&&(o=n[t],this.options[t]=o);for(t in e)a.call(e,t)&&(o=e[t],this.options[t]=o)}return t.prototype.buildObject=function(t){var n,o,l,u,c,p;return n=this.options.attrkey,o=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===i[.2].rootName?t=t[c=Object.keys(t)[0]]:c=this.options.rootName,p=this,l=function(e,t){var i,u,c,d,h,f;if("object"!=typeof t)p.options.cdata&&r(t)?e.raw(s(t)):e.txt(t);else if(Array.isArray(t)){for(d in t)if(a.call(t,d))for(h in u=t[d])c=u[h],e=l(e.ele(h),c).up()}else for(h in t)if(a.call(t,h))if(u=t[h],h===n){if("object"==typeof u)for(i in u)f=u[i],e=e.att(i,f)}else if(h===o)e=p.options.cdata&&r(u)?e.raw(s(u)):e.txt(u);else if(Array.isArray(u))for(d in u)a.call(u,d)&&(e="string"==typeof(c=u[d])?p.options.cdata&&r(c)?e.ele(h).raw(s(c)).up():e.ele(h,c).up():l(e.ele(h),c).up());else"object"==typeof u?e=l(e.ele(h),u).up():"string"==typeof u&&p.options.cdata&&r(u)?e=e.ele(h).raw(s(u)).up():(null==u&&(u=""),e=e.ele(h,u.toString()).up());return e},u=e.create(c,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(u,t).end(this.options.renderOpts)},t}()}).call(this)},4433:function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},4984:function(e,t,n){(function(){"use strict";var e,i,o,r,s,a,l,u,c=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;l=n(9480),o=n(2699),e=n(2623),a=n(9701),u=n(173).setImmediate,i=n(4433).defaults,r=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},s=function(e,t,n){var i,o;for(i=0,o=e.length;i<o;i++)t=(0,e[i])(t,n);return t},t.Parser=function(n){function o(e){var n,o,r;if(this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(n in this.options={},o=i[.2])p.call(o,n)&&(r=o[n],this.options[n]=r);for(n in e)p.call(e,n)&&(r=e[n],this.options[n]=r);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(e,t){for(var n in t)p.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(o,n),o.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),u(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},o.prototype.assignOrPush=function(e,t,n){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(n)):this.options.explicitArray?e[t]=[n]:e[t]=n},o.prototype.reset=function(){var e,t,n,i,o;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(o=this,function(e){if(o.saxParser.resume(),!o.saxParser.errThrown)return o.saxParser.errThrown=!0,o.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,i=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(o){var r,a,l,u,c;if((l={})[t]="",!n.options.ignoreAttrs)for(r in c=o.attributes)p.call(c,r)&&(e in l||n.options.mergeAttrs||(l[e]={}),a=n.options.attrValueProcessors?s(n.options.attrValueProcessors,o.attributes[r],r):o.attributes[r],u=n.options.attrNameProcessors?s(n.options.attrNameProcessors,r):r,n.options.mergeAttrs?n.assignOrPush(l,u,a):l[e][u]=a);return l["#name"]=n.options.tagNameProcessors?s(n.options.tagNameProcessors,o.name):o.name,n.options.xmlns&&(l[n.options.xmlnskey]={uri:o.uri,local:o.local}),i.push(l)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,o,a,l,u,c,d,h,f,g;if(c=i.pop(),u=c["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete c["#name"],!0===c.cdata&&(n=c.cdata,delete c.cdata),f=i[i.length-1],c[t].match(/^\s*$/)&&!n?(o=c[t],delete c[t]):(e.options.trim&&(c[t]=c[t].trim()),e.options.normalize&&(c[t]=c[t].replace(/\s{2,}/g," ").trim()),c[t]=e.options.valueProcessors?s(e.options.valueProcessors,c[t],u):c[t],1===Object.keys(c).length&&t in c&&!e.EXPLICIT_CHARKEY&&(c=c[t])),r(c)&&(c=""!==e.options.emptyTag?e.options.emptyTag:o),null!=e.options.validator&&(g="/"+function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)l=i[e],n.push(l["#name"]);return n}().concat(u).join("/"),function(){var t;try{c=e.options.validator(g,f&&f[u],c)}catch(n){return t=n,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof c)if(e.options.preserveChildrenOrder){if(f){for(a in f[e.options.childkey]=f[e.options.childkey]||[],d={},c)p.call(c,a)&&(d[a]=c[a]);f[e.options.childkey].push(d),delete c["#name"],1===Object.keys(c).length&&t in c&&!e.EXPLICIT_CHARKEY&&(c=c[t])}}else l={},e.options.attrkey in c&&(l[e.options.attrkey]=c[e.options.attrkey],delete c[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in c&&(l[e.options.charkey]=c[e.options.charkey],delete c[e.options.charkey]),Object.getOwnPropertyNames(c).length>0&&(l[e.options.childkey]=c),c=l;return i.length>0?e.assignOrPush(f,u,c):(e.options.explicitRoot&&(h=c,(c={})[u]=h),e.resultObject=c,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(e){return function(n){var o,r;if(r=i[i.length-1])return r[t]+=n,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(r[e.options.childkey]=r[e.options.childkey]||[],(o={"#name":"__text__"})[t]=n,e.options.normalize&&(o[t]=o[t].replace(/\s{2,}/g," ").trim()),r[e.options.childkey].push(o)),r}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(e){var t;if(t=n(e))return t.cdata=!0}},o.prototype.parseString=function(t,n){var i;null!=n&&"function"==typeof n&&(this.on("end",(function(e){return this.reset(),n(null,e)})),this.on("error",(function(e){return this.reset(),n(e)})));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,u(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(i=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",i),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw i}},o.prototype.parseStringPromise=function(e){return new Promise((t=this,function(n,i){return t.parseString(e,(function(e,t){return e?i(e):n(t)}))}));var t},o}(o),t.parseString=function(e,n,i){var o,r;return null!=i?("function"==typeof i&&(o=i),"object"==typeof n&&(r=n)):("function"==typeof n&&(o=n),r={}),new t.Parser(r).parseString(e,o)},t.parseStringPromise=function(e,n){var i;return"object"==typeof n&&(i=n),new t.Parser(i).parseStringPromise(e)}}).call(this)},9701:function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},3401:function(e,t,n){(function(){"use strict";var e,i,o,r,s={}.hasOwnProperty;i=n(4433),e=n(9605),o=n(4984),r=n(9701),t.defaults=i.defaults,t.processors=r,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,Error),t}(),t.Builder=e.Builder,t.Parser=o.Parser,t.parseString=o.parseString,t.parseStringPromise=o.parseStringPromise}).call(this)},6959:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},7766:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},956:function(e){(function(){var t,n,i,o,r,s,a,l=[].slice,u={}.hasOwnProperty;t=function(){var e,t,n,i,o,s;if(s=arguments[0],o=2<=arguments.length?l.call(arguments,1):[],r(Object.assign))Object.assign.apply(null,arguments);else for(e=0,n=o.length;e<n;e++)if(null!=(i=o[e]))for(t in i)u.call(i,t)&&(s[t]=i[t]);return s},r=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},s=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},i=function(e){return r(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},o=function(e){var t;if(i(e))return!e.length;for(t in e)if(u.call(e,t))return!1;return!0},a=function(e){var t,n;return s(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},n=function(e){return r(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=r,e.exports.isObject=s,e.exports.isArray=i,e.exports.isEmpty=o,e.exports.isPlainObject=a,e.exports.getValue=n}).call(this)},314:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},8680:function(e,t,n){(function(){var t;t=n(7766),n(9886),e.exports=function(){function e(e,n,i){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(i),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value},e}()}).call(this)},1983:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;t=n(7766),i=n(8092),e.exports=function(e){function n(e,i){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(i)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},8092:function(e,t,n){(function(){var t,i={}.hasOwnProperty;t=n(9886),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.value=""}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},t}(t)}).call(this)},1034:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;t=n(7766),i=n(8092),e.exports=function(e){function n(e,i){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(i)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},12:function(e,t,n){(function(){var t,i;t=n(5769),i=n(9234),e.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new i(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()}).call(this)},5769:function(e){(function(){e.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}).call(this)},6889:function(e){(function(){e.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},9234:function(e){(function(){e.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}).call(this)},2464:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;i=n(9886),t=n(7766),e.exports=function(e){function n(e,i,o,r,s,a){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==o)throw new Error("Missing DTD attribute name. "+this.debugInfo(i));if(!r)throw new Error("Missing DTD attribute type. "+this.debugInfo(i));if(!s)throw new Error("Missing DTD attribute default. "+this.debugInfo(i));if(0!==s.indexOf("#")&&(s="#"+s),!s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(i));if(a&&!s.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(i));this.elementName=this.stringify.name(i),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(o),this.attributeType=this.stringify.dtdAttType(r),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=s}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},5132:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;i=n(9886),t=n(7766),e.exports=function(e){function n(e,i,o){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.name(i),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(o)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},521:function(e,t,n){(function(){var t,i,o,r={}.hasOwnProperty;o=n(956).isObject,i=n(9886),t=n(7766),e.exports=function(e){function n(e,i,r,s){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD entity name. "+this.debugInfo(r));if(null==s)throw new Error("Missing DTD entity value. "+this.debugInfo(r));if(this.pe=!!i,this.name=this.stringify.name(r),this.type=t.EntityDeclaration,o(s)){if(!s.pubID&&!s.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(r));if(s.pubID&&!s.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(r));if(this.internal=!1,null!=s.pubID&&(this.pubID=this.stringify.dtdPubID(s.pubID)),null!=s.sysID&&(this.sysID=this.stringify.dtdSysID(s.sysID)),null!=s.nData&&(this.nData=this.stringify.dtdNData(s.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(r))}else this.value=this.stringify.dtdEntityValue(s),this.internal=!0}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return null}}),n.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},9253:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;i=n(9886),t=n(7766),e.exports=function(e){function n(e,i,o){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD notation name. "+this.debugInfo(i));if(!o.pubID&&!o.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(i));this.name=this.stringify.name(i),this.type=t.NotationDeclaration,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},4274:function(e,t,n){(function(){var t,i,o,r={}.hasOwnProperty;o=n(956).isObject,i=n(9886),t=n(7766),e.exports=function(e){function n(e,i,r,s){var a;n.__super__.constructor.call(this,e),o(i)&&(i=(a=i).version,r=a.encoding,s=a.standalone),i||(i="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(i),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=s&&(this.standalone=this.stringify.xmlStandalone(s))}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},4732:function(e,t,n){(function(){var t,i,o,r,s,a,l,u,c={}.hasOwnProperty;u=n(956).isObject,l=n(9886),t=n(7766),i=n(2464),r=n(521),o=n(5132),s=n(9253),a=n(7780),e.exports=function(e){function n(e,i,o){var r,s,a,l,c,p;if(n.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(s=0,a=(l=e.children).length;s<a;s++)if((r=l[s]).type===t.Element){this.name=r.name;break}this.documentObject=e,u(i)&&(i=(c=i).pubID,o=c.sysID),null==o&&(o=(p=[i,o])[0],i=p[1]),null!=i&&(this.pubID=this.stringify.dtdPubID(i)),null!=o&&(this.sysID=this.stringify.dtdSysID(o))}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"entities",{get:function(){var e,n,i,o,r;for(o={},n=0,i=(r=this.children).length;n<i;n++)(e=r[n]).type!==t.EntityDeclaration||e.pe||(o[e.name]=e);return new a(o)}}),Object.defineProperty(n.prototype,"notations",{get:function(){var e,n,i,o,r;for(o={},n=0,i=(r=this.children).length;n<i;n++)(e=r[n]).type===t.NotationDeclaration&&(o[e.name]=e);return new a(o)}}),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),n.prototype.element=function(e,t){var n;return n=new o(this,e,t),this.children.push(n),this},n.prototype.attList=function(e,t,n,o,r){var s;return s=new i(this,e,t,n,o,r),this.children.push(s),this},n.prototype.entity=function(e,t){var n;return n=new r(this,!1,e,t),this.children.push(n),this},n.prototype.pEntity=function(e,t){var n;return n=new r(this,!0,e,t),this.children.push(n),this},n.prototype.notation=function(e,t){var n;return n=new s(this,e,t),this.children.push(n),this},n.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},n.prototype.ele=function(e,t){return this.element(e,t)},n.prototype.att=function(e,t,n,i,o){return this.attList(e,t,n,i,o)},n.prototype.ent=function(e,t){return this.entity(e,t)},n.prototype.pent=function(e,t){return this.pEntity(e,t)},n.prototype.not=function(e,t){return this.notation(e,t)},n.prototype.up=function(){return this.root()||this.documentObject},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId},n}(l)}).call(this)},5945:function(e,t,n){(function(){var t,i,o,r,s,a,l,u={}.hasOwnProperty;l=n(956).isPlainObject,o=n(6889),i=n(12),r=n(9886),t=n(7766),a=n(1439),s=n(348),e.exports=function(e){function n(e){n.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new i,e||(e={}),e.writer||(e.writer=new s),this.options=e,this.stringify=new a(e)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"implementation",{value:new o}),Object.defineProperty(n.prototype,"doctype",{get:function(){var e,n,i,o;for(n=0,i=(o=this.children).length;n<i;n++)if((e=o[n]).type===t.DocType)return e;return null}}),Object.defineProperty(n.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(n.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(n.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(n.prototype,"origin",{get:function(){return null}}),Object.defineProperty(n.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(n.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(n.prototype,"contentType",{get:function(){return null}}),n.prototype.end=function(e){var t;return t={},e?l(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},n.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},n.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.renameNode=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createNodeIterator=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTreeWalker=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(r)}).call(this)},9612:function(e,t,n){(function(){var t,i,o,r,s,a,l,u,c,p,d,h,f,g,m,y,v,b,S,_,w,O,C,N={}.hasOwnProperty;C=n(956),w=C.isObject,_=C.isFunction,O=C.isPlainObject,S=C.getValue,t=n(7766),h=n(5945),f=n(2546),r=n(1983),s=n(1034),m=n(7303),b=n(2620),g=n(9759),p=n(4274),d=n(4732),a=n(2464),u=n(521),l=n(5132),c=n(9253),o=n(8680),v=n(1439),y=n(348),i=n(314),e.exports=function(){function e(e,n,i){var o;this.name="?xml",this.type=t.Document,e||(e={}),o={},e.writer?O(e.writer)&&(o=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(o),this.stringify=new v(e),this.onDataCallback=n||function(){},this.onEndCallback=i||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var n,i,o,r,s,a,l,u;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(i in o={},l=e.attribs)N.call(l,i)&&(n=l[i],o[i]=n.value);this.node(e.name,o);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(s=0,a=(u=e.children).length;s<a;s++)r=u[s],this.createChildNode(r),r.type===t.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,n){var i;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=S(e),null==t&&(t={}),t=S(t),w(t)||(n=(i=[t,n])[0],t=i[1]),this.currentNode=new f(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},e.prototype.element=function(e,n,i){var o,r,s,a,l,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||w(e)||_(e))for(a=this.options.noValidation,this.options.noValidation=!0,(u=new h(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=a,r=0,s=(l=u.children).length;r<s;r++)o=l[r],this.createChildNode(o),o.type===t.Element&&this.up();else this.node(e,n,i);return this},e.prototype.attribute=function(e,t){var n,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=S(e)),w(e))for(n in e)N.call(e,n)&&(i=e[n],this.attribute(n,i));else _(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new o(this,e,""):null!=t&&(this.currentNode.attribs[e]=new o(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new b(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new r(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new s(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new m(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var n,i,o,r,s;if(this.openCurrent(),null!=e&&(e=S(e)),null!=t&&(t=S(t)),Array.isArray(e))for(n=0,r=e.length;n<r;n++)i=e[n],this.instruction(i);else if(w(e))for(i in e)N.call(e,i)&&(o=e[i],this.instruction(i,o));else _(t)&&(t=t.apply()),s=new g(this,e,t),this.onData(this.writer.processingInstruction(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,n){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return i=new p(this,e,t,n),this.onData(this.writer.declaration(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var n;return this.openCurrent(),n=new l(this,e,t),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,n,i,o){var r;return this.openCurrent(),r=new a(this,e,t,n,i,o),this.onData(this.writer.dtdAttList(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var n;return this.openCurrent(),n=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var n;return this.openCurrent(),n=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var n;return this.openCurrent(),n=new c(this,e,t),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var n,o,r,s;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),o="",e.type===t.Element){for(r in this.writerOptions.state=i.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,s=e.attribs)N.call(s,r)&&(n=s[r],o+=this.writer.attribute(n,this.writerOptions,this.currentLevel));o+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=i.InsideTag}else this.writerOptions.state=i.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.children?(o+=" [",this.writerOptions.state=i.InsideTag):(this.writerOptions.state=i.CloseTag,o+=">"),o+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(o,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var n;if(!e.isClosed)return"",this.writerOptions.state=i.CloseTag,n=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=i.None,this.onData(n,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.dtd=function(e,t,n){return this.doctype(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},3440:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;i=n(9886),t=n(7766),e.exports=function(e){function n(e){n.__super__.constructor.call(this,e),this.type=t.Dummy}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return""},n}(i)}).call(this)},2546:function(e,t,n){(function(){var t,i,o,r,s,a,l,u,c={}.hasOwnProperty;u=n(956),l=u.isObject,a=u.isFunction,s=u.getValue,r=n(9886),t=n(7766),i=n(8680),o=n(7780),e.exports=function(e){function n(e,i,o){var r,s,a,l;if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(i),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=o&&this.attribute(o),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(s=0,a=(l=e.children).length;s<a;s++)if((r=l[s]).type===t.DocType){r.name=this.name;break}}return function(e,t){for(var n in t)c.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new o(this.attribs)),this.attributeMap}}),n.prototype.clone=function(){var e,t,n,i;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},i=this.attribs)c.call(i,t)&&(e=i[t],n.attribs[t]=e.clone());return n.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)})),n},n.prototype.attribute=function(e,t){var n,o;if(null!=e&&(e=s(e)),l(e))for(n in e)c.call(e,n)&&(o=e[n],this.attribute(n,o));else a(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new i(this,e,""):null!=t&&(this.attribs[e]=new i(this,e,t));return this},n.prototype.removeAttribute=function(e){var t,n,i;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=s(e),Array.isArray(e))for(n=0,i=e.length;n<i;n++)t=e[n],delete this.attribs[t];else delete this.attribs[e];return this},n.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},n.prototype.att=function(e,t){return this.attribute(e,t)},n.prototype.a=function(e,t){return this.attribute(e,t)},n.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},n.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},n.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},n.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},n.prototype.setIdAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(e){var t,i,o;if(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=i=0,o=this.attribs.length-1;0<=o?i<=o:i>=o;t=0<=o?++i:--i)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},n}(r)}).call(this)},7780:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},9886:function(e,t,n){(function(){var t,i,o,r,s,a,l,u,c,p,d,h,f,g,m,y,v,b={}.hasOwnProperty;v=n(956),y=v.isObject,m=v.isFunction,g=v.isEmpty,f=v.getValue,u=null,o=null,r=null,s=null,a=null,d=null,h=null,p=null,l=null,i=null,c=null,t=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=n(2546),o=n(1983),r=n(1034),s=n(4274),a=n(4732),d=n(7303),h=n(2620),p=n(9759),l=n(3440),i=n(7766),c=n(3382),n(7780),t=n(6959))}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,n,o,r;if(this.nodeType===i.Element||this.nodeType===i.DocumentFragment){for(r="",t=0,n=(o=this.children).length;t<n;t++)(e=o[t]).textContent&&(r+=e.textContent);return r}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(e){var t,n,i,o,r;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),r=[],n=0,i=(o=this.children).length;n<i;n++)t=o[n],r.push(t.setParent(this));return r},e.prototype.element=function(e,t,n){var i,o,r,s,a,l,u,c,p,d,h;if(l=null,null===t&&null==n&&(t=(p=[{},null])[0],n=p[1]),null==t&&(t={}),t=f(t),y(t)||(n=(d=[t,n])[0],t=d[1]),null!=e&&(e=f(e)),Array.isArray(e))for(r=0,u=e.length;r<u;r++)o=e[r],l=this.element(o);else if(m(e))l=this.element(e.apply());else if(y(e)){for(a in e)if(b.call(e,a))if(h=e[a],m(h)&&(h=h.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))l=this.attribute(a.substr(this.stringify.convertAttKey.length),h);else if(!this.options.separateArrayItems&&Array.isArray(h)&&g(h))l=this.dummy();else if(y(h)&&g(h))l=this.element(a);else if(this.options.keepNullNodes||null!=h)if(!this.options.separateArrayItems&&Array.isArray(h))for(s=0,c=h.length;s<c;s++)o=h[s],(i={})[a]=o,l=this.element(i);else y(h)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?l=this.element(h):(l=this.element(a)).element(h):l=this.element(a,h);else l=this.dummy()}else l=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n):this.dummy();if(null==l)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return l},e.prototype.insertBefore=function(e,t,n){var i,o,r,s,a;if(null!=e?e.type:void 0)return s=t,(r=e).setParent(this),s?(o=children.indexOf(s),a=children.splice(o),children.push(r),Array.prototype.push.apply(children,a)):children.push(r),r;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),a=this.parent.children.splice(o),i=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),i},e.prototype.insertAfter=function(e,t,n){var i,o,r;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),r=this.parent.children.splice(o+1),i=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,r),i},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,n){var i,o;return null!=e&&(e=f(e)),t||(t={}),t=f(t),y(t)||(n=(o=[t,n])[0],t=o[1]),i=new u(this,e,t),null!=n&&i.text(n),this.children.push(i),i},e.prototype.text=function(e){var t;return y(e)&&this.element(e),t=new h(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var t;return t=new o(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new r(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.commentAfter=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.raw=function(e){var t;return t=new d(this,e),this.children.push(t),this},e.prototype.dummy=function(){return new l(this)},e.prototype.instruction=function(e,t){var n,i,o,r,s;if(null!=e&&(e=f(e)),null!=t&&(t=f(t)),Array.isArray(e))for(r=0,s=e.length;r<s;r++)n=e[r],this.instruction(n);else if(y(e))for(n in e)b.call(e,n)&&(i=e[n],this.instruction(n,i));else m(t)&&(t=t.apply()),o=new p(this,e,t),this.children.push(o);return this},e.prototype.instructionBefore=function(e,t){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.instructionAfter=function(e,t){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.declaration=function(e,t,n){var o,r;return o=this.document(),r=new s(o,e,t,n),0===o.children.length?o.children.unshift(r):o.children[0].type===i.Declaration?o.children[0]=r:o.children.unshift(r),o.root()||o},e.prototype.dtd=function(e,t){var n,o,r,s,l,u,c,p,d;for(n=this.document(),o=new a(n,e,t),r=s=0,u=(p=n.children).length;s<u;r=++s)if(p[r].type===i.DocType)return n.children[r]=o,o;for(r=l=0,c=(d=n.children).length;l<c;r=++l)if(d[r].isRoot)return n.children.splice(r,0,o),o;return n.children.push(o),o},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.type===i.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.type===i.Document)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.debugInfo=function(e){var t,n;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},e.prototype.ele=function(e,t,n){return this.element(e,t,n)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(e,t){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(e){var n,i;return(n=this)===e?0:this.document()!==e.document()?(i=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?i|=t.Preceding:i|=t.Following,i):n.isAncestor(e)?t.Contains|t.Preceding:n.isDescendant(e)?t.Contains|t.Following:n.isPreceding(e)?t.Preceding:t.Following},e.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(e){var t,n,i;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=n=0,i=this.children.length-1;0<=i?n<=i:n>=i;t=0<=i?++n:--n)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},e.prototype.isDescendant=function(e){var t,n,i,o;for(n=0,i=(o=this.children).length;n<i;n++){if(e===(t=o[n]))return!0;if(t.isDescendant(e))return!0}return!1},e.prototype.isAncestor=function(e){return e.isDescendant(this)},e.prototype.isPreceding=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t<n},e.prototype.isFollowing=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t>n},e.prototype.treePosition=function(e){var t,n;return n=0,t=!1,this.foreachTreeNode(this.document(),(function(i){if(n++,!t&&i===e)return t=!0})),t?n:-1},e.prototype.foreachTreeNode=function(e,t){var n,i,o,r,s;for(e||(e=this.document()),i=0,o=(r=e.children).length;i<o;i++){if(s=t(n=r[i]))return s;if(s=this.foreachTreeNode(n,t))return s}},e}()}).call(this)},3382:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}).call(this)},9759:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;t=n(7766),i=n(8092),e.exports=function(e){function n(e,i,o){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(i),this.name=this.target,o&&(this.value=this.stringify.insValue(o))}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},n}(i)}).call(this)},7303:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;t=n(7766),i=n(9886),e.exports=function(e){function n(e,i){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(i)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},n}(i)}).call(this)},3236:function(e,t,n){(function(){var t,i,o,r={}.hasOwnProperty;t=n(7766),o=n(7467),i=n(314),e.exports=function(e){function n(e,t){this.stream=e,n.__super__.constructor.call(this,t)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),n.prototype.endline=function(e,t,o){return e.isLastRootNode&&t.state===i.CloseTag?"":n.__super__.endline.call(this,e,t,o)},n.prototype.document=function(e,t){var n,i,o,r,s,a,l,u,c;for(i=o=0,s=(l=e.children).length;o<s;i=++o)(n=l[i]).isLastRootNode=i===e.children.length-1;for(t=this.filterOptions(t),c=[],r=0,a=(u=e.children).length;r<a;r++)n=u[r],c.push(this.writeChildNode(n,t,0));return c},n.prototype.attribute=function(e,t,i){return this.stream.write(n.__super__.attribute.call(this,e,t,i))},n.prototype.cdata=function(e,t,i){return this.stream.write(n.__super__.cdata.call(this,e,t,i))},n.prototype.comment=function(e,t,i){return this.stream.write(n.__super__.comment.call(this,e,t,i))},n.prototype.declaration=function(e,t,i){return this.stream.write(n.__super__.declaration.call(this,e,t,i))},n.prototype.docType=function(e,t,n){var o,r,s,a;if(n||(n=0),this.openNode(e,t,n),t.state=i.OpenTag,this.stream.write(this.indent(e,t,n)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,n)),t.state=i.InsideTag,r=0,s=(a=e.children).length;r<s;r++)o=a[r],this.writeChildNode(o,t,n+1);t.state=i.CloseTag,this.stream.write("]")}return t.state=i.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,n)),t.state=i.None,this.closeNode(e,t,n)},n.prototype.element=function(e,n,o){var s,a,l,u,c,p,d,h,f;for(d in o||(o=0),this.openNode(e,n,o),n.state=i.OpenTag,this.stream.write(this.indent(e,n,o)+"<"+e.name),h=e.attribs)r.call(h,d)&&(s=h[d],this.attribute(s,n,o));if(u=0===(l=e.children.length)?null:e.children[0],0===l||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))n.allowEmpty?(this.stream.write(">"),n.state=i.CloseTag,this.stream.write("</"+e.name+">")):(n.state=i.CloseTag,this.stream.write(n.spaceBeforeSlash+"/>"));else if(!n.pretty||1!==l||u.type!==t.Text&&u.type!==t.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,n,o)),n.state=i.InsideTag,c=0,p=(f=e.children).length;c<p;c++)a=f[c],this.writeChildNode(a,n,o+1);n.state=i.CloseTag,this.stream.write(this.indent(e,n,o)+"</"+e.name+">")}else this.stream.write(">"),n.state=i.InsideTag,n.suppressPrettyCount++,this.writeChildNode(u,n,o+1),n.suppressPrettyCount--,n.state=i.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,n,o)),n.state=i.None,this.closeNode(e,n,o)},n.prototype.processingInstruction=function(e,t,i){return this.stream.write(n.__super__.processingInstruction.call(this,e,t,i))},n.prototype.raw=function(e,t,i){return this.stream.write(n.__super__.raw.call(this,e,t,i))},n.prototype.text=function(e,t,i){return this.stream.write(n.__super__.text.call(this,e,t,i))},n.prototype.dtdAttList=function(e,t,i){return this.stream.write(n.__super__.dtdAttList.call(this,e,t,i))},n.prototype.dtdElement=function(e,t,i){return this.stream.write(n.__super__.dtdElement.call(this,e,t,i))},n.prototype.dtdEntity=function(e,t,i){return this.stream.write(n.__super__.dtdEntity.call(this,e,t,i))},n.prototype.dtdNotation=function(e,t,i){return this.stream.write(n.__super__.dtdNotation.call(this,e,t,i))},n}(o)}).call(this)},348:function(e,t,n){(function(){var t,i={}.hasOwnProperty;t=n(7467),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function o(){this.constructor=e}o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype}(t,e),t.prototype.document=function(e,t){var n,i,o,r,s;for(t=this.filterOptions(t),r="",i=0,o=(s=e.children).length;i<o;i++)n=s[i],r+=this.writeChildNode(n,t,0);return t.pretty&&r.slice(-t.newline.length)===t.newline&&(r=r.slice(0,-t.newline.length)),r},t}(t)}).call(this)},1439:function(e){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty;e.exports=function(){function e(e){var i,o,r;for(i in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),o=e.stringify||{})n.call(o,i)&&(r=o[i],this[i]=r)}return e.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},e.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},e.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},e.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},e.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},e.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},e.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},e.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},e.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t,n;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+n.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+n.index);return e},e.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},e.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}).call(this)},2620:function(e,t,n){(function(){var t,i,o={}.hasOwnProperty;t=n(7766),i=n(8092),e.exports=function(e){function n(e,i){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(i)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var e,t,n;for(n="",t=this.previousSibling;t;)n=t.data+n,t=t.previousSibling;for(n+=this.data,e=this.nextSibling;e;)n+=e.data,e=e.nextSibling;return n}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},n.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(i)}).call(this)},7467:function(e,t,n){(function(){var t,i,o,r={}.hasOwnProperty;o=n(956).assign,t=n(7766),n(4274),n(4732),n(1983),n(1034),n(2546),n(7303),n(2620),n(9759),n(3440),n(2464),n(5132),n(521),n(9253),i=n(314),e.exports=function(){function e(e){var t,n,i;for(t in e||(e={}),this.options=e,n=e.writer||{})r.call(n,t)&&(i=n[t],this["_"+t]=this[t],this[t]=i)}return e.prototype.filterOptions=function(e){var t,n,r,s,a,l,u,c;return e||(e={}),e=o({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(n=e.indent)?n:"  ",t.newline=null!=(r=e.newline)?r:"\n",t.offset=null!=(s=e.offset)?s:0,t.dontPrettyTextNodes=null!=(a=null!=(l=e.dontPrettyTextNodes)?l:e.dontprettytextnodes)?a:0,t.spaceBeforeSlash=null!=(u=null!=(c=e.spaceBeforeSlash)?c:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=i.None,t},e.prototype.indent=function(e,t,n){var i;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(i=(n||0)+t.offset+1)>0?new Array(i).join(t.indent):""},e.prototype.endline=function(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,n){var i;return this.openAttribute(e,t,n),i=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),i},e.prototype.cdata=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<![CDATA[",t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+="]]>"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.comment=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"\x3c!-- ",t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+=" --\x3e"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.declaration=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<?xml",t.state=i.InsideTag,o+=' version="'+e.version+'"',null!=e.encoding&&(o+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(o+=' standalone="'+e.standalone+'"'),t.state=i.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.docType=function(e,t,n){var o,r,s,a,l;if(n||(n=0),this.openNode(e,t,n),t.state=i.OpenTag,a=this.indent(e,t,n),a+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?a+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(a+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(a+=" [",a+=this.endline(e,t,n),t.state=i.InsideTag,r=0,s=(l=e.children).length;r<s;r++)o=l[r],a+=this.writeChildNode(o,t,n+1);t.state=i.CloseTag,a+="]"}return t.state=i.CloseTag,a+=t.spaceBeforeSlash+">",a+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),a},e.prototype.element=function(e,n,o){var s,a,l,u,c,p,d,h,f,g,m,y,v,b;for(f in o||(o=0),g=!1,m="",this.openNode(e,n,o),n.state=i.OpenTag,m+=this.indent(e,n,o)+"<"+e.name,y=e.attribs)r.call(y,f)&&(s=y[f],m+=this.attribute(s,n,o));if(u=0===(l=e.children.length)?null:e.children[0],0===l||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))n.allowEmpty?(m+=">",n.state=i.CloseTag,m+="</"+e.name+">"+this.endline(e,n,o)):(n.state=i.CloseTag,m+=n.spaceBeforeSlash+"/>"+this.endline(e,n,o));else if(!n.pretty||1!==l||u.type!==t.Text&&u.type!==t.Raw||null==u.value){if(n.dontPrettyTextNodes)for(c=0,d=(v=e.children).length;c<d;c++)if(((a=v[c]).type===t.Text||a.type===t.Raw)&&null!=a.value){n.suppressPrettyCount++,g=!0;break}for(m+=">"+this.endline(e,n,o),n.state=i.InsideTag,p=0,h=(b=e.children).length;p<h;p++)a=b[p],m+=this.writeChildNode(a,n,o+1);n.state=i.CloseTag,m+=this.indent(e,n,o)+"</"+e.name+">",g&&n.suppressPrettyCount--,m+=this.endline(e,n,o),n.state=i.None}else m+=">",n.state=i.InsideTag,n.suppressPrettyCount++,g=!0,m+=this.writeChildNode(u,n,o+1),n.suppressPrettyCount--,g=!1,n.state=i.CloseTag,m+="</"+e.name+">"+this.endline(e,n,o);return this.closeNode(e,n,o),m},e.prototype.writeChildNode=function(e,n,i){switch(e.type){case t.CData:return this.cdata(e,n,i);case t.Comment:return this.comment(e,n,i);case t.Element:return this.element(e,n,i);case t.Raw:return this.raw(e,n,i);case t.Text:return this.text(e,n,i);case t.ProcessingInstruction:return this.processingInstruction(e,n,i);case t.Dummy:return"";case t.Declaration:return this.declaration(e,n,i);case t.DocType:return this.docType(e,n,i);case t.AttributeDeclaration:return this.dtdAttList(e,n,i);case t.ElementDeclaration:return this.dtdElement(e,n,i);case t.EntityDeclaration:return this.dtdEntity(e,n,i);case t.NotationDeclaration:return this.dtdNotation(e,n,i);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<?",t.state=i.InsideTag,o+=e.target,e.value&&(o+=" "+e.value),t.state=i.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.raw=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n),t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.text=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n),t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.dtdAttList=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!ATTLIST",t.state=i.InsideTag,o+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(o+=" "+e.defaultValueType),e.defaultValue&&(o+=' "'+e.defaultValue+'"'),t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.dtdElement=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!ELEMENT",t.state=i.InsideTag,o+=" "+e.name+" "+e.value,t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.dtdEntity=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!ENTITY",t.state=i.InsideTag,e.pe&&(o+=" %"),o+=" "+e.name,e.value?o+=' "'+e.value+'"':(e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.nData&&(o+=" NDATA "+e.nData)),t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.dtdNotation=function(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!NOTATION",t.state=i.InsideTag,o+=" "+e.name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?o+=' PUBLIC "'+e.pubID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o},e.prototype.openNode=function(e,t,n){},e.prototype.closeNode=function(e,t,n){},e.prototype.openAttribute=function(e,t,n){},e.prototype.closeAttribute=function(e,t,n){},e}()}).call(this)},9742:function(e,t,n){(function(){var t,i,o,r,s,a,l,u,c,p;p=n(956),u=p.assign,c=p.isFunction,o=n(6889),r=n(5945),s=n(9612),l=n(348),a=n(3236),t=n(7766),i=n(314),e.exports.create=function(e,t,n,i){var o,s;if(null==e)throw new Error("Root element needs a name.");return i=u({},t,n,i),s=(o=new r(i)).element(e),i.headless||(o.declaration(i),null==i.pubID&&null==i.sysID||o.dtd(i)),s},e.exports.begin=function(e,t,n){var i;return c(e)&&(t=(i=[e,t])[0],n=i[1],e={}),t?new s(e,t,n):new r(e)},e.exports.stringWriter=function(e){return new l(e)},e.exports.streamWriter=function(e,t){return new a(e,t)},e.exports.implementation=new o,e.exports.nodeType=t,e.exports.writerState=i}).call(this)},2254:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(3645),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,".ndl-controls-pointer, .ndl-controls-pointer * {\n    cursor: pointer;\n}\n\n.ndl-controls-abs-center {\n    position: absolute;\n    transform: translate(-50%, -50%);\n    left: 50%;\n    top: 50%;\n}\n\n/** Button **/\n.ndl-controls-button {\n    outline: none;\n    border: none;\n    color: white;\n    background-color: black;\n    padding: 5px 20px 5px 20px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.ndl-controls-button:disabled {\n    cursor: default;\n}\n\n/** Deprecated checkbox **/\n.ndl-controls-checkbox {\n    margin: 0;\n    border: 1px solid #000000;\n    border-radius: 0;\n    background-color: transparent;\n    -webkit-appearance: none;\n    outline: none;\n    cursor: pointer;\n}\n\n.ndl-controls-checkbox:checked {\n    background-color: #000000;\n}\n\n.ndl-controls-checkbox:disabled {\n    cursor: default;\n}\n\n/** Deprecated radio button **/\n.ndl-controls-radiobutton {\n    margin: 0;\n    border: 1px solid #000000;\n    border-radius: 16px;\n    background-color: transparent;\n    -webkit-appearance: none;\n    outline: none;\n    width:32px;\n    height:32px;\n    display: block;\n    cursor: pointer;\n}\n\n.ndl-controls-radiobutton:checked {\n    background-color: #000000;\n}\n\n.ndl-controls-radiobutton:disabled {\n    cursor: default;\n}\n\n/** New radio button **/\n.ndl-controls-radio-2 {\n    opacity: 0;\n    position: absolute;\n    margin: 0;\n}\n\n.ndl-controls-radio-2:disabled {\n    cursor: default;\n}\n\n/** New checkbox **/\n.ndl-controls-checkbox-2 {\n    opacity: 0;\n    position: absolute;\n    margin: 0;\n}\n\n.ndl-controls-checkbox-2:disabled {\n    cursor: default;\n}\n\n/** Options **/\n.ndl-controls-select {\n    -webkit-appearance: none;\n    appearance: none;\n    background-color: transparent;\n    border: 1px solid #000000;\n    border-radius:0;\n    padding: 0 1em 0 0;\n    margin: 0;\n    width: 100%;\n    font-family: inherit;\n    font-size: inherit;\n    cursor: inherit;\n    line-height: inherit;\n  \n    /* Stack above custom arrow */\n    z-index: 1;\n  \n    /* Remove dropdown arrow in IE10 & IE11\n      @link https://www.filamentgroup.com/lab/select-css.html */\n  /*  &::-ms-expand {\n      display: none;\n    }*/\n  \n    /* Remove focus outline, will add on alternate element */\n    outline: none; \n}\n\n.ndl-controls-select:disabled {\n    cursor: default;\n}\n\n/** Range **/\n.ndl-controls-range2 {\n    margin:0;\n    padding:0;\n    -webkit-appearance: none;\n    appearance: none;\n    outline: none;\n    border: none;\n    background: transparent;\n    cursor: pointer;\n}\n\n.ndl-controls-range2::-webkit-slider-thumb {    \n    height: 100%;\n    border: 0;\n    -webkit-appearance: none;\n    appearance: none;\n}\n\n.ndl-controls-range2::-moz-range-thumb {\n    height: 100%;\n    border: 0;\n    -webkit-appearance: none;\n    appearance: none;\n}\n\n.ndl-controls-range2::-webkit-slider-runnable-track {\n    border: none;\n    height: 100%;\n}\n\n.ndl-controls-range2::-moz-range-track {\n    border: none;\n    height: 100%;\n}\n\n.ndl-controls-range2:disabled {\n    cursor: default;\n}\n\n\n// Old range\n\n.ndl-controls-range {\n    margin:0;\n    padding:0;\n    -webkit-appearance: none;\n    outline: none;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n}\n\n.ndl-controls-range::-webkit-slider-thumb {\n    width: 16px;\n    height: 16px;\n    background: #000000;\n    border: 0;\n    border-radius: 8px;\n    cursor: pointer;\n    -webkit-appearance: none;\n    margin-top:-5px;\n}\n\n.ndl-controls-range::-moz-range-thumb {\n    width: 16px;\n    height: 16px;\n    background: #000000;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n}\n\n.ndl-controls-range::-ms-thumb {\n    width: 16px;\n    height: 16px;\n    background: #000000;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    margin-top: 0px;\n    /*Needed to keep the Edge thumb centred*/\n}\n\n.ndl-controls-range::-webkit-slider-runnable-track {\n    background: #f0f0f0;\n    border: none;\n    width: 100%;\n    height: 6px;\n    cursor: pointer;\n    top:4px;\n    margin-top:5px;\n}\n\n.ndl-controls-range:focus::-webkit-slider-runnable-track {\n    background: #f0f0f0;\n}\n\n.ndl-controls-range::-moz-range-track {\n    background: #f0f0f0;\n    border: none;\n    width: 100%;\n    height: 6px;\n    cursor: pointer;\n}\n\n.ndl-controls-range::-ms-track {\n    background: transparent;\n    border-color: transparent;\n    border-width: 5px 0;\n    color: transparent;\n    width: 100%;\n    height: 6px;\n    cursor: pointer;\n}\n\n.ndl-controls-range::-ms-fill-lower {\n    background: #f0f0f0;\n    border: none;\n}\n.ndl-controls-range::-ms-fill-upper {\n    background: #f0f0f0;\n    border: none;\n}\n\n/** Field Set **/\n.ndl-controls-fieldset {\n    outline:none;\n    border:none;\n    margin: 0;\n    padding: 0;\n}\n\n/** Text Input **/\n.ndl-controls-textinput {\n    outline: none;\n    border-style: none;\n    background-color: transparent;\n}\n\n.ndl-controls-textinput::placeholder {\n    color: inherit;\n    opacity: 0.5;\n}",""]);const r=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},3379:(e,t,n)=>{"use strict";var i,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function s(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},i=[],o=0;o<e.length;o++){var a=e[o],l=t.base?a[0]+t.base:a[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var p=s(c),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==p?(r[p].references++,r[p].updater(d)):r.push({identifier:c,updater:g(d,t),references:1}),i.push(c)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function d(e,t,n){var i=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,f=0;function g(e,t){var n,i,o;if(t.singleton){var r=f++;n=h||(h=l(t)),i=p.bind(null,n,r,!1),o=p.bind(null,n,r,!0)}else n=l(t),i=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=s(n[i]);r[o].references--}for(var l=a(e,t),u=0;u<n.length;u++){var c=s(n[u]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}n=l}}}},4195:(e,t,n)=>{const i=n(1020),o={name:"CollectionClear",docs:"https://docs.noodl.net/nodes/data/array/clear-array",displayNodeName:"Clear Array",category:"Data",usePortAsLabel:"collectionId",color:"data",inputs:{collectionId:{type:{name:"string",identifierOf:"CollectionName",identifierDisplayName:"Array Ids"},displayName:"Array Id",group:"General",set:function(e){e instanceof i&&(e=e.getId()),this.setCollectionID(e)}},clear:{displayName:"Do",group:"Actions",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{this._internal.collection.set([]),this.sendSignalOnOutput("modified")}))}}},outputs:{modified:{group:"Events",type:"signal",displayName:"Done"}},methods:{setCollectionID:function(e){this.setCollection(i.get(e))},setCollection:function(e){this._internal.collection=e}}};e.exports={node:o}},7363:e=>{"use strict";e.exports=React},1533:e=>{"use strict";e.exports=ReactDOM},4854:()=>{},6602:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(7363),t=__webpack_require__.n(e),n=__webpack_require__(1533),i=__webpack_require__.n(n);class o{constructor(e,t){this.graphModel=e,this.editorConnection=t,this.graphModel.getAllComponents().forEach((e=>this._bindComponentModel(e))),this.graphModel.on("componentAdded",(e=>this._bindComponentModel(e)),this),this.graphModel.on("componentRemoved",(e=>e.removeListenersWithRef(this)),this)}_bindComponentModel(e){e.on("rootAdded",(()=>this._evaluateWarnings(e)),this),e.on("rootRemoved",(t=>{this.editorConnection.clearWarning(e.name,t,"multiple-visual-roots-warning"),this._evaluateWarnings(e)}),this),this._evaluateWarnings(e)}_evaluateWarnings(e){const t=e.getRoots();if(0!==t.lenth){this.editorConnection.clearWarning(e.name,t[0],"multiple-visual-roots-warning");for(let n=1;n<t.length;n++)this.editorConnection.sendWarning(e.name,t[n],"multiple-visual-roots-warning",{message:"This node is detached from the main node tree<br>and won't be rendered",level:"info"})}}dispose(){this.graphModel.getAllComponents().forEach((e=>{e.removeListenersWithRef(this)})),this.graphModel.removeListenersWithRef(this)}}class r{constructor(e){this.highlightedNodes=new Map,this.selectedNodes=new Map,this.noodlRuntime=e,this.isUpdatingHighlights=!1;const t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.style.overflow="hidden",t.style.position="fixed",t.style.zIndex="1000000000",t.style.pointerEvents="none",document.body.appendChild(t),this.highlightRootDiv=t,this.windowBorderDiv=this.createHighlightDiv(),this.windowBorderDiv.style.position="absolute",this.windowBorderDiv.style.top="0",this.windowBorderDiv.style.left="0",this.windowBorderDiv.style.boxShadow="inset 0 0 0 3px #2CA7BA",this.windowBorderDiv.style.opacity="1.0",this.windowBorderDiv.style.width="100vw",this.windowBorderDiv.style.height="100vh"}createHighlightDiv(){const e=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.outline="2px solid #2CA7BA",e.style.opacity="1.0",e}setWindowSelected(e){}updateHighlights(){const e=Array.from(this.highlightedNodes.entries()).concat(Array.from(this.selectedNodes.entries()));for(const t of e){const e=t[0].getRef()&&i().findDOMNode(t[0].getRef());if(!e){this.highlightedNodes.delete(t[0]),t[1].remove();continue}const n=e.getBoundingClientRect(),o=t[1];o.style.transform=`translateX(${n.x}px) translateY(${n.y}px)`,o.style.width=n.width+"px",o.style.height=n.height+"px"}this.isUpdatingHighlights=this.highlightedNodes.size>0||this.selectedNodes.size>0,this.isUpdatingHighlights&&requestAnimationFrame(this.updateHighlights.bind(this))}highlightNodesWithId(e){const t=s(this.noodlRuntime,e).filter((e=>e.getRef)).filter((e=>!this.highlightedNodes.has(e)));for(const e of t){const t=this.createHighlightDiv();this.highlightRootDiv.appendChild(t),this.highlightedNodes.set(e,t)}(this.selectedNodes.size>0||this.highlightedNodes.size>0)&&!this.isUpdatingHighlights&&this.updateHighlights()}disableHighlight(){for(const e of this.highlightedNodes){const t=e[1];t&&t.remove()}this.highlightedNodes.clear()}selectNodesWithId(e){this.noodlRuntime.rootComponent||this.noodlRuntime.eventEmitter.once("rootComponentUpdated",(()=>{setTimeout((()=>{this.selectNodesWithId(e)}),300)}));const t=s(this.noodlRuntime,e).filter((e=>e.getRef)).filter((e=>!this.selectedNodes.has(e)));for(const e of t){const t=this.createHighlightDiv();this.highlightRootDiv.appendChild(t),this.selectedNodes.set(e,t)}return this.selectedNodes.size>0&&this.setWindowSelected(!1),(this.selectedNodes.size>0||this.highlightedNodes.size>0)&&!this.isUpdatingHighlights&&this.updateHighlights(),t}deselectNodes(){for(const e of this.selectedNodes){const t=e[1];t&&t.remove()}this.selectedNodes.clear()}}function s(e,t){return e.rootComponent?e.rootComponent.nodeScope.getNodesWithIdRecursive(t):[]}class a{constructor({onInspect:e,onHighlight:t,onDisableHighlight:n}){this.onMouseMove=e=>{n();const i=this.findNoodlNode(e.target);i?(document.body.style.cursor="pointer",t(i.id)):document.body.style.cursor="initial",e.stopPropagation()},this.onClick=t=>{n();const i=this.findNoodlNode(t.target);i&&e([i.id]),t.stopPropagation(),t.preventDefault(),document.activeElement&&document.activeElement.blur()},this.onContextMenu=t=>{const n=document.elementsFromPoint(t.clientX,t.clientY).map((e=>this.findNoodlNode(e))).filter((e=>!!e)).map((e=>e.id));n.length&&e(n),t.stopPropagation(),t.preventDefault(),document.activeElement&&document.activeElement.blur()},this.onMouseOut=e=>{n()},this.blockEvent=e=>{e.stopPropagation()},this.onDisableHighlight=n}setComponent(e){this.component=e}enable(){document.activeElement&&document.activeElement.blur(),document.addEventListener("mouseenter",this.blockEvent,!0),document.addEventListener("mouseover",this.blockEvent,!0),document.addEventListener("mousedown",this.blockEvent,!0),document.addEventListener("mouseup",this.blockEvent,!0),document.addEventListener("mousemove",this.onMouseMove,!0),document.addEventListener("mouseout",this.onMouseOut,!0),document.addEventListener("click",this.onClick,!0),document.addEventListener("contextmenu",this.onContextMenu,!0)}disable(){document.body.style.cursor="initial",document.removeEventListener("mouseenter",this.blockEvent,!0),document.removeEventListener("mouseover",this.blockEvent,!0),document.removeEventListener("mousedown",this.blockEvent,!0),document.removeEventListener("mouseup",this.blockEvent,!0),document.removeEventListener("mousemove",this.onMouseMove,!0),document.removeEventListener("mouseout",this.onMouseOut,!0),document.removeEventListener("click",this.onClick,!0),document.removeEventListener("contextmenu",this.onContextMenu,!0),this.onDisableHighlight()}findNoodlNode(e){let t;for(;!t&&e;)t=e[Object.keys(e).find((e=>e.startsWith("__reactInternalInstance$")))],t||(e=e.parentElement);if(!t)return;const n=e=>{let t=e.return;for(;t&&"string"==typeof t.type;)t=t.return;return t};let i=n(t);for(;i&&(!i.stateNode||!i.stateNode.props||!i.stateNode.props.noodlNode);)i=n(i);const o=i?i.stateNode.props.noodlNode:void 0;if(o){if(this.component){let e=o;for(;e;)if(e.parentNodeScope){if(e.parentNodeScope.componentOwner.name===this.component.name)return e;e=e.parentNodeScope.componentOwner}else{if(e.nodeScope.componentOwner.name===this.component.name)return e;e=e.nodeScope.componentOwner}return e}return o}}}const l={ports:[{name:"htmlTitle",displayName:"Title",group:"General",plug:"input",type:"string",default:"Noodl Viewer",tooltip:"The title that web browsers show",ignoreInExport:!0},{name:"headCode",displayName:"Head Code",group:"Custom Code",plug:"input",type:{name:"string",codeeditor:"html"},tooltip:"Add custom code to the &lt;head&gt; tag",ignoreInExport:!0},{name:"navigationPathType",displayName:"URL Path Type",group:"Navigation",plug:"input",type:{name:"enum",enums:[{label:"Hash",value:"hash"},{label:"Path",value:"path"}]},default:"hash"},{name:"bodyScroll",displayName:"Body Scroll",group:"Experimental features",plug:"input",type:{name:"boolean"},tooltip:"Changes so the &lt;body&gt; tag will scroll by default"},{name:"repeaterDisabledWhenUnmounted",displayName:"Disable when unmounted",group:"Experimental features - Repeater",plug:"input",type:{name:"boolean"},tooltip:"Repeater will only create components when it's mounted"},{name:"repeaterCreateComponentsAsync",displayName:"Create asynchronously",group:"Experimental features - Repeater",plug:"input",type:{name:"boolean"},tooltip:"Repeater items will be created in chunks to keep UI responsive"},{name:"noodlLogoPosition",displayName:"Noodl Logo Position",group:"General",plug:"input",type:{name:"enum",enums:[{label:"Bottom Left",value:"bottom-left"},{label:"Bottom Right",value:"bottom-right"},{label:"Top Left",value:"top-left"},{label:"Top Right",value:"top-right"}]},default:"bottom-right",tooltip:"The position the Noodl Logo will be placed."}]};class u{constructor(e,t){this.isRunning=!1,this.numBoundingBoxObservers=0,this.callback=e,this.pollDelay=t}addObserver(){this.numBoundingBoxObservers++,this.isRunning||this._startObserver()}removeObserver(){this.numBoundingBoxObservers--,0===this.numBoundingBoxObservers&&this._stopObserver()}setTarget(e){this.target=e,this.numBoundingBoxObservers>0&&!this.isRunning&&this._startObserver()}_startObserver(){if(this.isRunning)return;if(!this.target)return;this.isRunning=!0;let e={};const t=()=>{if(!this.target)return void(this.isRunning=!1);const n=this.target.getBoundingClientRect();e.x!==n.x&&this.callback("x",n),e.y!==n.y&&this.callback("y",n),e.width!==n.width&&this.callback("width",n),e.height!==n.height&&this.callback("height",n),e=n,this.isRunning&&(this.pollDelay?setTimeout(t,this.pollDelay):window.requestAnimationFrame(t))};window.requestAnimationFrame(t)}_stopObserver(){this.isRunning=!1}}function c(e){return e&&"%"===e[e.length-1]}function p(e){return Number(e.slice(0,-1))}function d(e,t,n){if(!t&&!n)return e;let i=`calc(${e}`;return t&&(i+=` - ${t}`),n&&(i+=` - ${n}`),i+=")",i}const h={size(e,t){"none"===t.parentLayout&&(e.position="absolute"),"explicit"===t.sizeMode?(e.width=t.width,e.height=t.height):"contentHeight"===t.sizeMode?e.width=t.width:"contentWidth"===t.sizeMode&&(e.height=t.height),e.flexShrink=0,"row"===t.parentLayout&&"relative"===e.position?(c(e.width)&&!t.fixedWidth&&(e.flexGrow=p(e.width),e.flexShrink=1),c(e.height)&&!t.fixedHeight&&(e.height=d(e.height,e.marginTop,e.marginBottom))):"column"===t.parentLayout&&"relative"===e.position?(c(e.width)&&!t.fixedWidth&&(e.width=d(e.width,e.marginLeft,e.marginRight)),c(e.height)&&!t.fixedHeight&&(e.flexGrow=p(e.height),e.flexShrink=1)):"relative"!==e.position&&(c(e.width)&&(e.width=d(e.width,e.marginLeft,e.marginRight)),c(e.height)&&(e.height=d(e.height,e.marginTop,e.marginBottom)))},align(e,t){const{position:n}=e;let{alignX:i,alignY:o}=t;"relative"!==n&&(i=i||"left",o=o||"top");let r="";const s=t.parentLayout||"column";if(i)if("relative"!==n)"left"===i?e.left=0:"center"===i?(e.left="50%",r+="translateX(-50%) "):e.right=0;else if("relative"===n&&"row"===s)switch(i){case"left":e.marginRight=e.marginRight?e.marginRight:"auto";break;case"center":e.marginRight=e.marginRight?e.marginRight:"auto",e.marginLeft=e.marginLeft?e.marginLeft:"auto";break;case"right":e.marginLeft=e.marginLeft?e.marginLeft:"auto"}else if("relative"===n&&"column"===s)switch(i){case"left":e.alignSelf="flex-start";break;case"center":e.alignSelf="center";break;case"right":e.alignSelf="flex-end"}if(o)if("relative"!==n)"top"===o?e.top=0:"center"===o?(e.top="50%",r+="translateY(-50%)"):e.bottom=0;else if("relative"===n&&"column"===s)switch(o){case"top":e.marginBottom=e.marginBottom?e.marginBottom:"auto";break;case"center":e.marginTop=e.marginTop?e.marginTop:"auto",e.marginBottom=e.marginBottom?e.marginBottom:"auto";break;case"bottom":e.marginTop=e.marginTop?e.marginTop:"auto"}else if("relative"===n&&"row"===s)switch(o){case"top":e.alignSelf="flex-start";break;case"center":e.alignSelf="center";break;case"bottom":e.alignSelf="flex-end"}r&&(e.transform=r+(e.transform||""))}};function f(e){return e&&"object"==typeof e&&!Array.isArray(e)}function g(e,...t){if(!t.length)return e;const n=t.shift();if(f(e)&&f(n))for(const t in n)f(n[t])?(e[t]||Object.assign(e,{[t]:{}}),g(e[t],n[t])):Object.assign(e,{[t]:n[t]});return g(e,...t)}function m({title:e,body:t,images:n}){let i=`<h3>${e}</h3>`;if(t&&(i+=(t=Array.isArray(t)?t:[t]).map((e=>`<p>${e}</p>`)).join("")),n){let e="";n.forEach((t=>{e+='<div class="popup-layer-image-item">',e+=`<img src="../assets/images/tooltips/${t.src}">`,t.label&&(e+=`<h3>${t.label}</h3>`),t.body&&(e+=`<p>${t.body}</p>`),e+="</div>"})),i+=`<div class="popup-layer-image-row">${e}</div>`}return i}var y=__webpack_require__(1243),v=__webpack_require__.n(y),b=__webpack_require__(667);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){e.inputCss||(e.inputCss={}),e.defaultCss||(e.defaultCss={});for(const n in t)e.inputCss[n]=t[n]}function C(e,t,n){e[t]||(e[t]={});for(const i in n)e[t][i]=n[i]}function N(e,t){C(e,"inputs",t)}function I(e,t){C(e,"inputProps",t)}function x(e,t,n){e.dynamicports||(e.dynamicports=[]),e.dynamicports.push({condition:t,inputs:n})}const P={addInputProps:I,addInputs:N,addDynamicInputPorts:x,addInputCss:O,addSharedVisualInputs(e){O(e,{opacity:{index:200,group:"Style",displayName:"Opacity",type:"number",default:1,allowVisualStates:!0},mixBlendMode:{index:201,group:"Style",displayName:"Blend Mode",type:{name:"enum",enums:[{label:"Normal",value:"normal"},{label:"Multiply",value:"multiply"},{label:"Screen",value:"screen"},{label:"Overlay",value:"overlay"},{label:"Darken",value:"darken"},{label:"Lighten",value:"lighten"},{label:"Color Dodge",value:"color-dodge"},{label:"Color Burn",value:"color-burn"},{label:"Hard Light",value:"hard-light"},{label:"Soft Light",value:"soft-light"},{label:"Difference",value:"difference"},{label:"Exclusion",value:"exclusion"},{label:"Hue",value:"hue"},{label:"Saturation",value:"saturation"},{label:"Color",value:"color"},{label:"Luminosity",value:"luminosity"}]},default:"normal",applyDefault:!1,allowVisualStates:!0}}),N(e,{visible:{index:210,displayName:"Visible",group:"Style",default:!0,type:"boolean",set(e){e?this.removeStyle(["visibility"]):this.setStyle({visibility:"hidden"})}},zIndex:{index:211,displayName:"zIndex",group:"Style",type:"number",allowVisualStates:!0,set(e){void 0===e?this.removeStyle(["zIndex"]):this.setStyle({zIndex:Number(e)})}}})},addMarginInputs(e){O(e,{marginLeft:{index:1,group:"Margin and padding",displayName:"Margin Left",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-left"},allowVisualStates:!0},marginRight:{index:2,group:"Margin and padding",displayName:"Margin Right",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-right"},allowVisualStates:!0},marginTop:{index:3,group:"Margin and padding",displayName:"Margin Top",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-top"},allowVisualStates:!0},marginBottom:{index:4,group:"Margin and padding",displayName:"Margin Bottom",type:{name:"number",units:["px","%"],defaultUnit:"px",marginPaddingComp:"margin-bottom"},allowVisualStates:!0}})},addPaddingInputs(e,t){const n=(t=t||{}).defaults?t.defaults:{},i=t.styleTag;O(e,{paddingLeft:{index:64,group:"Margin and padding",default:n.paddingLeft||0,applyDefault:!1,displayName:"Pad Left",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-left"},allowVisualStates:!0,styleTag:i},paddingRight:{index:65,group:"Margin and padding",default:n.paddingRight||0,applyDefault:!1,displayName:"Pad Right",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-right"},allowVisualStates:!0,styleTag:i},paddingTop:{index:66,group:"Margin and padding",displayName:"Pad Top",default:n.paddingTop||0,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-top"},allowVisualStates:!0,styleTag:i},paddingBottom:{index:67,group:"Margin and padding",displayName:"Pad Bottom",default:n.paddingBottom||0,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-bottom"},allowVisualStates:!0,styleTag:i}})},addTransformInputs(e){N(e,{transformX:{group:"Placement",displayName:"Pos X",default:0,index:300,allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"px"},set(e){this.transforms||(this.transforms={}),this.transforms.x=e.value+e.unit,this.updateTransform()}},transformY:{group:"Placement",displayName:"Pos Y",default:0,index:301,allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"px"},set(e){this.transforms||(this.transforms={}),this.transforms.y=e.value+e.unit,this.updateTransform()}},transformRotation:{index:302,group:"Placement",displayName:"Rotation",default:0,allowVisualStates:!0,type:{name:"number",units:["deg"],defaultUnit:"deg"},set(e){this.transforms||(this.transforms={}),this.transforms.rotation=e.value+e.unit,this.updateTransform()}},transformScale:{index:303,group:"Placement",displayName:"Scale",default:1,allowVisualStates:!0,type:{name:"number"},set(e){this.transforms||(this.transforms={}),this.transforms.scale=e,this.updateTransform()}},transformOriginX:{index:304,group:"Placement",displayName:"Transform Origin X",allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"%"},default:"50",set(e){this.transformOriginX=e.value+e.unit,this.updateTransformOrigin()}},transformOriginY:{index:305,group:"Placement",displayName:"Transform Origin Y",allowVisualStates:!0,type:{name:"number",units:["px","%"],defaultUnit:"%"},default:"50",set(e){this.transformOriginY=e.value+e.unit,this.updateTransformOrigin()}}}),e.methods||(e.methods={}),e.methods.updateTransform=function(){let e="";const{x:t,y:n,rotation:i,scale:o}=this.transforms;t&&(e+=`translateX(${t}) `),n&&(e+=`translateY(${n}) `),i&&(e+=`rotate(${i}) `),void 0!==o&&(e+=`scale(${o},${o})`),this.setStyle({transform:e})},e.methods.updateTransformOrigin=function(){const e=void 0!==this.transformOriginX?this.transformOriginX:"50%",t=void 0!==this.transformOriginY?this.transformOriginY:"50%";this.setStyle({transformOrigin:`${e} ${t}`})}},addAlignInputs(e){O(e,{position:{index:11,displayName:"Position",group:"Layout",type:{name:"enum",enums:[{label:"In Layout",value:"relative"},{label:"Absolute",value:"absolute"},{label:"Sticky",value:"sticky"},{label:"Fixed",value:"fixed"}]},default:"relative"}}),I(e,{alignX:{index:5,group:"Alignment",displayName:"Align X",type:{name:"enum",enums:[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}],alignComp:"horizontal"}},alignY:{index:6,group:"Alignment",displayName:"Align Y",type:{name:"enum",enums:[{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"}],alignComp:"vertical"}}}),function(e){e.inputCss.position.tooltip=m({title:"Position",images:[{label:"Relative",body:"Relative to its siblings",src:"position-relative.svg"},{label:"Absolute",body:"Not affected by siblings or parent's layout",src:"position-absolute.svg"},{label:"Sticky",body:"Stick to parent's edge on overflow",src:"position-sticky.svg"},{label:"Fixed",body:"Always stay in the same place and take no space in the layout",src:"position-sticky.svg"}]})}(e)},addPointerEventOutputs(e){N(e,{pointerEventsMode:{index:403,displayName:"Pointer Events Mode",type:{name:"enum",enums:[{label:"Inherit",value:"inherit"},{label:"Explicit",value:"explicit"}]},default:"inherit",group:"Pointer Events",set(e){if("inherit"===e)this.removeStyle(["pointerEvents"]);else{let e="auto";void 0!==this._internal.pointerEventsEnabled&&(e=this._internal.pointerEventsEnabled?"auto":"none"),this.setStyle({pointerEvents:e})}}},pointerEventsEnabled:{index:404,displayName:"Pointer Events Enabled",type:"boolean",group:"Pointer Events",default:!0,set(e){this._internal.pointerEventsEnabled=!!e,this.setStyle({pointerEvents:this._internal.pointerEventsEnabled?"auto":"none"})}}}),I(e,{blockTouch:{index:450,displayName:"Block Pointer Events",group:"Pointer Events",type:"boolean"}}),x(e,"pointerEventsMode = explicit",["pointerEventsEnabled"]),function(e,t){C(e,"outputProps",{onClick:{displayName:"Click",group:"Events",type:"signal",propPath:"pointer"},pointerDown:{displayName:"Pointer Down",group:"Pointer Events",type:"signal",propPath:"pointer",props:{onMouseDown(){this.sendSignalOnOutput("pointerDown")},onTouchStart(){this.sendSignalOnOutput("pointerDown")}}},pointerUp:{displayName:"Pointer Up",group:"Pointer Events",type:"signal",propPath:"pointer",props:{onMouseUp(){this.sendSignalOnOutput("pointerUp")},onTouchEnd(){this.sendSignalOnOutput("pointerUp")},onTouchCancel(){this.sendSignalOnOutput("pointerUp")}}},pointerEnter:{displayName:"Pointer Enter",group:"Pointer Events",type:"signal",propPath:"pointer",props:{onMouseEnter(){this.sendSignalOnOutput("pointerEnter")}}},hoverStart:{displayName:"Hover Start",group:"Hover Events",type:"signal",propPath:"pointer",props:{onMouseOver(){this.sendSignalOnOutput("hoverStart"),this.setVisualStates(["hover"])}}},hoverEnd:{displayName:"Hover End",group:"Hover Events",type:"signal",propPath:"pointer",props:{onMouseLeave(){this.sendSignalOnOutput("hoverEnd"),this.setVisualStates([""])}}}})}(e),function(e){e.inputs.pointerEventsMode.tooltip=m({title:"Pointer events mode",body:["Control if mouse and touch events are enabled on this node","- Inherit: Same settings as parent","- Explicit: Enable control on this element"]}),e.inputs.pointerEventsEnabled.tooltip=m({title:"Pointer events enabled",body:["- Enabled: This element will receive mouse and touch events","- Disabled: No mouse or touch events will be captured by this element and the element below will receive it instead"]})}(e)},addDimensions(e,{defaultSizeMode:t="explicit",contentLabel:n="Content",useDimensionConstraints:i=!0}={}){let o="sizeMode = explicit OR sizeMode = contentHeight",r="sizeMode = explicit OR sizeMode = contentWidth";"explicit"!==t&&"contentHeight"!==t||(o+=" OR sizeMode NOT SET"),"explicit"!==t&&"contentWidth"!==t||(r+=" OR sizeMode NOT SET"),x(e,o,["width"]),x(e,r,["height"]),I(e,{sizeMode:{index:10,type:{name:"enum",enums:[{value:"explicit",label:"Explicit"},{value:"contentWidth",label:"Content Width"},{value:"contentHeight",label:"Content Height"},{value:"contentSize",label:"Content Size"}],allowEditOnly:!0,sizeComp:"mode"},group:"Dimensions",displayName:"Size Mode",default:t,allowVisualStates:!0},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"dimension",units:["%","px","vw","vh"],defaultUnit:"%"},default:100,allowVisualStates:!0,onChange(e){this.props.fixedWidth=e.isFixed}},height:{index:13,group:"Dimensions",displayName:"Height",type:{name:"dimension",units:["%","px","vw","vh"],defaultUnit:"%"},default:100,allowVisualStates:!0,onChange(e){this.props.fixedHeight=e.isFixed}}}),Noodl.deployed||function(e,t){e.inputProps.sizeMode.tooltip={explicit:{standard:"Explicit width & height",extended:m({title:"Explicit width & height",body:"Set width & height explicitly in pixels(px), percentage(%) or viewport size(vh/vw).",images:[{src:"size-mode-explicit.svg"}]})},contentWidth:{standard:`${t} width & explicit height`,extended:m({title:`${t} width & explicit height`,body:`The width will match the width of the ${t.toLowerCase()}. Height is set explicitly.`,images:[{src:"size-mode-content-width.svg"}]})},contentHeight:{standard:`Explicit width & ${t.toLowerCase()} height`,extended:m({title:`Explicit width & ${t.toLowerCase()} height`,body:`The width is set explicitly. The height will match the height of the ${t.toLowerCase()}`,images:[{src:"size-mode-content-height.svg"}]})},contentSize:{standard:`${t} width & height`,extended:m({title:`${t} width & height`,body:`The width and height will match the size of the ${t.toLowerCase()}`,images:[{src:"size-mode-content-size.svg"}]})}};const n=["- %: Relative to parents size. If 'fixed' is false this element will resize to share space with siblings. If 'Clip Content' is disabled, it'll also expand to fit the boundaries of all its content","- px: Pixels","- vw: Relative to viewport width. 100 makes the element the same width as the screen","- vh: Relative to viewport height. 100 makes the element the same height as the screen"],i=m({title:"Fixed",body:["- Enabled: Elements will be the exact size set","- Disabled: Element will resize to fill up empty space, or shrink to make space for siblings. Use the dimension constraints, min and max size, to control the boundaries"]});e.inputProps.width.tooltip={dimension:m({title:"Width",body:n}),fixed:i},e.inputProps.height.tooltip={dimension:m({title:"Height",body:n}),fixed:i}}(e,n),i&&(O(e,{minWidth:{index:400,group:"Dimension Constraints",displayName:"Min Width",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}},maxWidth:{index:401,group:"Dimension Constraints",displayName:"Max Width",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}},minHeight:{index:402,group:"Dimension Constraints",displayName:"Min Height",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}},maxHeight:{index:403,group:"Dimension Constraints",displayName:"Max Height",allowVisualStates:!0,type:{name:"number",units:["%","px","vw","vh"],defaultUnit:"%"}}}),Noodl.deployed||function(e){e.inputCss.minWidth.tooltip=m({title:"Minimum width",body:"This is prioritized over other properties, so the element won't shrink below this size"}),e.inputCss.minHeight.tooltip=m({title:"Minimum height",body:"This is prioritized over other properties, so the element won't shrink below this size"}),e.inputCss.maxWidth.tooltip=m({title:"Maximum width",body:"This is prioritized over other properties, so the element won't grow beyond this size"}),e.inputCss.maxHeight.tooltip=m({title:"Maximum height",body:"This is prioritized over other properties, so the element won't grow beyond this size"})}(e))},_addCornerRadius(e,t){const n=(t=t||{}).defaults||{},i=t.styleTag;function o(e,t,i,o){const r={group:"corners",tab:i,label:t},s=`border${t}Radius`;N(e,{[s]:{index:240+o,displayName:"Corner Radius",editorName:("Corner Radius","Corner Radius "+(t?"("+t+")":"")),group:"Corner Radius",type:{name:"number",units:["px","%"],defaultUnit:"px"},allowVisualStates:!0,default:n[s],tab:r,set(e){this._internal.borderRadius[s]=void 0===e.value?void 0:e.value+e.unit,this._updateCornerRadii()}}})}n.borderRadius||(n.borderRadius=0),o(e,"","corners-all",0),o(e,"TopLeft","corners-top-left",1),o(e,"TopRight","corners-top-right",2),o(e,"BottomRight","corners-bottom-right",3),o(e,"BottomLeft","corners-bottom-left",4),e.methods._updateCornerRadii=function(){const e=this._internal.borderRadius;function t(t,n){const i=`border${n}Radius`;t[i]=e[i]||e.borderRadius}const n={};t(n,"TopLeft"),t(n,"TopRight"),t(n,"BottomRight"),t(n,"BottomLeft"),this.setStyle(n,i)};const r=e.initialize;e.initialize=function(){r&&r.call(this),this._internal.borderRadius=_({},n),n.borderRadius&&this._updateCornerRadii()}},addBorderInputs(e,t){const n=(t=t||{}).defaults||{},i=t.styleTag;function o(e,t,i,o){const r=`border${t}Style`,s=`border${t}Width`,a=`border${t}Color`;let l="none"!==n.borderStyle?"OR borderStyle NOT SET":"";t?(n[r]&&"none"!==n[r]&&(l+=`OR ${r} NOT SET`),x(e,`${r} = solid OR ${r} = dashed OR ${r} = dotted OR borderStyle = solid OR borderStyle = dashed OR borderStyle = dotted ${l}`,[`${s}`,`${a}`])):x(e,`${r} = solid OR ${r} = dashed OR ${r} = dotted ${l}`,[`${s}`,`${a}`]);const u={group:"border-styles",tab:i,label:t},c=e=>`${e} ${t?"("+t+")":""}`,p=202+4*o;N(e,{[r]:{index:p+1,displayName:"Border Style",editorName:c("Border Style"),group:"Border Style",allowVisualStates:!0,type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:n[r],tab:u,set(e){this._internal.borders[r]=e,this._updateBorders()}},[s]:{index:p+2,displayName:"Border Width",editorName:c("Border Width"),group:"Border Style",allowVisualStates:!0,type:{name:"number",units:["px"],defaultUnit:"px"},default:n[s],tab:u,set(e){this._internal.borders[s]=void 0===e.value?void 0:e.value+e.unit,this._updateBorders()}},[a]:{index:p+3,displayName:"Border Color",editorName:c("Border Color"),group:"Border Style",type:"color",default:n[a],allowVisualStates:!0,tab:u,set(e){this._internal.borders[a]=e,this._updateBorders()}}})}void 0===n.borderStyle&&(n.borderStyle="none"),void 0===n.borderWidth&&(n.borderWidth=2),void 0===n.borderColor&&(n.borderColor="#000000"),o(e,"","borders-all",0),o(e,"Left","borders-left",1),o(e,"Top","borders-top",2),o(e,"Right","borders-right",3),o(e,"Bottom","borders-bottom",4),e.methods._updateBorders=function(){const e=this._internal.borders;function t(t,n){const i=`border${n}Width`,o=`border${n}Color`,r=`border${n}Style`;t[i]=e[i]||e.borderWidth,t[o]=e[o]||e.borderColor,t[r]=e[r]||e.borderStyle}const n={};t(n,"Top"),t(n,"Right"),t(n,"Bottom"),t(n,"Left"),this.setStyle(n,i)};const r=e.initialize;e.initialize=function(){r&&r.call(this),this._internal.borders=_({},n),("none"!==n.borderStyle||n.borderTopStyle&&"none"!==n.borderTopStyle||n.borderRightStyle&&"none"!==n.borderRightStyle||n.borderBottomStyle&&"none"!==n.borderBottomStyle||n.borderRightStyle&&"none"!==n.borderRightStyle)&&this._updateBorders()},this._addCornerRadius(e,{defaults:n,styleTag:i})},addShadowInputs(e,t){const n=(t=t||{}).styleTag;x(e,"boxShadowEnabled = true",["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]),N(e,{boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1,allowVisualStates:!0,set(e){this._internal.boxShadowEnabled=e,this._updateBoxShadow()}},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowOffsetX=e.value+e.unit,this._updateBoxShadow()}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowOffsetY=e.value+e.unit,this._updateBoxShadow()}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowBlurRadius=e.value+e.unit,this._updateBoxShadow()}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,set(e){this._internal.boxShadowSpreadRadius=e.value+e.unit,this._updateBoxShadow()}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1,allowVisualStates:!0,set(e){this._internal.boxShadowInset=e,this._updateBoxShadow()}},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"#00000033",allowVisualStates:!0,set(e){this._internal.boxShadowColor=e,this._updateBoxShadow()}}}),e.methods._updateBoxShadow=function(){const e=this._internal;e.boxShadowEnabled?this.setStyle({boxShadow:`${e.boxShadowInset?"inset ":""}${e.boxShadowOffsetX} ${e.boxShadowOffsetY} ${e.boxShadowBlurRadius} ${e.boxShadowSpreadRadius} ${e.boxShadowColor}`},n):this.removeStyle(["boxShadow"],n)};const i=e.initialize;e.initialize=function(){i&&i.call(this),this._internal.boxShadowOffsetX=0,this._internal.boxShadowOffsetY=0,this._internal.boxShadowBlurRadius="5px",this._internal.boxShadowSpreadRadius="2px",this._internal.boxShadowColor="#00000033"}},addIconInputs(e,t){const n={useIcon:!0,iconColor:"#FFFFFF"};(t=t||{}).defaults&&Object.assign(n,t.defaults);let i="useIcon = true";n.useIcon&&(i+=" OR useIcon NOT SET");const o=["iconSourceType","iconSize"];t.enableIconPlacement&&(o.push("iconPlacement"),o.push("iconSpacing")),x(e,i,o),n.useIcon?(x(e,"#js (params.useIcon===true || params.useIcon===undefined) && params.iconSourceType === 'image'",["iconImageSource"]),x(e,"#js (params.useIcon===true || params.useIcon===undefined) && params.iconSourceType === 'icon'",["iconIconSource","iconColor"])):(x(e,"useIcon = true AND iconSourceType = image",["iconImageSource"]),x(e,"useIcon = true AND iconSourceType = icon",["iconIconSource","iconColor"])),t.hideEnableIconInput||I(e,{useIcon:{type:"boolean",group:"Icon",displayName:"Enable Icon",default:n.useIcon,allowVisualStates:!0,index:20}}),I(e,{iconSourceType:{type:{name:"enum",enums:[{label:"Image",value:"image"},{label:"Icon",value:"icon"}]},group:"Icon",displayName:"Type",default:"icon",allowVisualStates:!0,index:21},iconIconSource:{type:"icon",displayName:"Icon Source",group:"Icon",allowVisualStates:!0,index:23}}),N(e,{iconImageSource:{type:"image",displayName:"Image Source",group:"Icon",allowVisualStates:!0,index:22,set(e){this.props.iconImageSource=(0,b.getAbsoluteUrl)(e)}}}),t.enableIconPlacement&&I(e,{iconSpacing:{group:"Icon",displayName:"Spacing",default:10,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,index:24},iconPlacement:{type:{name:"enum",enums:[{label:"Left",value:"left"},{label:"Right",value:"right"}]},group:"Icon",displayName:"Placement",default:"left",allowVisualStates:!0,index:25}}),I(e,{iconSize:{group:"Icon",displayName:"Size",default:16,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,index:26},iconColor:{group:"Icon",displayName:"Color",default:n.iconColor,type:"color",allowVisualStates:!0,index:27}})},addLabelInputs(e,t){const n={useLabel:!1};(t=t||{}).defaults&&Object.assign(n,t.defaults);const i=n.useLabel?"useLabel = true OR useLabel NOT SET":"useLabel = true",o=t.styleTag||"",r=["label"].concat(["textStyle","fontFamily","fontSize","color","letterSpacing","lineHeight","textTransform"].map((e=>o+e)));t.enableSpacing&&r.push("labelSpacing"),x(e,i,r),I(e,{useLabel:{index:18,type:"boolean",displayName:"Enable Label",group:"Label",default:n.useLabel},label:{type:"string",displayName:"Label",group:"Label",default:"Label"}}),t.enableSpacing&&I(e,{labelSpacing:{displayName:"Spacing",group:"Label",type:{name:"number",units:["px"],defaultUnit:"px"},default:10}}),this.addTextStyleInputs(e,_(_({},t),{},{group:"Label Text Style",popout:{group:"label-text-style",label:"Text Style",parentGroup:"Label"}}))},addTextStyleInputs(e,t){const n=(t=t||{}).group||"Text Style",i=t.styleTag,o=t.hasOwnProperty("portPrefix")?t.portPrefix:t.styleTag||"",r=o+"textStyle",s=void 0!==t.portIndex?t.portIndex:19;N(e,{[r]:{index:s,type:{name:"textStyle",childPorts:["fontFamily","fontSize","color","letterSpacing","lineHeight","textTransform"],childPortPrefix:o},group:n,displayName:"Text Style",default:"None",set(e){this.props[r]=this.context.styles.getTextStyle(e),this.forceUpdate()},allowVisualStates:!0,popout:t.popout},[o+"fontFamily"]:{index:s+1,type:{name:"font",parentPort:r},group:n,displayName:"Font Family",set(e){if(e){let t=e;t.split(".").length>1&&(v().instance.loadFont(t),t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t},i)}else this.removeStyle(["fontFamily"],i);this.props[r]&&this.forceUpdate()},allowVisualStates:!0,popout:t.popout}}),O(e,{[o+"fontSize"]:{index:s+2,group:n,displayName:"Font Size",targetStyleProperty:"fontSize",type:{name:"number",units:["px"],defaultUnit:"px",parentPort:r},onChange(){this.props[r]&&this.forceUpdate()},allowVisualStates:!0,popout:t.popout,styleTag:i},[o+"color"]:{index:s+3,type:{name:"color",parentPort:r},displayName:"Color",group:n,targetStyleProperty:"color",allowVisualStates:!0,popout:t.popout,styleTag:i,onChange(){this.props[r]&&this.forceUpdate()}},[o+"letterSpacing"]:{index:s+4,group:n,displayName:"Letter Spacing",targetStyleProperty:"letterSpacing",type:{name:"number",parentPort:r},type:{name:"number",units:["px","em"],defaultUnit:"px"},allowVisualStates:!0,popout:t.popout,styleTag:i,default:"Auto",applyDefault:!1,onChange(){this.props[r]&&this.forceUpdate()}},[o+"lineHeight"]:{index:s+5,group:n,displayName:"Line Height",targetStyleProperty:"lineHeight",type:{name:"number",units:["","px","%"],defaultUnit:"",parentPort:r},allowVisualStates:!0,onChange(){this.props[r]&&this.forceUpdate()},popout:t.popout,styleTag:i,default:"Auto",applyDefault:!1},[o+"textTransform"]:{index:s+6,group:n,displayName:"Case",applyDefault:!1,targetStyleProperty:"textTransform",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Uppercase",value:"uppercase"},{label:"Lowercase",value:"lowercase"},{label:"Capitalize",value:"capitalize"}],parentPort:r},default:"none",popout:t.popout,styleTag:i,allowVisualStates:!0,onChange(){this.props[r]&&this.forceUpdate()}}});const a=o+"fontFamily";e.setup=function(t,n){n.on("nodeAdded."+e.name,(function(e){e.parameters[a]&&e.parameters[a].split(".").length>1&&v().instance.loadFont(e.parameters[a]),e.on("parameterUpdated",(function(e){e.name===a&&e.value&&e.value.split(".").length>1&&v().instance.loadFont(e.value)}))}))}}};var T=__webpack_require__(5107),E=__webpack_require__.n(T);const D=__webpack_require__(1924);function k(e,t,n,i){e._transitions&&e._transitions[t]&&(e._transitions[t].stop(),delete e._transitions[t]);const o=e.getInputValue(t),r=e.getInput(t);let s;if(r&&"color"===r.type?s=function(e,t){const n=[0,0,0,255];j(n,e);const i=[0,0,0,255];j(i,t),e&&"transparent"!==e||(n[0]=i[0],n[1]=i[1],n[2]=i[2]),t&&"transparent"!==t||(i[0]=n[0],i[1]=n[1],i[2]=n[2]);const o=[0,0,0,0];return e=>(o[0]=Math.floor(D.linear(n[0],i[0],e)),o[1]=Math.floor(D.linear(n[1],i[1],e)),o[2]=Math.floor(D.linear(n[2],i[2],e)),o[3]=Math.floor(D.linear(n[3],i[3],e)),function(e){return"#"+A(e[0])+A(e[1])+A(e[2])+A(e[3])}(o))}(e.context.styles.resolveColor(o),e.context.styles.resolveColor(n)):"number"==typeof o&&"number"==typeof n?s=R(o,n):"object"==typeof o&&o.hasOwnProperty("value")&&"object"==typeof n&&n.hasOwnProperty("value")&&(s=R(o.value,n.value)),s){e._transitions||(e._transitions={});const n=E()(i.curve);e._transitions[t]=e.context.timerScheduler.createTimer({duration:i.dur,onRunning:i=>{const o=s(n.get(i));e.queueInput(t,o)},onFinish:()=>{delete e._transitions[t]}}),e._transitions[t].start()}else e.queueInput(t,n)}function R(e,t){return n=>D.linear(e,t,n)}function j(e,t){if("transparent"===t||!t)return void(e[3]=0);const n=(t.length-1)/2;for(let i=0;i<n;++i){const n=1+2*i;e[i]=parseInt(t.substring(n,n+2),16)}}function A(e){var t=e.toString(16);return 1==t.length?"0"+t:t}const M=["noodlNode","style"];function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t,n){const i=n?e.props[n]:e.props;for(const n in t)if(i[n]){const o=i[n];i[n]=()=>{o(),t[n].call(e)}}else i[n]=t[n].bind(e);e.forceUpdate()}function B(e,t,n){let i;i="signal"===n.type?()=>{e.sendSignalOnOutput(t)}:(...i)=>{e.outputPropValues[t]=n.getValue?n.getValue.call(e,...i):i[0],e.flagOutputDirty(t),n.onChange&&n.onChange.call(e,e.outputPropValues[t])},U(e,{[t]:i},n.propPath)}function W(e,t){if(!e.type)throw new Error(`input ${t} is missing a type`);e.type.units?e.set=function(n){const i=e.propPath?this.props[e.propPath]:this.props;n&&void 0!==n.value?i[t]=n.value+n.unit:delete i[t],e.onChange&&e.onChange.call(this,n),this.forceUpdate()}:e.set=function(n){const i=e.propPath?this.props[e.propPath]:this.props;void 0!==n?i[t]=n:delete i[t],e.onChange&&e.onChange.call(this,n),this.forceUpdate()}}function z(e,t){for(const n of t)Array.isArray(n)?z(e,n):void 0!==n&&e.push(n)}class q extends t().Component{componentDidMount(){this.props.noodlNode.sendSignalOnOutput("didMount")}componentWillUnmount(){this.props.noodlNode.sendSignalOnOutput("willUnmount");const e=this.props.noodlNode;if(e.currentVisualStates){const t=["hover","pressed","focused"],n=e.currentVisualStates.filter((e=>!t.includes(e)));e.setVisualStates(n)}}render(){const e=this.props,{noodlNode:n,style:i}=e,o=function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,M);let r=n.style;i&&(r=V(V({},n.style),i));const s=V(V({ref:e=>{n.innerReactComponentRef=e},style:r},n.props),o);if(n.noodlNodeAsProp){s.noodlNode=n;const e=n.getVisualParentNode();e&&e.props.layout&&(s.parentLayout=e.props.layout)}return n.renderedAtFrame=n.context.frameNumber,n.useFrame&&(void 0!==s.textStyle&&(s.style=r=Object.assign({},s.textStyle,r)),h.size(r,s),h.align(r,s)),t().createElement(n.reactComponent,s,n.renderChildren())}}function H(e,t,n){let i=e;if(n&&(i=e.querySelector(`[noodl-style-tag=${n}]`)),i)for(const e in t)i.style[e]=t[e]}let $=0;function G(e){const{frame:n}=e;void 0!==n&&(n.dimensions&&P.addDimensions(e,"object"==typeof n.dimensions?n.dimensions:void 0),n.position&&P.addTransformInputs(e),n.margins&&P.addMarginInputs(e),n.padding&&P.addPaddingInputs(e),n.align&&P.addAlignInputs(e));const{initialize:o,inputs:r,inputProps:s,inputCss:a,outputs:l,outputProps:c,dynamicports:p,defaultCss:d={},methods:h}=e,f=Object.assign({},d),m={};for(const e in a){const t=a[e],n=t.hasOwnProperty("default")&&!1!==t.applyDefault;if(t.styleTag&&!m.hasOwnProperty(t.styleTag)&&(m[t.styleTag]={}),n){const n=t.type.units?t.default+t.type.defaultUnit:t.default;t.styleTag?m[t.styleTag][e]=n:f[e]=n}}function y(e,t){this.clientBoundingRect=t,"x"===e?this.flagOutputDirty("screenPositionX"):"y"===e?this.flagOutputDirty("screenPositionY"):"width"===e?this.flagOutputDirty("boundingWidth"):"height"===e&&this.flagOutputDirty("boundingHeight")}const v=void 0===e.useVariants||e.useVariants,b={name:e.name,docs:e.docs,displayNodeName:e.displayNodeName||e.displayName,shortDesc:"",category:"Visual",allowChildren:void 0===e.allowChildren||e.allowChildren,visualStates:e.visualStates,allowAsExportRoot:e.allowAsExportRoot,singleton:e.singleton,useVariants:v,connectionPanel:e.connectionPanel,initialize(){this.reactKey="key"+$,$++,this.children=[],this.props={styles:{}},this.outputPropValues={},this.style=Object.assign({},f);for(const e in m)this.props.styles[e]=Object.assign({},m[e]);this.childIndex=0,this.clientBoundingRect={},this.noodlNodeAsProp=!!e.noodlNodeAsProp;const t=this.context&&this.context.runningInCanvas?300:0;this.boundingBoxObserver=new u(y.bind(this),t),this.wantsToBeMounted=!0,this.useFrame=!!n;for(const e in s){const t=s[e];t.propPath&&!this.props.hasOwnProperty(t.propPath)&&(this.props[t.propPath]={});const n=t.propPath?this.props[t.propPath]:this.props;t.hasOwnProperty("default")&&(t.type.defaultUnit&&void 0!==t.default?n[e]=t.default+t.type.defaultUnit:n[e]=t.default)}for(const e in c){const t=c[e];t.propPath&&!this.props.hasOwnProperty(t.propPath)&&(this.props[t.propPath]={}),t.props?U(this,t.props,t.propPath):B(this,e,t)}this.reactComponentRef=null,this.reactComponent=e.getReactComponent.call(this),o&&o.call(this)},getInspectInfo:e.getInspectInfo,nodeScopeDidInitialize:e.nodeScopeDidInitialize,dynamicports:p,inputs:{cssClassName:{index:1e5,displayName:"CSS Class",group:"Advanced Style",type:"string",default:"",set(e){this.props.className=e,this.forceUpdate()}},styleCss:{index:100001,displayName:"CSS Style",group:"Advanced Style",type:{name:"string",codeeditor:"text",allowEditOnly:!0},default:"/* background-color: red; */",set(e){this.updateAdvancedStyle({content:e})}}},outputs:{childIndex:{displayName:"Child Index",type:"number",get(){return this.childIndex}},this:{displayName:"This",type:"reference",get(){return this}},screenPositionX:{group:"Bounding Box",displayName:"Screen Position X",type:"number",get(){return this.clientBoundingRect.x},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},screenPositionY:{group:"Bounding Box",displayName:"Screen Position Y",type:"number",get(){return this.clientBoundingRect.y},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},boundingWidth:{group:"Bounding Box",displayName:"Width",type:"number",get(){return this.clientBoundingRect.width},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},boundingHeight:{group:"Bounding Box",displayName:"Height",type:"number",get(){return this.clientBoundingRect.height},onFirstConnectionAdded(){this.boundingBoxObserver.addObserver()},onLastConnectionRemoved(){this.boundingBoxObserver.removeObserver()}},didMount:{group:"Mounted",displayName:"Did Mount",type:"signal"},willUnmount:{group:"Mounted",displayName:"Will Unmount",type:"signal"}},methods:{updateAdvancedStyle(e){let t;this.customCssStyles&&(this.removeStyle(Object.keys(this.customCssStyles)),this.customCssStyles=void 0);let n="",i=(e.content||"").replace("\n",""),o="";for(;i.length;){let e=i.indexOf("/*");if(-1===e&&(e=i.length),o+=i.substring(0,e),i=i.substring(e),i.length){let e=i.indexOf("*/");-1===e&&(e=i.length),i=i.substring(e+2)}}function r(e){return e.replace(/^\s+|\s+$/gm,"")}const s=o.split(";").map(r).filter((e=>e.length));t={};for(const e of s){const i=e.split(":").map(r);if(-1!==e.indexOf("\n"))n+="Missing semicolon: "+e.split("\n")[0];else if(2!==i.length)n+="Syntax error: "+e;else{const e=i[0].split("-");for(let t=1;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].substring(1);t[e.join("")]=i[1]}}n?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"css-parse-waring",{message:"Error in CSS Style<br>"+n}):(this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"css-parse-waring"),t&&this.setStyle(t),this.customCssStyles=t)},setChildIndex(e){this.childIndex=e,this.flagOutputDirty("childIndex")},updateChildIndices(){let e=0;for(let t=0;t<this.children.length;t++){const n=this.children[t];"For Each"!==n.name&&"Component Children"!==n.name||e--,n.setChildIndex&&n.setChildIndex(t+e)}},addChild(e,t){void 0===t&&(t=this.children.length),e.parent=this,this.children.splice(t,0,e),this.cachedChildren=void 0,this.scheduleUpdateChildIndices(),this.forceUpdate()},removeChild(e){const t=this.children.indexOf(e);-1!==t&&(this.children.splice(t,1),e.parent=void 0,this.cachedChildren=void 0,this.scheduleUpdateChildIndices(),this.forceUpdate())},contains(e){return-1!==this.children.indexOf(e)||this.children.some((t=>t.contains&&t.contains(e)))},scheduleUpdateChildIndices(){this.updateChildIndiciesScheduled||(this.updateChildIndiciesScheduled=!0,this.scheduleAfterInputsHaveUpdated((()=>{this.updateChildIndices(),this.updateChildIndiciesScheduled=!1})))},getChildren(){return this.children},isChild(e){return-1!==this.children.indexOf(e)},getChildRoot(){return this},forceUpdate(){!0!==this.forceUpdateScheduled&&(this.forceUpdateScheduled=!0,this.context.eventEmitter.once("frameEnd",(()=>{this.forceUpdateScheduled=!1,this.renderedAtFrame!==this.context.frameNumber&&this.reactComponentRef&&this.reactComponentRef.setState({})})),this.context.scheduleUpdate())},_resetReactVirtualDOM(){this.reactKey="key"+$,$++;const e=this.getVisualParentNode();e&&(e.cachedChildren=void 0,e.forceUpdate())},render(){if(this.wantsToBeMounted)return t().createElement(q,{key:this.reactKey,noodlNode:this,ref:e=>{this.reactComponentRef=e,this.boundingBoxObserver.setTarget(i().findDOMNode(e))}})},renderChildren(){if(!this.cachedChildren){let e=[];z(e,this.children.map((e=>e.render()))),0===e.length?e=null:1===e.length&&(e=e[0]),this.cachedChildren=e}return this.cachedChildren},setStyle(e,t){const n=t?this.props.styles[t]:this.style;for(const t in e)n[t]=e[t];const i=this.getDOMElement();if(!i)return;let o=!1;if(!t){if(e.hasOwnProperty("opacity")&&(o=e.hasOwnProperty("opacity")&&("0"===i.style.opacity&&e.opacity>0||"0"!==i.style.opacity&&0===e.opacity)),e.transform){let t=e.transform;const n=this.getVisualParentNode();"absolute"!==this.style.position&&n&&n.style.flexDirection||("center"!==this.props.alignX||i.style.marginLeft&&i.style.marginRight||(t="translateX(-50%) "+t),"center"!==this.props.alignY||i.style.marginTop&&i.style.marginBottom||(t="translateY(-50%) "+t)),e.transform=t}const t=e.hasOwnProperty("marginLeft")||e.hasOwnProperty("marginRight")||e.hasOwnProperty("marginTop")||e.hasOwnProperty("marginBottom");(this.props.width&&"%"===this.props.width[this.props.width.length-1]||this.props.height&&"%"===this.props.height[this.props.height.length-1])&&t&&(o=!0),(e.position||e.flexDirection||e.clip)&&(o=!0)}o?this.forceUpdate():H(i,e,t)},removeStyle(e,t){const n=t?this.props.styles[t]:this.style;for(const t of e)delete n[t];const i=this.getDOMElement();let o=!1;if(!t&&i){const t={marginTop:!0,marginBottom:!0,marginLeft:!0,marginRight:!0};for(const n of e)t[n]&&(o=!0)}if(i){const n={};for(const t of e)n[t]="";H(i,n,t)}o&&this.forceUpdate()},getStyle(e){return this.style[e]},getRef(){return this.reactComponentRef},getDOMElement(){const e=this.getRef();if(e)return i().findDOMNode(e)},getVisualParentNode(){if(this.parent)return this.parent;let e=this.nodeScope.componentOwner;for(;!e.parent&&e.parentNodeScope;)e=e.parentNodeScope.componentOwner;return e?e.parent:void 0},setVariant(e){this._stopStateTransitions(),this.variant=e;const t={};e&&g(t,e.parameters),g(t,this.model.parameters),this.currentVisualStates&&g(t,this.getParametersForStates(this.currentVisualStates));const n=Object.keys(t).filter((e=>!this._hasInputBeenSetFromAConnection(e)));for(const e of n)this.registerInputIfNeeded(e),this.hasInput(e)&&this.queueInput(e,t[e])},getParameter(e){return this.model.parameters.hasOwnProperty(e)?this.model.parameters[e]:this.variant&&this.variant.parameters.hasOwnProperty(e)?this.variant.parameters[e]:this.context.getDefaultValueForInput(this.model.type,e)},getParametersForStates(e){const t={};if(this.variant)for(const n of e)this.variant.stateParameters&&this.variant.stateParameters.hasOwnProperty(n)&&g(t,this.variant.stateParameters[n]);for(const e in t)this.model.parameters.hasOwnProperty(e)&&((n=t[e])&&"object"==typeof n&&!Array.isArray(n)?g(t[e],this.model.parameters[e]):t[e]=this.model.parameters[e]);var n;if(this.model.stateParameters)for(const n of e)this.model.stateParameters.hasOwnProperty(n)&&g(t,this.model.stateParameters[n]);return t},_getNewState(e,t){const n=t.filter((t=>!(e||[]).includes(t))),i=n.length?n[0]:"neutral";return""===i?"neutral":i},_getDefaultTransition(e){return this.model.defaultStateTransitions&&this.model.defaultStateTransitions[e]&&this.model.defaultStateTransitions[e].curve?this.model.defaultStateTransitions[e]:this.variant&&this.variant.defaultStateTransitions&&this.variant.defaultStateTransitions[e]&&this.variant.defaultStateTransitions[e].curve?this.variant.defaultStateTransitions[e]:void 0},_getStateTransition(e){let t={};return this.model.stateTransitions&&this.model.stateTransitions[e]&&Object.assign(t,this.model.stateTransitions[e]),this.variant&&this.variant.stateTransitions&&this.variant.stateTransitions[e]&&Object.assign(t,this.variant.stateTransitions[e]),t},setVisualStates(e){if(!this.model)return;if(this.currentVisualStates&&e.length===this.currentVisualStates.length&&e.every(((e,t)=>e===this.currentVisualStates[t])))return;const t=this.currentVisualStates?this.getParametersForStates(this.currentVisualStates):{},n=this.getParametersForStates(e),i=this._getNewState(this.currentVisualStates,e);this.currentVisualStates=e;const o={};for(const e in t)n.hasOwnProperty(e)||this._hasInputBeenSetFromAConnection(e)||void 0!==this.getParameter(e)&&(o[e]=this.getParameter(e));for(const e in n)this._hasInputBeenSetFromAConnection(e)||void 0===n[e]||(o[e]=n[e]);const r=this._getDefaultTransition(i),s=this._getStateTransition(i);for(const e in o)s[e]&&s[e].curve?k(this,e,o[e],s[e]):!s[e]&&r?k(this,e,o[e],r):(this._transitions&&this._transitions[e]&&(this._transitions[e].stop(),delete this._transitions[e]),this.queueInput(e,o[e]))},_getVisualStates(){return this.currentVisualStates||[]},_stopStateTransitions(){if(this._transitions)for(const e in this._transitions)this._transitions[e].stop(),delete this._transitions[e]}}};v&&(b.inputs.variant={displayName:"Variant",group:"General",type:{name:"string",allowConnectionsOnly:!0},set(e){if(this.variant&&this.variant.name===e)return;const t=this.context.variants.getVariant(this.model.type,e);t&&this.setVariant(t)}}),!1!==e.mountedInput&&(b.inputs.mounted={displayName:"Mounted",index:9999,type:"boolean",group:"General",default:!0,set(e){if(e=!!e,this.wantsToBeMounted!==e){this.wantsToBeMounted=e;const t=this.getVisualParentNode();t&&(t.cachedChildren=void 0,t.forceUpdate())}}});for(const e in r)b.inputs[e]=r[e];for(const t in s){const n=s[t];"node"===n.type?(n.type="reference",n.set=function(e){const i=n.propPath?this.props[n.propPath]:this.props;void 0!==e?i[t]=e.render():delete i[t],this.forceUpdate()}):"signal"===n.type?console.error(`Error: Signals not supported as a react prop. node: '${e.name}' input: '${t}'`):W(n,t),b.inputs[t]=n}for(const e in a){const t=a[e],n=t.targetStyleProperty||e;t.type.units?t.set=function(e){"object"!=typeof e&&t.type.defaultUnit&&(e={value:e,unit:t.type.defaultUnit}),"object"==typeof e&&void 0!==e.value?this.setStyle({[n]:e.value+e.unit},t.styleTag):void 0!==e?this.setStyle({[n]:e},t.styleTag):this.removeStyle([n],t.styleTag),t.onChange&&t.onChange.call(this,e)}:t.set=function(e){void 0!==e?this.setStyle({[n]:e},t.styleTag):this.removeStyle([n],t.styleTag),t.onChange&&t.onChange.call(this,e)},b.inputs[e]=t}for(const e in l)b.outputs[e]=l[e];for(const e in c){const t=c[e];"signal"!==t.type&&(t.get=function(){return this.outputPropValues[e]}),b.outputs[e]=t}for(const e in h)b.methods[e]=h[e];return{node:b,setup:e.setup}}const X=["onClick","onMouseDown","onMouseMove","onMouseUp","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onPointerDown","onPointerMove","onPointerUp","onPointerCancel"],Y=new Set(["onMouseLeave","onMouseOut"]);function J(e){const t={};for(const n of X)e.blockTouch&&!Y.has(n)?e.pointer&&e.pointer[n]?t[n]=t=>{e.pointer[n](t),t.stopPropagation()}:e[n]?t[n]=t=>{e[n](t),t.stopPropagation()}:t[n]=e=>{e.stopPropagation()}:e[n]?t[n]=e[n]:e.pointer&&(t[n]=e.pointer[n]);if(e.noodlNode)for(const n in t){const i=t[n];i&&(t[n]=t=>{i.call(this,t),e.noodlNode.context.updateDirtyNodes()})}return t}const K={};function Q(e,t,n){e[t]||(e[t]={});for(const i in n)e[t][i]=n[i]}const Z=function(e,t,n){if(K[e])(function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;for(var n in t)if(t.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0})(t,K[e].props)||(K[e].style.innerHTML=n(e,t),K[e].props=Object.assign({},t));else{var i=document.createElement("style");i.innerHTML=n(e,t),document.head.appendChild(i),K[e]={style:i,props:Object.assign({},t)}}},ee=function(e,t){t=t||{},e.visualStates=[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"},{name:"pressed",label:"Pressed"},{name:"focused",label:"Focused"},{name:"disabled",label:"Disabled"}],t.checked&&e.visualStates.splice(3,0,{name:"checked",label:"Checked"}),function(e,t){Q(e,"inputs",{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this._updateVisualState(),this.forceUpdate(),this.flagOutputDirty("enabled"))}}})}(e),function(e,t){Q(e,"inputProps",{blockTouch:{index:450,displayName:"Block Pointer Events",type:"boolean",group:"Pointer Events"}})}(e),e.methods._updateVisualState=function(){const e=[];this._internal.enabled&&(this.outputPropValues.hoverState&&e.push("hover"),this.outputPropValues.pressedState&&e.push("pressed"),this.outputPropValues.focusState&&e.push("focused")),t.checked&&this._internal.checked&&e.push("checked"),this._internal.enabled||e.push("disabled"),this.setVisualStates(e)},function(e,t){Q(e,"outputProps",{focusState:{displayName:"Focused",group:"States",type:"boolean",props:{onFocus(){this.outputPropValues.focusState=!0,this.flagOutputDirty("focusState"),this._updateVisualState()},onBlur(){this.outputPropValues.focusState=!1,this.flagOutputDirty("focusState"),this._updateVisualState()}}},onFocus:{displayName:"Focused",group:"Focus Events",type:"signal",props:{onFocus(){this.sendSignalOnOutput("onFocus")}}},onBlur:{displayName:"Blurred",group:"Focus Events",type:"signal",props:{onBlur(){this.sendSignalOnOutput("onBlur")}}},hoverState:{displayName:"Hover",group:"States",type:"boolean",props:{onMouseOver(){this.outputPropValues.hoverState=!0,this.flagOutputDirty("hoverState"),this._updateVisualState()},onMouseLeave(){this.outputPropValues.hoverState=!1,this.flagOutputDirty("hoverState"),this._updateVisualState()}}},hoverStart:{displayName:"Hover Start",group:"Pointer Events",type:"signal",props:{onMouseOver(){this.sendSignalOnOutput("hoverStart")}}},hoverEnd:{displayName:"Hover End",group:"Pointer Events",type:"signal",props:{onMouseLeave(){this.sendSignalOnOutput("hoverEnd")}}},pressedState:{displayName:"Pressed",group:"States",type:"boolean",props:{onMouseDown(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this._updateVisualState()},onTouchStart(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this._updateVisualState()},onMouseUp(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()},onTouchEnd(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()},onTouchCancel(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()},onMouseLeave(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this._updateVisualState()}}},pointerDown:{displayName:"Pointer Down",group:"Pointer Events",type:"signal",props:{onMouseDown(){this.sendSignalOnOutput("pointerDown")},onTouchStart(){this.sendSignalOnOutput("pointerDown")}}},pointerUp:{displayName:"Pointer Up",group:"Pointer Events",type:"signal",props:{onMouseUp(){this.sendSignalOnOutput("pointerUp")},onTouchEnd(){this.sendSignalOnOutput("pointerUp")},onTouchCancel(){this.sendSignalOnOutput("pointerUp")}}}})}(e),function(e,t){Q(e,"outputs",{enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}}})}(e);const n=e.initialize;e.initialize=function(){n&&n.call(this),this.props.enabled=this._internal.enabled=!0,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1}},te=function(e){return Object.assign({},{onFocus:e.onFocus,onBlur:e.onBlur},J(e))};function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ne.apply(this,arguments)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){let t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style);function n(){const t={};return e.useLabel&&("left"===e.iconPlacement||void 0===e.iconPlacement?t.marginRight=e.iconSpacing:t.marginLeft=e.iconSpacing),"image"===e.iconSourceType&&void 0!==e.iconImageSource?(t.width=e.iconSize,t.height=e.iconSize,React.createElement("img",{alt:"",src:e.iconImageSource,style:t})):"icon"===e.iconSourceType&&void 0!==e.iconIconSource?(t.fontSize=e.iconSize,t.color=e.iconColor,!0===e.iconIconSource.codeAsClass?React.createElement("span",{className:[e.iconIconSource.class,e.iconIconSource.code].join(" "),style:t}):React.createElement("span",{className:e.iconIconSource.class,style:t},e.iconIconSource.code)):null}h.size(t,e),h.align(t,e),void 0!==e.textStyle&&(t=Object.assign({},e.textStyle,t),t.color=e.noodlNode.context.styles.resolveColor(t.color));let i="ndl-controls-button";e.className&&(i=i+" "+e.className);let o=null;return e.useLabel&&e.useIcon?o=React.createElement(React.Fragment,null,"left"===e.iconPlacement?n():null,e.label,"right"===e.iconPlacement?n():null):e.useLabel?o=e.label:e.useIcon&&(o=n()),React.createElement("button",ne({className:i,disabled:!e.enabled},te(e),{type:e.buttonType,style:t,onClick:e.onClick}),o,e.children)}const se={name:"net.noodl.controls.button",displayName:"Button",docs:"https://docs.noodl.net/nodes/ui-controls/button",allowChildren:!0,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize(){this.props.layout="row"},getReactComponent:()=>re,inputCss:{backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"#000000",allowVisualStates:!0}},outputProps:{onClick:{displayName:"Click",group:"Events",type:"signal"}}};P.addDimensions(se,{defaultSizeMode:"contentSize",contentLabel:"Content"}),P.addTextStyleInputs(se),P.addAlignInputs(se),P.addTransformInputs(se),P.addPaddingInputs(se,{defaults:{paddingTop:5,paddingRight:20,paddingBottom:5,paddingLeft:20}}),P.addMarginInputs(se),P.addLabelInputs(se,{defaults:{useLabel:!0}}),P.addIconInputs(se,{enableIconPlacement:!0,defaults:{useIcon:!1}}),P.addSharedVisualInputs(se),P.addBorderInputs(se),P.addShadowInputs(se),ee(se);const ae=G(se);var le=__webpack_require__(7397),ue=__webpack_require__.n(le);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ce.apply(this,arguments)}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(t){const[n,i]=(0,e.useState)(t.checked);(0,e.useEffect)((()=>{i(!!t.checked)}),[]),(0,e.useEffect)((()=>{i(!!t.checked)}),[t.checked]);let o=de({},t.style);"none"===t.parentLayout&&(o.position="absolute"),h.align(o,t);const r={id:t.id,className:t.className,disabled:!t.enabled,className:"ndl-controls-checkbox-2",style:{width:t.styles.checkbox.width,height:t.styles.checkbox.height}},s=de({display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative"},t.styles.checkbox);t.useLabel||(Object.assign(r,te(t)),Object.assign(s,o));const a=React.createElement("div",{className:"ndl-controls-pointer",style:s,"noodl-style-tag":"checkbox"},t.useIcon?function(){if("image"===t.iconSourceType&&void 0!==t.iconImageSource)return React.createElement("img",{alt:"",src:t.iconImageSource,style:{width:t.iconSize,height:t.iconSize,position:"absolute"}});if("icon"===t.iconSourceType&&void 0!==t.iconIconSource){const e={fontSize:t.iconSize,color:t.iconColor,position:"absolute"};return!0===t.iconIconSource.codeAsClass?React.createElement("span",{className:[t.iconIconSource.class,t.iconIconSource.code].join(" "),style:e}):React.createElement("span",{className:t.iconIconSource.class,style:e},t.iconIconSource.code)}return null}():null,React.createElement("input",ce({type:"checkbox"},r,{checked:n,onChange:e=>{i(e.target.checked),t.checkedChanged&&t.checkedChanged(e.target.checked)}})));if(t.useLabel){const e=de(de({marginLeft:t.labelSpacing},t.labeltextStyle),t.styles.label);return t.enabled||(e.cursor="default"),e.color=t.noodlNode.context.styles.resolveColor(e.color),React.createElement("div",ce({style:de({display:"flex",alignItems:"center"},o)},te(t)),a,React.createElement("label",{className:"ndl-controls-pointer",style:e,htmlFor:t.id,"noodl-style-tag":"label"},t.label))}return a}const ge={name:"net.noodl.controls.checkbox",displayName:"Checkbox",docs:"https://docs.noodl.net/nodes/ui-controls/checkbox",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize(){this.props.sizeMode="explicit",this.props.id="input-"+ue()(),this.props.checked=this._internal.checked=!1,this.props.checkedChanged=e=>{const t=this._internal.checked!==e;this._internal.checked=e,t&&(this.flagOutputDirty("checked"),this.sendSignalOnOutput("onChange"),this._updateVisualState())}},getReactComponent:()=>fe,inputs:{checked:{type:"boolean",displayName:"Checked",group:"General",default:!1,index:100,set:function(e){const t=(e=!!e)!==this._internal.checked;this.props.checked=this._internal.checked=e,t&&(this.forceUpdate(),this.flagOutputDirty("checked"),this._updateVisualState())}}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color",default:"transparent",applyDefault:!1,allowVisualStates:!0,styleTag:"checkbox"},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["px","vw","vh"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"checkbox"},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["px","vw","vh"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"checkbox"}},outputs:{checked:{type:"boolean",displayName:"Checked",group:"States",getter:function(){return this._internal.checked}},onChange:{displayName:"Changed",group:"Events",type:"signal"}}};P.addAlignInputs(ge),P.addTransformInputs(ge),P.addMarginInputs(ge),P.addPaddingInputs(ge),P.addIconInputs(ge),P.addLabelInputs(ge,{enableSpacing:!0,styleTag:"label"}),P.addSharedVisualInputs(ge),P.addBorderInputs(ge,{defaults:{borderStyle:"solid",borderWidth:2,borderColor:"#000000",borderRadius:3},styleTag:"checkbox"}),P.addShadowInputs(ge,{styleTag:"checkbox"}),ee(ge,{checked:!0});const me=G(ge),ye=["height"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ve.apply(this,arguments)}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(t){const[n,i]=(0,e.useState)(t.value);(0,e.useEffect)((()=>{i(t.value)}),[]),(0,e.useEffect)((()=>{i(t.value)}),[t.value]);var o=Se({},t.style);h.size(o,t),h.align(o,t),void 0!==t.textStyle&&((o=Object.assign({},t.textStyle,o)).color=t.noodlNode.context.styles.resolveColor(o.color));const r=t.items&&void 0!==n?t.items.findIndex((e=>e.Value===n)):-1,{height:s}=o,a=function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,ye);function l(){if("image"===t.iconSourceType&&void 0!==t.iconImageSource)return React.createElement("img",{alt:"",src:t.iconImageSource,style:{width:t.iconSize,height:t.iconSize}});if("icon"===t.iconSourceType&&void 0!==t.iconIconSource){const e={fontSize:t.iconSize,color:t.iconColor};return"left"===t.iconPlacement||void 0===t.iconPlacement?e.marginRight=t.iconSpacing:e.marginLeft=t.iconSpacing,!0===t.iconIconSource.codeAsClass?React.createElement("span",{className:[t.iconIconSource.class,t.iconIconSource.code].join(" "),style:e}):React.createElement("span",{className:t.iconIconSource.class,style:e},t.iconIconSource.code)}return null}const u={id:t.id,className:t.className,style:{width:"100%",height:"100%",opacity:0,position:"absolute",textTransform:"inherit",cursor:t.enabled?"":"default"},onClick:t.onClick},c=Se(Se({display:"flex",alignItems:"center"},t.styles.inputWrapper),{},{cursor:t.enabled?"":"default"}),p=s&&"%"===s[s.length-1];t.useLabel?p?c.flexGrow=1:c.height=s:(Object.assign(c,a),c.height=s);let d=[];t.items&&(d=t.items.map((e=>React.createElement("option",{value:e.Value,disabled:"true"===e.Disabled||!0===e.Disabled||void 0},e.Label))));let f=null;r>=0&&r<t.items.items.length?f=React.createElement("span",null,t.items.items[r].Label):t.placeholder&&(f=React.createElement("span",{style:{opacity:t.placeholderOpacity}},t.placeholder));const g=React.createElement("div",{className:"ndl-controls-pointer",style:c,"noodl-style-tag":"inputWrapper"},t.useIcon&&"left"===t.iconPlacement?l():null,React.createElement("div",{style:{width:"100%",height:"100%",alignItems:"center",display:"flex"}},f),t.useIcon&&"right"===t.iconPlacement?l():null,React.createElement("select",ve({},u,{disabled:!t.enabled,value:n},te(t),{onChange:e=>{i(e.target.value),t.valueChanged&&t.valueChanged(e.target.value)}}),React.createElement("option",{value:!0,disabled:!0,selected:!0,hidden:!0}),d));if(t.useLabel){const e=Se(Se({},a),{},{display:"flex",flexDirection:"column"});return p&&(e.height=s),React.createElement("div",{style:e},React.createElement("label",{htmlFor:t.id,style:Se(Se(Se({},t.labeltextStyle),t.styles.label),{},{marginBottom:t.labelSpacing}),"noodl-style-tag":"label"},t.label),g)}return g}const Oe={name:"net.noodl.controls.options",displayName:"Dropdown",docs:"https://docs.noodl.net/nodes/ui-controls/dropdown",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Text Style","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize:function(){this._itemsChanged=()=>{this.forceUpdate()},this.props.id="input-"+ue()(),this.props.valueChanged=e=>{const t=this._internal.value!==e;this._internal.value=e,t&&(this.flagOutputDirty("value"),this.sendSignalOnOutput("onChange"))}},getReactComponent:()=>we,inputs:{items:{type:"array",displayName:"Items",group:"General",set:function(e){this._internal.items!==e&&void 0!==this._internal.items&&this._internal.items.off("change",this._itemsChanged),this._internal.items=e,this._internal.items.on("change",this._itemsChanged),this.props.items=this._internal.items}},value:{type:"string",displayName:"Value",group:"General",set:function(e){if(void 0!==e&&"string"!=typeof e){if(void 0===e.toString)return;e=e.toString()}this._internal.items&&(e=this._internal.items.find((t=>t.Value===e))?e:void 0);const t=e!==this._internal.value;this.props.value=this._internal.value=e,t&&(this.forceUpdate(),this.flagOutputDirty("value"))}}},inputProps:{placeholder:{displayName:"Placeholder",type:"string",group:"Placeholder"},placeholderOpacity:{group:"Placeholder",displayName:"Placeholder opacity",type:"number",default:.5}},outputs:{value:{type:"string",displayName:"Value",group:"States",getter:function(){return this._internal.value}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputCss:{backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent",styleTag:"inputWrapper",allowVisualStates:!0}}};P.addDimensions(Oe,{defaultSizeMode:"contentSize",contentLabel:"Content"}),P.addAlignInputs(Oe),P.addTextStyleInputs(Oe),P.addTransformInputs(Oe),P.addPaddingInputs(Oe,{styleTag:"inputWrapper"}),P.addMarginInputs(Oe),P.addIconInputs(Oe,{enableIconPlacement:!0,defaults:{useIcon:!1,iconColor:"#000000"}}),P.addLabelInputs(Oe,{enableSpacing:!0,styleTag:"label"}),P.addSharedVisualInputs(Oe),P.addBorderInputs(Oe,{defaults:{borderStyle:"solid",borderWidth:2,borderColor:"#000000",borderRadius:5},styleTag:"inputWrapper"}),P.addShadowInputs(Oe,{styleTag:"inputWrapper"}),ee(Oe);const Ce=G(Oe),Ne=t().createContext();function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ie.apply(this,arguments)}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(t){const n=(0,e.useContext)(Ne);let i=Pe({},t.style);"none"===t.parentLayout&&(i.position="absolute"),h.align(i,t),t.checkedChanged&&t.checkedChanged(!!n&&n.selected===t.value);const o={id:t.id,className:t.className,disabled:!t.enabled,className:"ndl-controls-radio-2",style:{width:t.styles.radio.width,height:t.styles.radio.height}},r=Pe({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},t.styles.radio);t.useLabel?De(t.styles.radio.width)&&(delete r.width,r.flexGrow=1):(Object.assign(o,te(t)),Object.assign(r,i));const s={left:t.fillSpacing,right:t.fillSpacing,top:t.fillSpacing,bottom:t.fillSpacing,backgroundColor:t.styles.fill.backgroundColor,borderRadius:"inherit",position:"absolute"},a=React.createElement("div",{className:"ndl-controls-pointer",style:r,"noodl-style-tag":"radio"},React.createElement("div",{style:s,"noodl-style-tag":"fill"}),t.useIcon?function(){if("image"===t.iconSourceType&&void 0!==t.iconImageSource)return React.createElement("img",{alt:"",src:t.iconImageSource,style:{width:t.iconSize,height:t.iconSize}});if("icon"===t.iconSourceType&&void 0!==t.iconIconSource){const e={fontSize:t.iconSize,color:t.iconColor};return!0===t.iconIconSource.codeAsClass?React.createElement("span",{className:["ndl-controls-abs-center",t.iconIconSource.class,t.iconIconSource.code].join(" "),style:e}):React.createElement("span",{className:["ndl-controls-abs-center",t.iconIconSource.class].join(" "),style:e},t.iconIconSource.code)}return null}():null,React.createElement("input",Ie({type:"radio",name:n?n.name:void 0},o,{checked:!!n&&n.selected===t.value,onChange:e=>{n&&n.checkedChanged&&n.checkedChanged(t.value)}})));if(t.useLabel){const e=Pe(Pe(Pe({marginLeft:t.labelSpacing},t.labeltextStyle),t.styles.label),{},{cursor:t.enabled?void 0:"default"});e.color=t.noodlNode.context.styles.resolveColor(e.color);const n=Pe({display:"flex",alignItems:"center"},i);return De(t.styles.radio.width)&&(n.width=t.styles.radio.width),De(t.styles.radio.height)&&(n.height=t.styles.radio.height),React.createElement("div",Ie({style:n},te(t)),a,React.createElement("label",{className:"ndl-controls-pointer",style:e,htmlFor:t.id,"noodl-style-tag":"label"},t.label))}return a}function De(e){return e&&"%"===e[e.length-1]}const ke={name:"net.noodl.controls.radiobutton",displayName:"Radio Button",docs:"https://docs.noodl.net/nodes/ui-controls/radio-button",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Fill Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize(){this.props.sizeMode="explicit",this.props.id="input-"+ue()(),this._internal.checked=!1,this.props.checkedChanged=e=>{const t=this._internal.checked!==e;this._internal.checked=e,t&&(this.flagOutputDirty("checked"),this._updateVisualState())},this.props.styles.fill={}},getReactComponent:()=>Ee,inputs:{fillColor:{index:19,displayName:"Fill Color",group:"Fill Style",type:"color",allowVisualStates:!0,styleTag:"fill",set(e){this.setStyle({backgroundColor:e},"fill")}}},inputProps:{value:{type:"string",displayName:"Value",group:"General",index:100},fillSpacing:{displayName:"Fill Spacing",group:"Fill Style",type:{name:"number",units:["px","vw","vh"],defaultUnit:"px"},allowVisualStates:!0,default:2}},inputCss:{width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["px","%","vw","vh"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"radio",onChange(){this.forceUpdate()}},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["px","%"],defaultUnit:"px"},default:32,allowVisualStates:!0,styleTag:"radio",onChange(){this.forceUpdate()}},backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color",allowVisualStates:!0,styleTag:"radio",default:"transparent",applyDefault:!1}},outputs:{checked:{type:"boolean",displayName:"Checked",group:"States",get(){return this._internal.checked}}}};P.addAlignInputs(ke),P.addTransformInputs(ke),P.addMarginInputs(ke),P.addPaddingInputs(ke),P.addIconInputs(ke),P.addLabelInputs(ke,{enableSpacing:!0,styleTag:"label"}),P.addSharedVisualInputs(ke),P.addBorderInputs(ke,{defaults:{borderStyle:"solid",borderWidth:2,borderRadius:16},styleTag:"radio"}),P.addShadowInputs(ke,{styleTag:"radio"}),ee(ke,{checked:!0});const Re=G(ke),je=["row","row-reverse","column","column-reverse","inherit","initial","revert","unset"];function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(t){const[n,i]=(0,e.useState)(t.value),o={selected:n,name:t.name,checkedChanged:e=>{i(e),t.valueChanged&&t.valueChanged(e)}};(0,e.useEffect)((()=>{i(t.value)}),[t.value]);var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.style);h.size(r,t),h.align(r,t);let s="ndl-controls-radiobuttongroup";return t.className&&(s=s+" "+t.className),React.createElement(Ne.Provider,{value:o},React.createElement("div",{className:s,style:r},t.children))}var Ve={name:"Radio Button Group",displayName:"Radio Button Group",docs:"https://docs.noodl.net/nodes/ui-controls/radio-button-group",allowChildren:!0,noodlNodeAsProp:!0,useVariants:!1,connectionPanel:{groupPriority:["General","Style","Actions","Events","Mounted","States"]},initialize(){this.props.name="radio-"+ue()(),this.props.valueChanged=e=>{const t=this._internal.value!==e;this._internal.value=e,this.props.value=e,t&&(this.forceUpdate(),this.flagOutputDirty("value"),this.sendSignalOnOutput("onChange"))}},getReactComponent:()=>Fe,defaultCss:{display:"flex",position:"relative",flexDirection:"column"},inputs:{flexDirection:{index:11,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||je.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}},value:{index:20,type:"string",displayName:"Value",group:"General",set:function(e){if("string"!=typeof e&&void 0!==e.toString&&(e=e.toString()),"string"!=typeof e)return;const t=e!==this._internal.value;this.props.value=this._internal.value=e,t&&(this.forceUpdate(),this.flagOutputDirty("value"))}}},outputs:{value:{type:"string",displayName:"Value",group:"States",getter:function(){return this._internal.value}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputProps:{},outputProps:{}};P.addDimensions(Ve,{defaultSizeMode:"contentSize",contentLabel:"Content"}),P.addAlignInputs(Ve),P.addTransformInputs(Ve),P.addMarginInputs(Ve),P.addPaddingInputs(Ve),P.addSharedVisualInputs(Ve);const Le=Ve=G(Ve);function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ue.apply(this,arguments)}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e,t){return`\n    .${e}::-webkit-slider-thumb {\n        width: ${t.thumbWidth};\n    }\n    `}function He(e,t,n){function i(e,i){const o=`${t}Border${i}Color`,r=`${t}Border${i}Style`,s=n[`${t}Border${i}Width`]||n[`${t}BorderWidth`];void 0!==s&&(e[`border${i}Width`]=s);const a=e[o]=n[o]||n[`${t}BorderColor`];void 0!==a&&(e[`border${i}Color`]=a);const l=n[r]||n[`${t}BorderStyle`];void 0!==l&&(e[`border${i}Style`]=l)}i(e,"Top"),i(e,"Right"),i(e,"Bottom"),i(e,"Left")}function $e(e,t,n){const i=n[`${t}BorderRadius`],o=n[`${t}BorderTopLeftRadius`]||i,r=n[`${t}BorderTopRightRadius`]||i,s=n[`${t}BorderBottomRightRadius`]||i,a=n[`${t}BorderBottomLeftRadius`]||i;e.borderRadius=`${o} ${r} ${s} ${a}`}function Ge(e,t,n){if(!n[`${t}BoxShadowEnabled`])return;const i=n[`${t}BoxShadowInset`],o=n[`${t}BoxShadowOffsetX`],r=n[`${t}BoxShadowOffsetY`],s=n[`${t}BoxShadowBlurRadius`],a=n[`${t}BoxShadowSpreadRadius`],l=n[`${t}BoxShadowColor`];e.boxShadow=`${i?"inset ":""}${o} ${r} ${s} ${a} ${l}`}function Xe(e){return e&&"x"===e[e.length-1]}function Ye(t){const[n,i]=(0,e.useState)(t.value);function o(e){i(e),t.updateOutputValue(e)}(0,e.useEffect)((()=>{o(t.value)}),[t.value]);var r=We({},t.style);h.size(r,t),h.align(r,t);const s="ndl-controls-range-"+t._nodeId;Z(s,t,qe);const a=`ndl-controls-range2 ${s} ${t.className?t.className:""} `,l={id:t.id,style:{width:"100%",opacity:0},onClick:t.onClick,min:t.min,max:t.max};if(t.step&&(l.step=t.step),Xe(t.thumbHeight))if(Xe(t.trackHeight)){const e=Number(t.thumbHeight.slice(0,-2)),n=Number(t.trackHeight.slice(0,-2));l.style.height=Math.max(e,n)+"px"}else l.style.height=t.thumbHeight;else l.style.height=t.trackHeight;const u=We({display:"flex",alignItems:"center"},r),c=(n-t.min)/(t.max-t.min),p={position:"absolute",width:"100%",height:t.trackHeight,background:`linear-gradient(to right, ${t.trackActiveColor} 0%, ${t.trackActiveColor} ${100*c}%, ${t.trackColor} ${100*c}%, ${t.trackColor} 100%)`};He(p,"track",t),$e(p,"track",t),Ge(p,"track",t);const d={position:"absolute",left:"calc((100% - "+t.thumbWidth+") * "+c+")",width:t.thumbWidth,height:t.thumbHeight,backgroundColor:t.thumbColor};return He(d,"thumb",t),$e(d,"thumb",t),Ge(d,"thumb",t),React.createElement("div",{style:u},React.createElement("div",{style:p}),React.createElement("div",{style:d}),React.createElement("input",Ue({className:a},te(t),{type:"range"},l,{value:n,disabled:!t.enabled,onChange:e=>o(Number(e.target.value))})))}const Je={group:"thumb-styles",label:"Thumb Styles"},Ke={group:"track-styles",label:"Track Styles"},Qe={name:"net.noodl.controls.range",displayNodeName:"Slider",docs:"https://docs.noodl.net/nodes/ui-controls/slider",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Hover Events","Pointer Events","Focus Events"]},initialize(){this.props.sizeMode="contentHeight",this.props.id="input-"+ue()(),this.props.value=this.props.min,this._internal.outputValue=0,this.props._nodeId=this.id,this.props.updateOutputValue=e=>{e="string"==typeof e?parseFloat(e):e,this._internal.outputValue!==e&&(this._internal.outputValue=e,this.flagOutputDirty("value"),this._updateOutputValuePercent(e),this.sendSignalOnOutput("onChange"))},this.props.updateOutputValue(this.props.value)},getReactComponent:()=>Ye,inputs:{value:{type:"string",displayName:"Value",group:"General",index:100,set(e){this._setInputValue(e)}}},outputs:{value:{type:"number",displayName:"Value",group:"States",get(){return this._internal.outputValue}},valuePercent:{type:"number",displayName:"Value Percent",group:"States",get(){return this._internal.valuePercent}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputProps:{min:{type:"number",displayName:"Min",group:"General",default:0,index:100,onChange(){this._setInputValue(this.props.value)}},max:{type:"number",displayName:"Max",group:"General",default:100,index:100,onChange(){this._setInputValue(this.props.value)}},step:{type:"number",displayName:"Step",group:"General",default:1,index:100},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"%"},default:100,allowVisualStates:!0},thumbWidth:{group:"Thumb Style",displayName:"Width",type:{name:"number",units:["px","vw","%"],defaultUnit:"px",allowEditOnly:!0},default:16,popout:Je,allowVisualStates:!0},thumbHeight:{group:"Thumb Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:16,popout:Je,allowVisualStates:!0},thumbColor:{group:"Thumb Style",displayName:"Color",type:{name:"color",allowEditOnly:!0},default:"#000000",popout:Je,allowVisualStates:!0},trackHeight:{group:"Track Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:6,popout:Ke,allowVisualStates:!0},trackColor:{group:"Track Style",displayName:"Inactive Color",type:{name:"color",allowEditOnly:!0},default:"#f0f0f0",popout:Ke,allowVisualStates:!0},trackActiveColor:{group:"Track Style",displayName:"Active Color",type:{name:"color",allowEditOnly:!0},default:"#f0f0f0",popout:Ke,allowVisualStates:!0}},methods:{_updateOutputValuePercent(e){const t=this.props.min,n=this.props.max,i=Math.floor((e-t)/(n-t)*100),o=this._internal.valuePercentChanged!==i;this._internal.valuePercent=i,o&&this.flagOutputDirty("valuePercent")},_setInputValue(e){const t=Math.max(this.props.min,Math.min(this.props.max,e||0));t!==this.props.value&&(this.props.value=t,this.forceUpdate())}}};function Ze(e,t){const n=(t=t||{}).defaults||{},i=t.popout;n.borderStyle="none",n.borderWidth=0,n.borderColor="#000000";const o=t.propPrefix[0].toUpperCase()+t.propPrefix.slice(1);function r(e,r,s,a){const l=t.propPrefix+`Border${r}Style`,u=t.propPrefix+`Border${r}Width`,c=t.propPrefix+`Border${r}Color`;let p="none"!==n.borderStyle?"OR borderStyle NOT SET":"";r?(n[l]&&"none"!==n[l]&&(p+=`OR ${l} NOT SET`),P.addDynamicInputPorts(e,`${l} = solid OR ${l} = dashed OR ${l} = dotted OR borderStyle = solid OR borderStyle = dashed OR borderStyle = dotted ${p}`,[`${u}`,`${c}`])):P.addDynamicInputPorts(e,`${l} = solid OR ${l} = dashed OR ${l} = dotted ${p}`,[`${u}`,`${c}`]);const d={group:t.propPrefix+"-border-styles",tab:s,label:r},h=e=>`${o} ${e} ${r?"("+r+")":""}`,f=202+4*a,g=o+" Border Style";P.addInputProps(e,{[l]:{index:f+1,displayName:"Border Style",editorName:h("Border Style"),group:g,type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:n[`border${r}Style`],tab:d,popout:i,allowVisualStates:!0},[u]:{index:f+2,displayName:"Border Width",editorName:h("Border Width"),group:g,type:{name:"number",units:["px"],defaultUnit:"px"},default:n[`border${r}Width`],tab:d,popout:i,allowVisualStates:!0},[c]:{index:f+3,displayName:"Border Color",editorName:h("Border Color"),group:g,type:"color",default:n[`border${r}Color`],tab:d,popout:i,allowVisualStates:!0}})}r(e,"","borders-all",0),r(e,"Left","borders-left",1),r(e,"Top","borders-top",2),r(e,"Right","borders-right",3),r(e,"Bottom","borders-bottom",4)}function et(e,t){const n=(t=t||{}).defaults||{},i=t.popout;n.borderRadius||(n.borderRadius=0);const o=t.propPrefix[0].toUpperCase()+t.propPrefix.slice(1);function r(e,r,s,a){const l={group:t.propPrefix+"-corners",tab:s,label:r},u=`Border${r}Radius`;P.addInputProps(e,{[t.propPrefix+u]:{index:240+a,displayName:"Corner Radius",editorName:("Corner Radius",`${o} Corner Radius ${r?"("+r+")":""}`),group:o+" Corner Radius",type:{name:"number",units:["px","%"],defaultUnit:"px"},default:n[`border${r}Radius`],tab:l,popout:i}})}r(e,"","corners-all",0),r(e,"TopLeft","corners-top-left",1),r(e,"TopRight","corners-top-right",2),r(e,"BottomRight","corners-bottom-right",3),r(e,"BottomLeft","corners-bottom-left",4)}function tt(e,t){const n=(t=t||{}).popout,i=t.propPrefix;P.addDynamicInputPorts(e,`${i}BoxShadowEnabled = true`,[`${i}BoxShadowOffsetX`,`${i}BoxShadowOffsetY`,`${i}BoxShadowInset`,`${i}BoxShadowBlurRadius`,`${i}BoxShadowSpreadRadius`,`${i}BoxShadowColor`]);const o=t.propPrefix[0].toUpperCase()+t.propPrefix.slice(1),r=e=>`${o} ${e}`;P.addInputProps(e,{[`${i}BoxShadowEnabled`]:{index:250,group:t.group||"Box Shadow",displayName:"Shadow Enabled",editorName:r("Shadow Enabled"),type:"boolean",allowVisualStates:!0,popout:n},[`${i}BoxShadowOffsetX`]:{index:251,group:t.group||"Box Shadow",displayName:"Offset X",editorName:r("Offset X"),default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:n},[`${i}BoxShadowOffsetY`]:{index:252,group:t.group||"Box Shadow",displayName:"Offset Y",editorName:r("Offset Y"),default:0,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:n},[`${i}BoxShadowBlurRadius`]:{index:253,group:t.group||"Box Shadow",displayName:"Blur Radius",editorName:r("Blur Radius"),default:5,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:n},[`${i}BoxShadowSpreadRadius`]:{index:254,group:t.group||"Box Shadow",displayName:"Spread Radius",editorName:r("Spread Radius"),default:2,type:{name:"number",units:["px"],defaultUnit:"px"},allowVisualStates:!0,popout:n},[`${i}BoxShadowInset`]:{index:255,group:t.group||"Box Shadow",displayName:"Inset",editorName:r("Inset"),type:"boolean",default:!1,allowVisualStates:!0,popout:n},[`${i}BoxShadowColor`]:{index:256,group:t.group||"Box Shadow",displayName:"Shadow Color",editorName:r("Shadow Color"),type:"color",default:"#00000033",allowVisualStates:!0,popout:n}})}P.addAlignInputs(Qe),P.addTransformInputs(Qe),P.addMarginInputs(Qe),P.addPaddingInputs(Qe),P.addSharedVisualInputs(Qe),Ze(Qe,{propPrefix:"track",popout:Ke}),et(Qe,{propPrefix:"track",popout:Ke}),tt(Qe,{propPrefix:"track",popout:Ke,group:"Track Box Shadow"}),Ze(Qe,{propPrefix:"thumb",popout:Je}),et(Qe,{propPrefix:"thumb",popout:Je}),tt(Qe,{propPrefix:"thumb",popout:Je,group:"Thumb Box Shadow"}),ee(Qe);const nt=G(Qe),it=["height"];function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ot.apply(this,arguments)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e){e.stopPropagation(),window.removeEventListener("click",lt,!0)}function ut(e,t){return`\n    .${e}::placeholder {\n        opacity: ${t.placeholderOpacity};\n    }\n    `}class ct extends t().Component{constructor(e){super(e),this.state={value:e.startValue},this.ref=t().createRef()}setText(e){this.setState({value:e}),this.props.onTextChanged&&this.props.onTextChanged(e)}componentDidMount(){this.ref.current.noodlNode=this.props.noodlNode,this.setText(this.props.startValue)}render(){const e=st({},this.props.style);h.size(e,this.props),h.align(e,this.props),0===e.opacity&&(e.pointerEvents="none");const{height:n}=e,i=function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,it),o=this.props,r=()=>{if("image"===o.iconSourceType&&void 0!==o.iconImageSource)return t().createElement("img",{alt:"",src:o.iconSource,style:{width:o.iconSize,height:o.iconSize},onClick:e=>this.focus()});if("icon"===o.iconSourceType&&void 0!==o.iconIconSource){const e={userSelect:"none",fontSize:o.iconSize,color:o.iconColor};return"left"===o.iconPlacement||void 0===o.iconPlacement?e.marginRight=o.iconSpacing:e.marginLeft=o.iconSpacing,!0===o.iconIconSource.codeAsClass?t().createElement("span",{className:[o.iconIconSource.class,o.iconIconSource.code].join(" "),style:e}):t().createElement("span",{className:o.iconIconSource.class,style:e},o.iconIconSource.code)}return null};let s,a="ndl-controls-textinput "+o.id;o.className&&(a=a+" "+o.className);const l=st(st(st({},o.textStyle),o.styles.input),{},{width:"100%",height:"100%"});l.color=o.noodlNode.context.styles.resolveColor(l.color);const u=st(st({id:o.id,value:this.state.value},te(o)),{},{disabled:!o.enabled,style:l,className:a,placeholder:o.placeholder,maxLength:o.maxLength,onChange:e=>this.onChange(e)});"textArea"!==o.type?s=t().createElement("input",ot({ref:this.ref,type:this.props.type},u,{onKeyDown:e=>this.onKeyDown(e),onMouseDown:()=>window.addEventListener("click",lt,!0),"noodl-style-tag":"input"})):(u.style.resize="none",s=t().createElement("textarea",ot({ref:this.ref},u,{onKeyDown:e=>this.onKeyDown(e),"noodl-style-tag":"input"})));const c=st({display:"flex",alignItems:"center"},o.styles.inputWrapper),p=n&&"%"===n[n.length-1];o.useLabel?p?c.flexGrow=1:c.height=n:(Object.assign(c,i),c.height=n),"textArea"!==o.type&&(c.alignItems="center");const d=t().createElement("div",{style:c,"noodl-style-tag":"inputWrapper"},o.useIcon&&"left"===o.iconPlacement?r():null,s,o.useIcon&&"right"===o.iconPlacement?r():null);if(o.useLabel){i.display="flex",i.flexDirection="column",p&&(i.height=n);const e=st(st(st({},o.labeltextStyle),o.styles.label),{},{marginBottom:o.labelSpacing});return e.color=o.noodlNode.context.styles.resolveColor(e.color),t().createElement("div",{style:i},t().createElement("label",{htmlFor:o.id,style:e,"noodl-style-tag":"label"},o.label),d)}return d}onKeyDown(e){"Enter"!==e.key&&13!==e.which||this.props.onEnter&&this.props.onEnter()}onChange(e){const t=e.target.value;this.setText(t)}focus(){this.ref.current&&this.ref.current.focus()}blur(){this.ref.current&&this.ref.current.blur()}hasFocus(){return document.activeElement===this.ref.current}}const pt={name:"net.noodl.controls.textinput",displayName:"Text Input",docs:"https://docs.noodl.net/nodes/ui-controls/text-input",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Text","Style","Actions","Events","States","Mounted","Text Style","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},getReactComponent:()=>ct,initialize(){this.props.startValue="",this.props.id=this._internal.controlId="input-"+ue()()},inputProps:{type:{displayName:"Type",group:"Text",index:19,type:{name:"enum",enums:[{label:"Text",value:"text"},{label:"Text Area",value:"textArea"},{label:"Email",value:"email"},{label:"Number",value:"number"},{label:"Password",value:"password"},{label:"URL",value:"url"}]},default:"text"},placeholder:{index:22,group:"Text",displayName:"Placeholder",default:"Type here...",type:{name:"string"}},maxLength:{group:"Text",displayName:"Max length",type:"number",index:24}},inputs:{placeHolderOpacity:{index:23,group:"Text",displayName:"Placeholder opacity",type:"number",default:.5,set(e){const t=this._internal.controlId;Z(t,{placeholderOpacity:e},ut)}},set:{group:"Actions",displayName:"Set",type:"signal",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{this.setText(this._internal.text)}))}},startValue:{index:18,displayName:"Text",type:"string",group:"Text",set(e){this._internal.text!==e&&(this._internal.text=e,!1===this.isInputConnected("set")&&this.setText(e))}},clear:{type:"signal",group:"Actions",displayName:"Clear",valueChangedToTrue(){this.clear()}},focus:{type:"signal",group:"Actions",displayName:"Focus",valueChangedToTrue(){this.context.setNodeFocused(this,!0)}},blur:{type:"signal",group:"Actions",displayName:"Blur",valueChangedToTrue(){this.context.setNodeFocused(this,!1)}}},inputCss:{backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent",allowVisualStates:!0,styleTag:"inputWrapper"}},outputProps:{onTextChanged:{group:"General",displayName:"Text",type:"string",index:1,onChange(){this.sendSignalOnOutput("textChanged")}},onEnter:{group:"Events",displayName:"On Enter",type:"signal"}},outputs:{textChanged:{displayName:"Text Changed",type:"signal",group:"General",index:2}},methods:{_focus(){this.innerReactComponentRef&&this.innerReactComponentRef.focus()},_blur(){this.innerReactComponentRef&&this.innerReactComponentRef.blur()},clear(){this.props.startValue="",this.innerReactComponentRef&&this.innerReactComponentRef.setText("")},setText(e){this.props.startValue=e,this.innerReactComponentRef?!1===this.innerReactComponentRef.hasFocus()&&this.innerReactComponentRef.setText(e):this.outputPropValues.onTextChanged!==e&&(this.outputPropValues.onTextChanged=e,this.flagOutputDirty("onTextChanged"))}}};P.addDimensions(pt,{defaultSizeMode:"contentSize",contentLabel:"Text"}),P.addIconInputs(pt,{enableIconPlacement:!0,defaults:{useIcon:!1,iconColor:"#000000"}}),P.addLabelInputs(pt,{enableSpacing:!0,styleTag:"label"}),P.addTextStyleInputs(pt,{styleTag:"input",portPrefix:"",portIndex:18,popout:{group:"input-text-style",label:"Text Style",parentGroup:"Text"}}),P.addAlignInputs(pt),P.addTransformInputs(pt),P.addPaddingInputs(pt,{styleTag:"inputWrapper"}),P.addMarginInputs(pt),P.addSharedVisualInputs(pt),P.addBorderInputs(pt,{styleTag:"inputWrapper"}),P.addShadowInputs(pt,{styleTag:"inputWrapper"}),ee(pt);const dt=G(pt);class ht{constructor(){this.queue=[],this.pendingPromise=!1}enqueue(e){return new Promise(((t,n)=>{this.queue.push({promise:e,resolve:t,reject:n}),this.dequeue()}))}dequeue(){if(this.workingOnPromise)return!1;const e=this.queue.shift();if(!e)return!1;try{this.workingOnPromise=!0,e.promise().then((t=>{this.workingOnPromise=!1,e.resolve(t),this.dequeue()})).catch((t=>{this.workingOnPromise=!1,e.reject(t),this.dequeue()}))}catch(t){this.workingOnPromise=!1,e.reject(t),this.dequeue()}return!0}}const{useEffect:ft}=__webpack_require__(7363),gt=__webpack_require__(7397),mt=__webpack_require__(8969),yt=__webpack_require__(6291),vt=__webpack_require__(4548);function bt(e){const{didMount:t,willUnmount:n,style:i,children:o}=e;return ft((()=>(t(),()=>{n()})),[]),React.createElement("div",{style:i},o)}const St={name:"Page Stack",displayNodeName:"Component Stack",category:"Visuals",docs:"https://docs.noodl.net/nodes/component-stack/component-stack-node",useVariants:!1,initialize(){this._internal.stack=[],this._internal.topPageName="",this._internal.stackDepth=0,this._internal.pageInfo={},this._internal.asyncQueue=new ht,this.onScheduleReset=()=>{this.scheduleReset()},this.props.didMount=()=>{this._internal.isMounted=!0,window.history&&window.history.pushState?window.addEventListener("popstate",this.onScheduleReset):window.addEventListener("hashchange",this.onScheduleReset),this._registerPageStack()},this.props.willUnmount=()=>{this._internal.isMounted=!1,window.removeEventListener("popstate",this.onScheduleReset),window.removeEventListener("hashchange",this.onScheduleReset),this._deregisterPageStack()}},getInspectInfo(){return 0===this._internal.stack.length?"No active page":[{type:"text",value:"Active Components:"}].concat(this._internal.stack.map(((e,t)=>({type:"text",value:"- "+this._internal.pages.find((t=>t.id===e.pageId)).label}))))},defaultCss:{width:"100%",flex:"1 1 100%",position:"relative",display:"flex",flexDirection:"column"},getReactComponent:()=>bt,inputs:{name:{type:{name:"string",identifierOf:"PackStack"},displayName:"Name",group:"General",default:"Main",set:function(e){this._deregisterPageStack(),this._internal.name=e,this._internal.isMounted&&this._registerPageStack()}},useRoutes:{type:"boolean",displayName:"Use Routes",group:"General",default:!1,set:function(e){this._internal.useRoutes=!!e}},clip:{displayName:"Clip Content",type:"boolean",group:"Layout",default:!0,set(e){e?this.setStyle({overflow:"hidden"}):this.removeStyle(["overflow"])}},pages:{type:"proplist",displayName:"Components",group:"Components",set:function(e){this._internal.pages=e,this._internal.isMounted&&this.scheduleReset()}},reset:{type:"signal",displayName:"Reset",group:"Actions",valueChangedToTrue:function(){this.scheduleReset()}}},inputCss:{backgroundColor:{type:"color",displayName:"Background Color",group:"Style",default:"transparent",applyDefault:!1}},outputs:{topPageName:{type:"string",displayName:"Top Component Name",get(){return this._internal.topPageName}},stackDepth:{type:"number",displayName:"Stack Depth",get(){return this._internal.stackDepth}}},methods:{_registerPageStack(){mt.instance.registerPageStack(this._internal.name,this)},_deregisterPageStack(){mt.instance.deregisterPageStack(this._internal.name,this)},_pageNameForId(e){if(void 0===this._internal.pages)return;const t=this._internal.pages.find((t=>t.id===e));return void 0!==t?t.label:void 0},setPageOutputs(e){for(const t in e)this._internal[t]=e[t],this.flagOutputDirty(t)},scheduleReset(){var e=this._internal;e.hasScheduledReset||(e.hasScheduledReset=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.hasScheduledReset=!1,this.reset()})))},createPageContainer(){const e=this.nodeScope.createPrimitiveNode("Group");return e.setStyle({flex:"1 0 100%"}),e},reset(){this._internal.asyncQueue.enqueue(this.resetAsync.bind(this))},async resetAsync(){var e=this.getChildren();for(var t in e){var n=e[t];this.removeChild(n),this.nodeScope.deleteNode(n)}if(void 0===this._internal.pages||0===this._internal.pages.length)return;var i,o={},r=this.matchPageFromUrl();void 0!==r?(i=r.pageId,o=Object.assign({},r.query,r.params)):void 0===(i=this._internal.startPageId)&&(i=this._internal.pages[0].id);var s=this._internal.pageInfo[i];if(void 0===s||void 0===s.component)return;var a=await this.nodeScope.createNode(s.component,gt());for(var l in o)a.setInputValue(l,o[l]);const u=this.createPageContainer();u.addChild(a),this.addChild(u),this._internal.stack=[{from:null,page:u,pageId:i,pageInfo:s,params:o,componentName:this._internal.startPage}],this.setPageOutputs({topPageName:this._pageNameForId(i),stackDepth:this._internal.stack.length})},getRelativeURL(){var e=this._internal.stack[this._internal.stack.length-1];if(void 0!==e){var t=e.pageInfo.path;if(void 0===t){var n=this._internal.pages.find((t=>t.id==e.pageId));if(void 0===n)return;t=n.label.replace(/\s+/g,"-").toLowerCase()}var i=t.match(/{([^}]+)}/g),o=Object.assign({},e.params);if(i)for(var r of i){var s=r.replace(/[{}]/g,"");void 0!==e.params[s]&&(t=t.replace(r,encodeURIComponent(o[s])),delete o[s])}var a=[];for(var s in o)a.push({name:s,value:o[s]});return t.startsWith("/")&&(t=t.substring(1)),{path:t,query:a}}},getNavigationAbsoluteURL(){for(var e=this.parent;void 0!==e&&"function"!=typeof e.getNavigationAbsoluteURL;)e=e.getVisualParentNode();if(void 0===e)var t={path:"",query:[]};else t=e.getNavigationAbsoluteURL();var n=this.getRelativeURL();return void 0===n?t:{path:t.path+(t.path.endsWith("/")?"":"/")+n.path,query:t.query.concat(n.query)}},_getLocationPath:function(){var e=yt.instance.getProjectSettings().navigationPathType;if(void 0===e||"hash"===e){var t=location.hash;return t&&("#"===t[0]&&(t=t.substring(1)),"/"===t[0]&&(t=t.substring(1))),t}var n=location.pathname;return n&&"/"===n[0]&&(n=n.substring(1)),n},_getSearchParams:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},o=window.location.search.substring(1),r={};e=n.exec(o);)r[i(e[1])]=i(e[2]);return r},getNavigationRemainingPath(){return this._internal.remainingNavigationPath},matchPageFromUrl(e){if(this._internal.useRoutes&&void 0!==this._internal.pages&&0!==this._internal.pages.length){for(var t=this.parent;void 0!==t&&"function"!=typeof t.getNavigationRemainingPath;)t=t.getVisualParentNode();if(void 0===t){var n=this._getLocationPath();"/"===n[0]&&(n=n.substring(1));var i=n.split("/")}else i=t.getNavigationRemainingPath();if(void 0!==i){var o=this._getSearchParams();for(var r of this._internal.pages){var s=this._internal.pageInfo[r.id];if(void 0===s)continue;var a=s.path;void 0===a&&(a=r.label.replace(/\s+/g,"-").toLowerCase()),"/"===a[0]&&(a=a.substring(1));let e=l(i,a.split("/"));if(e)return this._internal.remainingNavigationPath=e.remainingPathParts,{pageId:r.id,params:e.params,query:o}}}}function l(e,t){for(var n={},i=0;i<t.length;i++){if(void 0===e[i])return;var o=t[i];if("{"===o[0]&&"}"===o[o.length-1])n[o.substring(1,o.length-1)]=decodeURIComponent(e[i]);else if(o!==e[i])return}return{params:n,remainingPathParts:e.splice(t.length)}}},_updateUrlWithTopPage(){if(this._internal.useRoutes&&void 0!==window.history){var e,t,n=this.getNavigationAbsoluteURL(),i=yt.instance.getProjectSettings().navigationPathType;void 0===i||"hash"===i?t=n.path:e=n.path;var o=n.query.map((e=>e.name+"="+e.value)),r=(void 0!==e?e:"")+(o.length>=1?"?"+o.join("&"):"")+(void 0!==t?"#"+t:"");this._internal.remainingNavigationPath=void 0,window.history.pushState({},"",r)}},replace(e){this._internal.asyncQueue.enqueue(this.replaceAsync.bind(this,e))},async replaceAsync(e){if(void 0===this._internal.pages||0===this._internal.pages.length)return;if(this._internal.isTransitioning)return;var t=e.target||this._internal.pages[0].id,n=this._internal.pageInfo[t];if(void 0===n||void 0===n.component)return;var i=this.getChildren();for(var o in i){var r=i[o];this.removeChild(r),this.nodeScope.deleteNode(r)}const s=this.createPageContainer(),a=await this.nodeScope.createNode(n.component,gt());for(var l in e.params)a.setInputValue(l,e.params[l]);s.addChild(a),this.addChild(s),this._internal.stack=[{from:null,page:s,pageId:t,pageInfo:n,params:e.params,componentName:e.target}],this.setPageOutputs({topPageName:this._pageNameForId(t),stackDepth:this._internal.stack.length}),this._updateUrlWithTopPage(),e.hasNavigated&&e.hasNavigated()},navigate(e){this._internal.asyncQueue.enqueue(this.navigateAsync.bind(this,e))},async navigateAsync(e){if(void 0===this._internal.pages||0===this._internal.pages.length)return;if(this._internal.isTransitioning)return;var t=e.target||this._internal.pages[0].id,n=this._internal.pageInfo[t];if(void 0===n||void 0===n.component)return;const i=this.createPageContainer();i.setInputValue("position","absolute");const o=await this.nodeScope.createNode(n.component,gt());for(var r in e.params)o.setInputValue(r,e.params[r]);i.addChild(o);var s=o.nodeScope.getNodesWithType("PageStackNavigateBack");if(s&&s.length>0)for(var a=0;a<s.length;a++)s[a]._setBackCallback(this.back.bind(this));var l=this._internal.stack[this._internal.stack.length-1],u={from:l.page,page:i,pageInfo:n,pageId:t,params:e.params,transition:new vt[e.transition.type||"Push"](l.page,i,e.transition),backCallback:e.backCallback,componentName:e.target};this._internal.stack.push(u),this.setPageOutputs({topPageName:this._pageNameForId(e.target),stackDepth:this._internal.stack.length}),this._updateUrlWithTopPage(),u.transition.forward(0),this._internal.isTransitioning=!0,u.transition.start({end:()=>{this._internal.isTransitioning=!1,this.removeChild(l.page),i.setInputValue("position","relative")}}),this.addChild(i),e.hasNavigated&&e.hasNavigated()},back(e){if(!(this._internal.stack.length<=1||this._internal.isTransitioning)){var t=this._internal.stack[this._internal.stack.length-1];t.page.setInputValue("position","absolute"),this.addChild(t.from,0),t.backCallback&&t.backCallback(e.backAction,e.results),this.setPageOutputs({topPageName:this._pageNameForId(this._internal.stack[this._internal.stack.length-2].pageId),stackDepth:this._internal.stack.length-1}),this._internal.isTransitioning=!0,t.transition.start({end:()=>{this._internal.isTransitioning=!1,t.page.setInputValue("position","relative"),this.removeChild(t.page),this.nodeScope.deleteNode(t.page),this._internal.stack.pop(),this._updateUrlWithTopPage()},back:!0})}},setPageComponent(e,t){var n=this._internal;n.pageInfo[e]||(n.pageInfo[e]={}),n.pageInfo[e].component=t},setPagePath(e,t){var n=this._internal;n.pageInfo[e]||(n.pageInfo[e]={}),n.pageInfo[e].path=t},setStartPage(e){this._internal.startPageId=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return e.startsWith("pageComp-")?this.registerInput(e,{set:this.setPageComponent.bind(this,e.substring("pageComp-".length))}):e.startsWith("pagePath-")?this.registerInput(e,{set:this.setPagePath.bind(this,e.substring("pagePath-".length))}):"startPage"===e?this.registerInput(e,{set:this.setStartPage.bind(this)}):void 0}},setup(e,t){function n(t){function n(){var n=[];void 0!==t.parameters.pages&&t.parameters.pages.length>0&&(t.parameters.pages.forEach((e=>{n.push({name:"pageComp-"+e.id,displayName:"Component",editorName:e.label+" | Component",plug:"input",type:"component",parent:"pages",parentItemId:e.id}),!0===t.parameters.useRoutes&&n.push({name:"pagePath-"+e.id,displayName:"Path",editorName:e.label+" | Path",plug:"input",type:"string",default:e.label.replace(/\s+/g,"-").toLowerCase(),parent:"pages",parentItemId:e.id})})),n.push({plug:"input",type:{name:"enum",enums:t.parameters.pages.map((e=>({label:e.label,value:e.id}))),allowEditOnly:!0},group:"General",displayName:"Start Page",name:"startPage",default:t.parameters.pages[0].id})),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"pages"!==e.name&&"useRoutes"!==e.name||n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Page Stack",(function(e){n(e)}));for(const e of t.getNodesWithType("Page Stack"))n(e)}))}},_t=G(St),{useEffect:wt}=__webpack_require__(7363);function Ot(e){const{style:t,children:n}=e;return h.size(t,e),h.align(t,e),React.createElement("div",{style:t,className:e.className},n)}const Ct={name:"Page",displayNodeName:"Page",category:"Visuals",docs:"https://docs.noodl.net/nodes/navigation/page",useVariants:!1,mountedInput:!1,allowAsExportRoot:!1,singleton:!0,connectionPanel:{groupPriority:["General","Mounted"]},initialize:function(){this.props.layout="column"},defaultCss:{display:"flex",flexDirection:"column",position:"relative",alignItems:"flex-start",flex:"1 1",alignSelf:"stretch"},getReactComponent:()=>Ot,outputs:{},methods:{getUrlPath:function(){return this._internal.urlPath},getTitle:function(){return this._internal.title},setTitle:function(e){this._internal.title=e},setUrlPath:function(e){this._internal.urlPath=e},registerInputIfNeeded:function(e){if(!this.hasInput(e))return"title"===e?this.registerInput(e,{set:this.setTitle.bind(this)}):"urlPath"===e?this.registerInput(e,{set:this.setUrlPath.bind(this)}):void 0}},setup(e,t){function n(t){function n(){var n=[];const i=t.component.name.split("/");n.push({name:"title",displayName:"Title",type:"string",group:"General",plug:"input",default:i[i.length-1]});const o=(t.parameters.title||i[i.length-1]).replace(/\s+/g,"-").toLowerCase();n.push({name:"urlPath",displayName:"Url Path",type:"string",group:"General",plug:"input",default:o}),e.editorConnection.sendDynamicPorts(t.id,n)}n(),t.on("parameterUpdated",(function(e){"title"===e.name&&n()}))}e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Page",(function(e){n(e)}));for(const e of t.getNodesWithType("Page"))n(e)}))}};P.addPaddingInputs(Ct);const Nt=G(Ct),{useEffect:It}=__webpack_require__(7363),xt=__webpack_require__(7397),Pt=__webpack_require__(6291),Tt=__webpack_require__(9883);function Et(e){const{didMount:t,willUnmount:n,children:i,style:o}=e;return It((()=>(t(),()=>{n()})),[]),React.createElement("div",{className:e.className,style:o},i)}function Dt(e){return"/"===e[0]&&(e=e.substring(1)),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e}const kt={name:"Router",displayNodeName:"Page Router",category:"Visuals",docs:"https://docs.noodl.net/nodes/navigation/page-router",useVariants:!1,connectionPanel:{groupPriority:["General","Actions","Events","Mounted"]},initialize:function(){this._internal.asyncQueue=new ht,this.onScheduleReset=()=>{this.scheduleReset()},this.props.didMount=()=>{this._internal.isMounted=!0,window.history&&window.history.pushState?window.addEventListener("popstate",this.onScheduleReset):window.addEventListener("hashchange",this.onScheduleReset),this._registerRouter()},this.props.willUnmount=()=>{this._internal.isMounted=!1,window.removeEventListener("popstate",this.onScheduleReset),window.removeEventListener("hashchange",this.onScheduleReset),this._deregisterRouter()},this.props.layout="column"},getInspectInfo(){return this._internal.currentUrl},defaultCss:{flex:"1 1",alignSelf:"stretch",position:"relative",display:"flex",flexDirection:"column"},getReactComponent:()=>Et,inputs:{name:{type:"string",displayName:"Name",group:"General",set:function(e){this._deregisterRouter(),this._internal.name=e,this._internal.isMounted&&this._registerRouter()}},pages:{type:{name:"pages",allowEditOnly:!0},displayName:"Pages",group:"Pages",set:function(e){this._internal.pages=e,this._internal.isMounted&&this.scheduleReset()}},urlPath:{type:"string",displayName:"Url path",group:"General",set:function(e){this._internal.urlPath=e}},clip:{displayName:"Clip Behavior",type:{name:"enum",enums:[{value:"contentHeight",label:"Expand to content size"},{value:"scroll",label:"Scroll"},{value:"clip",label:"Clip content"}]},group:"Layout",default:"contentHeight",set(e){switch(e){case"scroll":this.setStyle({overflow:"auto"});break;case"clip":this.setStyle({overflow:"hidden"});break;default:this.removeStyle(["overflow"])}}},reset:{type:"signal",displayName:"Reset",group:"Actions",valueChangedToTrue:function(){this.scheduleReset()}}},inputCss:{backgroundColor:{type:"color",displayName:"Background Color",group:"Style",default:"transparent",applyDefault:!1}},outputs:{currentPageTitle:{type:"string",group:"General",displayName:"Current Page Title",getter:function(){return void 0!==this._internal.currentPage?this._internal.currentPage.title:void 0}}},methods:{_registerRouter(){Tt.instance.registerRouter(this._internal.name,this)},_deregisterRouter(){Tt.instance.deregisterRouter(this._internal.name,this)},setPageOutputs(e){for(const t in e)this._internal[t]=e[t],this.flagOutputDirty(t)},scheduleReset(){var e=this._internal;e.hasScheduledReset||(e.hasScheduledReset=!0,this.scheduleAfterInputsHaveUpdated((()=>{e.hasScheduledReset=!1,this.reset()})))},createPageContainer(){const e=this.nodeScope.createPrimitiveNode("Group");return e.setStyle({flex:"1 0 100%"}),e},reset(){this._internal.asyncQueue.enqueue(this.resetAsync.bind(this))},scrollToTop(){const e=this.getDOMElement();e&&(e.scrollTop=0,Pt.instance.getProjectSettings().bodyScroll&&e.scrollIntoView())},async resetAsync(){this.scrollToTop();var e,t=this.getChildren();for(var n in t){var i=t[n];this.removeChild(i),this.nodeScope.deleteNode(i)}var o={},r=this.matchPageFromUrl();if(void 0===r?e=void 0!==this._internal.pages?this._internal.pages.startPage:void 0:(e=r.page.component,o=Object.assign({},r.params,r.query)),void 0===e)return;var s=await this.nodeScope.createNode(e,xt()),a=s.nodeScope.getNodesWithType("Page");if(void 0===a||1!==a.length)return;this._internal.currentPage=Tt.instance.getPageInfoForComponent(e),this._internal.currentParams=o,this.flagOutputDirty("currentPageTitle"),document.title=this._internal.currentPage.title;var l=s.nodeScope.getNodesWithType("PageInputs");void 0!==l&&l.length>0&&l.forEach((e=>{e._setPageParams(o)}));const u=this.createPageContainer();u.addChild(s),this.addChild(u)},getRelativeURL(){if(void 0===this._internal.currentPage)return;var e=this._internal.currentPage.path;if(void 0===e)return;var t=e.match(/{([^}]+)}/g);const n=this._internal.currentParams;var i=Object.assign({},n);if(t)for(var o of t)void 0!==n[s=o.replace(/[{}]/g,"")]&&(e=e.replace(o,encodeURIComponent(i[s])),delete i[s]);var r=[];for(var s in i)r.push({name:s,value:encodeURIComponent(i[s])});return e=Dt(e),void 0!==this._internal.urlPath&&(e=Dt(this._internal.urlPath)+"/"+e),{path:e,query:r}},getNavigationAbsoluteURL(){let e=this.parent,t={path:"",query:[]};for(;void 0!==e&&"function"!=typeof e.getNavigationAbsoluteURL;)e=e.getVisualParentNode();e&&(t=e.getNavigationAbsoluteURL());var n=this.getRelativeURL();if(n){const e=t.path.endsWith("/")||n.path.startsWith("/");return{path:t.path+(e?"":"/")+n.path,query:t.query.concat(n.query)}}return t},_getLocationPath:function(){var e=Pt.instance.getProjectSettings().navigationPathType;if(void 0===e||"hash"===e){var t=location.hash;return t&&("#"===t[0]&&(t=t.substring(1)),"/"===t[0]&&(t=t.substring(1))),decodeURI(t)}var n=location.pathname;return n&&"/"===n[0]&&(n=n.substring(1)),decodeURI(n)},_getSearchParams:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},o=window.location.search.substring(1),r={};e=n.exec(o);)r[i(e[1])]=i(e[2]);return r},getNavigationRemainingPath(){return this._internal.remainingNavigationPath},matchPageFromUrl(){for(var e=this.parent;void 0!==e&&"function"!=typeof e.getNavigationRemainingPath;)e=e.getVisualParentNode();if(void 0===e){var t=this._getLocationPath();"/"===t[0]&&(t=t.substring(1));var n=t.split("/")}else n=e.getNavigationRemainingPath();if(void 0===n)return;var i=this._getSearchParams();function o(e,t){for(var n={},i=0;i<t.length;i++){var o=t[i];if("{"===o[0]&&"}"===o[o.length-1])void 0!==e[i]&&(n[o.substring(1,o.length-1)]=decodeURIComponent(e[i]));else if(void 0===e[i]||o!==e[i])return}return{params:n,remainingPathParts:e.slice().splice(t.length)}}const r=Tt.instance.getPagesForRouter(this._internal.name);if(void 0===r||0===r.length)return;let s,a=9999;for(var l of r){var u=l.path;if(void 0===u)continue;u=Dt(u),void 0!==this._internal.urlPath&&(u=Dt(this._internal.urlPath)+"/"+u);const e=u.split("/");let t=o(n,e);const i=Math.abs(e.length-n.length);t&&a>i&&(s={match:t,pageInfo:l},a=i)}return s?(this._internal.remainingNavigationPath=s.match.remainingPathParts,{page:s.pageInfo,params:s.match.params,query:i}):void 0},_updateUrlWithTopPage(){if(void 0!==window.history){var e,t,n=this.getNavigationAbsoluteURL(),i=Pt.instance.getProjectSettings().navigationPathType;void 0===i||"hash"===i?t=n.path:e=n.path;var o=n.query.map((e=>e.name+"="+e.value)),r=(void 0!==e?e:"")+(o.length>=1?"?"+o.join("&"):"")+(void 0!==t?"#"+t:"");this._internal.remainingNavigationPath=void 0,window.history.pushState({},"",r)}},navigate(e){this._internal.asyncQueue.enqueue(this.navigateAsync.bind(this,e))},async navigateAsync(e){if(void 0===e.target)return;const t=Tt.instance.getPageInfoForComponent(e.target);if(!t)return;this.scrollToTop();var n=this.getChildren();for(var i in n){var o=n[i];this.removeChild(o),this.nodeScope.deleteNode(o)}const r=this.createPageContainer(),s=await this.nodeScope.createNode(e.target,xt());this._internal.currentPage=t,this._internal.currentParams=e.params,this.flagOutputDirty("currentPageTitle"),document.title=this._internal.currentPage.title;var a=s.nodeScope.getNodesWithType("PageInputs");void 0!==a&&a.length>0&&a.forEach((t=>{t._setPageParams(e.params)})),r.addChild(s),this.addChild(r),this._updateUrlWithTopPage(),e.hasNavigated&&e.hasNavigated()},registerInputIfNeeded:function(e){this.hasInput(e)}},setup(e,t){e.editorConnection&&e.editorConnection.isRunningLocally()&&t.on("editorImportComplete",(()=>{t.on("nodeAdded.Router",(function(e){}));for(const e of t.getNodesWithType("Router"));}))}},Rt=G(kt),jt={node:{name:"net.noodl.externallink",displayNodeName:"External Link",docs:"https://docs.noodl.net/nodes/navigation/external-link",category:"Navigation",inputs:{link:{type:"string",displayName:"Link"},openInNewTab:{type:"boolean",displayName:"Open In New Tab",default:!0},do:{type:"signal",displayName:"Do",valueChangedToTrue(){const e=this.getInputValue("openInNewTab"),t=e?"noopener,noreferrer":"",n=!0===e||void 0===e?"_blank":"_self";window.open(this.getInputValue("link"),n,t)}}}}};function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},At.apply(this,arguments)}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e,t,n,i){const o=(i-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}}function Lt(e,t,n,i,o){o%360==i%360&&(o-=1e-4);const r=Vt(e,t,n,o),s=Vt(e,t,n,i),a=o-i<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,a,0,s.x,s.y,"L",e,t,"L",r.x,r.y].join(" ")}class Ut extends t().Component{constructor(e){super(e)}render(){let e,n;const i=this.props.size/2,{startAngle:o,endAngle:r}=this.props;if(this.props.fillEnabled){const n=this.props.size/2;e=t().createElement("path",{d:Lt(n,n,n,o,r),fill:this.props.fillColor})}if(this.props.strokeEnabled){const{strokeColor:e,strokeWidth:s,strokeLineCap:a}=this.props,l=function(e,t,n,i,o){o%360==i%360&&(o-=1e-4);const r=Vt(e,t,n,o),s=Vt(e,t,n,i),a=o-i<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,a,0,s.x,s.y].join(" ")}(i,i,i-this.props.strokeWidth/2,o,r);n=t().createElement("path",{d:l,stroke:e,strokeWidth:s,fill:"transparent",strokeLinecap:a})}const s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props.style);return h.size(s,this.props),h.align(s,this.props),0===s.opacity&&(s.pointerEvents="none"),t().createElement("div",At({className:this.props.className},this.props.dom,J(this.props),{style:s}),t().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:this.props.size,height:this.props.size},e,n))}}const Bt={name:"Circle",docs:"https://docs.noodl.net/nodes/basic-elements/circle",connectionPanel:{groupPriority:["General","Fill","Stroke","Dimensions","Style","Actions","Events","Mounted","Margin and padding","Pointer Events","Hover Events"]},getReactComponent:()=>Ut,noodlNodeAsProp:!0,allowChildren:!1,defaultCss:{flexShrink:0,position:"relative",display:"flex"},inputProps:{size:{displayName:"Size",default:"100",group:"Dimension",type:{name:"number"},index:10,allowVisualStates:!0},fillEnabled:{group:"Fill",displayName:"Fill",default:!0,type:"boolean",index:20,allowVisualStates:!0},fillColor:{group:"Fill",displayName:"Fill Color",default:"red",type:"color",index:21,allowVisualStates:!0},strokeEnabled:{index:23,group:"Stroke",default:!1,displayName:"Stroke",type:"boolean",allowVisualStates:!0},strokeWidth:{index:24,group:"Stroke",displayName:"Stroke Width",default:10,type:{name:"number"},allowVisualStates:!0},strokeColor:{index:25,group:"Stroke",displayName:"Stroke Color",type:"color",default:"black",allowVisualStates:!0},strokeLineCap:{index:26,group:"Stroke",displayName:"Line Cap",type:{name:"enum",enums:[{label:"Butt",value:"butt"},{label:"Round",value:"round"}]},default:"butt",allowVisualStates:!0},startAngle:{displayName:"Start Angle",type:"number",default:0,group:"Style",index:198,allowVisualStates:!0},endAngle:{displayName:"End Angle",type:"number",default:360,group:"Style",index:199,allowVisualStates:!0}}};P.addTransformInputs(Bt),P.addMarginInputs(Bt),P.addSharedVisualInputs(Bt),P.addAlignInputs(Bt),P.addPointerEventOutputs(Bt);const Wt=G(Bt);var zt=__webpack_require__(4013);function qt(t){if(!t.children)return null;let n=null;const i=(0,e.useRef)(null),[o,r]=(0,e.useState)(null);switch((0,e.useEffect)((()=>{const e=i?.current;if(!e)return;const t=new ResizeObserver((()=>{r(i.current.offsetWidth)}));return t.observe(e),()=>{t.disconnect()}}),[]),typeof t.layoutString){case"string":n=t.layoutString.trim();break;case"number":n=t.layoutString.toString().trim();break;default:n=null}if(!n)return React.createElement(React.Fragment,null,t.children);const s=n.split(" ").map((e=>parseInt(e))),{layout:a,columnAmount:l,fractionSize:u}=Ht(s,t.minWidth,o,t.marginX);let c=[],p=null;return t.children.length?(c=t.children.filter((e=>e.type!==zt.ForEachComponent)),p=t.children.find((e=>e.type===zt.ForEachComponent))):c=[t.children],React.createElement("div",{className:"columns-container",ref:i,style:{marginTop:-1*parseFloat(t.marginY),marginLeft:-1*parseFloat(t.marginX),display:"flex",flexWrap:"wrap",alignItems:"stretch",justifyContent:t.justifyContent,flexDirection:t.direction,width:`calc(100% + (${parseFloat(t.marginX)}px)`,boxSizing:"border-box"}},p&&p,c.map(((n,i)=>React.createElement("div",{className:"column-item",key:i,style:{boxSizing:"border-box",paddingTop:t.marginY,paddingLeft:t.marginX,width:a[i%l]*u+"%",flexShrink:0,flexGrow:0,minWidth:t.minWidth}},(0,e.cloneElement)(n)))))}function Ht(e,t,n,i){const o=$t(e,t,n,i),r=$t(o.layout,t,n,i);return o.totalFractions===r.totalFractions?o:Ht(r.layout,t,n,i)}function $t(e,t,n,i){const o=100/e.reduce(((e,t)=>e+t),0),r=e.reduce(((e,r,s)=>({expected:e.expected+o/100*n*r,min:e.min+parseFloat(t)+i})),{expected:0,min:0,max:null});let s=e;r.expected<r.min&&s.pop();const a=s.reduce(((e,t)=>e+t),0);return{layout:s,totalFractions:a,fractionSize:100/a,columnAmount:s.length}}const Gt=G({name:"net.noodl.visual.columns",displayName:"Columns",docs:"https://docs.noodl.net/nodes/basic-elements/columns",allowChildren:!0,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Label","Label Text Style","Hover Events","Pointer Events","Focus Events"]},initialize(){this.props.layoutString="1 2 1",this.props.minWidth=0,this.props.marginX=16,this.props.marginY=16,this.props.direction="row",this.props.justifyContent="flex-start"},getReactComponent:()=>qt,inputs:{layoutString:{group:"Layout Settings",displayName:"Layout String",type:"string",default:"1 2 1",set(e){this.props.layoutString=e,"string"!=typeof e?this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-type-warning",{message:"Layout String needs to be a string."}):this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-type-warning"),this.forceUpdate()}}},inputProps:{marginX:{group:"Layout Settings",displayName:"Horizontal Gap",type:{name:"number",units:["px"],defaultUnit:"px"},default:16},marginY:{group:"Layout Settings",displayName:"Vertical Gap",type:{name:"number",units:["px"],defaultUnit:"px"},default:16},minWidth:{group:"Constraints",displayName:"Min Column Width",type:{name:"number",units:["px"],defaultUnit:"px"},default:0},direction:{group:"Layout Settings",displayName:"Layout Direction",type:{name:"enum",enums:[{label:"Horizontal",value:"row"},{label:"Vertical",value:"column"}]},default:"row"},justifyContent:{group:"Justify Content",displayName:"Justify Content",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"}],alignComp:"align-items"},default:"flex-start"}}});var Xt=__webpack_require__(1157),Yt=__webpack_require__.n(Xt),Jt=function(e,t){return Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Jt(e,t)};function Kt(e,t){function n(){this.constructor=e}Jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Qt=function(){return Qt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qt.apply(this,arguments)};function Zt(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}var en=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function tn(e){console.error("[BScroll warn]: "+e)}var nn="undefined"!=typeof window,on=nn&&navigator.userAgent.toLowerCase(),rn=!(!on||!/wechatdevtools/.test(on)),sn=on&&on.indexOf("android")>0,an=function(){if("string"==typeof on){var e=/os (\d\d?_\d(_\d)?)/.exec(on);if(!e)return!1;var t=e[1].split("_").map((function(e){return parseInt(e,10)}));return!!(13===t[0]&&t[1]>=4)}return!1}(),ln=!1;if(nn)try{var un={};Object.defineProperty(un,"passive",{get:function(){ln=!0}}),window.addEventListener("test-passive",(function(){}),un)}catch(e){}function cn(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var pn=function(e,t){for(var n in t)e[n]=t[n];return e};function dn(e){return null==e}function hn(e,t,n){return e<t?t:e>n?n:e}var fn=nn&&document.createElement("div").style,gn=function(){if(!nn)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==fn[n.value])return n.key}return!1}();function mn(e){return!1===gn?e:"standard"===gn?"transitionEnd"===e?"transitionend":e:gn+e.charAt(0).toUpperCase()+e.substr(1)}function yn(e){return"string"==typeof e?document.querySelector(e):e}function vn(e,t,n,i){var o=ln?{passive:!1,capture:!!i}:!!i;e.addEventListener(t,n,o)}function bn(e,t,n,i){e.removeEventListener(t,n,{capture:!!i})}function Sn(e){e.cancelable&&e.preventDefault()}function _n(e){for(var t=0,n=0;e;)t-=e.offsetLeft,n-=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}gn&&"standard"!==gn&&gn.toLowerCase();var wn=mn("transform"),On=mn("transition"),Cn=nn&&mn("perspective")in fn,Nn=nn&&("ontouchstart"in window||rn),In=nn&&On in fn,xn={transform:wn,transition:On,transitionTimingFunction:mn("transitionTimingFunction"),transitionDuration:mn("transitionDuration"),transitionDelay:mn("transitionDelay"),transformOrigin:mn("transformOrigin"),transitionEnd:mn("transitionEnd"),transitionProperty:mn("transitionProperty")},Pn={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function Tn(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}function En(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}var Dn=En;function kn(e,t){var n;void 0===t&&(t="click"),"mouseup"===e.type?n=e:"touchend"!==e.type&&"touchcancel"!==e.type||(n=e.changedTouches[0]);var i,o={};n&&(o.screenX=n.screenX||0,o.screenY=n.screenY||0,o.clientX=n.clientX||0,o.clientY=n.clientY||0);var r={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey};if("undefined"!=typeof MouseEvent)try{i=new MouseEvent(t,pn(Qt({bubbles:!0,cancelable:!0},r),o))}catch(e){s()}else s();function s(){(i=document.createEvent("Event")).initEvent(t,!0,!0),pn(i,o)}i.forwardedTouchEvent=!0,i._constructed=!0,e.target.dispatchEvent(i)}var Rn={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(e){return 1+--e*e*e*e*e}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},jn=nn&&window;function An(){}var Mn,Fn,Vn,Ln,Un=nn?jn.requestAnimationFrame||jn.webkitRequestAnimationFrame||jn.mozRequestAnimationFrame||jn.oRequestAnimationFrame||function(e){return window.setTimeout(e,e.interval||16.666666666666668)}:An,Bn=nn?jn.cancelAnimationFrame||jn.webkitCancelAnimationFrame||jn.mozCancelAnimationFrame||jn.oCancelAnimationFrame||function(e){window.clearTimeout(e)}:An,Wn=function(e){},zn={enumerable:!0,configurable:!0,get:Wn,set:Wn},qn=function(){function e(e){this.events={},this.eventTypes={},this.registerType(e)}return e.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},e.prototype.once=function(e,t,n){var i=this;void 0===n&&(n=this),this.hasType(e);var o=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];i.off(e,o);var a=t.apply(n,r);if(!0===a)return a};return o.fn=t,this.on(e,o),this},e.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var o,r=i.length,s=Zt(i),a=0;a<r;a++){var l=s[a],u=l[0],c=l[1];if(u&&!0===(o=u.apply(c,t)))return o}},e.prototype.registerType=function(e){var t=this;e.forEach((function(e){t.eventTypes[e]=e}))},e.prototype.destroy=function(){this.events={},this.eventTypes={}},e.prototype.hasType=function(e){var t=this.eventTypes;t[e]===e||tn('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(t).map((function(e){return JSON.stringify(e)}))+"]")},e}(),Hn=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(vn)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(bn)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(i){e(n,i.name,t,!!i.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),$n=function(e){function t(){var t=e.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=Nn,t.disableTouch=!Nn,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}return Kt(t,e),t.prototype.merge=function(e){if(!e)return this;for(var t in e)"bounce"!==t?this[t]=e[t]:this.bounce=this.resolveBounce(e[t]);return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&Cn?" translateZ(1px)":"",this.useTransition=this.useTransition&&In,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t.prototype.resolveBounce=function(e){var t={top:!0,right:!0,bottom:!0,left:!0};return"object"==typeof e?pn(t,e):e?t:{top:!1,right:!1,bottom:!1,left:!1}},t}((function(){})),Gn=function(){function e(e,t){this.wrapper=e,this.options=t,this.hooks=new qn(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return e.prototype.handleDOMEvents=function(){var e=this.options,t=e.bindToWrapper,n=e.disableMouse,i=e.disableTouch,o=e.click,r=this.wrapper,s=t?r:window,a=[],l=[],u=!i,c=!n;o&&a.push({name:"click",handler:this.click.bind(this),capture:!0}),u&&(a.push({name:"touchstart",handler:this.start.bind(this)}),l.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),c&&(a.push({name:"mousedown",handler:this.start.bind(this)}),l.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new Hn(r,a),this.targetEventRegister=new Hn(s,l)},e.prototype.beforeHandler=function(e,t){var n=this.options,i=n.preventDefault,o=n.stopPropagation,r=n.preventDefaultException;({start:function(){return i&&!En(e.target,r)},end:function(){return i&&!En(e.target,r)},move:function(){return i}})[t]()&&e.preventDefault(),o&&e.stopPropagation()},e.prototype.setInitiated=function(e){void 0===e&&(e=0),this.initiated=e},e.prototype.start=function(e){var t=Pn[e.type];if(!this.initiated||this.initiated===t)if(this.setInitiated(t),Dn(e.target,this.options.tagException))this.setInitiated();else if((2!==t||0===e.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,e)){this.beforeHandler(e,"start");var n=e.touches?e.touches[0]:e;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,e)}},e.prototype.move=function(e){if(Pn[e.type]===this.initiated){this.beforeHandler(e,"move");var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,i=t.pageY-this.pointY;if(this.pointX=t.pageX,this.pointY=t.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:i,e})){var o=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,r=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,s=this.pointX-o,a=this.pointY-r,l=this.options.autoEndDistance;(s>document.documentElement.clientWidth-l||a>document.documentElement.clientHeight-l||s<l||a<l)&&this.end(e)}}},e.prototype.end=function(e){Pn[e.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(e,"end"),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.click=function(e){this.hooks.trigger(this.hooks.eventTypes.click,e)},e.prototype.setContent=function(e){e!==this.wrapper&&(this.wrapper=e,this.rebindDOMEvents())},e.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},e.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},e}(),Xn={x:["translateX","px"],y:["translateY","px"]},Yn=function(){function e(e){this.setContent(e),this.hooks=new qn(["beforeTranslate","translate"])}return e.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null)[xn.transform].split(")")[0].split(", ");return{x:+(e[12]||e[4])||0,y:+(e[13]||e[5])||0}},e.prototype.translate=function(e){var t=[];Object.keys(e).forEach((function(n){if(Xn[n]){var i=Xn[n][0];if(i){var o=Xn[n][1],r=e[n];t.push(i+"("+r+o+")")}}})),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,t,e),this.style[xn.transform]=t.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,e)},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),Jn=function(){function e(e,t,n){this.translater=t,this.options=n,this.timer=0,this.hooks=new qn(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(e)}return e.prototype.translate=function(e){this.translater.translate(e)},e.prototype.setPending=function(e){this.pending=e},e.prototype.setForceStopped=function(e){this.forceStopped=e},e.prototype.setCallStop=function(e){this.callStopWhenPending=e},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style,this.stop())},e.prototype.clearTimer=function(){this.timer&&(Bn(this.timer),this.timer=0)},e.prototype.destroy=function(){this.hooks.destroy(),Bn(this.timer)},e}(),Kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kt(t,e),t.prototype.startProbe=function(e,t){var n=this,i=e,o=function(){var r=n.translater.getComputedPosition();(function(e,t,n,i){var o=function(e,t){var n=e-t;return n>0?-1:n<0?1:0},r=o(t.x,e.x),s=o(t.y,e.y),a=n.x-i.x,l=n.y-i.y;return r*a<=0&&s*l<=0})(e,t,r,i)&&n.hooks.trigger(n.hooks.eventTypes.move,r),n.pending||(n.callStopWhenPending?n.callStopWhenPending=!1:n.hooks.trigger(n.hooks.eventTypes.end,r)),i=r,n.pending&&(n.timer=Un(o))};this.callStopWhenPending&&this.setCallStop(!1),Bn(this.timer),o()},t.prototype.transitionTime=function(e){void 0===e&&(e=0),this.style[xn.transitionDuration]=e+"ms",this.hooks.trigger(this.hooks.eventTypes.time,e)},t.prototype.transitionTimingFunction=function(e){this.style[xn.transitionTimingFunction]=e,this.hooks.trigger(this.hooks.eventTypes.timeFunction,e)},t.prototype.transitionProperty=function(){this.style[xn.transitionProperty]=xn.transform},t.prototype.move=function(e,t,n,i){this.setPending(n>0),this.transitionTimingFunction(i),this.transitionProperty(),this.transitionTime(n),this.translate(t);var o=3===this.options.probeType;n&&o&&this.startProbe(e,t),n||(this._reflow=this.content.offsetHeight,o&&this.hooks.trigger(this.hooks.eventTypes.move,t),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),Bn(this.timer);var t=this.translater.getComputedPosition(),n=t.x,i=t.y;this.transitionTime(),this.translate({x:n,y:i}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:n,y:i})}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Jn),Qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kt(t,e),t.prototype.move=function(e,t,n,i){if(!n)return this.translate(t),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,t),void this.hooks.trigger(this.hooks.eventTypes.end,t);this.animate(e,t,n,i)},t.prototype.animate=function(e,t,n,i){var o=this,r=cn(),s=r+n,a=3===this.options.probeType,l=function(){var u=cn();if(u>=s)return o.translate(t),a&&o.hooks.trigger(o.hooks.eventTypes.move,t),void o.hooks.trigger(o.hooks.eventTypes.end,t);var c=i(u=(u-r)/n),p={};Object.keys(t).forEach((function(n){var i=e[n],o=t[n];p[n]=(o-i)*c+i})),o.translate(p),a&&o.hooks.trigger(o.hooks.eventTypes.move,p),o.pending&&(o.timer=Un(l)),o.pending||(o.callStopWhenPending?o.callStopWhenPending=!1:o.hooks.trigger(o.hooks.eventTypes.end,t))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),Bn(this.timer),l()},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),Bn(this.timer);var t=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,t)}return e},t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(Jn),Zn=function(){function e(e,t,n){this.wrapper=e,this.options=n,this.hooks=new qn(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(t)}return e.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},e.prototype.move=function(e){return e=this.hasScroll?e:0,this.setMovingDirection(e),this.performDampingAlgorithm(e,this.options.outOfBoundaryDampingFactor)},e.prototype.setMovingDirection=function(e){this.movingDirection=e>0?-1:e<0?1:0},e.prototype.setDirection=function(e){this.direction=e>0?-1:e<0?1:0},e.prototype.performDampingAlgorithm=function(e,t){var n=this.currentPos+e;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n=n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+e*t:n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},e.prototype.end=function(e){var t={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&e<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var i=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0;t=this.hasScroll?this.momentum(this.currentPos,this.startPos,e,this.maxScrollPos,this.minScrollPos,i,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,t);return t},e.prototype.momentum=function(e,t,n,i,o,r,s){void 0===s&&(s=this.options);var a=e-t,l=Math.abs(a)/n,u=s.deceleration,c=s.swipeBounceTime,p=s.swipeTime,d={destination:e+l*l/u*(a<0?-1:1),duration:Math.min(p,2*l/u),rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,d,a),d.destination<i?(d.destination=r?Math.max(i-r/4,i-r/d.rate*l):i,d.duration=c):d.destination>o&&(d.destination=r?Math.min(o+r/4,o+r/d.rate*l):o,d.duration=c),d.destination=Math.round(d.destination),d},e.prototype.updateDirection=function(){var e=this.currentPos-this.absStartPos;this.setDirection(e)},e.prototype.refresh=function(e){var t=this.options.rect,n=t.size,i=t.position,o="static"===window.getComputedStyle(this.wrapper,null).position,r=Tn(this.wrapper);this.wrapperSize=this.wrapper["width"===n?"clientWidth":"clientHeight"],this.setContent(e);var s=Tn(this.content);this.contentSize=s[n],this.relativeOffset=s[i],o&&(this.relativeOffset-=r[i]),this.computeBoundary(),this.setDirection(0)},e.prototype.setContent=function(e){e!==this.content&&(this.content=e,this.resetState())},e.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},e.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var e={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};e.maxScrollPos<0&&(e.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(e.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,e),this.minScrollPos=e.minScrollPos,this.maxScrollPos=e.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},e.prototype.updatePosition=function(e){this.currentPos=e},e.prototype.getCurrentPos=function(){return this.currentPos},e.prototype.checkInBoundary=function(){var e=this.adjustPosition(this.currentPos);return{position:e,inBoundary:e===this.getCurrentPos()}},e.prototype.adjustPosition=function(e){return this.hasScroll||this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos):e=this.minScrollPos,e},e.prototype.updateStartPos=function(){this.startPos=this.currentPos},e.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},e.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},e.prototype.getAbsDist=function(e){return this.dist+=e,Math.abs(this.dist)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),ei=((Mn={}).yes=function(e){return!0},Mn.no=function(e){return Sn(e),!1},Mn),ti=((Fn={}).horizontal=((Vn={}).yes="horizontal",Vn.no="vertical",Vn),Fn.vertical=((Ln={}).yes="vertical",Ln.no="horizontal",Ln),Fn),ni=function(){function e(e,t,n){this.directionLockThreshold=e,this.freeScroll=t,this.eventPassthrough=n,this.reset()}return e.prototype.reset=function(){this.directionLocked=""},e.prototype.checkMovingDirection=function(e,t,n){return this.computeDirectionLock(e,t),this.handleEventPassthrough(n)},e.prototype.adjustDelta=function(e,t){return"horizontal"===this.directionLocked?t=0:"vertical"===this.directionLocked&&(e=0),{deltaX:e,deltaY:t}},e.prototype.computeDirectionLock=function(e,t){""!==this.directionLocked||this.freeScroll||(e>t+this.directionLockThreshold?this.directionLocked="horizontal":t>=e+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},e.prototype.handleEventPassthrough=function(e){var t=ti[this.directionLocked];if(t){if(this.eventPassthrough===t.yes)return ei.yes(e);if(this.eventPassthrough===t.no)return ei.no(e)}return!1},e}(),ii=function(){function e(e,t,n,i,o){this.hooks=new qn(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=e,this.scrollBehaviorY=t,this.actionsHandler=n,this.animater=i,this.options=o,this.directionLockAction=new ni(o.directionLockThreshold,o.freeScroll,o.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return e.prototype.bindActionsHandler=function(){var e=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,(function(t){return!e.enabled||e.handleStart(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,(function(t){var n=t.deltaX,i=t.deltaY,o=t.e;if(!e.enabled)return!0;var r=function(e,t,n){return 2===n?[t,-e]:3===n?[-e,-t]:4===n?[-t,e]:[e,t]}(n,i,e.options.quadrant),s={deltaX:r[0],deltaY:r[1]};return e.hooks.trigger(e.hooks.eventTypes.coordinateTransformation,s),e.handleMove(s.deltaX,s.deltaY,o)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,(function(t){return!e.enabled||e.handleEnd(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,(function(t){e.enabled&&!t._constructed&&e.handleClick(t)}))},e.prototype.handleStart=function(e){var t=cn();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=t,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,e)},e.prototype.handleMove=function(e,t,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var i=this.scrollBehaviorX.getAbsDist(e),o=this.scrollBehaviorY.getAbsDist(t),r=cn();if(this.checkMomentum(i,o,r))return!0;if(this.directionLockAction.checkMovingDirection(i,o,n))return this.actionsHandler.setInitiated(),!0;var s=this.directionLockAction.adjustDelta(e,t),a=this.scrollBehaviorX.getCurrentPos(),l=this.scrollBehaviorX.move(s.deltaX),u=this.scrollBehaviorY.getCurrentPos(),c=this.scrollBehaviorY.move(s.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var p=l!==a||c!==u;this.contentMoved||p||this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&p&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&p&&(this.animater.translate({x:l,y:c}),this.dispatchScroll(r))}}},e.prototype.dispatchScroll=function(e){e-this.startTime>this.options.momentumLimitTime&&(this.startTime=e,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},e.prototype.checkMomentum=function(e,t,n){return n-this.endTime>this.options.momentumLimitTime&&t<this.options.momentumLimitDistance&&e<this.options.momentumLimitDistance},e.prototype.handleEnd=function(e){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,e)){var t=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,e,t))return!0;t=this.ensureIntegerPos(t),this.animater.translate(t),this.endTime=cn();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,t,n)}},e.prototype.ensureIntegerPos=function(e){this.ensuringInteger=!0;var t=e.x,n=e.y,i=this.scrollBehaviorX,o=i.minScrollPos,r=i.maxScrollPos,s=this.scrollBehaviorY,a=s.minScrollPos,l=s.maxScrollPos;return t=t>0?Math.ceil(t):Math.floor(t),n=n>0?Math.ceil(n):Math.floor(n),{x:t=hn(t,r,o),y:n=hn(n,l,a)}},e.prototype.handleClick=function(e){En(e.target,this.options.preventDefaultException)||(Sn(e),e.stopPropagation())},e.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},e.prototype.refresh=function(){this.endTime=0},e.prototype.destroy=function(){this.hooks.destroy()},e}();function oi(e,t,n,i){var o=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce((function(t,n){return t[n]=e[n],t}),{});return o.scrollable=!!e[t],o.bounces=n,o.rect=i,o}function ri(e,t,n){n.forEach((function(n){var i,o;"string"==typeof n?i=o=n:(i=n.source,o=n.target),e.on(i,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.trigger.apply(t,Zt([o],e))}))}))}var si=function(){function e(e,t,n){this.wrapper=e,this.content=t,this.resizeTimeout=0,this.hooks=new qn(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var i,o=this.options.bounce,r=o.left,s=o.right,a=o.top,l=o.bottom;this.scrollBehaviorX=new Zn(e,t,oi(n,"scrollX",[r,s],{size:"width",position:"left"})),this.scrollBehaviorY=new Zn(e,t,oi(n,"scrollY",[a,l],{size:"height",position:"top"})),this.translater=new Yn(this.content),this.animater=function(e,t,n){var i=n.useTransition,o={};return Object.defineProperty(o,"probeType",{enumerable:!0,configurable:!1,get:function(){return n.probeType}}),i?new Kn(e,t,o):new Qn(e,t,o)}(this.content,this.translater,this.options),this.actionsHandler=new Gn(this.options.bindToTarget?this.content:e,(i=this.options,["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce((function(e,t){return e[t]=i[t],e}),{}))),this.actions=new ii(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var u=this.resize.bind(this);this.resizeRegister=new Hn(window,[{name:"orientationchange",handler:u},{name:"resize",handler:u}]),this.registerTransitionEnd(),this.init()}return e.prototype.init=function(){var e=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,(function(){e.togglePointerEvents(!0)}))},e.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new Hn(this.content,[{name:xn.transitionEnd,handler:this.transitionEnd.bind(this)}])},e.prototype.bindTranslater=function(){var e=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,(function(t){e.options.translateZ&&t.push(e.options.translateZ)})),t.on(t.eventTypes.translate,(function(t){var n=e.getCurrentPos();e.updatePositions(t),!0!==e.actions.ensuringInteger?t.x===n.x&&t.y===n.y||e.togglePointerEvents(!1):e.actions.ensuringInteger=!1}))},e.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,(function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))})),ri(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},e.prototype.bindActions=function(){var e=this,t=this.actions;ri(t.hooks,this.hooks,[{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:t.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:t.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:t.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:t.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),t.hooks.on(t.hooks.eventTypes.end,(function(n,i){return e.hooks.trigger(e.hooks.eventTypes.touchEnd,i),!!e.hooks.trigger(e.hooks.eventTypes.end,i)||!(t.fingerMoved||(e.hooks.trigger(e.hooks.eventTypes.scrollCancel),!e.checkClick(n)))||(e.resetPosition(e.options.bounceTime,Rn.bounce)?(e.animater.setForceStopped(!1),!0):void 0)})),t.hooks.on(t.hooks.eventTypes.scrollEnd,(function(n,i){var o=Math.abs(n.x-e.scrollBehaviorX.startPos),r=Math.abs(n.y-e.scrollBehaviorY.startPos);if(e.checkFlick(i,o,r))return e.animater.setForceStopped(!1),void e.hooks.trigger(e.hooks.eventTypes.flick);e.momentum(n,i)?e.animater.setForceStopped(!1):(t.contentMoved&&e.hooks.trigger(e.hooks.eventTypes.scrollEnd,n),e.animater.forceStopped&&e.animater.setForceStopped(!1))}))},e.prototype.checkFlick=function(e,t,n){if(this.hooks.events.flick.length>1&&e<this.options.flickLimitTime&&t<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>1||t>1))return!0},e.prototype.momentum=function(e,t){var n={time:0,easing:Rn.swiper,newX:e.x,newY:e.y},i=this.scrollBehaviorX.end(t),o=this.scrollBehaviorY.end(t);if(n.newX=dn(i.destination)?n.newX:i.destination,n.newY=dn(o.destination)?n.newY:o.destination,n.time=Math.max(i.duration,o.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==e.x||n.newY!==e.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=Rn.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},e.prototype.checkClick=function(e){var t=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!t){var n=this.options.dblclick,i=!1;if(n&&this.lastClickTime){var o=n.delay,r=void 0===o?300:o;cn()-this.lastClickTime<r&&(i=!0,function(e){kn(e,"dblclick")}(e))}return this.options.tap&&function(e,t){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)}(e,this.options.tap),this.options.click&&!En(e.target,this.options.preventDefaultException)&&kn(e),this.lastClickTime=i?null:cn(),!0}return!1},e.prototype.resize=function(){var e=this;this.actions.enabled&&(sn&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){e.hooks.trigger(e.hooks.eventTypes.resize)}),this.options.resizePolling))},e.prototype.transitionEnd=function(e){e.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,Rn.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},e.prototype.togglePointerEvents=function(e){void 0===e&&(e=!0);for(var t=this.content.children.length?this.content.children:[this.content],n=e?"auto":"none",i=0;i<t.length;i++){var o=t[i];o.isBScrollContainer||(o.style.pointerEvents=n)}},e.prototype.refresh=function(e){var t=this.setContent(e);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(e),this.scrollBehaviorY.refresh(e),t&&(this.translater.setContent(e),this.animater.setContent(e),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(e)),this.actions.refresh(),this.wrapperOffset=_n(this.wrapper)},e.prototype.setContent=function(e){var t=e!==this.content;return t&&(this.content=e),t},e.prototype.scrollBy=function(e,t,n,i){void 0===n&&(n=0);var o=this.getCurrentPos(),r=o.x,s=o.y;i=i||Rn.bounce,e+=r,t+=s,this.scrollTo(e,t,n,i)},e.prototype.scrollTo=function(e,t,n,i,o){void 0===n&&(n=0),void 0===i&&(i=Rn.bounce),void 0===o&&(o={start:{},end:{}});var r=this.options.useTransition?i.style:i.fn,s=this.getCurrentPos(),a=Qt({x:s.x,y:s.y},o.start),l=Qt({x:e,y:t},o.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(e[o]!==t[o])return!1}return!0}(a,l)){var u=Math.abs(l.x-a.x),c=Math.abs(l.y-a.y);u<1&&c<1&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(a,l,n,r)}},e.prototype.scrollToElement=function(e,t,n,i,o){var r=yn(e),s=_n(r),a=function(e,t,n){return"number"==typeof e?e:e?Math.round(t/2-n/2):0};n=a(n,r.offsetWidth,this.wrapper.offsetWidth),i=a(i,r.offsetHeight,this.wrapper.offsetHeight);var l=function(e,t,n,i){return e-=t,i.adjustPosition(e-n)};s.left=l(s.left,this.wrapperOffset.left,n,this.scrollBehaviorX),s.top=l(s.top,this.wrapperOffset.top,i,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,r,s)||this.scrollTo(s.left,s.top,t,o)},e.prototype.resetPosition=function(e,t){void 0===e&&(e=0),void 0===t&&(t=Rn.bounce);var n=this.scrollBehaviorX.checkInBoundary(),i=n.position,o=n.inBoundary,r=this.scrollBehaviorY.checkInBoundary(),s=r.position,a=r.inBoundary;return!(o&&a||(an&&this.reflow(),this.scrollTo(i,s,e,t),0))},e.prototype.reflow=function(){this._reflow=this.content.offsetHeight},e.prototype.updatePositions=function(e){this.scrollBehaviorX.updatePosition(e.x),this.scrollBehaviorY.updatePosition(e.y)},e.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},e.prototype.enable=function(){this.actions.enabled=!0},e.prototype.disable=function(){Bn(this.animater.timer),this.actions.enabled=!1},e.prototype.destroy=function(){var e=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach((function(t){return e[t].destroy()}))},e}(),ai=function(e){function t(t,n){var i=e.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,o=yn(t);return o?(i.plugins={},i.options=(new $n).merge(n).process(),i.setContent(o).valid?(i.hooks=new qn(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),i.init(o),i):i):(tn("Can not resolve the wrapper DOM."),i)}return Kt(t,e),t.use=function(e){var n=e.pluginName;return t.plugins.some((function(t){return e===t.ctor}))?t:dn(n)?(tn("Plugin Class must specify plugin's name in static property by 'pluginName' field."),t):(t.pluginsMap[n]=!0,t.plugins.push({name:n,applyOrder:e.applyOrder,ctor:e}),t)},t.prototype.setContent=function(e){var t=!1,n=!0,i=e.children[this.options.specifiedIndexAsContent];return i?(t=this.content!==i)&&(this.content=i):(tn("The wrapper need at least one child element to be content element to scroll."),n=!1),{valid:n,contentChanged:t}},t.prototype.init=function(e){var t=this;this.wrapper=e,e.isBScrollContainer=!0,this.scroller=new si(e,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,(function(){t.refresh()})),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(en),this.applyPlugins(),this.refreshWithoutReset(this.content);var n=this.options,i={x:n.startX,y:n.startY};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,i)||this.scroller.scrollTo(i.x,i.y)},t.prototype.applyPlugins=function(){var e=this,n=this.options;t.plugins.sort((function(e,t){var n,i=((n={}).pre=-1,n.post=1,n);return(e.applyOrder?i[e.applyOrder]:0)-(t.applyOrder?i[t.applyOrder]:0)})).forEach((function(t){var i=t.ctor;n[t.name]&&"function"==typeof i&&(e.plugins[t.name]=new i(e))}))},t.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,(function(){var e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||e.blur()}))},t.prototype.eventBubbling=function(){ri(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},t.prototype.refreshWithoutReset=function(e){this.scroller.refresh(e),this.hooks.trigger(this.hooks.eventTypes.refresh,e),this.trigger(this.eventTypes.refresh,e)},t.prototype.proxy=function(e){var t=this;e.forEach((function(e){var n=e.key,i=e.sourceKey;!function(e,t,n){zn.get=function(){return function(e,t){for(var n=t.split("."),i=0;i<n.length-1;i++)if("object"!=typeof(e=e[n[i]])||!e)return;var o=n.pop();return"function"==typeof e[o]?function(){return e[o].apply(e,arguments)}:e[o]}(this,t)},zn.set=function(e){!function(e,t,n){for(var i,o=t.split("."),r=0;r<o.length-1;r++)e[i=o[r]]||(e[i]={}),e=e[i];e[o.pop()]=n}(this,t,e)},Object.defineProperty(e,n,zn)}(t,i,n)}))},t.prototype.refresh=function(){var e=this.setContent(this.wrapper),t=e.contentChanged;if(e.valid){var n=this.content;this.refreshWithoutReset(n),t&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,n),this.trigger(this.eventTypes.contentChanged,n)),this.scroller.resetPosition()}},t.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},t.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},t.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},t.prototype.eventRegister=function(e){this.registerType(e)},t.plugins=[],t.pluginsMap={},t}(qn);function li(e,t){return new ai(e,t)}li.use=ai.use,li.plugins=ai.plugins,li.pluginsMap=ai.pluginsMap;var ui=li,ci="undefined"!=typeof window,pi=ci&&navigator.userAgent.toLowerCase();pi&&/wechatdevtools/.test(pi),pi&&pi.indexOf("android"),function(){if("string"==typeof pi){var e=/os (\d\d?_\d(_\d)?)/.exec(pi);if(!e)return!1;var t=e[1].split("_").map((function(e){return parseInt(e,10)}));13===t[0]&&t[1]}}();var di=!1;if(ci)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){di=!0}}),window.addEventListener("test-passive",(function(){}),hi)}catch(e){}var fi=ci&&document.createElement("div").style,gi=function(){if(!ci)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==fi[n.value])return n.key}return!1}();function mi(e){return!1===gi?e:"standard"===gi?"transitionEnd"===e?"transitionend":e:gi+e.charAt(0).toUpperCase()+e.substr(1)}function yi(e,t,n,i){var o=di?{passive:!1,capture:!!i}:!!i;e.addEventListener(t,n,o)}function vi(e,t,n,i){e.removeEventListener(t,n,{capture:!!i})}gi&&"standard"!==gi&&gi.toLowerCase(),mi("transform"),mi("transition"),ci&&mi("perspective"),mi("transitionTimingFunction"),mi("transitionDuration"),mi("transitionDelay"),mi("transformOrigin"),mi("transitionEnd"),mi("transitionProperty");var bi=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(yi)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(vi)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(i){e(n,i.name,t,!!i.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),Si=function(){function e(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},e.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel;this.mouseWheelOpt=function(e,t){for(var n in t)e[n]=t[n];return e}({speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1},e)},e.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},e.prototype.registerEvent=function(){this.eventRegister=new bi(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},e.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},e.prototype.cleanCache=function(){this.deltaCache=[]},e.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,o=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var r=this.deltaCache.reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),{x:0,y:0});this.cleanCache();var s=this.scroll.scroller,a=s.scrollBehaviorX,l=s.scrollBehaviorY;a.setMovingDirection(-e.directionX),l.setMovingDirection(-e.directionY),a.setDirection(e.x),l.setDirection(e.y);var u=a.performDampingAlgorithm(Math.round(e.x)+r.x,o),c=l.performDampingAlgorithm(Math.round(e.y)+r.x,o);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:u,y:c})){var p=this.getEaseTime();u===this.scroll.x&&c===this.scroll.y||this.scroll.scrollTo(u,c,p)}i&&(this.wheelMoveTimer=window.setTimeout((function(){t.wheelMoveTimer=0}),i))}},e.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)}),this.mouseWheelOpt.discreteTime)},e.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=0,o=0,r=t.invert?-1:1;switch(!0){case"deltaX"in e:1===e.deltaMode?(i=-e.deltaX*n,o=-e.deltaY*n):(i=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:i=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:i=o=e.wheelDelta/120*n;break;case"detail"in e:i=o=-e.detail/3*n}return i*=r,o*=r,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(i)&&(i=o),o=0),this.scroll.hasHorizontalScroll||(i=0),{x:i,y:o,directionX:i>0?-1:i<0?1:0,directionY:o>0?-1:o<0?1:0}},e.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,o=t.preventDefaultException;n&&!function(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}(e.target,o)&&function(e){e.cancelable&&e.preventDefault()}(e),i&&e.stopPropagation()},e.prototype.getEaseTime=function(){var e=this.mouseWheelOpt.easeTime;return e<100&&("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times.",console.error("[BScroll warn]: easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times.")),Math.max(e,100)},e.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}))},e.pluginName="mouseWheel",e.applyOrder="pre",e}(),_i=function(){return _i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_i.apply(this,arguments)};function wi(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}var Oi="undefined"!=typeof window,Ci=Oi&&navigator.userAgent.toLowerCase();Ci&&/wechatdevtools/.test(Ci),Ci&&Ci.indexOf("android"),function(){if("string"==typeof Ci){var e=/os (\d\d?_\d(_\d)?)/.exec(Ci);if(!e)return!1;var t=e[1].split("_").map((function(e){return parseInt(e,10)}));13===t[0]&&t[1]}}();var Ni=!1;if(Oi)try{var Ii={};Object.defineProperty(Ii,"passive",{get:function(){Ni=!0}}),window.addEventListener("test-passive",(function(){}),Ii)}catch(e){}function xi(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}function Pi(e,t,n){return e<t?t:e>n?n:e}var Ti=Oi&&document.createElement("div").style,Ei=function(){if(!Oi)return!1;for(var e=0,t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];e<t.length;e++){var n=t[e];if(void 0!==Ti[n.value])return n.key}return!1}();function Di(e){return!1===Ei?e:"standard"===Ei?"transitionEnd"===e?"transitionend":e:Ei+e.charAt(0).toUpperCase()+e.substr(1)}function ki(e,t,n,i){var o=Ni?{passive:!1,capture:!!i}:!!i;e.addEventListener(t,n,o)}function Ri(e,t,n,i){e.removeEventListener(t,n,{capture:!!i})}function ji(e){e.cancelable&&e.preventDefault()}Ei&&"standard"!==Ei&&Ei.toLowerCase();var Ai=Di("transform");Di("transition"),Oi&&Di("perspective");var Mi=Ai,Fi=Di("transitionTimingFunction"),Vi=Di("transitionDuration"),Li=(Di("transitionDelay"),Di("transformOrigin"),Di("transitionEnd"),Di("transitionProperty"),function(){function e(e){this.events={},this.eventTypes={},this.registerType(e)}return e.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},e.prototype.once=function(e,t,n){var i=this;void 0===n&&(n=this),this.hasType(e);var o=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];i.off(e,o);var a=t.apply(n,r);if(!0===a)return a};return o.fn=t,this.on(e,o),this},e.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var o,r=i.length,s=wi(i),a=0;a<r;a++){var l=s[a],u=l[0],c=l[1];if(u&&!0===(o=u.apply(c,t)))return o}},e.prototype.registerType=function(e){var t=this;e.forEach((function(e){t.eventTypes[e]=e}))},e.prototype.destroy=function(){this.events={},this.eventTypes={}},e.prototype.hasType=function(e){var t,n=this.eventTypes;n[e]===e||(t='EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(n).map((function(e){return JSON.stringify(e)}))+"]",console.error("[BScroll warn]: "+t))},e}()),Ui=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(ki)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(Ri)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(i){e(n,i.name,t,!!i.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),Bi=function(){function e(e,t){this.indicator=e,this.options=t,this.hooks=new Li(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return e.prototype.registerEvents=function(){var e=this.options,t=e.disableMouse,n=e.disableTouch,i=[],o=[],r=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),o.push({name:"mousemove",handler:this.move.bind(this)}),r.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),o.push({name:"touchmove",handler:this.move.bind(this)}),r.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new Ui(this.indicator.indicatorEl,i),this.moveEventRegister=new Ui(window,o),this.endEventRegister=new Ui(window,r)},e.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},e.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;ji(e),e.stopPropagation(),this.initiated=!0,this.lastPoint=t[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},e.prototype.move=function(e){if(this.initiated){var t=(e.touches?e.touches[0]:e)[this.indicator.keysMap.point];ji(e),e.stopPropagation();var n=t-this.lastPoint;this.lastPoint=t,this.hooks.trigger(this.hooks.eventTypes.touchMove,n)}},e.prototype.end=function(e){this.initiated&&(this.initiated=!1,ji(e),e.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},e.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},e}(),Wi=function(){function e(e,t){this.scroll=e,this.options=t,this.hooksFn=[],this.wrapper=t.wrapper,this.direction=t.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return e.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},e.prototype.handleHooks=function(){var e=this,t=this.options,n=t.fade,i=t.interactive,o=t.scrollbarTrackClickable,r=this.scroll,s=r.hooks,a=r.scroller.translater.hooks,l=r.scroller.animater.hooks;if(this.registerHooks(s,s.eventTypes.refresh,this.refresh),this.registerHooks(a,a.eventTypes.translate,(function(t){var n=e.keysMap.hasScroll;e.scroll[n]&&e.updatePosition(t)})),this.registerHooks(l,l.eventTypes.time,this.transitionTime),this.registerHooks(l,l.eventTypes.timeFunction,this.transitionTimingFunction),n&&(this.registerHooks(r,r.eventTypes.scrollEnd,(function(){e.fade()})),this.registerHooks(r,r.eventTypes.scrollStart,(function(){e.fade(!0)})),r.eventTypes.mousewheelStart&&r.eventTypes.mousewheelEnd&&(this.registerHooks(r,r.eventTypes.mousewheelStart,(function(){e.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelMove,(function(){e.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelEnd,(function(){e.fade()})))),i){var u=this.scroll.options,c=u.disableMouse,p=u.disableTouch;this.eventHandler=new Bi(this,{disableMouse:c,disableTouch:p});var d=this.eventHandler.hooks;this.registerHooks(d,d.eventTypes.touchStart,this.startHandler),this.registerHooks(d,d.eventTypes.touchMove,this.moveHandler),this.registerHooks(d,d.eventTypes.touchEnd,this.endHandler)}o&&this.bindClick()},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.bindClick=function(){var e=this.wrapper;this.clickEventRegister=new Ui(e,[{name:"click",handler:this.handleClick.bind(this)}])},e.prototype.handleClick=function(e){var t=this.calculateclickOffsetPos(e),n=this.scroll,i=n.x,o=n.y;i="horizontal"===this.direction?t:i,o="vertical"===this.direction?t:o,this.scroll.scrollTo(i,o,this.options.scrollbarTrackOffsetTime)},e.prototype.calculateclickOffsetPos=function(e){var t=this.keysMap,n=t.point,i=t.domRect,o=this.options.scrollbarTrackOffsetType,r=e[n]-this.wrapperRect[i],s=r<this.currentPos?-1:1,a=0,l=this.currentPos;return"step"===o?a=this.scrollInfo.baseSize*s:(a=0,l=r),this.newPos(l,a,this.scrollInfo)},e.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},e.prototype.fade=function(e){var t=this.options,n=t.fadeInTime,i=t.fadeOutTime,o=e?n:i,r=this.wrapper;r.style[Vi]=o+"ms",r.style.opacity=e?"1":"0"},e.prototype.refresh=function(){var e=this.keysMap.hasScroll,t=this.scroll,n=t.x,i=t.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(t[e])){var o=this.keysMap,r=o.wrapperSize,s=o.scrollerSize,a=o.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[r],t[s],t[a],this.indicatorEl[r]),this.updatePosition({x:n,y:i})}},e.prototype.transitionTime=function(e){void 0===e&&(e=0),this.indicatorEl.style[Vi]=e+"ms"},e.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[Fi]=e},e.prototype.canScroll=function(e){return this.wrapper.style.display=e?"block":"none",e},e.prototype.refreshScrollInfo=function(e,t,n,i){var o=Math.max(Math.round(e*e/(t||e||1)),this.options.minSize);this.options.isCustom&&(o=i);var r=e-o;return{baseSize:o,maxScrollPos:r,minScrollPos:0,sizeRatio:r/n}},e.prototype.updatePosition=function(e){var t=this.caculatePosAndSize(e,this.scrollInfo),n=t.pos,i=t.size;this.refreshStyle(i,n),this.currentPos=n},e.prototype.caculatePosAndSize=function(e,t){var n,i=this.keysMap.pos,o=t.sizeRatio,r=t.baseSize,s=t.maxScrollPos,a=t.minScrollPos,l=this.options.minSize,u=Math.round(o*e[i]);return u<a?(n=Math.max(r+3*u,l),u=a):u>s?u=s+r-(n=Math.max(r-3*(u-s),l)):n=r,{pos:u,size:n}},e.prototype.refreshStyle=function(e,t){var n=this.keysMap,i=n.translateProperty,o=n.size,r=this.scroll.options.translateZ;this.indicatorEl.style[o]=e+"px",this.indicatorEl.style[Mi]=i+"("+t+"px)"+r},e.prototype.startHandler=function(){this.moved=!1,this.startTime=xi(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},e.prototype.moveHandler=function(e){if(this.moved||this.indicatorNotMoved(e)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var t=this.newPos(this.currentPos,e,this.scrollInfo);this.syncBScroll(t)}},e.prototype.endHandler=function(){if(this.moved){var e=this.scroll,t=e.x,n=e.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:n})}},e.prototype.indicatorNotMoved=function(e){var t=this.currentPos,n=this.scrollInfo,i=n.maxScrollPos;return t===n.minScrollPos&&e<=0||t===i&&e>=0},e.prototype.syncBScroll=function(e){var t=xi(),n=this.scroll,i=n.x,o=n.y,r=n.options,s=n.scroller,a=n.maxScrollY,l=n.minScrollY,u=n.maxScrollX,c=n.minScrollX,p=r.probeType,d=r.momentumLimitTime,h={x:i,y:o};"vertical"===this.direction?h.y=Pi(e,a,l):h.x=Pi(e,u,c),s.translater.translate(h),t-this.startTime>d&&(this.startTime=t,1===p&&s.hooks.trigger(s.hooks.eventTypes.scroll,h)),p>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,h)},e.prototype.newPos=function(e,t,n){var i=n.maxScrollPos,o=n.sizeRatio,r=e+t;return r=Pi(r,n.minScrollPos,i),Math.round(r/o)},e.prototype.destroy=function(){var e=this.options,t=e.interactive,n=e.scrollbarTrackClickable,i=e.isCustom;t&&this.eventHandler.destroy(),n&&this.clickEventRegister.destroy(),i||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksFn.length=0},e}(),zi=function(){function e(e){this.scroll=e,this.handleOptions(),this.createIndicators(),this.handleHooks()}return e.prototype.handleHooks=function(){var e=this,t=this.scroll;t.hooks.on(t.hooks.eventTypes.destroy,(function(){for(var t=0,n=e.indicators;t<n.length;t++)n[t].destroy()}))},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar;this.options=function(e,t){for(var n in t)e[n]=t[n];return e}({fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300},e)},e.prototype.createIndicators=function(){for(var e,t=this.scroll,n=[],i=["scrollX","scrollY"],o=["horizontal","vertical"],r=this.options.customElements,s=0;s<i.length;s++){var a=i[s];if(t.options[a]){var l=r.shift(),u=o[s],c=!1,p=l||this.createScrollbarElement(u);p!==l?t.wrapper.appendChild(p):c=!0,e=_i(_i({wrapper:p,direction:u},this.options),{isCustom:c}),n.push(new Wi(t,e))}}this.indicators=n},e.prototype.createScrollbarElement=function(e,t){void 0===t&&(t=this.options.scrollbarTrackClickable);var n=document.createElement("div"),i=document.createElement("div");return n.style.cssText="position:absolute;z-index:9999;overflow:hidden;",i.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",i.className="bscroll-indicator","horizontal"===e?(n.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",i.style.height="100%",n.className="bscroll-horizontal-scrollbar"):(n.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",i.style.width="100%",n.className="bscroll-vertical-scrollbar"),t||(n.style.cssText+="pointer-events:none;"),n.appendChild(i),n},e.pluginName="scrollbar",e}(),qi={duplicateClick:function(e){var t=e[0],n=e[1];t.options.click&&n.options.click&&(n.options.click=!1)},nestedScroll:function(e){var t=e[0],n=e[1],i=t.options.scrollX,o=t.options.scrollY,r=n.options.scrollX,s=n.options.scrollY;i!==r&&o!==s||(e.forEach((function(t,n){var i=e[(n+1)%2];t.on("scrollStart",(function(){i.pending&&(i.stop(),i.resetPosition()),function(e){var t=$i(e),n=t.hasHorizontalScroll,i=t.hasVerticalScroll,o=e.scroller,r=o.actions,s=o.scrollBehaviorX,a=o.scrollBehaviorY;r.startTime=+new Date,i?a.startPos=a.currentPos:n&&(s.startPos=s.currentPos)}(i),i.disable()})),t.on("touchEnd",(function(){i.enable()}))})),n.on("scrollStart",(function(){(function(e){var t=$i(e),n=t.hasHorizontalScroll,i=t.hasVerticalScroll,o=e.scroller,r=o.scrollBehaviorX,s=o.scrollBehaviorY,a=e.x>=e.minScrollX&&-1===r.movingDirection,l=e.x<=e.maxScrollX&&1===r.movingDirection,u=e.y>=e.minScrollY&&-1===s.movingDirection,c=e.y<=e.maxScrollY&&1===s.movingDirection;return i?u||c:!!n&&(a||l)})(n)&&(n.disable(),t.enable())})))}};function Hi(e,t){for(var n=0,i=e.parentNode;i&&i!==t;)n++,i=i.parentNode;return n}function $i(e){return{hasHorizontalScroll:e.scroller.scrollBehaviorX.hasScroll,hasVerticalScroll:e.scroller.scrollBehaviorY.hasScroll}}const Gi=function(){function e(t){var n=e.nestedScroll;return n instanceof e||((n=e.nestedScroll=this).stores=[]),n.setup(t),n.addHooks(t),n}return e.prototype.setup=function(e){this.appendBScroll(e),this.handleContainRelationship(),this.handleCompatible()},e.prototype.addHooks=function(e){var t=this;e.on("destroy",(function(){t.teardown(e)}))},e.prototype.teardown=function(e){this.removeBScroll(e),this.handleContainRelationship(),this.handleCompatible()},e.prototype.appendBScroll=function(e){this.stores.push(e)},e.prototype.removeBScroll=function(e){var t=this.stores.indexOf(e);-1!==t&&(e.wrapper.isBScrollContainer=void 0,this.stores.splice(t,1))},e.prototype.handleContainRelationship=function(){var e=this.stores;if(e.length<=1)e[0]&&e[0].__parentInfo&&(e[0].__parentInfo=void 0);else for(var t,n,i,o,r=0;r<e.length;r++){n=(t=e[r]).wrapper;for(var s=0;s<e.length;s++)if(o=(i=e[s]).wrapper,t!==i&&o.contains(n))if(t.__parentInfo){var a=Hi(n,o);t.__parentInfo.depth>a&&(t.__parentInfo={parent:i,depth:a})}else t.__parentInfo={parent:i,depth:Hi(n,o)}}},e.prototype.handleCompatible=function(){var e=this.availableBScrolls(),t=["duplicateClick","nestedScroll"];e.forEach((function(e){t.forEach((function(t){qi[t](e)}))}))},e.prototype.availableBScrolls=function(){return this.stores.filter((function(e){return!!e.__parentInfo})).map((function(e){return[e.__parentInfo.parent,e]}))},e.pluginName="nestedScroll",e}();var Xi="undefined"!=typeof window,Yi=Xi&&navigator.userAgent.toLowerCase();function Ji(e,t,n){return e<t?t:e>n?n:e}Yi&&/wechatdevtools/.test(Yi),Yi&&Yi.indexOf("android");var Ki=Xi&&document.createElement("div").style,Qi=function(){if(!Xi)return!1;var e={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var t in e)if(void 0!==Ki[e[t]])return t;return!1}();function Zi(e){return!1===Qi?e:"standard"===Qi?"transitionEnd"===e?"transitionend":e:Qi+e.charAt(0).toUpperCase()+e.substr(1)}function eo(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}function to(e,t){e.removeChild(t)}Qi&&"standard"!==Qi&&Qi.toLowerCase(),Zi("transform"),Zi("transition"),Xi&&Zi("perspective"),Zi("transitionTimingFunction"),Zi("transitionDuration"),Zi("transitionDelay"),Zi("transformOrigin"),Zi("transitionEnd");var no={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(e){return 1+--e*e*e*e*e}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},io=Xi&&window;Xi&&(io.requestAnimationFrame||io.webkitRequestAnimationFrame||io.mozRequestAnimationFrame||io.oRequestAnimationFrame),Xi&&(io.cancelAnimationFrame||io.webkitCancelAnimationFrame||io.mozCancelAnimationFrame||io.oCancelAnimationFrame);var oo=function(){function e(e,t){this.scroll=e,this.slideOpt=t,this.slideEl=null,this.init()}return e.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=eo(e.wrapper),o=eo(e.content);this.wrapperWidth=i.width,this.wrapperHeight=i.height,this.scrollerHeight=n.hasScroll?o.height:i.height,this.scrollerWidth=t.hasScroll?o.width:i.width;var r=this.slideOpt.stepX||this.wrapperWidth,s=this.slideOpt.stepY||this.wrapperHeight,a=e.content,l=this.slideOpt.el;"string"==typeof l&&(this.slideEl=a.querySelectorAll(l)),this.pages=this.slideEl?this.computePagePosInfoByEl(this.slideEl):this.computePagePosInfo(r,s),this.xLen=this.pages?this.pages.length:0,this.yLen=this.pages&&this.pages[0]?this.pages[0].length:0},e.prototype.hasInfo=function(){return!(!this.pages||!this.pages.length)},e.prototype.getPos=function(e,t){return this.pages[e]?this.pages[e][t]:null},e.prototype.getNearestPage=function(e,t){if(this.hasInfo()){for(var n=0,i=0,o=this.pages.length;n<o-1&&!(e>=this.pages[n][0].cx);n++);for(o=this.pages[n].length;i<o-1&&!(t>=this.pages[0][i].cy);i++);return{pageX:n,pageY:i}}},e.prototype.computePagePosInfo=function(e,t){var n,i,o,r,s=[],a=0,l=0,u=this.scroll.scroller.scrollBehaviorX.maxScrollPos,c=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(i=Math.round(e/2),o=Math.round(t/2);a>-this.scrollerWidth;){for(s[l]=[],r=0,n=0;n>-this.scrollerHeight;)s[l][r]={x:Math.max(a,u),y:Math.max(n,c),width:e,height:t,cx:a-i,cy:n-o},n-=t,r++;a-=e,l++}return s},e.prototype.computePagePosInfoByEl=function(e){for(var t,n,i,o=[],r=0,s=0,a=0,l=e.length,u=0,c=-1,p=this.scroll.scroller.scrollBehaviorX.maxScrollPos,d=this.scroll.scroller.scrollBehaviorY.maxScrollPos;a<l;a++)i=eo(e[a]),(0===a||i.left<=eo(e[a-1]).left)&&(u=0,c++),o[u]||(o[u]=[]),r=Math.max(-i.left,p),s=Math.max(-i.top,d),t=r-Math.round(i.width/2),n=s-Math.round(i.height/2),o[u][c]={x:r,y:s,width:i.width,height:i.height,cx:t,cy:n},r>p&&u++;return o},e}(),ro=function(){function e(e,t){this.scroll=e,this.slideOpt=t}return e.prototype.init=function(){this.currentPage={x:0,y:0,pageX:0,pageY:0},this.pagesPos=new oo(this.scroll,this.slideOpt),this.checkSlideLoop()},e.prototype.changeCurrentPage=function(e){this.currentPage=e},e.prototype.change2safePage=function(e,t){if(this.pagesPos.hasInfo()){e>=this.pagesPos.xLen?e=this.pagesPos.xLen-1:e<0&&(e=0),t>=this.pagesPos.yLen?t=this.pagesPos.yLen-1:t<0&&(t=0);var n=this.pagesPos.getPos(e,t);return{pageX:e,pageY:t,x:n?n.x:0,y:n?n.y:0}}},e.prototype.getInitPage=function(){return{pageX:this.loopX?1:0,pageY:this.loopY?1:0}},e.prototype.getRealPage=function(e){var t=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0;i<t.length;i++){var o=t[i];for(var r in o)e[r]=o[r]}return e}({},e||this.currentPage);return this.loopX&&(n.pageX=t(n.pageX,this.pagesPos.xLen-2)),this.loopY&&(n.pageY=t(n.pageY,this.pagesPos.yLen-2)),{pageX:n.pageX,pageY:n.pageY}},e.prototype.getPageSize=function(){return this.pagesPos.getPos(this.currentPage.pageX,this.currentPage.pageY)},e.prototype.realPage2Page=function(e,t){if(this.pagesPos.hasInfo()){var n=this.pagesPos.xLen-1,i=this.pagesPos.yLen-1,o=0,r=0;return this.loopX&&(e+=1,o+=1,n-=1),this.loopY&&(t+=1,r+=1,i-=1),{realX:e=Ji(e,o,n),realY:t=Ji(t,r,i)}}},e.prototype.nextPage=function(){return this.changedPageNum("positive")},e.prototype.prevPage=function(){return this.changedPageNum("negative")},e.prototype.nearestPage=function(e,t,n,i){var o=this.pagesPos.getNearestPage(e,t);if(!o)return{x:0,y:0,pageX:0,pageY:0};var r=o.pageX,s=o.pageY;return r===this.currentPage.pageX&&(r=Ji(r+=n,0,this.pagesPos.xLen-1)),s===this.currentPage.pageY&&(s+=i,s=Ji(o.pageY,0,this.pagesPos.yLen-1)),{x:this.pagesPos.getPos(r,0).x,y:this.pagesPos.getPos(0,s).y,pageX:r,pageY:s}},e.prototype.getLoopStage=function(){if(!this.needLoop)return"middle";if(this.loopX){if(0===this.currentPage.pageX)return"head";if(this.currentPage.pageX===this.pagesPos.xLen-1)return"tail"}if(this.loopY){if(0===this.currentPage.pageY)return"head";if(this.currentPage.pageY===this.pagesPos.yLen-1)return"tail"}return"middle"},e.prototype.resetLoopPage=function(){if(this.loopX){if(0===this.currentPage.pageX)return{pageX:this.pagesPos.xLen-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesPos.xLen-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(0===this.currentPage.pageY)return{pageX:this.currentPage.pageX,pageY:this.pagesPos.yLen-2};if(this.currentPage.pageY===this.pagesPos.yLen-1)return{pageX:this.currentPage.pageX,pageY:1}}},e.prototype.isSameWithCurrent=function(e){return e.pageX===this.currentPage.pageX&&e.pageY===this.currentPage.pageY},e.prototype.changedPageNum=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t="negative"===e?t-1:t+1),this.slideY&&(n="negative"===e?n-1:n+1),{pageX:t,pageY:n}},e.prototype.checkSlideLoop=function(){this.needLoop=this.slideOpt.loop,this.pagesPos.xLen>1&&(this.slideX=!0),this.pagesPos.pages[0]&&this.pagesPos.yLen>1&&(this.slideY=!0),this.loopX=this.needLoop&&this.slideX,this.loopY=this.needLoop&&this.slideY,this.slideX&&this.slideY&&("slide does not support two direction at the same time.",console.error("[BScroll warn]: slide does not support two direction at the same time."))},e}(),so=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"}].map((function(e){return{key:e.key,sourceKey:"plugins.slide."+e.name}})),ao=function(){function e(e){this.scroll=e,this.resetLooping=!1,this.isTouching=!1,this.scroll.proxy(so),this.scroll.registerType(["slideWillChange"]),this.slideOpt=this.scroll.options.slide,this.page=new ro(e,this.slideOpt),this.hooksFn=[],this.willChangeToPage={pageX:0,pageY:0},this.init()}return e.prototype.init=function(){var e=this,t=this.slideOpt,n=this.scroll.scroller.content,i=!1;t.loop&&(n.children.length>1?(this.cloneSlideEleForLoop(n),i=!0):t.loop=!1);var o=this.setSlideWidth(n),r=this.setSlideHeight(this.scroll.scroller.wrapper,n),s=o||r,a=this.scroll.hooks,l=this.scroll.scroller.hooks;this.registorHooks(a,"refresh",this.initSlideState),this.registorHooks(a,"destroy",this.destroy),this.registorHooks(l,"momentum",this.modifyScrollMetaHandler),this.registorHooks(this.scroll,"scrollEnd",this.amendCurrentPage),this.registorHooks(l,"beforeStart",this.setTouchFlag),this.registorHooks(l,"scroll",this.scrollMoving),this.registorHooks(l,"resize",this.resize),this.scroll.eventTypes.mousewheelMove&&this.scroll.eventTypes.mousewheelEnd&&(this.registorHooks(this.scroll,"mousewheelMove",(function(){return!0})),this.registorHooks(this.scroll,"mousewheelEnd",(function(t){1!==t.directionX&&1!==t.directionY||e.next(),-1!==t.directionX&&-1!==t.directionY||e.prev()}))),!1!==t.listenFlick&&this.registorHooks(l,"flick",this.flickHandler),i||s?this.scroll.refresh():this.initSlideState()},e.prototype.resize=function(){var e=this,t=this.scroll.scroller.content,n=this.scroll.scroller.wrapper;return clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){e.clearSlideWidth(t),e.clearSlideHeight(t),e.setSlideWidth(t),e.setSlideHeight(n,t),e.scroll.refresh()}),this.scroll.options.resizePolling),!0},e.prototype.next=function(e,t){var n=this.page.nextPage(),i=n.pageX,o=n.pageY;this.goTo(i,o,e,t)},e.prototype.prev=function(e,t){var n=this.page.prevPage(),i=n.pageX,o=n.pageY;this.goTo(i,o,e,t)},e.prototype.goToPage=function(e,t,n,i){var o=this.page.realPage2Page(e,t);o&&this.goTo(o.realX,o.realY,n,i)},e.prototype.getCurrentPage=function(){return this.page.getRealPage()},e.prototype.nearestPage=function(e,t){var n=this.scroll.scroller.scrollBehaviorX,i=this.scroll.scroller.scrollBehaviorY,o=!0;return Math.abs(e-n.absStartPos)<=this.thresholdX&&Math.abs(t-i.absStartPos)<=this.thresholdY&&(o=!1),o?this.page.nearestPage(Ji(e,n.maxScrollPos,n.minScrollPos),Ji(t,i.maxScrollPos,i.minScrollPos),n.direction,i.direction):this.page.currentPage},e.prototype.destroy=function(){var e=this.scroll.scroller.content;if(this.slideOpt.loop){var t=e.children;t.length>2&&(to(e,t[t.length-1]),to(e,t[0]))}this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.eventTypes[n]&&t.off(n,i)})),this.hooksFn.length=0},e.prototype.initSlideState=function(){const e=this.page.currentPage;if(this.page.init(),e)this.page.currentPage=e;else{var t=this.page.getInitPage();this.goTo(t.pageX,t.pageY,0)}this.initThreshold()},e.prototype.initThreshold=function(){var e=this.slideOpt.threshold||.1;if(e%1==0)this.thresholdX=e,this.thresholdY=e;else{var t=this.page.getPageSize();t&&(this.thresholdX=Math.round(t.width*e),this.thresholdY=Math.round(t.height*e))}},e.prototype.cloneSlideEleForLoop=function(e){var t,n,i,o=e.children;t=o[o.length-1].cloneNode(!0),(i=(n=e).firstChild)?function(e,t){t.parentNode.insertBefore(e,t)}(t,i):n.appendChild(t),e.appendChild(o[1].cloneNode(!0))},e.prototype.amendCurrentPage=function(){if(this.isTouching=!1,this.slideOpt.loop)if(this.resetLooping)this.resetLooping=!1;else{var e=!1;if(!this.page.loopX||this.scroll.x!==this.scroll.scroller.scrollBehaviorX.minScrollPos&&this.scroll.x!==this.scroll.scroller.scrollBehaviorX.maxScrollPos||(e=!0),!this.page.loopY||this.scroll.y!==this.scroll.scroller.scrollBehaviorY.minScrollPos&&this.scroll.y!==this.scroll.scroller.scrollBehaviorY.maxScrollPos||(e=!0),e){var t=this.scroll.scroller.scrollBehaviorX,n=this.scroll.scroller.scrollBehaviorY,i=this.page.nearestPage(Ji(this.scroll.x,t.maxScrollPos,t.minScrollPos),Ji(this.scroll.y,n.maxScrollPos,n.minScrollPos),0,0),o={x:i.x,y:i.y,pageX:i.pageX,pageY:i.pageY};this.page.isSameWithCurrent(o)||this.page.changeCurrentPage(o)}var r=this.page.resetLoopPage();if(r)return this.resetLooping=!0,this.goTo(r.pageX,r.pageY,0),!0;this.pageWillChangeTo(this.page.currentPage)}},e.prototype.shouldSetWidthHeight=function(e){var t={width:["scrollX","disableSetWidth"],height:["scrollY","disableSetHeight"]}[e];return!!this.scroll.options[t[0]]&&!this.slideOpt[t[1]]},e.prototype.clearSlideWidth=function(e){if(this.shouldSetWidthHeight("width")){for(var t=e.children,n=0;n<t.length;n++)t[n].removeAttribute("style");e.removeAttribute("style")}},e.prototype.setSlideWidth=function(e){if(!this.shouldSetWidthHeight("width"))return!1;for(var t=e.children,n=t[0].clientWidth,i=0;i<t.length;i++)t[i].style.width=n+"px";return e.style.width=n*t.length+"px",!0},e.prototype.clearSlideHeight=function(e){if(this.shouldSetWidthHeight("height")){for(var t=e.children,n=0;n<t.length;n++)t[n].removeAttribute("style");e.removeAttribute("style")}},e.prototype.setSlideHeight=function(e,t){if(!this.shouldSetWidthHeight("height"))return!1;for(var n=e.clientHeight,i=t.children,o=0;o<i.length;o++)i[o].style.height=n+"px";return t.style.height=n*i.length+"px",!0},e.prototype.goTo=function(e,t,n,i){void 0===t&&(t=0);var o=this.page.change2safePage(e,t);if(o){var r=i||this.slideOpt.easing||no.bounce,s=o.x,a=o.y,l=s-this.scroll.scroller.scrollBehaviorX.currentPos,u=a-this.scroll.scroller.scrollBehaviorY.currentPos;(l||u)&&(n=void 0===n?this.getAnimateTime(l,u):n,this.page.changeCurrentPage({x:s,y:a,pageX:o.pageX,pageY:o.pageY}),this.pageWillChangeTo(this.page.currentPage),this.scroll.scroller.scrollTo(s,a,n,r))}},e.prototype.flickHandler=function(){var e=this.scroll.scroller.scrollBehaviorX,t=this.scroll.scroller.scrollBehaviorY,n=e.currentPos-e.startPos,i=t.currentPos-t.startPos,o=this.getAnimateTime(n,i);this.goTo(this.page.currentPage.pageX+e.direction,this.page.currentPage.pageY+t.direction,o)},e.prototype.getAnimateTime=function(e,t){return this.slideOpt.speed?this.slideOpt.speed:Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},e.prototype.modifyScrollMetaHandler=function(e){var t=this.nearestPage(e.newX,e.newY);e.time=this.getAnimateTime(e.newX-t.x,e.newY-t.y),e.newX=t.x,e.newY=t.y,e.easing=this.slideOpt.easing||no.bounce,this.page.changeCurrentPage({x:e.newX,y:e.newY,pageX:t.pageX,pageY:t.pageY}),this.pageWillChangeTo(this.page.currentPage)},e.prototype.scrollMoving=function(e){if(this.isTouching){var t=this.nearestPage(e.x,e.y);this.pageWillChangeTo(t)}},e.prototype.pageWillChangeTo=function(e){var t=this.page.getRealPage(e);t.pageX===this.willChangeToPage.pageX&&t.pageY===this.willChangeToPage.pageY||(this.willChangeToPage=t,this.scroll.trigger("slideWillChange",this.willChangeToPage))},e.prototype.setTouchFlag=function(){this.isTouching=!0},e.prototype.registorHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.pluginName="slide",e}();const lo=ao;function uo(){return uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},uo.apply(this,arguments)}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ui.use(zi),ui.use(Gi),ui.use(Si),ui.use(lo);const ho=__webpack_require__(8742);class fo extends t().Component{constructor(e){super(e),this.scrollNeedsToInit=!1,this.scrollRef=t().createRef()}componentDidMount(){this.props.scrollEnabled&&!0!==this.props.nativeScroll&&this.setupIScroll(),this.scrollRef.current.noodlNode=this.props.noodlNode}componentWillUnmount(){this.iScroll&&(this.iScroll.destroy(),this.iScroll=void 0),this.props.noodlNode.context.setNodeFocused(this.props.noodlNode,!1)}componentDidUpdate(){this.scrollNeedsToInit&&(this.setupIScroll(),this.scrollNeedsToInit=!1),this.iScroll&&setTimeout((()=>{this.iScroll&&this.iScroll.refresh()}),0)}scrollToIndex(e,t){if(this.iScroll){const n=this.scrollRef.current.children[0].children[e];n&&this.iScroll.scrollToElement(n,t)}else{const t=this.scrollRef.current.children[e];t&&t.scrollIntoView({behavior:"smooth"})}}scrollToElement(e,t){if(!e)return;const n=i().findDOMNode(e.getRef());n&&(this.iScroll?this.iScroll.scrollToElement(n,t):n.scrollIntoView({behavior:"smooth"}))}setupIScroll(){const{scrollSnapEnabled:e}=this.props,t=this.getScrollDirection(),n={disableSetWidth:!0,disableSetHeight:!0},i=this.scrollRef.current;this.iScroll=new ui(i,{bounceTime:500,swipeBounceTime:300,scrollbar:this.props.showScrollbar,momentum:!e||!this.props.scrollSnapToEveryItem,bounce:this.props.scrollBounceEnabled&&!(e&&n.loop),scrollX:"x"===t||"both"===t,scrollY:"y"===t||"both"===t,slide:e?n:void 0,probeType:this.props.onScrollPositionChanged?3:1,click:!0,nestedScroll:!0,useTransition:!1});const o=this.iScroll.scroller;o.scrollBehaviorX&&(o.scrollBehaviorX.momentum=ho.bind(o.scrollBehaviorX)),o.scrollBehaviorY&&(o.scrollBehaviorY.momentum=ho.bind(o.scrollBehaviorY)),this.iScroll.on("beforeScrollStart",(()=>{this.iScroll.refresh()})),this.iScroll.on("scrollStart",(()=>{this.props.onScrollStart&&this.props.onScrollStart()})),this.iScroll.on("scrollEnd",(()=>{this.props.onScrollEnd&&this.props.onScrollEnd()})),this.props.onScrollPositionChanged&&this.iScroll.on("scroll",(()=>{this.props.onScrollPositionChanged("x"===t?-this.iScroll.x:-this.iScroll.y)}))}componentWillReceiveProps(e){(this.props.scrollSnapEnabled!==e.scrollSnapEnabled||this.props.onScrollPositionChanged!==e.onScrollPositionChanged||this.props.onScrollStart!==e.onScrollStart||this.props.onScrollEnd!==e.onScrollEnd||this.props.showScrollbar!==e.showScrollbar||this.props.scrollEnabled!==e.scrollEnabled||this.props.nativeScroll!==e.nativeScroll||this.props.scrollSnapToEveryItem!==e.scrollSnapToEveryItem||this.props.layout!==e.layout||this.props.flexWrap!==e.flexWrap||this.props.scrollBounceEnabled!==e.scrollBounceEnabled)&&(this.iScroll&&(this.iScroll.destroy(),this.iScroll=void 0),this.scrollNeedsToInit=e.scrollEnabled&&!e.nativeScroll)}renderIScroll(){const{flexDirection:e,flexWrap:n}=this.props.style,i={display:"inline-flex",flexShrink:0,flexDirection:e,flexWrap:n,touchAction:"none"};return"row"===e?"wrap"===n?i.width="100%":i.height="100%":"wrap"===n?i.height="100%":i.width="100%",t().createElement("div",{className:"scroll-wrapper-internal",style:i},this.props.children)}getScrollDirection(){return"wrap"===this.props.flexWrap||"wrap-reverse"===this.props.flexWrap?"row"===this.props.layout?"y":"x":"row"===this.props.layout?"x":"y"}render(){const e=this.props,n=e.scrollEnabled&&!e.nativeScroll?this.renderIScroll():e.children,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style);if(h.size(i,e),h.align(i,e),e.clip&&(i.overflowX="hidden",i.overflowY="hidden"),e.scrollEnabled&&e.nativeScroll){const e=this.getScrollDirection();"y"===e?i.overflowY="auto":"x"===e?i.overflowX="auto":"both"===e&&(i.overflowX="auto",i.overflowY="auto")}return 0===i.opacity&&(i.pointerEvents="none"),t().createElement("div",uo({className:e.className},e.dom,J(e),{style:i,ref:this.scrollRef}),n)}}const go={name:"Group",docs:"https://docs.noodl.net/nodes/basic-elements/group",connectionPanel:{groupPriority:["General","Style","Events","Mounted","Hover Events","Pointer Events","Focus","Scroll"]},initialize(){this._internal={scrollElementDuration:500,scrollIndexDuration:500,scrollIndex:0},this.props.layout="column"},getReactComponent:()=>fo,noodlNodeAsProp:!0,visualStates:[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"}],defaultCss:{display:"flex",position:"relative",flexDirection:"column"},inputs:{flexDirection:{index:12,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||je.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}},"scrollToIndex.do":{displayName:"Scroll To Index - Do",group:"Scroll To Index",type:"signal",index:505,valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{if(!this.innerReactComponentRef)return;const e=this._internal.scrollIndex,t=this._internal.scrollIndexDuration;this.innerReactComponentRef.scrollToIndex(e,t)}))}},"scrollToElement.do":{displayName:"Scroll To Element - Do",group:"Scroll To Element",type:"signal",index:500,valueChangedToTrue(){this.innerReactComponentRef&&this.scheduleAfterInputsHaveUpdated((()=>{const e=this._internal.scrollElement,t=this._internal.scrollElementDuration;this.innerReactComponentRef.scrollToElement(e,t)}))}},"scrollToElement.element":{displayName:"Scroll To Element - Element",group:"Scroll To Element",type:"reference",index:501,set(e){this._internal.scrollElement=e}},"scrollToElement.duration":{displayName:"Scroll To Element - Duration",group:"Scroll To Element",type:"number",default:500,index:502,set(e){this._internal.scrollElementDuration=e}},"scrollToIndex.index":{displayName:"Scroll To Index - Index",group:"Scroll To Index",type:"number",default:0,index:506,set(e){this._internal.scrollIndex=e}},"scrollToIndex.duration":{displayName:"Scroll To Index - Duration",group:"Scroll To Index",type:"number",default:500,index:507,set(e){this._internal.scrollIndexDuration=e}},focus:{displayName:"Focus",type:"signal",group:"Focus",valueChangedToTrue(){this.context.setNodeFocused(this,!0)}}},inputProps:{clip:{index:19,displayName:"Clip Content",type:"boolean",group:"Layout",default:!1},scrollEnabled:{index:54,group:"Scroll",displayName:"Enable Scroll",type:"boolean",default:!1},scrollSnapEnabled:{index:55,displayName:"Snap",group:"Scroll",type:"boolean",default:!1},scrollSnapToEveryItem:{index:56,displayName:"Snap To Every Item",group:"Scroll",type:"boolean",default:!1},showScrollbar:{index:57,displayName:"Show Scrollbar",group:"Scroll",type:"boolean",default:!1},scrollBounceEnabled:{index:58,displayName:"Bounce at boundaries",group:"Scroll",type:"boolean",default:!0},nativeScroll:{index:60,group:"Scroll",displayName:"Native platform scroll",type:"boolean",default:!0}},inputCss:{alignItems:{index:13,group:"Align and justify content",displayName:"Align Items",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"}],alignComp:"align-items"},default:"flex-start"},justifyContent:{index:14,group:"Align and justify content",displayName:"Justify Content",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"},{label:"Space Between",value:"space-between"},{label:"Space Around",value:"space-around"},{label:"Space Evenly",value:"space-evenly"}],alignComp:"justify-content"},default:"flex-start",applyDefault:!1},flexWrap:{index:15,displayName:"Multi Line Wrap",group:"Layout",type:{name:"enum",enums:[{label:"Off",value:"nowrap"},{label:"On",value:"wrap"},{label:"On Reverse",value:"wrap-reverse"}]},default:"nowrap",onChange(e){this.props.flexWrap=e,this.forceUpdate()},applyDefault:!1},alignContent:{index:16,group:"Layout",displayName:"Align Content",type:{name:"enum",enums:[{label:"Start",value:"flex-start"},{label:"End",value:"flex-end"},{label:"Center",value:"center"},{label:"Space Between",value:"space-between"},{label:"Space Around",value:"space-around"},{label:"Space Evenly",value:"space-evenly"}],alignComp:"align-content"}},rowGap:{index:17,displayName:"Vertical Gap",group:"Layout",type:{name:"number",units:["px","%","em"],defaultUnit:"px"},default:0,applyDefault:!1},columnGap:{index:18,displayName:"Horizontal Gap",group:"Layout",type:{name:"number",units:["px","%","em"],defaultUnit:"px"},default:0,applyDefault:!1},backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color",default:"transparent",applyDefault:!1,allowVisualStates:!0}},outputProps:{onScrollPositionChanged:{displayName:"Scroll Position",type:"number",group:"Scroll"},onScrollStart:{displayName:"Scroll Start",type:"signal",group:"Scroll"},onScrollEnd:{displayName:"Scroll End",type:"signal",group:"Scroll"}},outputs:{focused:{displayName:"Focused",type:"signal",group:"Focus"},focusLost:{displayName:"Focus Lost",type:"signal",group:"Focus"}},dynamicports:[{condition:"flexDirection != none",inputs:["scrollEnabled"]},{condition:"flexDirection != none AND scrollEnabled = true",inputs:["nativeScroll"]},{condition:"flexDirection != none AND scrollEnabled = true AND nativeScroll = false",inputs:["scrollBounceEnabled","scrollSnapEnabled","showScrollbar","scrollToElement.do","scrollToElement.element","scrollToElement.duration","scrollToIndex.do","scrollToIndex.index","scrollToIndex.duration"]},{condition:"flexDirection != none AND scrollEnabled = true AND scrollSnapEnabled = true",inputs:["scrollSnapToEveryItem"]},{condition:"flexDirection != none",inputs:["flexWrap"]},{condition:"flexWrap = wrap OR flexWrap = wrap-reverse",inputs:["alignContent"]},{condition:"flexDirection = row OR flexWrap = wrap OR flexWrap = wrap-reverse",inputs:["columnGap"]},{condition:"flexDirection = column OR flexWrap = wrap OR flexWrap = wrap-reverse",inputs:["rowGap"]}],methods:{_focus(){this.sendSignalOnOutput("focused")},_blur(){this.sendSignalOnOutput("focusLost")}}};var mo;P.addDimensions(go),P.addTransformInputs(go),P.addSharedVisualInputs(go),P.addPaddingInputs(go),P.addMarginInputs(go),P.addAlignInputs(go),P.addPointerEventOutputs(go),P.addBorderInputs(go),P.addShadowInputs(go),Noodl.runDeployed||((mo=go).inputProps.clip.tooltip=m({title:"Clip content",body:"Controls if elements that are too big to fit will be clipped",images:[{src:"clip-enabled.svg",label:"Enabled"},{src:"clip-disabled.svg",label:"Disabled"}]}),mo.inputCss.flexWrap.tooltip=m({title:"Multiline wrap",body:"Elements will wrap to the next line when there's not enough space",images:[{src:"multiline-h.svg",body:"Using a horizontal layout"},{src:"multiline-v.svg",body:"Using a vertical layout"}]}));const yo=G(go);function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function So(e){let t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({userSelect:"none"},e.style);h.size(t,e),h.align(t,e);let n="ndl-visual-icon";return e.className&&(n=n+" "+e.className),React.createElement("div",{className:n,style:t},function(){const t={};return"image"===e.iconSourceType&&void 0!==e.iconImageSource?(t.width=e.iconSize,t.height=e.iconSize,React.createElement("img",{alt:"",src:e.iconImageSource,style:t})):"icon"===e.iconSourceType&&void 0!==e.iconIconSource?(t.fontSize=e.iconSize,t.color=e.iconColor,t.lineHeight=1,React.createElement("div",{style:{lineHeight:0}},!0===e.iconIconSource.codeAsClass?React.createElement("span",{className:[e.iconIconSource.class,e.iconIconSource.code].join(" "),style:t}):React.createElement("span",{className:e.iconIconSource.class,style:t},e.iconIconSource.code))):null}())}const _o={name:"net.noodl.visual.icon",displayName:"Icon",docs:"https://docs.noodl.net/nodes/basic-elements/icon",allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Style","Actions","Events","States","Mounted","Hover Events","Pointer Events","Focus Events"]},getReactComponent:()=>So};P.addAlignInputs(_o),P.addTransformInputs(_o),P.addPaddingInputs(_o,{defaults:{paddingTop:5,paddingRight:5,paddingBottom:5,paddingLeft:5}}),P.addMarginInputs(_o),P.addIconInputs(_o,{hideEnableIconInput:!0,defaults:{useIcon:!0}}),P.addSharedVisualInputs(_o);const wo=G(_o);function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Oo.apply(this,arguments)}function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Io(e){const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){No(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style);return h.size(n,e),h.align(n,e),0===n.opacity&&(n.pointerEvents="none"),t().createElement("img",Oo({className:e.className},e.dom,J(e),{style:n}))}const xo={name:"Image",docs:"https://docs.noodl.net/nodes/basic-elements/image",noodlNodeAsProp:!0,visualStates:[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"}],connectionPanel:{groupPriority:["General","Image","Style","Actions","Events","Mounted","Pointer Events","Hover Events","Dimensions","Margin and padding"]},initialize(){this.props.default=""},getReactComponent:()=>Io,getInspectInfo(){if(this.props.dom.srcSet)return this.props.dom.srcSet;if(this.props.dom.src){const e=this.props.dom.src.toString();return[{type:"text",value:e},{type:"image",value:e}]}},allowChildren:!1,defaultCss:{display:"block",flexShrink:0},inputCss:{objectFit:{displayName:"Image Fit",group:"Dimensions",type:{name:"enum",enums:[{label:"Fill",value:"fill"},{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"None",value:"none"},{label:"Scale Down",value:"scale-down"}]},default:"contain",allowVisualStates:!0}},dynamicports:[{condition:"sizeMode = explicit",inputs:["objectFit"]}],inputs:{src:{displayName:"Source",group:"Image",propPath:"dom",type:{name:"image"},index:30,allowVisualStates:!0,set(e){this.props.dom.src=(0,b.getAbsoluteUrl)(e),this.forceUpdate()}}},inputProps:{srcSet:{displayName:"Source Set",group:"Image",propPath:"dom",type:{name:"string"},index:31,allowVisualStates:!0},alt:{displayName:"Alternate text",tooltip:"The alt text is used by screen readers, or if the image can't be downloaded or displayed",type:"string",propPath:"dom",index:1e3,default:""}},outputProps:{onLoad:{displayName:"On Load",propPath:"dom",type:"signal",group:"Events"}}};P.addDimensions(xo,{defaultSizeMode:"contentSize",contentLabel:"Image"}),P.addTransformInputs(xo),P.addMarginInputs(xo),P.addSharedVisualInputs(xo),P.addAlignInputs(xo),P.addPointerEventOutputs(xo),P.addBorderInputs(xo),P.addShadowInputs(xo);const Po=G(xo);function To(){return To=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},To.apply(this,arguments)}function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){ko(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ro=e=>{const n=Do(Do({},e.textStyle),e.style);return h.size(n,e),h.align(n,e),n.color=e.noodlNode.context.styles.resolveColor(n.color),"contentSize"===e.sizeMode||"contentWidth"===e.sizeMode?n.whiteSpace="pre":(n.whiteSpace="pre-wrap",n.overflowWrap="anywhere"),0===n.opacity&&(n.pointerEvents="none"),t().createElement("div",To({className:e.className},e.dom,J(e),{style:n}),String(e.text))},jo={name:"Text",docs:"https://docs.noodl.net/nodes/basic-elements/text",visualStates:[{name:"neutral",label:"Neutral"},{name:"hover",label:"Hover"}],allowChildren:!1,noodlNodeAsProp:!0,connectionPanel:{groupPriority:["General","Text","Text Style","Style","Events","Mounted","Hover Events","Pointer Events"]},getReactComponent:()=>Ro,getInspectInfo(){return this.props.text},defaultCss:{position:"relative",display:"flex"},inputProps:{text:{index:19,group:"Text",displayName:"Text",default:"Text",type:{name:"string",multiline:!0}}},inputCss:{wordBreak:{index:27,group:"Text",displayName:"Word Break",applyDefault:!1,type:{name:"enum",enums:[{label:"Normal",value:"normal"},{label:"Break All",value:"break-all"}]},default:"normal"}},inputs:{textAlignX:{group:"Text Alignment",index:13,displayName:"Text Horizontal Align",type:{name:"enum",enums:[{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}],alignComp:"justify"},default:"left",set(e){switch(e){case"left":this.setStyle({textAlign:"left",justifyContent:"flex-start"});break;case"center":this.setStyle({textAlign:"center",justifyContent:"center"});break;case"right":this.setStyle({textAlign:"right",justifyContent:"flex-end"})}}},textAlignY:{group:"Text Alignment",index:14,displayName:"Text Vertical Align",type:{name:"enum",enums:[{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"}],alignComp:"vertical"},default:"top",set(e){switch(e){case"top":this.setStyle({alignItems:"flex-start"});break;case"center":this.setStyle({alignItems:"center"});break;case"bottom":this.setStyle({alignItems:"flex-end"})}}}}};P.addDimensions(jo,{defaultSizeMode:"contentHeight",contentLabel:"Text"}),P.addTextStyleInputs(jo),P.addAlignInputs(jo),P.addTransformInputs(jo),P.addMarginInputs(jo),P.addSharedVisualInputs(jo),P.addPointerEventOutputs(jo),Noodl.runDeployed||function(e){e.inputCss.wordBreak.tooltip=m({title:"Word break",body:["Control where line breaks are allowed","- Normal: Break on spaces and other whitespace characters","- Break All: Allow line breaks between any two characters, including inside words"]})}(jo);const Ao=G(jo);function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vo(){return Vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vo.apply(this,arguments)}class Lo extends t().PureComponent{shouldComponentUpdate(e,t,n){return this.video&&(this.video.muted=e.muted,this.video.loop=e.loop,this.video.volume=e.volume,this.video.autoplay=e.autoplay),!0}render(){let e=this.props.src?this.props.src.toString():void 0;return e&&-1===e.indexOf("#t=")&&(e+="#t=0.01"),t().createElement("video",Vo({},this.props,{playsInline:!0,src:e},J(this.props),{ref:e=>{this.video=e,this.props.innerRef(e)}}))}}class Uo extends t().Component{constructor(e){super(e),this.wantToPlay=!1,this.canPlay=!1}componentWillUnmount(){this.canPlay=!1}setSourceObject(e){this.video.srcObject!==e&&(this.video.srcObject=e,this.canPlay=!1)}play(){this.wantToPlay=!0,this.canPlay&&this.video.play()}restart(){this.wantToPlay=!0,this.canPlay&&(this.video.currentTime=0,this.video.play())}pause(){this.wantToPlay=!1,this.video&&this.video.pause()}reset(){this.wantToPlay=!1,this.video&&(this.video.currentTime=0,this.video.pause())}render(){const e=this.props,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){Fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style);return h.size(n,e),h.align(n,e),0===n.opacity&&(n.pointerEvents="none"),n.objectPosition=`${e.objectPositionX} ${e.objectPositionY}`,t().createElement(Lo,Vo({},e.dom,{className:e.className,style:n,innerRef:e=>{this.video=e,this.props.onVideoElementCreated&&this.props.onVideoElementCreated(e)},onCanPlay:()=>{this.canPlay=!0,this.wantToPlay&&this.video.play(),this.props.onCanPlay&&this.props.onCanPlay(),this.props.videoWidth&&this.props.videoWidth(this.video.videoWidth),this.props.videoHeight&&this.props.videoHeight(this.video.videoHeight)}}))}}const Bo={name:"Video",docs:"https://docs.noodl.net/nodes/basic-elements/video",connectionPanel:{groupPriority:["General","Video","Video Actions","Style","Actions","Events","Mounted","Playback","Pointer Events","Hover Events","Dimensions","Margin and padding"]},getReactComponent:()=>Uo,allowChildren:!1,noodlNodeAsProp:!0,defaultCss:{display:"block"},inputs:{srcObject:{displayName:"Source Object",group:"Video",type:"mediastream",default:null,set(e){this.innerReactComponentRef&&this.innerReactComponentRef.setSourceObject(e)}},play:{type:"signal",group:"Video Actions",displayName:"Play",tooltip:{standard:"Play the video"},valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.play()}},restart:{type:"signal",group:"Video Actions",displayName:"Restart",tooltip:{standard:"Restart the video from the beginning"},valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.restart()}},pause:{type:"boolean",group:"Video Actions",displayName:"Pause",valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.pause()}},reset:{type:"boolean",group:"Video Actions",displayName:"Reset",valueChangedToTrue(){this.innerReactComponentRef&&this.innerReactComponentRef.reset()}},src:{displayName:"Source",group:"Video",type:"string",set(e){this.props.dom.src=(0,b.getAbsoluteUrl)(e)}},poster:{displayName:"Poster",group:"Video",type:"image",set(e){this.props.dom.poster=(0,b.getAbsoluteUrl)(e)}}},inputProps:{autoplay:{displayName:"Autoplay",propPath:"dom",group:"Video",type:"boolean"},volume:{displayName:"Volume",propPath:"dom",group:"Video",type:"number",default:1},muted:{displayName:"Muted",propPath:"dom",group:"Video",type:"boolean"},loop:{displayName:"Loop",propPath:"dom",group:"Video",type:"boolean"},objectPositionX:{displayName:"Video Position X",group:"Video Layout",type:{name:"number",units:["%","px"],defaultUnit:"%"},default:50},objectPositionY:{displayName:"Video Position Y",group:"Video Layout",type:{name:"number",units:["%","px"],defaultUnit:"%"},default:50}},inputCss:{objectFit:{displayName:"Object Fit",group:"Video Layout",type:{name:"enum",enums:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"Fill",value:"fill"},{label:"None",value:"none"}]},default:"contain"}},outputProps:{onCanPlay:{type:"signal",group:"Events",displayName:"On Can Play"},onTimeUpdate:{group:"Playback",displayName:"Playback Position",type:"number",propPath:"dom",getValue:e=>e.target.currentTime},onPlay:{group:"Events",displayName:"On Play",type:"signal",propPath:"dom"},onPause:{group:"Events",displayName:"On Pause",type:"signal",propPath:"dom"},onVideoElementCreated:{type:"domelement",displayName:"DOM Element"},videoWidth:{group:"Playback",type:"number",displayName:"Video Width"},videoHeight:{group:"Playback",type:"number",displayName:"Video Height"}}};P.addDimensions(Bo,{defaultSizeMode:"contentSize",contentLabel:"Video"}),P.addTransformInputs(Bo),P.addMarginInputs(Bo),P.addSharedVisualInputs(Bo),P.addAlignInputs(Bo),P.addPointerEventOutputs(Bo),P.addBorderInputs(Bo);const Wo=G(Bo);var zo=__webpack_require__(3379),qo=__webpack_require__.n(zo),Ho=__webpack_require__(2254);qo()(Ho.Z,{insert:"head",singleton:!1}),Ho.Z.locals;const $o={};function Go(e,t,n){e[t]||(e[t]={});for(const i in n)e[t][i]=n[i]}const Xo=function(e,t,n){if($o[e])(function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;for(var n in t)if(t.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0})(t,$o[e].props)||($o[e].style.innerHTML=n(e,t),$o[e].props=Object.assign({},t));else{var i=document.createElement("style");i.innerHTML=n(e,t),document.head.appendChild(i),$o[e]={style:i,props:Object.assign({},t)}}},Yo=function(e){!function(e,t){Go(e,"inputProps",{blockTouch:{index:450,displayName:"Block Pointer Events",type:"boolean"}})}(e),function(e,t){Go(e,"outputProps",{focusState:{displayName:"Focused",group:"States",type:"boolean",props:{onFocus(){this.outputPropValues.focusState=!0,this.flagOutputDirty("focusState"),this.hasOutput("onFocus")&&this.sendSignalOnOutput("onFocus")},onBlur(){this.outputPropValues.focusState=!1,this.flagOutputDirty("focusState"),this.hasOutput("onBlur")&&this.sendSignalOnOutput("onBlur")}}},onFocus:{displayName:"Focused",group:"Events",type:"signal",props:{onFocus(){this.outputPropValues.focusState=!0,this.flagOutputDirty("focusState"),this.sendSignalOnOutput("onFocus")}}},onBlur:{displayName:"Blurred",group:"Events",type:"signal",props:{onBlur(){this.outputPropValues.focusState=!1,this.flagOutputDirty("focusState"),this.sendSignalOnOutput("onBlur")}}},hoverState:{displayName:"Hover",group:"States",type:"boolean",props:{onMouseOver(){this.outputPropValues.hoverState=!0,this.flagOutputDirty("hoverState"),this.hasOutput("hoverStart")&&this.sendSignalOnOutput("hoverStart")},onMouseLeave(){this.outputPropValues.hoverState=!1,this.flagOutputDirty("hoverState"),this.hasOutput("hoverEnd")&&this.sendSignalOnOutput("hoverEnd")}}},hoverStart:{displayName:"Hover Start",group:"Events",type:"signal",props:{onMouseOver(){this.outputPropValues.hoverState=!0,this.flagOutputDirty("hoverState"),this.sendSignalOnOutput("hoverStart")}}},hoverEnd:{displayName:"Hover End",group:"Events",type:"signal",props:{onMouseLeave(){this.outputPropValues.hoverState=!1,this.flagOutputDirty("hoverState"),this.sendSignalOnOutput("hoverEnd")}}},pressedState:{displayName:"Pressed",group:"States",type:"boolean",props:{onMouseDown(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.hasOutput("pointerDown")&&this.sendSignalOnOutput("pointerDown")},onTouchStart(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.hasOutput("pointerDown")&&this.sendSignalOnOutput("pointerDown")},onMouseUp(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.hasOutput("pointerUp")&&this.sendSignalOnOutput("pointerUp")},onTouchEnd(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.hasOutput("pointerUp")&&this.sendSignalOnOutput("pointerUp")},onTouchCancel(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.hasOutput("pointerUp")&&this.sendSignalOnOutput("pointerUp")}}},pointerDown:{displayName:"Pointer Down",group:"Events",type:"signal",props:{onMouseDown(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerDown")},onTouchStart(){this.outputPropValues.pressedState=!0,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerDown")}}},pointerUp:{displayName:"Pointer Up",group:"Events",type:"signal",props:{onMouseUp(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerUp")},onTouchEnd(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerUp")},onTouchCancel(){this.outputPropValues.pressedState=!1,this.flagOutputDirty("pressedState"),this.sendSignalOnOutput("pointerUp")}}}})}(e)},Jo=function(e){return Object.assign({},{onFocus:e.onFocus,onBlur:e.onBlur},J(e))};function Ko(){return Ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ko.apply(this,arguments)}function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(t){(0,e.useEffect)((()=>{t.focusChanged&&t.focusChanged(!1),t.hoverChanged&&t.hoverChanged(!1),t.pressedChanged&&t.pressedChanged(!1)}),[]);var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach((function(t){Zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.style);h.size(n,t),h.align(n,t),void 0!==t.textStyle&&(n=Object.assign({},t.textStyle,n)),t.boxShadowEnabled&&(n.boxShadow=`${t.boxShadowInset?"inset ":""}${t.boxShadowOffsetX} ${t.boxShadowOffsetY} ${t.boxShadowBlurRadius} ${t.boxShadowSpreadRadius} ${t.boxShadowColor}`);let i="ndl-controls-button";return t.className&&(i=i+" "+t.className),React.createElement("button",Ko({className:i,disabled:!t.enabled},Jo(t),{type:t.buttonType,style:n,onClick:t.onClick}),t.label,t.children)}var tr={name:"Button",docs:"https://docs.noodl.net/nodes/visual/button",allowChildren:!0,noodlNodeAsProp:!0,initialize(){this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.id=this._internal.controlId="input-"+ue()(),this.props.enabled=this._internal.enabled=!0},getReactComponent:()=>er,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},textStyle:{index:20,type:"textStyle",group:"Text",displayName:"Text Style",default:"None",set(e){this.props.textStyle=this.context.styles.getTextStyle(e),this.forceUpdate()}},fontFamily:{index:21,type:"font",group:"Text",displayName:"Font Family",set(e){if(e){let t=e;t.split(".").length>1&&(t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t})}else this.removeStyle(["fontFamily"]);this.props.textStyle&&this.forceUpdate()}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}}},inputCss:{fontSize:{index:21,group:"Text",displayName:"Font Size",type:{name:"number",units:["px"],defaultUnit:"px"},onChange(){this.props.textStyle&&this.forceUpdate()}},color:{index:24,group:"Text",displayName:"Color",type:"color",default:"#FFFFFF"},backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"#000000"},paddingLeft:{index:64,group:"Margin and padding",default:20,applyDefault:!1,displayName:"Pad Left",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-left"}},paddingRight:{index:65,group:"Margin and padding",default:20,applyDefault:!1,displayName:"Pad Right",type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-right"}},paddingTop:{index:66,group:"Margin and padding",displayName:"Pad Top",default:5,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-top"}},paddingBottom:{index:67,group:"Margin and padding",displayName:"Pad Bottom",default:5,applyDefault:!1,type:{name:"number",units:["px"],defaultUnit:"px",marginPaddingComp:"padding-bottom"}},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"none",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},inputProps:{label:{type:"string",displayName:"Label",group:"General",default:"Label"},buttonType:{type:{name:"enum",enums:[{label:"Button",value:"button"},{label:"Submit",value:"submit"}]},displayName:"Type",default:"button",group:"General"},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},outputProps:{onClick:{displayName:"Click",group:"Events",type:"signal"}},dynamicports:[{condition:"boxShadowEnabled = true",inputs:["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]}],methods:{}};P.addDimensions(tr,{defaultSizeMode:"contentSize",contentLabel:"Content",useDimensionConstraints:!1}),P.addAlignInputs(tr),P.addTransformInputs(tr),P.addMarginInputs(tr),P.addSharedVisualInputs(tr),Yo(tr),(tr=G(tr)).setup=function(e,t){t.on("nodeAdded.Button",(function(e){e.parameters.fontFamily&&e.parameters.fontFamily.split(".").length>1&&v().instance.loadFont(e.parameters.fontFamily),e.on("parameterUpdated",(function(e){"fontFamily"===e.name&&e.value&&e.value.split(".").length>1&&v().instance.loadFont(e.value)}))}))};const nr=tr;function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ir.apply(this,arguments)}function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(e,t){return`\n    .${e}:checked {\n        background-color: ${t.checkedBackgroundColor};\n    }  \n    `}function ar(t){const[n,i]=(0,e.useState)(t.checked);(0,e.useEffect)((()=>{i(!!t.checked)}),[]),(0,e.useEffect)((()=>{i(!!t.checked)}),[t.checked]);var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.style);h.size(o,t),h.align(o,t),t.boxShadowEnabled&&(o.boxShadow=`${t.boxShadowInset?"inset ":""}${t.boxShadowOffsetX} ${t.boxShadowOffsetY} ${t.boxShadowBlurRadius} ${t.boxShadowSpreadRadius} ${t.boxShadowColor}`);const r={id:t.id,style:o};Xo("ndl-controls-checkbox-"+t._nodeId,{checkedBackgroundColor:t.checkedBackgroundColor},sr);let s="ndl-controls-checkbox-"+t._nodeId+" ndl-controls-checkbox";return t.className&&(s=s+" "+t.className),React.createElement("input",ir({className:s,type:"checkbox"},r,Jo(t),{checked:n,disabled:!t.enabled,onChange:e=>{i(e.target.checked),t.checkedChanged&&t.checkedChanged(e.target.checked)}}))}var lr={name:"Checkbox",displayName:"Checkbox",docs:"https://docs.noodl.net/nodes/visual/checkbox",allowChildren:!1,noodlNodeAsProp:!0,initialize(){this.props.sizeMode="explicit",this.props.id=this._internal.controlId="input-"+ue()(),this.props.enabled=this._internal.enabled=!0,this.props.checked=this._internal.checked=!1,this.props._nodeId=this.id,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.checkedChanged=e=>{const t=this._internal.checked!==e;this._internal.checked=e,t&&(this.flagOutputDirty("checked"),this.sendSignalOnOutput("onChange"))}},getReactComponent:()=>ar,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},checked:{type:"boolean",displayName:"Checked",group:"General",default:!1,set:function(e){const t=(e=!!e)!==this._internal.checked;this.props.checked=this._internal.checked=e,t&&(this.forceUpdate(),this.flagOutputDirty("checked"))}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},checked:{type:"boolean",displayName:"Checked",group:"States",getter:function(){return this._internal.checked}},onChange:{displayName:"Changed",group:"Events",type:"signal"}},inputProps:{width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"px"},default:32},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["%","px","vh"],defaultUnit:"px"},default:32},checkedBackgroundColor:{displayName:"Background color",group:"Checked Style",type:{name:"color",allowEditOnly:!0},default:"#000000"},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:2,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"solid",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},outputProps:{},methods:{}};P.addAlignInputs(lr),P.addTransformInputs(lr),P.addMarginInputs(lr),P.addSharedVisualInputs(lr),Yo(lr);const ur=lr=G(lr);function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dr(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style);h.size(t,e),h.align(t,e);let n="ndl-controls-fieldset";return e.className&&(n=n+" "+e.className),React.createElement("fieldset",{className:n,style:t},e.children)}var hr={name:"Field Set",docs:"https://docs.noodl.net/nodes/visual/fieldset",allowChildren:!0,noodlNodeAsProp:!0,deprecated:!0,initialize(){},defaultCss:{display:"flex",position:"relative",flexDirection:"column"},getReactComponent:()=>dr,inputs:{flexDirection:{index:11,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||je.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}}},inputProps:{},outputProps:{}};P.addDimensions(hr,{defaultSizeMode:"contentSize",contentLabel:"Content"}),P.addAlignInputs(hr),P.addTransformInputs(hr),P.addMarginInputs(hr),P.addPaddingInputs(hr),P.addSharedVisualInputs(hr);const fr=hr=G(hr);function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yr(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style);h.size(t,e),h.align(t,e);let n="ndl-controls-form";return e.className&&(n=n+" "+e.className),React.createElement("form",{className:n,style:t,onSubmit:t=>{t.preventDefault(),e.onSubmit&&e.onSubmit()}},e.children)}var vr={name:"Form",docs:"https://docs.noodl.net/nodes/visual/form",allowChildren:!0,noodlNodeAsProp:!0,deprecated:!0,initialize(){},defaultCss:{display:"flex",position:"relative",flexDirection:"column"},getReactComponent:()=>yr,inputs:{flexDirection:{index:11,displayName:"Layout",group:"Layout",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Vertical",value:"column"},{label:"Horizontal",value:"row"}]},default:"column",set(e){this.props.layout=e,"none"!==e?this.setStyle({flexDirection:e}):this.removeStyle(["flexDirection"]),this.context.editorConnection&&("none"===e||je.includes(e)?this.context.editorConnection.clearWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning"):this.context.editorConnection.sendWarning(this.nodeScope.componentOwner.name,this.id,"layout-warning",{message:"Invalid Layout value has to be a valid flex-direction value."})),this.forceUpdate()}}},inputProps:{},outputProps:{onSubmit:{type:"signal",displayName:"Submit",group:"Events"}}};P.addDimensions(vr,{defaultSizeMode:"contentSize",contentLabel:"Content"}),P.addAlignInputs(vr),P.addTransformInputs(vr),P.addMarginInputs(vr),P.addPaddingInputs(vr),P.addSharedVisualInputs(vr);const br=vr=G(vr);function Sr(){return Sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sr.apply(this,arguments)}function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style);h.size(t,e),h.align(t,e),void 0!==e.textStyle&&(t=Object.assign({},e.textStyle,t));const n={for:e.for,onClick:e.onClick};let i="ndl-controls-label";return e.className&&(i=i+" "+e.className),React.createElement("label",Sr({className:i,style:t},n),e.text)}const Cr={name:"Label",displayName:"Label",docs:"https://docs.noodl.net/nodes/visual/label",allowChildren:!0,noodlNodeAsProp:!0,deprecated:!0,getReactComponent:()=>Or,defaultCss:{position:"relative",display:"flex"},inputProps:{for:{type:"string",displayName:"For",group:"General"},text:{type:"string",displayName:"Text",group:"General"}}};P.addDimensions(Cr,{defaultSizeMode:"contentSize",contentLabel:"Content"}),P.addAlignInputs(Cr),P.addTextStyleInputs(Cr),P.addTransformInputs(Cr),P.addMarginInputs(Cr),P.addSharedVisualInputs(Cr),P.addBorderInputs(Cr);const Nr=G(Cr);function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ir.apply(this,arguments)}function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(t){const[n,i]=(0,e.useState)(t.value);(0,e.useEffect)((()=>{i(t.value)}),[]),(0,e.useEffect)((()=>{i(t.value)}),[t.value]);var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){Pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.style);h.size(o,t),h.align(o,t),void 0!==t.textStyle&&(o=Object.assign({},t.textStyle,o)),t.boxShadowEnabled&&(o.boxShadow=`${t.boxShadowInset?"inset ":""}${t.boxShadowOffsetX} ${t.boxShadowOffsetY} ${t.boxShadowBlurRadius} ${t.boxShadowSpreadRadius} ${t.boxShadowColor}`);const r=void 0===n||""===n||void 0===t.items?-1:t.items.findIndex((e=>e.Value===n)),s={id:t.id,style:o,onClick:t.onClick};let a="ndl-controls-select";return t.className&&(a=a+" "+t.className),React.createElement("select",Ir({className:a,ref:e=>{e&&(e.selectedIndex=r)}},s,{disabled:!t.enabled,value:n},Jo(t),{onChange:e=>{i(e.target.value),t.valueChanged&&t.valueChanged(e.target.value)}}),void 0!==t.items?t.items.map((e=>React.createElement("option",{value:e.Value,disabled:"true"===e.Disabled||!0===e.Disabled||void 0,selected:e.Value===n},e.Label))):null)}var Er={name:"Options",displayName:"Options",docs:"https://docs.noodl.net/nodes/visual/options",allowChildren:!1,noodlNodeAsProp:!0,initialize:function(){this._itemsChanged=()=>{this.forceUpdate()},this.props.id=this._internal.controlId="input-"+ue()(),this.props.enabled=this._internal.enabled=!0,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.valueChanged=e=>{const t=this._internal.value!==e;this._internal.value=e,t&&(this.flagOutputDirty("value"),this.sendSignalOnOutput("onChange"))}},getReactComponent:()=>Tr,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},items:{type:"array",displayName:"Items",group:"General",set:function(e){this._internal.items!==e&&void 0!==this._internal.items&&this._internal.items.off("change",this._itemsChanged),this._internal.items=e,this._internal.items.on("change",this._itemsChanged),this.props.items=this._internal.items}},value:{type:"*",displayName:"Value",group:"General",set:function(e){if(void 0!==e&&"string"!=typeof e){if(void 0===e.toString)return;e=e.toString()}const t=e!==this._internal.value;this.props.value=this._internal.value=e,t&&(this.forceUpdate(),this.flagOutputDirty("value"))}},textStyle:{index:20,type:"textStyle",group:"Text",displayName:"Text Style",default:"None",set(e){this.props.textStyle=this.context.styles.getTextStyle(e),this.forceUpdate()}},fontFamily:{index:21,type:"font",group:"Text",displayName:"Font Family",set(e){if(e){let t=e;t.split(".").length>1&&(t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t})}else this.removeStyle(["fontFamily"]);this.props.textStyle&&this.forceUpdate()}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},value:{type:"string",displayName:"Value",group:"States",getter:function(){return this._internal.value}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputCss:{fontSize:{index:21,group:"Text",displayName:"Font Size",type:{name:"number",units:["px"],defaultUnit:"px"},onChange(){this.props.textStyle&&this.forceUpdate()}},color:{index:24,group:"Text",displayName:"Color",type:"color"},backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"solid",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},inputProps:{boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},outputProps:{},dynamicports:[{condition:"boxShadowEnabled = true",inputs:["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]}],methods:{}};P.addDimensions(Er,{defaultSizeMode:"contentSize",contentLabel:"Content"}),P.addAlignInputs(Er),P.addTransformInputs(Er),P.addPaddingInputs(Er),P.addMarginInputs(Er),P.addSharedVisualInputs(Er),Yo(Er),(Er=G(Er)).setup=function(e,t){t.on("nodeAdded.Options",(function(e){e.parameters.fontFamily&&e.parameters.fontFamily.split(".").length>1&&v().instance.loadFont(e.parameters.fontFamily),e.on("parameterUpdated",(function(e){"fontFamily"===e.name&&e.value&&e.value.split(".").length>1&&v().instance.loadFont(e.value)}))}))};const Dr=Er;function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kr.apply(this,arguments)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e,t){return`\n    .${e}:checked {\n        background-color: ${t.checkedBackgroundColor};\n    }  \n    `}function Mr(t){const n=(0,e.useContext)(Ne);var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){jr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.style);h.size(i,t),h.align(i,t),t.boxShadowEnabled&&(i.boxShadow=`${t.boxShadowInset?"inset ":""}${t.boxShadowOffsetX} ${t.boxShadowOffsetY} ${t.boxShadowBlurRadius} ${t.boxShadowSpreadRadius} ${t.boxShadowColor}`);const o={id:t.id,style:i};t.checkedChanged&&t.checkedChanged(!!n&&n.selected===t.value),Xo("ndl-controls-radiobutton-"+t._nodeId,{checkedBackgroundColor:t.checkedBackgroundColor},Ar);let r="ndl-controls-radiobutton-"+t._nodeId+" ndl-controls-radiobutton";return t.className&&(r=r+" "+t.className),React.createElement("input",kr({className:r},Jo(t),{type:"radio",name:n?n.name:void 0},o,{disabled:!t.enabled,checked:!!n&&n.selected===t.value,onChange:e=>{n&&n.checkedChanged&&n.checkedChanged(t.value)}}))}var Fr={name:"Radio Button",displayName:"Radio Button",docs:"https://docs.noodl.net/nodes/visual/radiobutton",allowChildren:!1,noodlNodeAsProp:!0,initialize(){this.props.sizeMode="explicit",this.props.id=this._internal.controlId="input-"+ue()(),this.props.enabled=this._internal.enabled=!0,this.props._nodeId=this.id,this._internal.checked=!1,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1,this.props.checkedChanged=e=>{const t=this._internal.checked!==e;this._internal.checked=e,t&&this.flagOutputDirty("checked")}},getReactComponent:()=>Mr,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},checked:{type:"boolean",displayName:"Checked",group:"States",getter:function(){return this._internal.checked}}},inputProps:{value:{type:"string",displayName:"Value",group:"General"},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"px"},default:32},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["%","px","vh"],defaultUnit:"px"},default:32},checkedBackgroundColor:{displayName:"Background color",group:"Checked Style",type:{name:"color",allowEditOnly:!0},default:"#000000"},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:16,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"solid",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},outputProps:{},methods:{}};P.addAlignInputs(Fr),P.addTransformInputs(Fr),P.addMarginInputs(Fr),P.addSharedVisualInputs(Fr),Yo(Fr);const Vr=Fr=G(Fr);function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lr.apply(this,arguments)}function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wr(e,t){return`\n    .${e}::-webkit-slider-thumb {\n        width: ${t.thumbWidth};\n        height: ${t.thumbHeight};\n        background: ${t.thumbColor};\n        border: 0;\n        border-radius: ${t.thumbRadius};\n        cursor: pointer;\n        -webkit-appearance: none;\n        margin-top:calc(${t.trackHeight}/2 - ${t.thumbHeight}/2);\n    }\n    \n    .${e}::-moz-range-thumb {\n        width: ${t.thumbWidth};\n        height: ${t.thumbHeight};\n        background: ${t.thumbColor};\n        border: none;\n        border-radius: ${t.thumbRadius};\n        cursor: pointer;\n    }\n    \n    .${e}::-ms-thumb {\n        width: ${t.thumbWidth};\n        height: ${t.thumbHeight};\n        background: ${t.thumbColor};\n        border: none;\n        border-radius: ${t.thumbRadius};\n        cursor: pointer;\n        margin-top: 0px;\n    }\n    \n    .${e}::-webkit-slider-runnable-track {\n        background: ${t.trackColor};\n        border: none;\n        width: 100%;\n        height: ${t.trackHeight};\n        cursor: pointer;\n        margin-top:0px;\n    }\n    \n    .${e}:focus::-webkit-slider-runnable-track {\n        background: ${t.trackColor};\n    }\n    \n    .${e}::-moz-range-track {\n        background: ${t.trackColor};\n        border: none;\n        width: 100%;\n        height: ${t.trackHeight};\n        cursor: pointer;\n    }\n    \n    .${e}::-ms-track {\n        background: transparent;\n        border:none;\n        color: transparent;\n        width: 100%;\n        height: ${t.trackHeight};\n        cursor: pointer;\n    }\n    \n    .${e}::-ms-fill-lower {\n        background: ${t.trackColor};\n        border: none;\n    }\n    .${e}::-ms-fill-upper {\n        background: ${t.trackColor};\n        border: none;\n    }    \n    `}function zr(t){const[n,i]=(0,e.useState)(t.value);(0,e.useEffect)((()=>{i(t.value)}),[]),(0,e.useEffect)((()=>{i(t.value)}),[t.value]);var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.style);h.size(o,t),h.align(o,t);const r={id:t.id,min:t.min,max:t.max,step:t.step,style:o};Xo("ndl-controls-range-"+t._nodeId,t,Wr);let s="ndl-controls-range-"+t._nodeId+" ndl-controls-range";return t.className&&(s=s+" "+t.className),React.createElement("input",Lr({className:s},Jo(t),{type:"range"},r,{value:n,disabled:!t.enabled,onChange:e=>{i(e.target.value),t.valueChanged&&t.valueChanged(e.target.value)}}))}var qr={name:"Range",docs:"https://docs.noodl.net/nodes/visual/range",allowChildren:!1,noodlNodeAsProp:!0,initialize(){this.props.sizeMode="explicit",this.props.id=this._internal.controlId="input-"+ue()(),this.props.enabled=this._internal.enabled=!0,this._internal.value=this.props.value=this.props.min,this.props._nodeId=this.id,this.props.valueChanged=e=>{e="string"==typeof e?parseFloat(e):e;const t=this._internal.value!==e;this._internal.value=e,this._updateValuePercent(e),t&&(this.flagOutputDirty("value"),this.sendSignalOnOutput("onChange"))},this.props.valueChanged(this.props.value),this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1},getReactComponent:()=>zr,inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},value:{type:"string",displayName:"Value",group:"General",set:function(e){const t=e!==this._internal.value;this.props.value=this._internal.value=e,this._updateValuePercent(e),t&&(this.forceUpdate(),this.flagOutputDirty("value"))}}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}},value:{type:"number",displayName:"Value",group:"States",getter:function(){return this._internal.value}},valuePercent:{type:"number",displayName:"Value Percent",group:"States",getter:function(){return this._internal.valuePercent}},onChange:{type:"signal",displayName:"Changed",group:"Events"}},inputProps:{min:{type:"number",displayName:"Min",group:"General",default:0},max:{type:"number",displayName:"Max",group:"General",default:100},step:{type:"number",displayName:"Step",group:"General",default:1},width:{index:11,group:"Dimensions",displayName:"Width",type:{name:"number",units:["%","px","vw"],defaultUnit:"%"},default:100},height:{index:12,group:"Dimensions",displayName:"Height",type:{name:"number",units:["%","px","vh"],defaultUnit:"%"},default:100},thumbWidth:{group:"Thumb Style",displayName:"Width",type:{name:"number",units:["px","vw","%"],defaultUnit:"px",allowEditOnly:!0},default:16},thumbHeight:{group:"Thumb Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:16},thumbRadius:{group:"Thumb Style",displayName:"Radius",type:{name:"number",units:["px","%"],defaultUnit:"px",allowEditOnly:!0},default:8},thumbColor:{group:"Thumb Style",displayName:"Color",type:{name:"color",allowEditOnly:!0},default:"#000000"},trackHeight:{group:"Track Style",displayName:"Height",type:{name:"number",units:["px","vh","%"],defaultUnit:"px",allowEditOnly:!0},default:6},trackColor:{group:"Track Style",displayName:"Color",type:{name:"color",allowEditOnly:!0},default:"#f0f0f0"}},inputCss:{backgroundColor:{index:201,displayName:"Background Color",group:"Style",type:"color"},borderRadius:{index:202,displayName:"Border Radius",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderStyle:{index:203,displayName:"Border Style",group:"Style",type:{name:"enum",enums:[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"}]},default:"none",applyDefault:!1},borderWidth:{index:204,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:1,applyDefault:!1},borderColor:{index:205,displayName:"Border Color",group:"Style",type:"color",default:"#000000"}},outputProps:{},methods:{_updateValuePercent(e){const t=this.props.min,n=this.props.max,i=Math.floor((e-t)/(n-t)*100),o=this._internal.valuePercentChanged!==i;this._internal.valuePercent=i,o&&this.flagOutputDirty("valuePercent")}}};P.addAlignInputs(qr),P.addTransformInputs(qr),P.addMarginInputs(qr),P.addSharedVisualInputs(qr),Yo(qr);const Hr=qr=G(qr);function $r(){return $r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$r.apply(this,arguments)}function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){Yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jr(e){e.stopPropagation(),window.removeEventListener("click",Jr,!0)}class Kr extends t().Component{constructor(e){super(e),this.state={value:e.startValue},this.ref=t().createRef()}setText(e){this.setState({value:e}),this.props.onTextChanged&&this.props.onTextChanged(e)}componentDidMount(){this.ref.current.noodlNode=this.props.noodlNode,this.setText(this.props.startValue)}render(){const e=Xr(Xr({},this.props.textStyle),this.props.style);h.size(e,this.props),h.align(e,this.props),0===e.opacity&&(e.pointerEvents="none");const n=this.props,i=Xr(Xr({id:n.id,value:this.state.value},Jo(n)),{},{disabled:!n.enabled,style:e,className:n.className,placeholder:n.placeholder,onChange:e=>this.onChange(e)});return"textArea"!==this.props.type?t().createElement("input",$r({ref:this.ref,type:this.props.type},i,{onKeyDown:e=>this.onKeyDown(e),onMouseDown:()=>window.addEventListener("click",Jr,!0)})):(i.style.resize="none",t().createElement("textarea",$r({ref:this.ref},i,{onKeyDown:e=>this.onKeyDown(e)})))}onKeyDown(e){"Enter"!==e.key&&13!==e.which||this.props.onEnter&&this.props.onEnter()}onChange(e){const t=e.target.value;this.setText(t)}focus(){this.ref.current&&this.ref.current.focus()}blur(){this.ref.current&&this.ref.current.blur()}}const Qr={name:"Text Input",docs:"https://docs.noodl.net/nodes/visual/text-input",allowChildren:!1,noodlNodeAsProp:!0,getReactComponent:()=>Kr,defaultCss:{outline:"none",borderStyle:"solid",padding:0},initialize(){this.props.startValue="",this.props.id=this._internal.controlId="input-"+ue()(),this.props.enabled=this._internal.enabled=!0,this.outputPropValues.hoverState=this.outputPropValues.focusState=this.outputPropValues.pressedState=!1},inputProps:{type:{displayName:"Type",group:"Text",index:19,type:{name:"enum",enums:[{label:"Text",value:"text"},{label:"Text Area",value:"textArea"},{label:"Email",value:"email"},{label:"Number",value:"number"},{label:"Password",value:"password"},{label:"URL",value:"url"}]},default:"text"},placeholder:{index:22,group:"Text",displayName:"Placeholder",default:"Type here...",type:{name:"string"}},boxShadowEnabled:{index:250,group:"Box Shadow",displayName:"Shadow Enabled",type:"boolean",default:!1},boxShadowOffsetX:{index:251,group:"Box Shadow",displayName:"Offset X",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowOffsetY:{index:252,group:"Box Shadow",displayName:"Offset Y",default:0,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowBlurRadius:{index:253,group:"Box Shadow",displayName:"Blur Radius",default:5,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowSpreadRadius:{index:254,group:"Box Shadow",displayName:"Spread Radius",default:2,type:{name:"number",units:["px"],defaultUnit:"px"}},boxShadowInset:{index:255,group:"Box Shadow",displayName:"Inset",type:"boolean",default:!1},boxShadowColor:{index:256,group:"Box Shadow",displayName:"Shadow Color",type:"color",default:"rgba(0,0,0,0.2)"}},inputs:{enabled:{type:"boolean",displayName:"Enabled",group:"General",default:!0,set:function(e){const t=(e=!!e)!==this._internal.enabled;this.props.enabled=this._internal.enabled=e,t&&(this.forceUpdate(),this.flagOutputDirty("enabled"))}},set:{group:"Actions",displayName:"Set",type:"signal",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{this.setText(this._internal.text)}))}},startValue:{index:18,displayName:"Text",type:"string",group:"Text",set(e){this._internal.text!==e&&(this._internal.text=e,!1===this.isInputConnected("set")&&this.setText(e))}},textStyle:{index:19,type:"textStyle",group:"Text",displayName:"Text Style",default:"None",set(e){this.props.textStyle=this.context.styles.getTextStyle(e),this.forceUpdate()}},fontFamily:{index:20,type:"font",group:"Text",displayName:"Font Family",set(e){if(e){let t=e;t.split(".").length>1&&(t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop()),this.setStyle({fontFamily:t})}else this.removeStyle(["fontFamily"]);this.props.textStyle&&this.forceUpdate()}},clear:{type:"signal",group:"Actions",displayName:"Clear",valueChangedToTrue(){this.setText("")}},focus:{type:"signal",group:"Actions",displayName:"Focus",valueChangedToTrue(){this.context.setNodeFocused(this,!0)}},blur:{type:"signal",group:"Actions",displayName:"Blur",valueChangedToTrue(){this.context.setNodeFocused(this,!1)}}},inputCss:{fontSize:{index:21,group:"Text",displayName:"Font Size",type:{name:"number",units:["px"],defaultUnit:"px"},onChange(){this.props.textStyle&&this.forceUpdate()}},color:{index:99,type:"color",displayName:"Font Color",group:"Style"},backgroundColor:{index:100,displayName:"Background Color",group:"Style",type:"color",default:"transparent"},borderColor:{index:101,displayName:"Border Color",group:"Style",type:"color",default:"black"},borderWidth:{index:102,displayName:"Border Width",group:"Style",type:{name:"number",units:["px"],defaultUnit:"px"},default:0}},outputs:{controlId:{type:"string",displayName:"Control Id",group:"General",getter:function(){return this._internal.controlId}},enabled:{type:"boolean",displayName:"Enabled",group:"States",getter:function(){return this._internal.enabled}}},outputProps:{onTextChanged:{group:"Value",displayName:"Text",type:"string"},onEnter:{group:"Events",displayName:"On Enter",type:"signal"}},dynamicports:[{condition:"boxShadowEnabled = true",inputs:["boxShadowOffsetX","boxShadowOffsetY","boxShadowInset","boxShadowBlurRadius","boxShadowSpreadRadius","boxShadowColor"]}],methods:{_focus(){this.innerReactComponentRef&&this.innerReactComponentRef.focus()},_blur(){this.innerReactComponentRef&&this.innerReactComponentRef.blur()},setText(e){this.props.startValue=e,this.innerReactComponentRef?this.innerReactComponentRef.setText(e):this.outputPropValues.onTextChanged!==e&&(this.outputPropValues.onTextChanged=e,this.flagOutputDirty("onTextChanged"))}}};P.addDimensions(Qr,{defaultSizeMode:"contentSize",contentLabel:"Text"}),P.addAlignInputs(Qr),P.addTransformInputs(Qr),P.addPaddingInputs(Qr),P.addMarginInputs(Qr),P.addSharedVisualInputs(Qr),Yo(Qr);const Zr=G(Qr);Zr.setup=function(e,t){t.on("nodeAdded.Text Input",(function(e){e.parameters.fontFamily&&e.parameters.fontFamily.split(".").length>1&&v().instance.loadFont(e.parameters.fontFamily),e.on("parameterUpdated",(function(e){"fontFamily"===e.name&&e.value&&e.value.split(".").length>1&&v().instance.loadFont(e.value)}))}))};const es=Zr;var ts=__webpack_require__(1327),ns=__webpack_require__.n(ts);const is=__webpack_require__(1924);function os(e,t){t.positionX&&t.positionX(e.x),t.positionY&&t.positionY(e.y),t.deltaX&&t.deltaX(e.deltaX),t.deltaY&&t.deltaY(e.deltaY)}class rs extends t().Component{constructor(e){super(e),this.state={x:0,y:0}}snapToPosition({timerScheduler:e,propCallback:t,duration:n,axis:i,endValue:o}){const r=this;return e.createTimer({duration:void 0===n?300:n,startValue:this.state[i],endValue:o,ease:is.easeOut,onRunning:function(e){const n=this.ease(this.startValue,this.endValue,e);r.setState({[i]:n}),t&&t(n)}}).start()}componentDidMount(){const e=this.props.inputPositionX?this.props.inputPositionX:0,t=this.props.inputPositionY?this.props.inputPositionY:0;this.setState({x:e,y:t}),os({x:e,y:t,deltaX:0,deltaY:0},this.props)}componentWillReceiveProps(e){const t=this.props;t.inputPositionX!==e.inputPositionX&&(this.setState({x:e.inputPositionX}),t.positionX&&t.positionX(e.inputPositionX),t.deltaX&&t.deltaX(e.inputPositionX-t.inputPositionX)),t.inputPositionY!==e.inputPositionY&&(this.setState({y:e.inputPositionY}),t.positionY&&t.positionY(e.inputPositionY),t.deltaY&&t.deltaY(e.inputPositionY-t.inputPositionY))}snapToPositionX(e,t){this.state.x!==e&&(this.snapToPositionXTimer&&this.snapToPositionXTimer.stop(),this.snapToPositionXTimer=this.snapToPosition({timerScheduler:this.props.noodlNode.context.timerScheduler,propCallback:this.props.positionX,duration:t,axis:"x",endValue:e}))}snapToPositionY(e,t){this.state.y!==e&&(this.snapToPositionYTimer&&this.snapToPositionYTimer.stop(),this.snapToPositionYTimer=this.snapToPosition({timerScheduler:this.props.noodlNode.context.timerScheduler,propCallback:this.props.positionY,duration:t,axis:"y",endValue:e}))}render(){const e=this.props;let n,i=e.useParentBounds?"parent":void 0;return t().Children.count(e.children)>0?(n=t().Children.toArray(e.children)[0],t().createElement(ns(),{axis:e.axis,bounds:i,disabled:!1===e.enabled,scale:e.scale||0,position:{x:this.state.x,y:this.state.y},onStart:(t,n)=>{os(n,e),e.onStart&&e.onStart(),this.snapToPositionXTimer&&this.snapToPositionXTimer.stop(),this.snapToPositionYTimer&&this.snapToPositionYTimer.stop()},onStop:(t,n)=>{"x"!==e.axis&&"both"!==e.axis||this.setState({x:n.x}),"y"!==e.axis&&"both"!==e.axis||this.setState({y:n.y}),e.positionX&&e.positionX(n.x),e.positionY&&e.positionY(n.y),e.onStop&&e.onStop()},onDrag:(t,n)=>{os(n,e),e.onDrag&&e.onDrag()}},t().cloneElement(n,{parentLayout:e.parentLayout}))):null}}const ss=G({name:"Drag",docs:"https://docs.noodl.net/nodes/utilities/drag",allowChildren:!0,noodlNodeAsProp:!0,getReactComponent:()=>rs,initialize(){this._internal.snapPositionX=0,this._internal.snapPositionY=0,this._internal.snapDurationX=300,this._internal.snapDurationY=300},inputs:{"snapToPositionX.do":{group:"Snap To Position X",displayName:"Do",editorName:"Do|Snap To Position X",type:"signal",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{const{snapPositionX:e,snapDurationX:t}=this._internal;this.innerReactComponentRef&&this.innerReactComponentRef.snapToPositionX(e,t)}))}},"snapToPositionX.value":{default:0,group:"Snap To Position X",displayName:"Value",editorName:"Value|Snap To Position X",type:"number",set(e){this._internal.snapPositionX=e}},"snapToPositionX.duration":{default:300,group:"Snap To Position X",displayName:"Duration",editorName:"Duration|Snap To Position X",type:"number",set(e){this._internal.snapDurationX=e}},"snapToPositionY.do":{group:"Snap To Position Y",displayName:"Do",editorName:"Do|Snap To Position Y",type:"signal",valueChangedToTrue(){this.scheduleAfterInputsHaveUpdated((()=>{const{snapPositionY:e,snapDurationY:t}=this._internal;this.innerReactComponentRef&&this.innerReactComponentRef.snapToPositionY(e,t)}))}},"snapToPositionY.value":{default:0,group:"Snap To Position Y",displayName:"Value",editorName:"Value|Snap To Position Y",type:"number",set(e){this._internal.snapPositionY=e}},"snapToPositionY.duration":{default:300,group:"Snap To Position Y",displayName:"Duration",editorName:"Duration|Snap To Position Y",type:"number",set(e){this._internal.snapDurationY=e}}},inputProps:{enabled:{group:"Drag",displayName:"Enabled",type:"boolean",default:!0},axis:{group:"Drag",displayName:"Axis",type:{name:"enum",enums:[{label:"X",value:"x"},{label:"Y",value:"y"},{label:"Both",value:"both"}]},default:"x"},useParentBounds:{group:"Drag",displayName:"Constrain to parent",type:"boolean",default:!0},inputPositionX:{displayName:"Start Drag X",type:{name:"number"}},inputPositionY:{displayName:"Start Drag Y",type:{name:"number"}},scale:{displayName:"Scale",default:1,type:{name:"number"}}},outputProps:{onStart:{group:"Signals",type:"signal",displayName:"Drag Started"},onStop:{group:"Signals",type:"signal",displayName:"Drag Ended"},onDrag:{group:"Signals",type:"signal",displayName:"Drag Moved"},positionX:{group:"Values",displayName:"Drag X",type:"number"},positionY:{group:"Values",displayName:"Drag Y",type:"number"},deltaX:{group:"Values",displayName:"Delta X",type:"number"},deltaY:{group:"Values",displayName:"Delta Y",type:"number"}}});class as{constructor({graphModel:e,nodeRegister:t,getNodeScope:n}){this.getNodeScope=n,this.graphModel=e,this.nodeRegister=t,this.setStyles(e.getMetaData("styles")||{}),e.on("metadataChanged.styles",(e=>this.setStyles(e)))}setStyles(e){this.styles=e;const t=e.text||{};Object.values(t).filter((e=>e.fontFamily)).forEach((e=>{let t=e.fontFamily;t.split(".").length>1&&(v().instance.loadFont(t),t=t.replace(/\.[^/.]+$/,""),t=t.split("/").pop(),e.fontFamily=t)}));for(const e in t){const n=t[e];for(const e in n){const t=n[e];"object"==typeof t&&(n[e]=t.value+t.unit)}}for(const e in t){const n=t[e];n.hasOwnProperty("color")&&!n.color&&delete n.color}const n=this.getNodeScope&&this.getNodeScope();if(!n)return;const i=this.graphModel.getVariants();for(const e of i)this._variantHasInputsWithTypes(e,["color","textStyle"])&&n.getAllNodesWithVariantRecursive(e).forEach((t=>t.setVariant(e)));["color","textStyle"].forEach((e=>{(function(e,t){const n=[];return e.getAllNodesRecursive().forEach((e=>{const i=[];for(const n in e._inputs)e._inputs[n].type===t&&i.push(n);i.length&&n.push({node:e,inputs:i})})),n})(n,e).forEach((({node:e,inputs:t})=>{t.forEach((t=>{e.getInputValue(t)&&e.setInputValue(t,e.getInputValue(t))}))}))}))}resolveColor(e){if(!this.styles.colors)return e;return this.styles.colors[e]||e}getTextStyle(e){return this.styles.text&&this.styles.text[e]||{}}_variantHasInputsWithTypes(e,t){if(!this.nodeRegister.hasNode(e.typename))return;const n=this.nodeRegister.getNodeMetadata(e.typename),i=new Set(Object.keys(e.parameters));for(const t in e.stateParameters)Object.keys(e.stateParameters[t]).forEach((e=>i.add(e)));for(const e of Array.from(i)){const i=n.inputs[e]&&n.inputs[e].type;if(t.includes(i))return!0}return!1}}function ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(n),!0).forEach((function(t){cs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.NoodlEditor&&(window.NoodlEditorInspectorAPI={enabled:!1,inspector:null,setInspector(e){this.inspector=e,this.enabled?this.inspector.enable():this.inspector.disable()},setEnabled(e){this.enabled=e,this.inspector&&(this.enabled?this.inspector.enable():this.inspector.disable()),window.NoodlEditorHighlightAPI.highlighter&&window.NoodlEditorHighlightAPI.highlighter.setWindowSelected(e)}},window.NoodlEditorHighlightAPI={highlighter:null,setHighlighter(e){this.highlighter=e,this.highlighter.setWindowSelected(window.NoodlEditorInspectorAPI.enabled)},selectNode(e){this.highlighter.deselectNodes(),e&&"null"!==e?this.highlighter.selectNodesWithId(e):window.NoodlEditorInspectorAPI.enabled&&this.highlighter.setWindowSelected(!0)}});class ps extends t().Component{constructor(e){super(e),this.state={popups:[]};const{noodlRuntime:t}=e;this.runningDeployed=void 0!==this.props.projectData,this.focusedNoodlNodes=[],t.context.setNodeFocused=this.setNodeFocused.bind(this);const n=-1!==document.location.href.indexOf("forceDebugger=true")||Noodl.enableDebugInspectors;if(t.setDebugInspectorsEnabled(n),t.context.setPopupCallbacks({onShow:e=>{const n=this.state.popups.concat([e]);t.getProjectSettings().bodyScroll&&1===n.length&&(document.body.style.width=document.body.clientWidth+"px",document.body.style.top=`-${window.scrollY}px`,document.body.style.position="fixed"),this.setState({popups:n})},onClose:e=>{const n=this.state.popups.filter((t=>t!==e));if(this.setState({popups:n}),t.getProjectSettings().bodyScroll&&0===n.length){const e=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.width="100%",window.scrollTo(0,-1*parseInt(e||"0"))}}}),function(e){[__webpack_require__(3722),__webpack_require__(5536),__webpack_require__(500),__webpack_require__(264),__webpack_require__(2751),__webpack_require__(4923),__webpack_require__(6820),__webpack_require__(6331),__webpack_require__(7427),__webpack_require__(9458),__webpack_require__(4013),__webpack_require__(6882),__webpack_require__(8368),__webpack_require__(9169),__webpack_require__(500),__webpack_require__(3004),__webpack_require__(5531),__webpack_require__(228),__webpack_require__(9773),__webpack_require__(6097),__webpack_require__(9986),__webpack_require__(4340),__webpack_require__(7796),__webpack_require__(9112),__webpack_require__(4195),__webpack_require__(952),__webpack_require__(3570),__webpack_require__(5681),__webpack_require__(1413),__webpack_require__(3846),__webpack_require__(1701),__webpack_require__(1522),__webpack_require__(4776),__webpack_require__(4399),__webpack_require__(2431),__webpack_require__(3874),__webpack_require__(5017),__webpack_require__(628),__webpack_require__(1165),__webpack_require__(6830),__webpack_require__(6282),__webpack_require__(327),__webpack_require__(1676),__webpack_require__(2410),__webpack_require__(2472),__webpack_require__(888),__webpack_require__(9887),__webpack_require__(6457),__webpack_require__(8596),__webpack_require__(469),__webpack_require__(3685),__webpack_require__(3055),__webpack_require__(4789),__webpack_require__(418),__webpack_require__(9765),__webpack_require__(4563),__webpack_require__(6207),__webpack_require__(5106),__webpack_require__(4122),__webpack_require__(4140),__webpack_require__(1260),__webpack_require__(6329),__webpack_require__(9040)].forEach((function(t){e.registerNode(t)})),e.registerNode(Yt()),e.registerNode(yo),e.registerNode(Ao),e.registerNode(Po),e.registerNode(wo),e.registerNode(Wt),e.registerNode(Wo),e.registerNode(ss),e.registerNode(jt),e.registerNode(Gt),e.registerNode(nr),e.registerNode(ur),e.registerNode(Vr),e.registerNode(Dr),e.registerNode(Hr),e.registerNode(Nr),e.registerNode(es),e.registerNode(br),e.registerNode(fr),e.registerNode(ae),e.registerNode(me),e.registerNode(Le),e.registerNode(Re),e.registerNode(Ce),e.registerNode(nt),e.registerNode(dt),e.registerNode(_t),e.registerNode(Nt),e.registerNode(Rt)}(t),function(e){window.Noodl.getProjectSettings=e.getProjectSettings.bind(e),window.Noodl.getMetaData=e.getMetaData.bind(e),window.Noodl.Collection=window.Noodl.Array=__webpack_require__(1020),window.Noodl.Model=window.Noodl.Object=__webpack_require__(7498),window.Noodl.Variables=window.Noodl.Object.get("--ndl--global-variables"),window.Noodl.Events=window.Noodl.eventEmitter=e.context.eventSenderEmitter,window.Noodl.Records=__webpack_require__(9541)(),window.Noodl.Users=__webpack_require__(575),window.Noodl.CloudFunctions=__webpack_require__(7157),window.Noodl.Navigation=__webpack_require__(5612),window.Noodl.Navigation._noodlRuntime=e,window.Noodl.Files=__webpack_require__(5295),window.Noodl.Arrays=new Proxy(window.Noodl.Array,{get:(e,t,n)=>Noodl.Array.get(t),set(e,t,n){if(!Array.isArray(n))throw new Error("Cannot assign non array value to array with id "+t);Noodl.Array.get(t).set(n)}}),window.Noodl.Objects=new Proxy(window.Noodl.Object,{get:(e,t,n)=>Noodl.Object.get(t),set(e,t,n){Noodl.Object.get(t).setAll(n)}})}(t),t.setProjectSettings(l),this.props.noodlModules)for(const e of this.props.noodlModules){if(e.reactNodes){const t=[];for(const n of e.reactNodes)t.push(G(n));const n=e.nodes||[];e.nodes=n.concat(t)}t.registerModule(e)}if(t.eventEmitter.on("rootComponentUpdated",(()=>{requestAnimationFrame((()=>this.forceUpdate()))})),t.graphModel.on("projectSettingsChanged",(e=>{e.bodyScroll?document.body.classList.add("body-scroll"):document.body.classList.remove("body-scroll")})),this.styles=new as({graphModel:t.graphModel,getNodeScope:()=>t.context.rootComponent&&t.context.rootComponent.nodeScope,nodeRegister:t.context.nodeRegister}),t.context.styles=this.styles,this.state.waitingForExport=!this.runningDeployed,this.runningDeployed){this.props.noodlRuntime.setData(this.props.projectData);const e=Object.keys(this.props.projectData.componentIndex);e.length<30&&setTimeout((()=>{this.props.noodlRuntime.prefetchBundles(e,3)}),1e4)}else t.graphModel.on("editorImportComplete",(()=>{this.setState({waitingForExport:!1})})),this.connectToEditor();this.focusedNoodlNodes=[]}connectToEditor(){const{noodlRuntime:e}=this.props,t=((Noodl.host||location.protocol+"//"+location.host)+location.pathname+(location.search?location.search:"")).replace("http","ws");e.connectToEditor(t),this.highlightedNodes=new Map,this.isUpdatingHighlights=!1,window.NoodlEditor&&(this.highlighter=new r(e),NoodlEditorHighlightAPI.setHighlighter(this.highlighter),e.editorConnection.on("hoverStart",(e=>{this.highlighter.highlightNodesWithId(e)})),e.editorConnection.on("hoverEnd",(e=>{this.highlighter.disableHighlight()})),this.inspector=new a({onDisableHighlight:()=>this.highlighter.disableHighlight(),onHighlight:e=>this.highlighter.highlightNodesWithId(e),onInspect:e=>{NoodlEditor.inspectNodes(e)}}),NoodlEditorInspectorAPI.setInspector(this.inspector)),e.editorConnection.on("debuggingEnabledChanged",(t=>{e.setDebugInspectorsEnabled(t)})),this.graphWarnings=new o(e.graphModel,e.editorConnection)}setNodeFocused(e,t){if(t&&-1===this.focusedNoodlNodes.indexOf(e))this.focusedNoodlNodes.filter((t=>!t.contains(e))).forEach((e=>{e._blur()})),e._focus(),this.focusedNoodlNodes.push(e);else if(!t){const t=this.focusedNoodlNodes.indexOf(e);if(-1!==t)return;e._blur(),this.focusedNoodlNodes.filter((t=>t.contains(e))).forEach((e=>{e._blur()})),this.focusedNoodlNodes.splice(t,1)}}onClickCapture(e){const t=[];let n=e.target;for(;n;)n.noodlNode&&n.noodlNode._focus&&t.push(n.noodlNode),n=n.parentNode;this.focusedNoodlNodes.filter((e=>-1===t.indexOf(e))).forEach((e=>e._blur())),t.filter((e=>-1===this.focusedNoodlNodes.indexOf(e))).forEach((e=>e._focus())),this.focusedNoodlNodes=t}render(){const e=this.props.noodlRuntime.rootComponent;if(this.state.waitingForExport)return null;if(!e)return this.runningDeployed?null:t().createElement("div",{style:{overflowY:"auto",padding:"24px",fontFamily:"Open Sans",fontSize:"16px",width:"100vw",height:"100vh",backgroundColor:"#F57569"}},t().createElement("div",{style:{marginBottom:"50px",fontWeight:"bold",display:"flex",alignItems:"center"}},t().createElement("span",null,"ERROR"),t().createElement("img",{src:"ndl_assets/noodl-logo-black.svg",style:{marginLeft:"auto"}})),t().createElement("div",{style:{margin:"0 auto",alignItems:"center",display:"flex",flexDirection:"column"}},t().createElement("div",{style:{fontSize:"24px",textAlign:"center",marginBottom:"50px"}},"No ",t().createElement("img",{src:"ndl_assets/home-icon.svg",style:{marginRight:"-6px"}})," ",t().createElement("span",{style:{fontWeight:"bold"}},"HOME")," component selected"),t().createElement("div",{style:{textAlign:"center"}},"Click ",t().createElement("span",{style:{fontWeight:"bold"}},"Make home")," as shown below."),t().createElement("img",{style:{marginTop:"24px"},srcSet:"ndl_assets/make-home-instructions@2x.png 2x"})));if(this.props.noodlRuntime.getProjectSettings().bodyScroll){const n={margin:0,padding:0,minHeight:"100vh",alignSelf:"stretch",display:"flex",flexDirection:"column"};return t().createElement("div",{style:n,onClickCapture:e=>this.onClickCapture(e)},t().createElement("div",{style:us(us({},n),{},{isolation:"isolate"})},e.render()),this.state.popups.length?t().createElement("div",{style:us(us({},n),{},{isolation:"isolate"})},this.state.popups.map((e=>e.render()))):null)}return t().createElement("div",{style:{margin:0,padding:0,overflow:"hidden",width:"100%",height:"100%"},onClickCapture:e=>this.onClickCapture(e)},e.render(),this.state.popups.map((e=>e.render())))}}var ds=__webpack_require__(6291),hs=__webpack_require__.n(ds);function fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(n),!0).forEach((function(t){ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(){return{type:"browser",platform:{requestUpdate:e=>window.requestAnimationFrame(e),getCurrentTime:()=>window.performance.now(),objectToString:e=>JSON.stringify(e,null,2)},componentFilter:e=>!e.name.startsWith("/#__cloud__/")}}String.prototype.matchAll||(String.prototype.matchAll=function(e){var t=new RegExp(e,"g"),n=[],i=this.match(t);for(let t in i){var o=i[t];n[t]=o.match(new RegExp(e))}return n});const vs={render(e,n,{isLocal:o=!1}){const r=ys();o&&(r.platform.isRunningLocally=()=>!0);const s=new(hs())(r);i().render(t().createElement(ps,{noodlRuntime:s,noodlModules:n},null),e)},renderDeployed(e,t,n){i().render(this.createElement(t,n),e)},createElement(e,n){const i=new(hs())(gs(gs({},ys()),{},{runDeployed:!0}));return t().createElement(ps,{noodlRuntime:i,noodlModules:e,projectData:n},null)}};window.Noodl._viewerReact=vs})()})();